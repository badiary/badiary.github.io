/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={"./node_modules/core-js/es/array/includes.js":(e,t,n)=>{n("./node_modules/core-js/modules/es.array.includes.js");var o=n("./node_modules/core-js/internals/entry-unbind.js");e.exports=o("Array","includes")},"./node_modules/core-js/es/object/assign.js":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.assign.js");var o=n("./node_modules/core-js/internals/path.js");e.exports=o.Object.assign},"./node_modules/core-js/features/array/includes.js":(e,t,n)=>{var o=n("./node_modules/core-js/stable/array/includes.js");e.exports=o},"./node_modules/core-js/features/object/assign.js":(e,t,n)=>{var o=n("./node_modules/core-js/stable/object/assign.js");e.exports=o},"./node_modules/core-js/internals/a-function.js":e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"./node_modules/core-js/internals/add-to-unscopables.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/well-known-symbol.js"),r=n("./node_modules/core-js/internals/object-create.js"),s=n("./node_modules/core-js/internals/object-define-property.js"),i=o("unscopables"),a=Array.prototype;null==a[i]&&s.f(a,i,{configurable:!0,value:r(null)}),e.exports=function(e){a[i][e]=!0}},"./node_modules/core-js/internals/an-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!o(e))throw TypeError(String(e)+" is not an object");return e}},"./node_modules/core-js/internals/array-includes.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-indexed-object.js"),r=n("./node_modules/core-js/internals/to-length.js"),s=n("./node_modules/core-js/internals/to-absolute-index.js"),i=function(e){return function(t,n,i){var a,c=o(t),l=r(c.length),u=s(i,l);if(e&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},"./node_modules/core-js/internals/classof-raw.js":e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/internals/copy-constructor-properties.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/has.js"),r=n("./node_modules/core-js/internals/own-keys.js"),s=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),i=n("./node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var n=r(t),a=i.f,c=s.f,l=0;l<n.length;l++){var u=n[l];o(e,u)||a(e,u,c(t,u))}}},"./node_modules/core-js/internals/create-non-enumerable-property.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/object-define-property.js"),s=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=o?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},"./node_modules/core-js/internals/create-property-descriptor.js":e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/internals/descriptors.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/fails.js");e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"./node_modules/core-js/internals/document-create-element.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/is-object.js"),s=o.document,i=r(s)&&r(s.createElement);e.exports=function(e){return i?s.createElement(e):{}}},"./node_modules/core-js/internals/engine-user-agent.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js");e.exports=o("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":(e,t,n)=>{var o,r,s=n("./node_modules/core-js/internals/global.js"),i=n("./node_modules/core-js/internals/engine-user-agent.js"),a=s.process,c=s.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u?r=(o=u.split("."))[0]<4?1:o[0]+o[1]:i&&(!(o=i.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=i.match(/Chrome\/(\d+)/))&&(r=o[1]),e.exports=r&&+r},"./node_modules/core-js/internals/entry-unbind.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/function-bind-context.js"),s=Function.call;e.exports=function(e,t,n){return r(s,o[e].prototype[t],n)}},"./node_modules/core-js/internals/enum-bug-keys.js":e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,s=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),i=n("./node_modules/core-js/internals/redefine.js"),a=n("./node_modules/core-js/internals/set-global.js"),c=n("./node_modules/core-js/internals/copy-constructor-properties.js"),l=n("./node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var n,u,d,f,h,p=e.target,m=e.global,g=e.stat;if(n=m?o:g?o[p]||a(p,{}):(o[p]||{}).prototype)for(u in t){if(f=t[u],d=e.noTargetGet?(h=r(n,u))&&h.value:n[u],!l(m?u:p+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&s(f,"sham",!0),i(n,u,f,e)}}},"./node_modules/core-js/internals/fails.js":e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/core-js/internals/function-bind-context.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/a-function.js");e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(o[e]):o[e]&&o[e][t]}},"./node_modules/core-js/internals/global.js":(e,t,n)=>{var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-object.js"),r={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return r.call(o(e),t)}},"./node_modules/core-js/internals/hidden-keys.js":e=>{e.exports={}},"./node_modules/core-js/internals/html.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js");e.exports=o("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/document-create-element.js");e.exports=!o&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/internals/indexed-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/fails.js"),r=n("./node_modules/core-js/internals/classof-raw.js"),s="".split;e.exports=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?s.call(e,""):Object(e)}:Object},"./node_modules/core-js/internals/inspect-source.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/shared-store.js"),r=Function.toString;"function"!=typeof o.inspectSource&&(o.inspectSource=function(e){return r.call(e)}),e.exports=o.inspectSource},"./node_modules/core-js/internals/internal-state.js":(e,t,n)=>{var o,r,s,i=n("./node_modules/core-js/internals/native-weak-map.js"),a=n("./node_modules/core-js/internals/global.js"),c=n("./node_modules/core-js/internals/is-object.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),u=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/shared-store.js"),f=n("./node_modules/core-js/internals/shared-key.js"),h=n("./node_modules/core-js/internals/hidden-keys.js"),p="Object already initialized",m=a.WeakMap;if(i||d.state){var g=d.state||(d.state=new m),y=g.get,v=g.has,_=g.set;o=function(e,t){if(v.call(g,e))throw new TypeError(p);return t.facade=e,_.call(g,e,t),t},r=function(e){return y.call(g,e)||{}},s=function(e){return v.call(g,e)}}else{var b=f("state");h[b]=!0,o=function(e,t){if(u(e,b))throw new TypeError(p);return t.facade=e,l(e,b,t),t},r=function(e){return u(e,b)?e[b]:{}},s=function(e){return u(e,b)}}e.exports={set:o,get:r,has:s,enforce:function(e){return s(e)?r(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"./node_modules/core-js/internals/is-forced.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/fails.js"),r=/#|\.prototype\./,s=function(e,t){var n=a[i(e)];return n==l||n!=c&&("function"==typeof t?o(t):!!t)},i=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},"./node_modules/core-js/internals/is-object.js":e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/internals/is-pure.js":e=>{e.exports=!1},"./node_modules/core-js/internals/is-symbol.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js"),r=n("./node_modules/core-js/internals/use-symbol-as-uid.js");e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return"function"==typeof t&&Object(e)instanceof t}},"./node_modules/core-js/internals/native-symbol.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/engine-v8-version.js"),r=n("./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},"./node_modules/core-js/internals/native-weak-map.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/inspect-source.js"),s=o.WeakMap;e.exports="function"==typeof s&&/native code/.test(r(s))},"./node_modules/core-js/internals/object-assign.js":(e,t,n)=>{"use strict";var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/fails.js"),s=n("./node_modules/core-js/internals/object-keys.js"),i=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),a=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),c=n("./node_modules/core-js/internals/to-object.js"),l=n("./node_modules/core-js/internals/indexed-object.js"),u=Object.assign,d=Object.defineProperty;e.exports=!u||r((function(){if(o&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||s(u({},t)).join("")!=r}))?function(e,t){for(var n=c(e),r=arguments.length,u=1,d=i.f,f=a.f;r>u;)for(var h,p=l(arguments[u++]),m=d?s(p).concat(d(p)):s(p),g=m.length,y=0;g>y;)h=m[y++],o&&!f.call(p,h)||(n[h]=p[h]);return n}:u},"./node_modules/core-js/internals/object-create.js":(e,t,n)=>{var o,r=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/object-define-properties.js"),i=n("./node_modules/core-js/internals/enum-bug-keys.js"),a=n("./node_modules/core-js/internals/hidden-keys.js"),c=n("./node_modules/core-js/internals/html.js"),l=n("./node_modules/core-js/internals/document-create-element.js"),u=n("./node_modules/core-js/internals/shared-key.js"),d=u("IE_PROTO"),f=function(){},h=function(e){return"<script>"+e+"</"+"script>"},p=function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{o=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&o?p(o):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F):p(o);for(var n=i.length;n--;)delete m.prototype[i[n]];return m()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=r(e),n=new f,f.prototype=null,n[d]=e):n=m(),void 0===t?n:s(n,t)}},"./node_modules/core-js/internals/object-define-properties.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/object-define-property.js"),s=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/object-keys.js");e.exports=o?Object.defineProperties:function(e,t){s(e);for(var n,o=i(t),a=o.length,c=0;a>c;)r.f(e,n=o[c++],t[n]);return e}},"./node_modules/core-js/internals/object-define-property.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/ie8-dom-define.js"),s=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/to-property-key.js"),a=Object.defineProperty;t.f=o?a:function(e,t,n){if(s(e),t=i(t),s(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),s=n("./node_modules/core-js/internals/create-property-descriptor.js"),i=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/to-property-key.js"),c=n("./node_modules/core-js/internals/has.js"),l=n("./node_modules/core-js/internals/ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=i(e),t=a(t),l)try{return u(e,t)}catch(e){}if(c(e,t))return s(!r.f.call(e,t),e[t])}},"./node_modules/core-js/internals/object-get-own-property-names.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/object-keys-internal.js"),r=n("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":(e,t)=>{t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-keys-internal.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/has.js"),r=n("./node_modules/core-js/internals/to-indexed-object.js"),s=n("./node_modules/core-js/internals/array-includes.js").indexOf,i=n("./node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var n,a=r(e),c=0,l=[];for(n in a)!o(i,n)&&o(a,n)&&l.push(n);for(;t.length>c;)o(a,n=t[c++])&&(~s(l,n)||l.push(n));return l}},"./node_modules/core-js/internals/object-keys.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/object-keys-internal.js"),r=n("./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return o(e,r)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":(e,t)=>{"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);t.f=r?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},"./node_modules/core-js/internals/ordinary-to-primitive.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e,t){var n,r;if("string"===t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if("string"!==t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js"),r=n("./node_modules/core-js/internals/object-get-own-property-names.js"),s=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),i=n("./node_modules/core-js/internals/an-object.js");e.exports=o("Reflect","ownKeys")||function(e){var t=r.f(i(e)),n=s.f;return n?t.concat(n(e)):t}},"./node_modules/core-js/internals/path.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js");e.exports=o},"./node_modules/core-js/internals/redefine.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),s=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/set-global.js"),a=n("./node_modules/core-js/internals/inspect-source.js"),c=n("./node_modules/core-js/internals/internal-state.js"),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var c,l=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||s(n,"name")||r(n,"name",t),(c=u(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==o?(l?!h&&e[t]&&(f=!0):delete e[t],f?e[t]=n:r(e,t,n)):f?e[t]=n:i(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},"./node_modules/core-js/internals/require-object-coercible.js":e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"./node_modules/core-js/internals/set-global.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){try{Object.defineProperty(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},"./node_modules/core-js/internals/shared-key.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/shared.js"),r=n("./node_modules/core-js/internals/uid.js"),s=o("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},"./node_modules/core-js/internals/shared-store.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/set-global.js"),s="__core-js_shared__",i=o[s]||r(s,{});e.exports=i},"./node_modules/core-js/internals/shared.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-pure.js"),r=n("./node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.17.3",mode:o?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/to-absolute-index.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-integer.js"),r=Math.max,s=Math.min;e.exports=function(e,t){var n=o(e);return n<0?r(n+t,0):s(n,t)}},"./node_modules/core-js/internals/to-indexed-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/indexed-object.js"),r=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return o(r(e))}},"./node_modules/core-js/internals/to-integer.js":e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},"./node_modules/core-js/internals/to-length.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-integer.js"),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(o(e))}},"./node_modules/core-js/internals/to-primitive.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-object.js"),r=n("./node_modules/core-js/internals/is-symbol.js"),s=n("./node_modules/core-js/internals/ordinary-to-primitive.js"),i=n("./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");e.exports=function(e,t){if(!o(e)||r(e))return e;var n,a=e[i];if(void 0!==a){if(void 0===t&&(t="default"),n=a.call(e,t),!o(n)||r(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},"./node_modules/core-js/internals/to-property-key.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-primitive.js"),r=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){var t=o(e,"string");return r(t)?t:String(t)}},"./node_modules/core-js/internals/uid.js":e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/native-symbol.js");e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/shared.js"),s=n("./node_modules/core-js/internals/has.js"),i=n("./node_modules/core-js/internals/uid.js"),a=n("./node_modules/core-js/internals/native-symbol.js"),c=n("./node_modules/core-js/internals/use-symbol-as-uid.js"),l=r("wks"),u=o.Symbol,d=c?u:u&&u.withoutSetter||i;e.exports=function(e){return s(l,e)&&(a||"string"==typeof l[e])||(a&&s(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},"./node_modules/core-js/modules/es.array.includes.js":(e,t,n)=>{"use strict";var o=n("./node_modules/core-js/internals/export.js"),r=n("./node_modules/core-js/internals/array-includes.js").includes,s=n("./node_modules/core-js/internals/add-to-unscopables.js");o({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},"./node_modules/core-js/modules/es.object.assign.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/export.js"),r=n("./node_modules/core-js/internals/object-assign.js");o({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},"./node_modules/core-js/stable/array/includes.js":(e,t,n)=>{var o=n("./node_modules/core-js/es/array/includes.js");e.exports=o},"./node_modules/core-js/stable/object/assign.js":(e,t,n)=>{var o=n("./node_modules/core-js/es/object/assign.js");e.exports=o},"./node_modules/hotkeys-js/dist/hotkeys.js":function(e){e.exports=function(){"use strict";var e="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function t(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function n(e,t){for(var n=t.slice(0,t.length-1),o=0;o<n.length;o++)n[o]=e[n[o].toLowerCase()];return n}function o(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function r(e,t){for(var n=e.length>=t.length?e:t,o=e.length>=t.length?t:e,r=!0,s=0;s<n.length;s++)-1===o.indexOf(n[s])&&(r=!1);return r}for(var s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"[":219,"]":221,"\\":220},i={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},a={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},c={16:!1,18:!1,17:!1,91:!1},l={},u=1;u<20;u++)s["f".concat(u)]=111+u;var d=[],f="all",h=[],p=function(e){return s[e.toLowerCase()]||i[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function m(e){f=e||"all"}function g(){return f||"all"}function y(){return d.slice(0)}function v(e){var t=e.target||e.srcElement,n=t.tagName,o=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(o=!1),o}function _(e){return"string"==typeof e&&(e=p(e)),-1!==d.indexOf(e)}function b(e,t){var n,o;for(var r in e||(e=g()),l)if(Object.prototype.hasOwnProperty.call(l,r))for(n=l[r],o=0;o<n.length;)n[o].scope===e?n.splice(o,1):o++;g()===e&&m(t||"all")}function E(e){var t=e.keyCode||e.which||e.charCode,n=d.indexOf(t);if(n>=0&&d.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&d.splice(0,d.length),93!==t&&224!==t||(t=91),t in c)for(var o in c[t]=!1,i)i[o]===t&&(C[o]=!1)}function w(e){if(e){if(Array.isArray(e))e.forEach((function(e){e.key&&R(e)}));else if("object"==typeof e)e.key&&R(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=n[0],s=n[1];"function"==typeof r&&(s=r,r=""),R({key:e,scope:r,method:s,splitKey:"+"})}}else Object.keys(l).forEach((function(e){return delete l[e]}))}var R=function(e){var t=e.key,s=e.scope,a=e.method,c=e.splitKey,u=void 0===c?"+":c;o(t).forEach((function(e){var t=e.split(u),o=t.length,c=t[o-1],d="*"===c?"*":p(c);if(l[d]){s||(s=g());var f=o>1?n(i,t):[];l[d]=l[d].map((function(e){return a&&e.method!==a||e.scope!==s||!r(e.mods,f)?e:{}}))}}))};function N(e,t,n){var o;if(t.scope===n||"all"===t.scope){for(var r in o=t.mods.length>0,c)Object.prototype.hasOwnProperty.call(c,r)&&(!c[r]&&t.mods.indexOf(+r)>-1||c[r]&&-1===t.mods.indexOf(+r))&&(o=!1);(0!==t.mods.length||c[16]||c[18]||c[17]||c[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function S(e){var t=l["*"],n=e.keyCode||e.which||e.charCode;if(C.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===d.indexOf(n)&&229!==n&&d.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=a[t];e[t]&&-1===d.indexOf(n)?d.push(n):!e[t]&&d.indexOf(n)>-1?d.splice(d.indexOf(n),1):"metaKey"===t&&e[t]&&3===d.length&&(e.ctrlKey||e.shiftKey||e.altKey||(d=d.slice(d.indexOf(n))))})),n in c){for(var o in c[n]=!0,i)i[o]===n&&(C[o]=!0);if(!t)return}for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&(c[r]=e[a[r]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===d.indexOf(17)&&d.push(17),-1===d.indexOf(18)&&d.push(18),c[17]=!0,c[18]=!0);var s=g();if(t)for(var u=0;u<t.length;u++)t[u].scope===s&&("keydown"===e.type&&t[u].keydown||"keyup"===e.type&&t[u].keyup)&&N(e,t[u],s);if(n in l)for(var f=0;f<l[n].length;f++)if(("keydown"===e.type&&l[n][f].keydown||"keyup"===e.type&&l[n][f].keyup)&&l[n][f].key){for(var h=l[n][f],m=h.splitKey,y=h.key.split(m),v=[],_=0;_<y.length;_++)v.push(p(y[_]));v.sort().join("")===d.sort().join("")&&N(e,h,s)}}}function j(e){return h.indexOf(e)>-1}function C(e,r,s){d=[];var a=o(e),c=[],u="all",f=document,m=0,g=!1,y=!0,v="+";for(void 0===s&&"function"==typeof r&&(s=r),"[object Object]"===Object.prototype.toString.call(r)&&(r.scope&&(u=r.scope),r.element&&(f=r.element),r.keyup&&(g=r.keyup),void 0!==r.keydown&&(y=r.keydown),"string"==typeof r.splitKey&&(v=r.splitKey)),"string"==typeof r&&(u=r);m<a.length;m++)c=[],(e=a[m].split(v)).length>1&&(c=n(i,e)),(e="*"===(e=e[e.length-1])?"*":p(e))in l||(l[e]=[]),l[e].push({keyup:g,keydown:y,scope:u,mods:c,shortcut:a[m],method:s,key:a[m],splitKey:v});void 0!==f&&!j(f)&&window&&(h.push(f),t(f,"keydown",(function(e){S(e)})),t(window,"focus",(function(){d=[]})),t(f,"keyup",(function(e){S(e),E(e)})))}var O={setScope:m,getScope:g,deleteScope:b,getPressedKeyCodes:y,isPressed:_,filter:v,unbind:w};for(var A in O)Object.prototype.hasOwnProperty.call(O,A)&&(C[A]=O[A]);if("undefined"!=typeof window){var T=window.hotkeys;C.noConflict=function(e){return e&&window.hotkeys===C&&(window.hotkeys=T),C},window.hotkeys=C}return C}()},"./node_modules/mark.js/dist/mark.js":function(e){e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=n,this.iframes=o,this.exclude=r,this.iframesTimeout=s}return n(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var n=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||n||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=void 0;try{var r=e.contentWindow;if(o=r.document,!r||!o)throw new Error("iframe inaccessible")}catch(e){n()}o&&t(o)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var o=this,r=!1,s=null,i=function i(){if(!r){r=!0,clearTimeout(s);try{o.isIframeBlank(e)||(e.removeEventListener("load",i),o.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",i),s=setTimeout(i,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,o=0;this.forEachIframe(e,(function(){return!0}),(function(e){o++,n.waitForIframes(e.querySelector("html"),(function(){--o||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,n,o){var r=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=t.querySelectorAll("iframe"),a=i.length,c=0;i=Array.prototype.slice.call(i);var l=function(){--a<=0&&s(c)};a||l(),i.forEach((function(t){e.matches(t,r.exclude)?l():r.onIframeReady(t,(function(e){n(t)&&(c++,o(e)),l()}),l)}))}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,o){var r=!1,s=!1;return o.forEach((function(e,t){e.val===n&&(r=t,s=e.handled)})),this.compareNodeIframe(e,t,n)?(!1!==r||s?!1===r||s||(o[r].handled=!0):o.push({val:n,handled:!0}),!0):(!1===r&&o.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,o){var r=this;e.forEach((function(e){e.handled||r.getIframeContents(e.val,(function(e){r.createInstanceOnIframe(e).forEachNode(t,n,o)}))}))}},{key:"iterateThroughNodes",value:function(e,t,n,o,r){for(var s=this,i=this.createIterator(t,e,o),a=[],c=[],l=void 0,u=void 0,d=function(){var e=s.getIteratorNode(i);return u=e.prevNode,l=e.node};d();)this.iframes&&this.forEachIframe(t,(function(e){return s.checkIframeFilter(l,u,e,a)}),(function(t){s.createInstanceOnIframe(t).forEachNode(e,(function(e){return c.push(e)}),o)})),c.push(l);c.forEach((function(e){n(e)})),this.iframes&&this.handleOpenIframes(a,e,n,o),r()}},{key:"forEachNode",value:function(e,t,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=this.getContexts(),i=s.length;i||r(),s.forEach((function(s){var a=function(){o.iterateThroughNodes(e,s,t,n,(function(){--i<=0&&r()}))};o.iframes?o.waitForIframes(s,a):a()}))}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,o=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(o){var r=!1;return n.every((function(t){return!o.call(e,t)||(r=!0,!1)})),r}return!1}}]),e}(),s=function(){function s(e){t(this,s),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return n(s,[{key:"log",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",o=this.opt.log;this.opt.debug&&"object"===(void 0===o?"undefined":e(o))&&"function"==typeof o[n]&&o[n]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",o=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var r in t)if(t.hasOwnProperty(r)){var s=t[r],i="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(s):this.escapeStr(s);""!==i&&""!==a&&(e=e.replace(new RegExp("("+this.escapeStr(i)+"|"+this.escapeStr(a)+")","gm"+n),o+"("+this.processSynomyms(i)+"|"+this.processSynomyms(a)+")"+o))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,n){var o=n.charAt(t+1);return/[(|)\\]/.test(o)||""===o?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],o=[];return e.split("").forEach((function(r){n.every((function(n){if(-1!==n.indexOf(r)){if(o.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),o.push(n)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",o=this.opt.accuracy,r="string"==typeof o?o:o.value,s="string"==typeof o?[]:o.limiters,i="";switch(s.forEach((function(e){i+="|"+t.escapeStr(e)})),r){default:return"()("+e+")";case"complementary":return"()([^"+(i="\\s"+(i||this.escapeStr(n)))+"]*"+e+"[^"+i+"]*)";case"exactly":return"(^|\\s"+i+")("+e+")(?=$|\\s"+i+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)})):e.trim()&&-1===n.indexOf(e)&&n.push(e)})),{keywords:n.sort((function(e,t){return t.length-e.length})),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],o=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var r=t.callNoMatchOnInvalidRanges(e,o),s=r.start,i=r.end;r.valid&&(e.start=s,e.length=i-s,n.push(e),o=i)})),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,o=void 0,r=!1;return e&&void 0!==e.start?(o=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&o-t>0&&o-n>0?r=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:o,valid:r}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var o=void 0,r=!0,s=n.length,i=t-s,a=parseInt(e.start,10)-i;return(o=(a=a>s?s:a)+parseInt(e.length,10))>s&&(o=s,this.log("End range automatically set to the max value of "+s)),a<0||o-a<0||a>s||o>s?(r=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(a,o).replace(/\s+/g,"")&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:a,end:o,valid:r}}},{key:"getTextNodes",value:function(e){var t=this,n="",o=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){o.push({start:n.length,end:(n+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:n,nodes:o})}))}},{key:"matchesExclude",value:function(e){return r.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var o=this.opt.element?this.opt.element:"mark",r=e.splitText(t),s=r.splitText(n-t),i=document.createElement(o);return i.setAttribute("data-markjs","true"),this.opt.className&&i.setAttribute("class",this.opt.className),i.textContent=r.textContent,r.parentNode.replaceChild(i,r),s}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,o,r){var s=this;e.nodes.every((function(i,a){var c=e.nodes[a+1];if(void 0===c||c.start>t){if(!o(i.node))return!1;var l=t-i.start,u=(n>i.end?i.end:n)-i.start,d=e.value.substr(0,i.start),f=e.value.substr(u+i.start);if(i.node=s.wrapRangeInTextNode(i.node,l,u),e.value=d+f,e.nodes.forEach((function(t,n){n>=a&&(e.nodes[n].start>0&&n!==a&&(e.nodes[n].start-=u),e.nodes[n].end-=u)})),n-=u,r(i.node.previousSibling,i.start),!(n>i.end))return!1;t=i.end}return!0}))}},{key:"wrapMatches",value:function(e,t,n,o,r){var s=this,i=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var r=void 0;null!==(r=e.exec(t.textContent))&&""!==r[i];)if(n(r[i],t)){var a=r.index;if(0!==i)for(var c=1;c<i;c++)a+=r[c].length;t=s.wrapRangeInTextNode(t,a,a+r[i].length),o(t.previousSibling),e.lastIndex=0}})),r()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,o,r){var s=this,i=0===t?0:t+1;this.getTextNodes((function(t){for(var a=void 0;null!==(a=e.exec(t.value))&&""!==a[i];){var c=a.index;if(0!==i)for(var l=1;l<i;l++)c+=a[l].length;var u=c+a[i].length;s.wrapRangeInMappedTextNode(t,c,u,(function(e){return n(a[i],e)}),(function(t,n){e.lastIndex=n,o(t)}))}r()}))}},{key:"wrapRangeFromIndex",value:function(e,t,n,o){var r=this;this.getTextNodes((function(s){var i=s.value.length;e.forEach((function(e,o){var a=r.checkWhitespaceRanges(e,i,s.value),c=a.start,l=a.end;a.valid&&r.wrapRangeInMappedTextNode(s,c,l,(function(n){return t(n,e,s.value.substring(c,l),o)}),(function(t){n(t,e)}))})),o()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var o=0,r="wrapMatches",s=function(e){o++,n.opt.each(e)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,(function(e,t){return n.opt.filter(t,e,o)}),s,(function(){0===o&&n.opt.noMatch(e),n.opt.done(o)}))}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var o=0,r="wrapMatches",s=this.getSeparatedKeywords("string"==typeof e?[e]:e),i=s.keywords,a=s.length,c=this.opt.caseSensitive?"":"i",l=function e(t){var s=new RegExp(n.createRegExp(t),"gm"+c),l=0;n.log('Searching with expression "'+s+'"'),n[r](s,1,(function(e,r){return n.opt.filter(r,t,o,l)}),(function(e){l++,o++,n.opt.each(e)}),(function(){0===l&&n.opt.noMatch(t),i[a-1]===t?n.opt.done(o):e(i[i.indexOf(t)+1])}))};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===a?this.opt.done(o):l(i[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var o=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,(function(e,t,o,r){return n.opt.filter(e,t,o,r)}),(function(e,t){o++,n.opt.each(e,t)}),(function(){n.opt.done(o)}))):this.opt.done(o)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var o=r.matches(e,n),s=t.matchesExclude(e);return!o||s?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=o({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new r(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),s}();function i(e){var t=this,n=new s(e);return this.mark=function(e,o){return n.mark(e,o),t},this.markRegExp=function(e,o){return n.markRegExp(e,o),t},this.markRanges=function(e,o){return n.markRanges(e,o),t},this.unmark=function(e){return n.unmark(e),t},this}return i}()},"./node_modules/rangy-classapplier/bundles/index.umd.js":function(e,t,n){!function(e,t){"use strict";var n=t.dom.DomPosition,o=t.util.isHostMethod,r=new t.Module("ClassApplier",["WrappedSelection"]),s="span",i=o(document,"createElementNS");function a(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function c(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function u(e,t){return"object"==typeof e.classList?e.classList.contains(t):l("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function d(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,o=n?e.className:e.getAttribute("class");o?l(o,t)||(o+=" "+t):o=t,n?e.className=o:e.setAttribute("class",o)}}var f=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var o="string"==typeof t.className,r=o?t.className:t.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),o?t.className=r:t.setAttribute("class",r)}}}();function h(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function p(e){return e&&e.split(/\s+/).sort().join(" ")}function m(e){return p(h(e))}function g(e,t){return m(e)==m(t)}function y(e,t){for(var n=t.split(/\s+/),o=0,r=n.length;o<r;++o)if(!u(e,c(n[o])))return!1;return!0}function v(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function _(e,t,n,o,r){var s=e.node,i=e.offset,a=s,c=i;s==o&&i>r&&++c,s!=t||i!=n&&i!=n+1||(a=o,c+=r-n),s==t&&i>n+1&&--c,e.node=a,e.offset=c}function b(e,t,n){e.node==t&&e.offset>n&&--e.offset}function E(e,n,o,r){-1==o&&(o=n.childNodes.length);var s=e.parentNode,i=t.dom.getNodeIndex(e);r.forEach((function(e){_(e,s,i,n,o)})),n.childNodes.length==o?n.appendChild(e):n.insertBefore(e,n.childNodes[o])}function w(e,n){var o=e.parentNode,r=t.dom.getNodeIndex(e);n.forEach((function(e){b(e,o,r)})),t.dom.removeNode(e)}function R(e,t,n,o,r){for(var s,i=[];s=e.firstChild;)E(s,t,n++,r),i.push(s);return o&&w(e,r),i}function N(e,n){return R(e,e.parentNode,t.dom.getNodeIndex(e),!0,n)}function S(e,t){var n=e.cloneRange();n.selectNodeContents(t);var o=n.intersection(e);return""!=(o?o.toString():"")}function j(e){for(var t,n=e.getNodes([3]),o=0;(t=n[o])&&!S(e,t);)++o;for(var r=n.length-1;(t=n[r])&&!S(e,t);)--r;return n.slice(o,r+1)}function C(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,o,r,s=0,i=e.attributes.length;s<i;++s)if("class"!=(r=(n=e.attributes[s]).name)){if(null===n!=(null===(o=t.attributes.getNamedItem(r))))return!1;if(n.specified!=o.specified)return!1;if(n.specified&&n.nodeValue!==o.nodeValue)return!1}return!0}function O(e,t){for(var n,o=0,r=e.attributes.length;o<r;++o)if(n=e.attributes[o].name,(!t||!t.includes(n))&&e.attributes[o].specified&&"class"!=n)return!0;return!1}var A=t.dom.getComputedStyleProperty,T="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||T(e.parentNode))};function x(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||T(e)&&!T(e.parentNode))}function k(e){return(T(e)||1!=e.nodeType&&T(e.parentNode))&&!x(e)}var I=/^inline(-block|-table)?$/i;function D(e){return e&&1==e.nodeType&&!I.test(A(e,"display"))}var P=/[^\r\n\t\f \u200B]/;function B(e){if(0==e.data.length)return!0;if(P.test(e.data))return!1;switch(A(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return D(e.previousSibling)||D(e.nextSibling)}function M(e){var t,o,r=[];for(t=0;o=e[t++];)r.push(new n(o.startContainer,o.startOffset),new n(o.endContainer,o.endOffset));return r}function L(e,t){for(var n,o,r,s=0,i=e.length;s<i;++s)n=e[s],o=t[2*s],r=t[2*s+1],n.setStartAndEnd(o.node,o.offset,r.node,r.offset)}function H(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n!=e.length||!!e.nextSibling:n>0&&n<e.childNodes.length}function W(e,n,o,s){var i,a,c=0==o;if(t.dom.isAncestorOf(n,e))return e;if(t.dom.isCharacterDataNode(n)){var l=t.dom.getNodeIndex(n);if(0==o)o=l;else{if(o!=n.length)throw r.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+o+" in "+n.data);o=l+1}n=n.parentNode}if(H(n,o)){i=n.cloneNode(!1),a=n.parentNode,i.id&&i.removeAttribute("id");for(var u,d=0;u=n.childNodes[o];)E(u,i,d++,s);return E(i,a,t.dom.getNodeIndex(n)+1,s),n==e?i:W(e,a,t.dom.getNodeIndex(i),s)}if(e!=n){i=n.parentNode;var f=t.dom.getNodeIndex(n);return c||f++,W(e,i,f,s)}return e}function q(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&g(e,t)&&C(e,t)&&"inline"==A(e,"display")&&"inline"==A(t,"display")}function F(e){var t=e?"nextSibling":"previousSibling";return function(n,o){var r=n.parentNode,s=n[t];if(s){if(s&&3==s.nodeType)return s}else if(o&&(s=r[t])&&1==s.nodeType&&q(r,s)){var i=s[e?"firstChild":"lastChild"];if(i&&3==i.nodeType)return i}return null}}var z=F(!1),V=F(!0),$=function(){function e(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&this.textNodes.push(t)}return e.prototype.doMerge=function(e){var n=this.textNodes,o=n[0];if(n.length>1){var r,s=t.dom.getNodeIndex(o),i=[],a=0,c=n.length;n.forEach((function(n,l){r=n.parentNode,l>0&&(r.removeChild(n),r.hasChildNodes()||t.dom.removeNode(r),e&&e.forEach((function(e){e.node==n&&(e.node=o,e.offset+=a),e.node==r&&e.offset>s&&(--e.offset,e.offset==s+1&&l<c-1&&(e.node=o,e.offset=a))}))),i[l]=n.data,a+=n.data.length})),o.data=i.join("")}return o.data},e.prototype.getLength=function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},e.prototype.toString=function(){var e=[];return this.textNodes.forEach((function(t,n){e[n]="'"+t.data+"'"})),"[Merge("+e.join(",")+")]"},e}(),U=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],G={},K={hasClass:u,addClass:d,removeClass:f,getClass:h,hasSameClasses:g,hasAllClasses:y,replaceWithOwnChildren:N,elementsHaveSameNonClassAttributes:C,elementHasNonClassAttributes:O,splitNodeAt:W,isEditableElement:T,isEditingHost:x,isEditable:k},Y=function(){function e(e,t,n){this.className=e,this.elementTagName=s,this.ignoreWhiteSpace=!0,this.applyToEditableOnly=!1,this.useExistingElements=!0,this.removeEmptyElements=!0;var o,r,i,l,u=this;u.cssClass=e;var d=null,f={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),n=t.tagNames,d=t.elementProperties,f=t.elementAttributes,r=0;l=U[r++];)t.hasOwnProperty(l)&&(u[l]=t[l]);o=t.normalize}else o=t;u.normalize=void 0===o||o,u.attrExceptions=[];var h=document.createElement(u.elementTagName);if(u.elementProperties=u.copyPropertiesToElement(d,h,!0),a(f,(function(e,t){u.attrExceptions.push(e),f[e]=""+t})),u.elementAttributes=f,u.elementSortedClassName=u.elementProperties.hasOwnProperty("className")?p(u.elementProperties.className+" "+e):e,u.applyToAnyTagName=!1,"string"==typeof n)"*"==n?u.applyToAnyTagName=!0:u.tagNames=c(n.toLowerCase()).split(/\s*,\s*/);else if("object"==typeof n&&"number"==typeof n.length)for(u.tagNames=[],r=0,i=n.length;r<i;++r)"*"==n[r]?u.applyToAnyTagName=!0:u.tagNames.push(n[r].toLowerCase());else u.tagNames=[u.elementTagName]}return e.prototype.copyPropertiesToElement=function(e,t,n){var o,r,s,i,a,c,l={};for(var u in e)if(e.hasOwnProperty(u))if(i=e[u],a=t[u],"className"==u)d(t,i),d(t,this.className),t[u]=p(t[u]),n&&(l[u]=i);else if("style"==u){for(o in r=a,n&&(l[u]=s={}),e[u])e[u].hasOwnProperty(o)&&(r[o]=i[o],n&&(s[o]=r[o]));this.attrExceptions.push(u)}else t[u]=i,n&&(l[u]=t[u],c=G.hasOwnProperty(u)?G[u]:u,this.attrExceptions.push(c));return n?l:""},e.prototype.copyAttributesToElement=function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},e.prototype.appliesToElement=function(e){return this.tagNames.includes(e.tagName.toLowerCase())},e.prototype.getEmptyElements=function(e){var t=this;return e.getNodes([1],(function(e){return t.appliesToElement(e)&&!e.hasChildNodes()}))},e.prototype.hasClass=function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&u(e,this.className)},e.prototype.getSelfOrAncestorWithClass=function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},e.prototype.isModifiable=function(e){return!this.applyToEditableOnly||k(e)},e.prototype.isIgnorableWhiteSpaceNode=function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&B(e)},e.prototype.postApply=function(e,t,n,o){var r,s,i=e[0],a=e[e.length-1],c=[],l=i,u=a,d=0,f=a.length;e.forEach((function(e){(s=z(e,!o))?(r||(r=new $(s),c.push(r)),r.textNodes.push(e),e===i&&(l=r.textNodes[0],d=l.length),e===a&&(u=r.textNodes[0],f=r.getLength())):r=null}));var h=V(a,!o);if(h&&(r||(r=new $(a),c.push(r)),r.textNodes.push(h)),c.length){for(var p=0,m=c.length;p<m;++p)c[p].doMerge(n);t.setStartAndEnd(l,d,u,f)}},e.prototype.createContainer=function(e){var n=t.dom.getDocument(e),o=i&&!t.dom.isHtmlNamespace(e)&&e.namespaceURI?n.createElementNS(e.namespaceURI,this.elementTagName):n.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,o,!1),this.copyAttributesToElement(this.elementAttributes,o),d(o,this.className),this.onElementCreate&&this.onElementCreate(o,this),o},e.prototype.elementHasProperties=function(e,t){var n=this;return a(t,(function(t,o){if("className"==t)return y(e,o);if("object"==typeof o){if(!n.elementHasProperties(e[t],o))return!1}else if(e[t]!==o)return!1}))},e.prototype.elementHasAttributes=function(e,t){return a(t,(function(t,n){if(e.getAttribute(t)!==n)return!1}))},e.prototype.applyToTextNode=function(e,t){if(v(e)){var n=e.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))d(n,this.className);else{var o=e.parentNode,r=this.createContainer(o);o.insertBefore(r,e),r.appendChild(e)}}},e.prototype.isRemovable=function(e){return e.tagName.toLowerCase()==this.elementTagName&&m(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!O(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},e.prototype.isEmptyContainer=function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},e.prototype.removeEmptyContainers=function(e){var t=this,n=e.getNodes([1],(function(e){return t.isEmptyContainer(e)})),o=[e],r=M(o);n.forEach((function(e){w(e,r)})),L(o,r)},e.prototype.undoToTextNode=function(e,t,n,o){if(!t.containsNode(n)){var r=t.cloneRange();r.selectNode(n),r.isPointInRange(t.endContainer,t.endOffset)&&(W(n,t.endContainer,t.endOffset,o),t.setEndAfter(n)),r.isPointInRange(t.startContainer,t.startOffset)&&(n=W(n,t.startContainer,t.startOffset,o))}this.isRemovable(n)?N(n,o):f(n,this.className)},e.prototype.splitAncestorWithClass=function(e,t,n){var o=this.getSelfOrAncestorWithClass(e);o&&W(o,e,t,n)},e.prototype.undoToAncestor=function(e,t){this.isRemovable(e)?N(e,t):f(e,this.className)},e.prototype.applyToRange=function(e,t){var n=this,o=M((t=t||[])||[]);e.splitBoundariesPreservingPositions(o),n.removeEmptyElements&&n.removeEmptyContainers(e);var r=j(e);if(r.length){r.forEach((function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,o)}));var s=r[r.length-1];e.setStartAndEnd(r[0],0,s,s.length),n.normalize&&n.postApply(r,e,o,!1),L(t,o)}n.getEmptyElements(e).forEach((function(e){d(e,n.className)}))},e.prototype.applyToRanges=function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},e.prototype.applyToSelection=function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},e.prototype.undoToRange=function(e,t){var n=this,o=M(t=t||[]);e.splitBoundariesPreservingPositions(o),n.removeEmptyElements&&n.removeEmptyContainers(e);var r,s,i=j(e),a=i[i.length-1];if(i.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,o),n.splitAncestorWithClass(e.startContainer,e.startOffset,o);for(var c=0,l=i.length;c<l;++c)r=i[c],(s=n.getSelfOrAncestorWithClass(r))&&n.isModifiable(r)&&n.undoToAncestor(s,o);e.setStartAndEnd(i[0],0,a,a.length),n.normalize&&n.postApply(i,e,o,!0),L(t,o)}n.getEmptyElements(e).forEach((function(e){f(e,n.className)}))},e.prototype.undoToRanges=function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},e.prototype.undoToSelection=function(e){var n=t.getSelection(e),o=t.getSelection(e).getAllRanges();this.undoToRanges(o),n.setRanges(o)},e.prototype.isAppliedToRange=function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,o=0;n=t[o++];)if(!this.isIgnorableWhiteSpaceNode(n)&&S(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},e.prototype.isAppliedToRanges=function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},e.prototype.isAppliedToSelection=function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},e.prototype.toggleRange=function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},e.prototype.toggleSelection=function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},e.prototype.getElementsWithClassIntersectingRange=function(e){var t=[],n=this;return e.getNodes([3],(function(e){var o=n.getSelfOrAncestorWithClass(e);o&&!t.includes(o)&&t.push(o)})),t},e.prototype.detach=function(){},e.util=K,e}();function J(e,t,n){return new Y(e,t,n)}e.ClassApplier=Y,e.CssClassApplier=Y,e.createClassApplier=J,Object.defineProperty(e,"__esModule",{value:!0})}(t,n("./node_modules/rangy2/esm5/index.js"))},"./node_modules/rangy2/bundles/index.umd.js":function(e,t){!function(e){"use strict";var t=function(e){try{return!!e()}catch(e){return!0}},n={}.toString,o=function(e){return n.call(e).slice(8,-1)},r="".split,s=t((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?r.call(e,""):Object(e)}:Object,i=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},a=function(e){return s(i(e))},c=Math.ceil,l=Math.floor,u=function(e){return isNaN(e=+e)?0:(e>0?l:c)(e)},d=Math.min,f=function(e){return e>0?d(u(e),9007199254740991):0},h=Math.max,p=Math.min,m=function(e,t){var n=u(e);return n<0?h(n+t,0):p(n,t)},g=function(e){return function(t,n,o){var r,s=a(t),i=f(s.length),c=m(o,i);if(e&&n!=n){for(;i>c;)if((r=s[c++])!=r)return!0}else for(;i>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}},y="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")(),v=!t((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),_={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,E={f:b&&!_.call({1:2},1)?function(e){var t=b(this,e);return!!t&&t.enumerable}:_},w=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},R=function(e){return"object"==typeof e?null!==e:"function"==typeof e},N=function(e,t){if(!R(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!R(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!R(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!R(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")},S={}.hasOwnProperty,j=function(e,t){return S.call(e,t)},C=y.document,O=R(C)&&R(C.createElement),A=function(e){return O?C.createElement(e):{}},T=!v&&!t((function(){return 7!=Object.defineProperty(A("div"),"a",{get:function(){return 7}}).a})),x=Object.getOwnPropertyDescriptor,k={f:v?x:function(e,t){if(e=a(e),t=N(t,!0),T)try{return x(e,t)}catch(e){}if(j(e,t))return w(!E.f.call(e,t),e[t])}},I=function(e){if(!R(e))throw TypeError(String(e)+" is not an object");return e},D=Object.defineProperty,P={f:v?D:function(e,t,n){if(I(e),t=N(t,!0),I(n),T)try{return D(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},B=v?function(e,t,n){return P.f(e,t,w(1,n))}:function(e,t,n){return e[t]=n,e};function M(e,t){return e(t={exports:{}},t.exports),t.exports}var L,H,W,q=function(e,t){try{B(y,e,t)}catch(n){y[e]=t}return t},F=M((function(e){var t="__core-js_shared__",n=y[t]||q(t,{});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.0.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),z=F("native-function-to-string",Function.toString),V=y.WeakMap,$="function"==typeof V&&/native code/.test(z.call(V)),U=0,G=Math.random(),K=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++U+G).toString(36))},Y=F("keys"),J=function(e){return Y[e]||(Y[e]=K(e))},Q={},X=y.WeakMap,Z=function(e){return W(e)?H(e):L(e,{})},ee=function(e){return function(t){var n;if(!R(t)||(n=H(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if($){var te=new X,ne=te.get,oe=te.has,re=te.set;L=function(e,t){return re.call(te,e,t),t},H=function(e){return ne.call(te,e)||{}},W=function(e){return oe.call(te,e)}}else{var se=J("state");Q[se]=!0,L=function(e,t){return B(e,se,t),t},H=function(e){return j(e,se)?e[se]:{}},W=function(e){return j(e,se)}}var ie={set:L,get:H,has:W,enforce:Z,getterFor:ee},ae=M((function(e){var t=ie.get,n=ie.enforce,o=String(z).split("toString");F("inspectSource",(function(e){return z.call(e)})),(e.exports=function(e,t,r,s){var i=!!s&&!!s.unsafe,a=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||j(r,"name")||B(r,"name",t),n(r).source=o.join("string"==typeof t?t:"")),e!==y?(i?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=r:B(e,t,r)):a?e[t]=r:q(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||z.call(this)}))})),ce=g(!1),le=function(e,t){var n,o=a(e),r=0,s=[];for(n in o)!j(Q,n)&&j(o,n)&&s.push(n);for(;t.length>r;)j(o,n=t[r++])&&(~ce(s,n)||s.push(n));return s},ue=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],de=ue.concat("length","prototype"),fe={f:Object.getOwnPropertyNames||function(e){return le(e,de)}},he={f:Object.getOwnPropertySymbols},pe=y.Reflect,me=pe&&pe.ownKeys||function(e){var t=fe.f(I(e)),n=he.f;return n?t.concat(n(e)):t},ge=function(e,t){for(var n=me(t),o=P.f,r=k.f,s=0;s<n.length;s++){var i=n[s];j(e,i)||o(e,i,r(t,i))}},ye=/#|\.prototype\./,ve=function(e,n){var o=be[_e(e)];return o==we||o!=Ee&&("function"==typeof n?t(n):!!n)},_e=ve.normalize=function(e){return String(e).replace(ye,".").toLowerCase()},be=ve.data={},Ee=ve.NATIVE="N",we=ve.POLYFILL="P",Re=ve,Ne=k.f,Se=function(e,t){var n,o,r,s,i,a=e.target,c=e.global,l=e.stat;if(n=c?y:l?y[a]||q(a,{}):(y[a]||{}).prototype)for(o in t){if(s=t[o],r=e.noTargetGet?(i=Ne(n,o))&&i.value:n[o],!Re(c?o:a+(l?".":"#")+o,e.forced)&&void 0!==r){if(typeof s==typeof r)continue;ge(s,r)}(e.sham||r&&r.sham)&&B(s,"sham",!0),ae(n,o,s,e)}},je=!t((function(){return!String(Symbol())})),Ce=F("wks"),Oe=y.Symbol,Ae=function(e){return Ce[e]||(Ce[e]=je&&Oe[e]||(je?Oe:K)("Symbol."+e))},Te=Object.keys||function(e){return le(e,ue)},xe=v?Object.defineProperties:function(e,t){I(e);for(var n,o=Te(t),r=o.length,s=0;r>s;)P.f(e,n=o[s++],t[n]);return e},ke=y.document,Ie=ke&&ke.documentElement,De=J("IE_PROTO"),Pe="prototype",Be=function(){},Me=function(){var e,t=A("iframe"),n=ue.length,o="<",r="script",s=">",i="java"+r+":";for(t.style.display="none",Ie.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(o+r+s+"document.F=Object"+o+"/"+r+s),e.close(),Me=e.F;n--;)delete Me[Pe][ue[n]];return Me()},Le=Object.create||function(e,t){var n;return null!==e?(Be[Pe]=I(e),n=new Be,Be[Pe]=null,n[De]=e):n=Me(),void 0===t?n:xe(n,t)};Q[De]=!0;var He=Ae("unscopables"),We=Array.prototype;null==We[He]&&B(We,He,Le(null));var qe=function(e){We[He][e]=!0},Fe=g(!0);Se({target:"Array",proto:!0},{includes:function(e){return Fe(this,e,arguments.length>1?arguments[1]:void 0)}}),qe("includes");var ze,Ve,$e=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Ue=function(e,t,n){if($e(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},Ge=Function.call,Ke=(ze="includes",Ue(Ge,y.Array.prototype[ze],Ve),function(e){return Object(i(e))}),Ye=Object.assign,Je=!Ye||t((function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=Ye({},e)[n]||Te(Ye({},t)).join("")!=o}))?function(e,t){for(var n=Ke(e),o=arguments.length,r=1,i=he.f,a=E.f;o>r;)for(var c,l=s(arguments[r++]),u=i?Te(l).concat(i(l)):Te(l),d=u.length,f=0;d>f;)a.call(l,c=u[f++])&&(n[c]=l[c]);return n}:Ye;Se({target:"Object",stat:!0,forced:Object.assign!==Je},{assign:Je}),y.Object.assign;var Qe="undefined",Xe="2.1.0",Ze=typeof window!=Qe&&typeof document!=Qe;Ze||console.log("Rangy can only run in a browser");var et={implementsDomRange:!0,implementsTextRange:!1,htmlParsingConforms:!0,crashyTextNodes:!1,implementsWinGetSelection:!0,implementsDocSelection:!1,selectionSupportsMultipleRanges:!1,implementsControlRange:!1},tt={preferTextRange:!1,checkSelectionRanges:!0};function nt(e){if(Ze)if("complete"==document.readyState)e();else{var t=function(){document.removeEventListener("DOMContentLoaded",t,!1),e()};document.addEventListener("DOMContentLoaded",t,!1)}}function ot(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function rt(e,t){return!("object"!=typeof e[t]||!e[t])}function st(e,t){return void 0!==e[t]}function it(e){return function(t,n){for(var o=n.length;o--;)if(!e(t,n[o]))return!1;return!0}}var at=it(ot),ct=it(rt),lt=it(st);function ut(e){return rt(e,"body")?e.body:e.getElementsByTagName("body")[0]}var dt=Object.freeze({isHostMethod:ot,isHostObject:rt,isHostProperty:st,areHostMethods:at,areHostObjects:ct,areHostProperties:lt,getBody:ut}),ft=function(){function e(e,t){this.name=e,this.dependencies=t}return e.prototype.fail=function(e){throw console.log("Module '"+this.name+"' failed to load: "+e),new Error(e)},e.prototype.warn=function(e){console.log("Module "+this.name+": "+e)},e.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},e}();function ht(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}ht.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},ht.prototype.toString=function(){return this.message};var pt,mt=new ft("DomUtil",[]),gt="undefined";function yt(e){var t;return typeof e.namespaceURI==gt||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function vt(e){var t=e.parentNode;return 1==t.nodeType?t:null}function _t(e){for(var t=0;e=e.previousSibling;)++t;return t}function bt(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function Et(e,t){var n,o=[];for(n=e;n;n=n.parentNode)o.push(n);for(n=t;n;n=n.parentNode)if(o.includes(n))return n;return null}function wt(e,t,n){for(var o=n?t:t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}function Rt(e,t){return wt(e,t,!0)}function Nt(e,t,n){for(var o,r=n?e:e.parentNode;r;){if((o=r.parentNode)===t)return r;r=o}return null}function St(e){var t=e.nodeType;return 3==t||4==t||8==t}function jt(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function Ct(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e}function Ot(e,t,n){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),Ct(o,e),n)for(var r,s=0;r=n[s++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>_t(e)&&++r.offset;return o}function At(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=gt)return e.ownerDocument;if(typeof e.document!=gt)return e.document;if(e.parentNode)return At(e.parentNode);throw mt.createError("getDocument: no document found for node")}function Tt(e){var t=At(e);if(typeof t.defaultView!=gt)return t.defaultView;if(typeof t.parentWindow!=gt)return t.parentWindow;throw mt.createError("Cannot get a window object for node")}function xt(e){if(typeof e.contentDocument!=gt)return e.contentDocument;if(typeof e.contentWindow!=gt)return e.contentWindow.document;throw mt.createError("getIframeDocument: No Document object found for iframe element")}function kt(e){if(typeof e.contentWindow!=gt)return e.contentWindow;if(typeof e.contentDocument!=gt)return e.contentDocument.defaultView;throw mt.createError("getIframeWindow: No Window object found for iframe element")}function It(e){return e&&ot(e,"setTimeout")&&rt(e,"document")}function Dt(e){return 1==e.nodeType&&"iframe"==e.tagName.toLowerCase()}function Pt(e,t,n){var o;if(e?st(e,"nodeType")?o=Dt(e)?xt(e):At(e):It(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o}function Bt(e){for(var t;t=e.parentNode;)e=t;return e}function Mt(e,t,n,o){var r,s,i,a,c;if(e==n)return t===o?0:t<o?-1:1;if(r=Nt(n,e,!0))return t<=_t(r)?-1:1;if(r=Nt(e,n,!0))return _t(r)<o?-1:1;if(!(s=Et(e,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((i=e===s?s:Nt(e,s,!0))===(a=n===s?s:Nt(n,s,!0)))throw mt.createError("comparePoints got to case 4 and childA and childB are the same!");for(c=s.firstChild;c;){if(c===i)return-1;if(c===a)return 1;c=c.nextSibling}}function Lt(e){if(!e)return"[No node]";if(St(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+_t(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function Ht(e){for(var t,n=At(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}at(document,["createDocumentFragment","createElement","createTextNode"])||mt.fail("document missing a Node creation method"),ot(document,"getElementsByTagName")||mt.fail("document missing getElementsByTagName method"),typeof window.getComputedStyle!=gt?pt=function(e,t){return Tt(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=gt?pt=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:mt.fail("No means of obtaining computed style properties found");var Wt=pt;function qt(e,t,n){var o=ut(e),r=e.createElement("div");r.contentEditable=""+!!n,t&&(r.innerHTML=t);var s=o.firstChild;return s?o.insertBefore(r,s):o.appendChild(r),r}function Ft(e){return e.parentNode.removeChild(e)}var zt=function(){function e(e){this.root=e,this._next=e}return e.prototype.hasNext=function(){return!!this._next},e.prototype.next=function(){var t,n,o=e._current=this._next;if(e._current)if(t=o.firstChild)this._next=t;else{for(n=null;o!==this.root&&!(n=o.nextSibling);)o=o.parentNode;this._next=n}return e._current},e.prototype.detach=function(){e._current=this._next=this.root=null},e._current=null,e}();function Vt(e){return new zt(e)}var $t=function(){function e(e,t){this.node=e,this.offset=t}return e.prototype.equals=function(e){return!!e&&this.node===e.node&&this.offset==e.offset},e.prototype.inspect=function(){return"[DomPosition("+Lt(this.node)+":"+this.offset+")]"},e.prototype.toString=function(){return this.inspect()},e}(),Ut=Object.freeze({getBody:ut,isHtmlNamespace:yt,parentElement:vt,getNodeIndex:_t,getNodeLength:bt,getCommonAncestor:Et,isAncestorOf:wt,isOrIsAncestorOf:Rt,getClosestAncestorIn:Nt,isCharacterDataNode:St,isTextOrCommentNode:jt,insertAfter:Ct,splitDataNode:Ot,getDocument:At,getWindow:Tt,getIframeDocument:xt,getIframeWindow:kt,isWindow:It,getContentDocument:Pt,getRootContainer:Bt,comparePoints:Mt,inspectNode:Lt,fragmentFromNodeChildren:Ht,getComputedStyleProperty:Wt,createTestElement:qt,removeNode:Ft,NodeIterator:zt,createIterator:Vt,DomPosition:$t}),Gt=function(e,t){return Gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Gt(e,t)};function Kt(e,t){function n(){this.constructor=e}Gt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Yt(e,t){return 3!=e.nodeType&&(Rt(e,t.startContainer)||Rt(e,t.endContainer))}var Jt=[1,3,4,5,7,8,10],Qt=[2,9,11],Xt=[5,6,10,12],Zt=[1,3,4,5,7,8,10,11],en=[1,3,4,5,7,8];function tn(e){return function(t,n){for(var o,r=n?t:t.parentNode;r;){if(o=r.nodeType,e.includes(o))return r;r=r.parentNode}return null}}var nn=tn([9,11]),on=tn(Xt),rn=tn([6,10,12]),sn=tn([1]);function an(e,t){if(rn(e,t))throw new ht("INVALID_NODE_TYPE_ERR")}function cn(e,t){if(!t.includes(e.nodeType))throw new ht("INVALID_NODE_TYPE_ERR")}function ln(e,t){if(t<0||t>(St(e)?e.length:e.childNodes.length))throw new ht("INDEX_SIZE_ERR")}function un(e,t){if(nn(e,!0)!==nn(t,!0))throw new ht("WRONG_DOCUMENT_ERR")}function dn(e){if(on(e,!0))throw new ht("NO_MODIFICATION_ALLOWED_ERR")}function fn(e,t){if(!e)throw new ht(t)}function hn(e,t){return t<=(St(e)?e.length:e.childNodes.length)}function pn(e){return!!e.startContainer&&!!e.endContainer&&Bt(e.startContainer)==Bt(e.endContainer)&&hn(e.startContainer,e.startOffset)&&hn(e.endContainer,e.endOffset)}function mn(e){if(!pn(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function gn(e){return e.document||At(e.startContainer)}function yn(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:Et(e.startContainer,e.endContainer)}function vn(e,t,n,o,r){e.startContainer=t,e.startOffset=n,e.endContainer=o,e.endOffset=r,e.document=At(t),yn(e)}var _n=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],bn=function(){function e(){}return e}(),En=function(e){function t(t){var n=e.call(this)||this;return vn(n,t,0,t,0),n}return Kt(t,e),t}(bn),wn=function(){function e(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,this._current=null,this._next=null,this._first=null,this._last=null,this.isSingleCharacterDataNode=!1,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&St(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||St(this.sc)?Nt(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||St(this.ec)?Nt(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}return e.prototype.reset=function(){this._current=null,this._next=this._first},e.prototype.hasNext=function(){return!!this._next},e.prototype.detach=function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null},e.prototype.next=function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,St(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},e.prototype.remove=function(){var e,t,n=this._current;!St(n)||n!==this.sc&&n!==this.ec?n.parentNode&&Ft(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},e.prototype.isPartiallySelectedSubtree=function(){return Yt(this._current,this.range)},e.prototype.getSubtreeIterator=function(){var t;if(this.isSingleCharacterDataNode)(t=this.range.cloneRange()).collapse(!1);else{t=new Qn(gn(this.range));var n=this._current,o=n,r=0,s=n,i=bt(n);Rt(n,this.sc)&&(o=this.sc,r=this.so),Rt(n,this.ec)&&(s=this.ec,i=this.eo),vn(t,o,r,s,i)}return new e(t,this.clonePartiallySelectedTextNodes)},e}();function Rn(e){for(var t,n,o,r=gn(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(Rn(o)),o.detach()),10==n.nodeType)throw new ht("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function Nn(e,t,n){var o,r,s,i;for(void 0===n&&(n={stop:!1});s=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(s))return void(n.stop=!0);if(Nn(i=e.getSubtreeIterator(),t,n),i.detach(),n.stop)return}else for(o=Vt(s);r=o.next();)if(!1===t(r))return void(n.stop=!0)}function Sn(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(Sn(t=e.getSubtreeIterator()),t.detach()):e.remove()}function jn(e){for(var t,n,o=gn(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(jn(n)),n.detach()):e.remove(),10==t.nodeType)throw new ht("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function Cn(e){return Bt(e.startContainer)}function On(e,t,n){var o=11==e.nodeType?e.firstChild:e;return St(t)?n==t.length?Ct(e,t):t.parentNode.insertBefore(e,0==n?t:Ot(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),o}function An(e,t,n){if(mn(e),mn(t),gn(t)!=gn(e))throw new ht("WRONG_DOCUMENT_ERR");var o=Mt(e.startContainer,e.startOffset,t.endContainer,t.endOffset),r=Mt(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&r>=0:o<0&&r>0}function Tn(e,t,n){var o,r=!(!t||!t.length),s=!!n;r&&(o=new RegExp("^("+t.join("|")+")$"));var i=[];return Nn(new wn(e,!1),(function(t){if((!r||o.test(t.nodeType.toString()))&&(!s||n(t))){var a=e.startContainer;if(t!=a||!St(a)||e.startOffset!=a.length){var c=e.endContainer;t==c&&St(c)&&0==e.endOffset||i.push(t)}}})),i}function xn(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+Lt(e.startContainer)+":"+e.startOffset+", "+Lt(e.endContainer)+":"+e.endOffset+")]"}function kn(e){mn(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var In=0,Dn=1,Pn=3,Bn=0,Mn=1,Ln=2,Hn=3,Wn={START_TO_START:In,START_TO_END:Dn,END_TO_END:2,END_TO_START:Pn,NODE_BEFORE:Bn,NODE_AFTER:Mn,NODE_BEFORE_AND_AFTER:Ln,NODE_INSIDE:Hn};function qn(e){Object.assign(e,Wn),Object.assign(e.prototype,Wn)}function Fn(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kt(t,e),t.prototype.compareBoundaryPoints=function(e,t){mn(this),un(this.startContainer,t.startContainer);var n=e==Pn||e==In?"start":"end",o=e==Dn||e==In?"start":"end";return Mt(this[n+"Container"],this[n+"Offset"],t[o+"Container"],t[o+"Offset"])},t.prototype.insertNode=function(e){if(mn(this),cn(e,Zt),dn(this.startContainer),Rt(e,this.startContainer))throw new ht("HIERARCHY_REQUEST_ERR");var t=On(e,this.startContainer,this.startOffset);this.setStartBefore(t)},t.prototype.cloneContents=function(){var e,t;if(mn(this),this.collapsed)return gn(this).createDocumentFragment();if(this.startContainer===this.endContainer&&St(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=gn(this).createDocumentFragment()).appendChild(e),t;var n=new wn(this,!0);return e=Rn(n),n.detach(),e},t.prototype.canSurroundContents=function(){mn(this),dn(this.startContainer),dn(this.endContainer);var e=new wn(this,!0),t=e._first&&Yt(e._first,this)||e._last&&Yt(e._last,this);return e.detach(),!t},t.prototype.surroundContents=function(e){if(cn(e,en),!this.canSurroundContents())throw new ht("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);On(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},t.prototype.cloneRange=function(){mn(this);for(var e=new Qn(gn(this)),t=0,n=_n;t<n.length;t++){var o=n[t];e[o]=this[o]}return e},t.prototype.toString=function(){mn(this);var e=this.startContainer;if(e===this.endContainer&&St(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new wn(this,!0);return Nn(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},t.prototype.compareNode=function(e){mn(this);var t=e.parentNode,n=_t(e);if(!t)throw new ht("NOT_FOUND_ERR");var o=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return o<0?r>0?Ln:Bn:r>0?Mn:Hn},t.prototype.comparePoint=function(e,t){return mn(this),fn(e,"HIERARCHY_REQUEST_ERR"),un(e,this.startContainer),Mt(e,t,this.startContainer,this.startOffset)<0?-1:Mt(e,t,this.endContainer,this.endOffset)>0?1:0},t.prototype.createContextualFragment=function(e){var t=this.startContainer,n=At(t);if(!t)throw new ht("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:St(t)&&(o=vt(t)),(o=null===o||"HTML"==o.nodeName&&yt(At(o).documentElement)&&yt(o)?n.createElement("body"):o.cloneNode(!1)).innerHTML=e,Ht(o)},t.prototype.toHtml=function(){return kn(this)},t.prototype.intersectsNode=function(e,t){if(mn(this),Bt(e)!=Cn(this))return!1;var n=e.parentNode,o=_t(e);if(!n)return!0;var r=Mt(n,o,this.endContainer,this.endOffset),s=Mt(n,o+1,this.startContainer,this.startOffset);return t?r<=0&&s>=0:r<0&&s>0},t.prototype.isPointInRange=function(e,t){return mn(this),fn(e,"HIERARCHY_REQUEST_ERR"),un(e,this.startContainer),Mt(e,t,this.startContainer,this.startOffset)>=0&&Mt(e,t,this.endContainer,this.endOffset)<=0},t.prototype.intersectsRange=function(e){return An(this,e,!1)},t.prototype.intersectsOrTouchesRange=function(e){return An(this,e,!0)},t.prototype.intersection=function(e){if(this.intersectsRange(e)){var t=Mt(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=Mt(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();return-1==t&&o.setStart(e.startContainer,e.startOffset),1==n&&o.setEnd(e.endContainer,e.endOffset),o}return null},t.prototype.union=function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==Mt(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==Mt(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new ht("Ranges do not intersect")},t.prototype.containsNode=function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==Hn},t.prototype.containsNodeContents=function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,bt(e))<=0},t.prototype.containsRange=function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},t.prototype.containsNodeText=function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var o=n.pop();return t.setEnd(o,o.length),this.containsRange(t)}return this.containsNodeContents(e)},t.prototype.getNodes=function(e,t){return mn(this),Tn(this,e,t)},t.prototype.getDocument=function(){return gn(this)},t.prototype.collapseBefore=function(e){this.setEndBefore(e),this.collapse(!1)},t.prototype.collapseAfter=function(e){this.setStartAfter(e),this.collapse(!0)},t.prototype.getBookmark=function(e){var t=gn(this),n=so(t);e=e||ut(t),n.selectNodeContents(e);var o=this.intersection(n),r=0,s=0;return o&&(n.setEnd(o.startContainer,o.startOffset),s=(r=n.toString().length)+o.toString().length),{start:r,end:s,containerNode:e}},t.prototype.moveToBookmark=function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var o,r,s,i,a=[t],c=!1,l=!1;!l&&(o=a.pop());)if(3==o.nodeType)r=n+o.length,!c&&e.start>=n&&e.start<=r&&(this.setStart(o,e.start-n),c=!0),c&&e.end>=n&&e.end<=r&&(this.setEnd(o,e.end-n),l=!0),n=r;else for(s=(i=o.childNodes).length;s--;)a.push(i[s])},t.prototype.getName=function(){return"DomRange"},t.prototype.equals=function(e){return zn(this,e)},t.prototype.isValid=function(){return pn(this)},t.prototype.inspect=function(){return xn(this)},t.prototype.detach=function(){},t.prototype.select=function(e){Io(this.getDocument()).setSingleRange(this,e)},t}(e)}function zn(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}var Vn=new ft("DomRange",["DomUtil"]);function $n(e){return new $t(e.parentNode,_t(e))}function Un(e){return new $t(e.parentNode,_t(e)+1)}function Gn(e,t){mn(e);var n=e.startContainer,o=e.startOffset,r=e.endContainer,s=e.endOffset,i=n===r;St(r)&&s>0&&s<r.length&&Ot(r,s,t),St(n)&&o>0&&o<n.length&&(n=Ot(n,o,t),i?(s-=o,r=n):r==n.parentNode&&s>=_t(n)&&s++,o=0),e.setStartAndEnd(n,o,r,s)}function Kn(e,t){return function(){mn(this);var n,o=this.startContainer,r=this.startOffset,s=this.commonAncestorContainer,i=new wn(this,!0);o!==s&&(o=(n=Un(Nt(o,s,!0))).node,r=n.offset),Nn(i,dn),i.reset();var a=e(i);return i.detach(),t(this,o,r,o,r),a}}function Yn(e,t){function n(e,t){return function(n){cn(n,Jt),cn(Bt(n),Qt);var s=(e?$n:Un)(n);(t?o:r)(this,s.node,s.offset)}}function o(e,n,o){var r=e.endContainer,s=e.endOffset;n===e.startContainer&&o===e.startOffset||(Bt(n)==Bt(r)&&1!=Mt(n,o,r,s)||(r=n,s=o),t(e,n,o,r,s))}function r(e,n,o){var r=e.startContainer,s=e.startOffset;n===e.endContainer&&o===e.endOffset||(Bt(n)==Bt(r)&&-1!=Mt(n,o,r,s)||(r=n,s=o),t(e,r,s,n,o))}return function(e){function s(){var o=null!==e&&e.apply(this,arguments)||this;return o.setStartBefore=n(!0,!0),o.setStartAfter=n(!1,!0),o.setEndBefore=n(!0,!1),o.setEndAfter=n(!1,!1),o.extractContents=Kn(jn,t),o.deleteContents=Kn(Sn,t),o}return Kt(s,e),s.prototype.setStart=function(e,t){an(e,!0),ln(e,t),o(this,e,t)},s.prototype.setEnd=function(e,t){an(e,!0),ln(e,t),r(this,e,t)},s.prototype.setStartAndEnd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e[0],r=e[1],s=o,i=r;switch(e.length){case 3:i=e[2];break;case 4:s=e[2],i=e[3]}an(o,!0),ln(o,r),an(s,!0),ln(s,i),t(this,o,r,s,i)},s.prototype.setBoundary=function(e,t,n){this["set"+(n?"Start":"End")](e,t)},s.prototype.collapse=function(e){mn(this),e?t(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):t(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},s.prototype.selectNodeContents=function(e){an(e,!0),t(this,e,0,e,bt(e))},s.prototype.selectNode=function(e){an(e,!1),cn(e,Jt);var n=$n(e),o=Un(e);t(this,n.node,n.offset,o.node,o.offset)},s.prototype.splitBoundaries=function(){Gn(this)},s.prototype.splitBoundariesPreservingPositions=function(e){Gn(this,e)},s.prototype.normalizeBoundaries=function(){mn(this);var e,n=this.startContainer,o=this.startOffset,r=this.endContainer,s=this.endOffset,i=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(r=e,s=e.length,e.appendData(t.data),Ft(t))},a=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){n=e;var i=e.length;if(o=t.length,e.insertData(0,t.data),Ft(t),n==r)s+=o,r=n;else if(r==e.parentNode){var a=_t(e);s==a?(r=e,s=i):s>a&&s--}}},c=!0;if(St(r))s==r.length?i(r):0==s&&(e=r.previousSibling)&&e.nodeType==r.nodeType&&(s=e.length,n==r&&(c=!1),e.appendData(r.data),Ft(r),r=e);else{if(s>0){var l=r.childNodes[s-1];l&&St(l)&&i(l)}c=!this.collapsed}if(c){if(St(n))0==o?a(n):o==n.length&&(e=n.nextSibling)&&e.nodeType==n.nodeType&&(r==e&&(r=n,s+=n.length),n.appendData(e.data),Ft(e));else if(o<n.childNodes.length){var u=n.childNodes[o];u&&St(u)&&a(u)}}else n=r,o=s;t(this,n,o,r,s)},s.prototype.collapseToPoint=function(e,t){an(e,!0),ln(e,t),this.setStartAndEnd(e,t)},s.prototype.parentElement=function(){return mn(this),sn(this.commonAncestorContainer,!0)},s}(e)}function Jn(e,t){var n=Fn(e);Object.assign(n.prototype,Wn);var o=Yn(n,t);return Object.assign(o,Wn)}var Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Kt(t,e),t.inspect=xn,t.toHtml=kn,t.getRangeDocument=gn,t.rangesEqual=zn,t}(Jn(En,vn));function Xn(e){return e=Pt(e,Vn,"createRangyRange"),new Qn(e)}Object.assign(Qn,{rangeProperties:_n,RangeIterator:wn,copyComparisonConstants:qn,createPrototypeRange:Jn});var Zn=new ft("WrappedRange",["DomRange"]);function eo(e){for(var t=0,n=_n;t<n.length;t++){var o=n[t];e[o]=e.nativeRange[o]}e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function to(e,t,n,o,r){var s=e.startContainer!==t||e.startOffset!=n,i=e.endContainer!==o||e.endOffset!=r,a=!e.equals(e.nativeRange);(s||i||a)&&(e.setEnd(o,r),e.setStart(t,n))}var no=function(e){function t(n){var o=e.call(this)||this;if(o.nativeRange=n,o.setStartBefore=t.createBeforeAfterNodeSetter("setStartBefore"),o.setStartAfter=t.createBeforeAfterNodeSetter("setStartAfter"),o.setEndBefore=t.createBeforeAfterNodeSetter("setEndBefore"),o.setEndAfter=t.createBeforeAfterNodeSetter("setEndAfter"),!n)throw Zn.createError("WrappedRange: Range must be specified");return eo(o),o}return Kt(t,e),t.prototype.selectNode=function(e){this.nativeRange.selectNode(e),eo(this)},t.prototype.cloneContents=function(){return this.nativeRange.cloneContents()},t.prototype.surroundContents=function(e){this.nativeRange.surroundContents(e),eo(this)},t.prototype.collapse=function(e){this.nativeRange.collapse(e),eo(this)},t.prototype.cloneRange=function(){return new t(this.nativeRange.cloneRange())},t.prototype.refresh=function(){eo(this)},t.prototype.toString=function(){return this.nativeRange.toString()},t.prototype.setStart=function(e,t){this.nativeRange.setStart(e,t),eo(this)},t.prototype.setEnd=function(e,t){this.nativeRange.setEnd(e,t),eo(this)},t.createBeforeAfterNodeSetter=function(e){return function(t){this.nativeRange[e](t),eo(this)}},t.prototype.selectNodeContents=function(e){this.setStartAndEnd(e,0,bt(e))},t.prototype.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},t.prototype.getName=function(){return"WrappedRange"},t}(Jn(bn,to));function oo(){var e=document.createTextNode("test");ut(document).appendChild(e);var t=document.createRange(),n=document.createElement("div");n.innerHTML="123";var o=n.firstChild,r=ut(document);r.appendChild(n),t.setStart(o,1),t.setEnd(o,2),t.deleteContents();var s=no.prototype;"13"==o.data&&(s.deleteContents=function(){this.nativeRange.deleteContents(),eo(this)},s.extractContents=function(){var e=this.nativeRange.extractContents();return eo(this),e}),r.removeChild(n),ot(t,"createContextualFragment")&&(s.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),r.removeChild(e),r=null}function ro(e){return(e=Pt(e,Zn,"createNativeRange")).createRange()}function so(e){return e=Pt(e,Zn,"createRange"),new no(ro(e))}function io(e){e||(e=window);var t=e.document;void 0===t.createRange&&(t.createRange=function(){return so(t)})}nt(oo);var ao=new ft("WrappedSelection",["DomRange","WrappedRange"]),co="boolean",lo="number";function uo(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function fo(e,t){return e?It(e)?e:e instanceof Bo?e.win:Tt(Pt(e,ao,t)):window}function ho(e){return fo(e,"getWinSelection").getSelection()}function po(e){var t=!1;return e.anchorNode&&(t=1==Mt(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var mo=po;function go(){return!0}var yo=ho();yo||ao.fail("Native selection was null (possibly issue 138?)");var vo,_o=ro(document),bo=et.selectionHasAnchorAndFocus=lt(yo,["anchorNode","focusNode","anchorOffset","focusOffset"]),Eo=et.selectionHasExtend=ot(yo,"extend"),wo=et.selectionHasRangeCount=typeof yo.rangeCount==lo,Ro=Eo?function(e,t){var n=so(Qn.getRangeDocument(t));n.collapseToPoint(t.endContainer,t.endOffset),e.addRange(Oo(n)),e.extend(t.startContainer,t.startOffset)}:null,No=bo?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};function So(e,t,n){var o=n?"end":"start",r=n?"start":"end";e.anchorNode=t[o+"Container"],e.anchorOffset=t[o+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function jo(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function Co(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function Oo(e){var t;return e instanceof Qn?((t=ro(e.getDocument())).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset)):e instanceof no?t=e.nativeRange:e instanceof Range&&(t=e),t}function Ao(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}ot(yo,"getRangeAt")?vo=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:bo&&(vo=function(e){var t=so(At(e.anchorNode));return t.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),t.collapsed!==this.isCollapsed&&t.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),t});var To,xo=[];function ko(e,t){for(var n,o,r=xo.length;r--;)if(o=(n=xo[r]).selection,"deleteAll"==t)Ao(o);else if(n.win==e)return"delete"==t?(xo.splice(r,1),!0):o;return"deleteAll"==t&&(xo.length=0),null}function Io(e){if(e&&e instanceof Bo)return e.refresh(),e;var t=ko(e=fo(e,"getNativeSelection")),n=ho(e);return t?(t.nativeSelection=n,t.refresh()):(t=new Bo(n,e),xo.push({win:e,selection:t})),t}ot(yo,"getRangeAt")&&typeof yo.rangeCount==lo?To=function(e){if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new no(e.nativeSelection.getRangeAt(t));So(e,e._ranges[e.rangeCount-1],mo(e.nativeSelection)),e.isCollapsed=No(e)}else Co(e)}:bo&&typeof yo.isCollapsed==co&&typeof _o.collapsed==co&&et.implementsDomRange?To=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=vo(n,0),e._ranges=[t],e.rangeCount=1,jo(e),e.isCollapsed=No(e)):Co(e)}:ao.fail("No means of obtaining a Range or TextRange from the user's selection was found");var Do=function(){function e(e,t){this.nativeSelection=e,this.win=t,this._ranges=[],3==arguments.length&&(this.win=arguments[2]),this.refresh()}return e}();function Po(e){var t;function n(e,t){Ro(e.nativeSelection,t),e.refresh()}var o=wo?function(e,t){if(uo(t)&&Eo)n(this,e);else{var o;et.selectionSupportsMultipleRanges?o=this.rangeCount:(this.removeAllRanges(),o=0);var r=Oo(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(tt.checkSelectionRanges){var s=vo(this.nativeSelection,this.rangeCount-1);s&&!zn(s,e)&&(e=new no(s))}this._ranges[this.rangeCount-1]=e,So(this,e,mo(this.nativeSelection)),this.isCollapsed=No(this)}else this.refresh()}}:function(e,t){uo(t)&&Eo?n(this,e):(this.nativeSelection.addRange(Oo(e)),this.refresh())};function r(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)zn(t,n[o])||e.addRange(n[o]);e.rangeCount||Co(e)}function s(e,t){if(e.win.document!=At(t))throw new ht("WRONG_DOCUMENT_ERR")}function i(e){return function(t,n){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(e?"Start":"End")](t,n):(o=so(this.win.document)).setStartAndEnd(t,n),this.setSingleRange(o,this.isBackward())}}return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addRange=o,t.isBackwards=t.isBackward,t.setStart=i(!0),t.setEnd=i(!1),t}return Kt(t,e),t.prototype.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),Co(this)},t.prototype.setRanges=function(e){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])},t.prototype.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new ht("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},t.prototype.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(To(this),e){var r=t.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;for(;r--;)if(!zn(t[r],this._ranges[r]))return!0;return!1}},t.prototype.removeRange=function(e){r(this,e)},t.prototype.isBackward=function(){return mo(this)},t.prototype.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},t.prototype.collapse=function(e,t){s(this,e);var n=so(e);n.collapseToPoint(e,t),this.setSingleRange(n),this.isCollapsed=!0},t.prototype.collapseToStart=function(){if(!this.rangeCount)throw new ht("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},t.prototype.collapseToEnd=function(){if(!this.rangeCount)throw new ht("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},t.prototype.selectAllChildren=function(e){s(this,e);var t=so(e);t.selectNodeContents(e),this.setSingleRange(t)},t.prototype.deleteFromDocument=function(){if(this.rangeCount){var e=this.getAllRanges();if(e.length){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}}},t.prototype.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t},t.prototype.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},t.prototype.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},t.prototype.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(o){n.push(o[e].apply(o,t||[]))})),n},t.prototype.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},t.prototype.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},t.prototype.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},t.prototype.moveToBookmark=function(e){for(var t,n,o=[],r=0;t=e.rangeBookmarks[r++];)(n=so(this.win)).moveToBookmark(t),o.push(n);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},t.prototype.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},t.prototype.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},t.prototype.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(Qn.toHtml(t))})),e.join("")},t.inspect=function(e){var t=[],n=new $t(e.anchorNode,e.anchorOffset),o=new $t(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var s=0,i=e.rangeCount;s<i;++s)t[s]=Qn.inspect(e.getRangeAt(s));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"},t.prototype.getName=function(){return"WrappedSelection"},t.prototype.inspect=function(){return t.inspect(this)},t.prototype.detach=function(){ko(this.win,"delete"),Ao(this)},t.detachAll=function(){ko(null,"deleteAll")},t}(e),t.isDirectionBackward=uo,t}var Bo=Po(Do),Mo=Bo;function Lo(e){e||(e=window),void 0===e.getSelection&&(e.getSelection=function(){return Io(e)})}function Ho(e){io(e=e||window),Lo(e)}e.DOMException=ht,e.DomRange=Qn,e.Module=ft,e.RangeBase=bn,e.Selection=Mo,e.WrappedRange=no,e.WrappedSelection=Bo,e.config=tt,e.createNativeRange=ro,e.createPrototypeRange=Jn,e.createRange=so,e.createRangyRange=Xn,e.dom=Ut,e.features=et,e.getNativeSelection=ho,e.getRangeDocument=gn,e.getSelection=Io,e.isBrowser=Ze,e.isSelectionValid=go,e.onDocReady=nt,e.rangesEqual=zn,e.shim=Ho,e.shimCreateRange=io,e.shimGetSelection=Lo,e.util=dt,e.version=Xe,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"./node_modules/rangy2/esm5/DOMException.js":(e,t,n)=>{"use strict";function o(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}n.r(t),n.d(t,{DOMException:()=>o}),o.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},o.prototype.toString=function(){return this.message}},"./node_modules/rangy2/esm5/api.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{version:()=>r,isBrowser:()=>s,features:()=>i,config:()=>a,onDocReady:()=>c});var o="undefined",r="%%build:version%%",s=typeof window!=o&&typeof document!=o;s||console.log("Rangy can only run in a browser");var i={implementsDomRange:!0,implementsTextRange:!1,htmlParsingConforms:!0,crashyTextNodes:!1,implementsWinGetSelection:!0,implementsDocSelection:!1,selectionSupportsMultipleRanges:!1,implementsControlRange:!1},a={preferTextRange:!1,checkSelectionRanges:!0};function c(e){if(s)if("complete"==document.readyState)e();else{var t=function(){document.removeEventListener("DOMContentLoaded",t,!1),e()};document.addEventListener("DOMContentLoaded",t,!1)}}},"./node_modules/rangy2/esm5/dom.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{getBody:()=>s.getBody,isHtmlNamespace:()=>c,parentElement:()=>l,getNodeIndex:()=>u,getNodeLength:()=>d,getCommonAncestor:()=>f,isAncestorOf:()=>h,isOrIsAncestorOf:()=>p,getClosestAncestorIn:()=>m,isCharacterDataNode:()=>g,isTextOrCommentNode:()=>y,insertAfter:()=>v,splitDataNode:()=>_,getDocument:()=>b,getWindow:()=>E,getIframeDocument:()=>w,getIframeWindow:()=>R,isWindow:()=>N,getContentDocument:()=>S,getRootContainer:()=>j,comparePoints:()=>C,inspectNode:()=>O,fragmentFromNodeChildren:()=>A,getComputedStyleProperty:()=>T,createTestElement:()=>x,removeNode:()=>k,NodeIterator:()=>I,createIterator:()=>D,DomPosition:()=>P});var o,r=n("./node_modules/rangy2/esm5/module.js"),s=n("./node_modules/rangy2/esm5/util.js"),i=new r.Module("DomUtil",[]),a="undefined";function c(e){var t;return typeof e.namespaceURI==a||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function l(e){var t=e.parentNode;return 1==t.nodeType?t:null}function u(e){for(var t=0;e=e.previousSibling;)++t;return t}function d(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function f(e,t){var n,o=[];for(n=e;n;n=n.parentNode)o.push(n);for(n=t;n;n=n.parentNode)if(o.includes(n))return n;return null}function h(e,t,n){for(var o=n?t:t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}function p(e,t){return h(e,t,!0)}function m(e,t,n){for(var o,r=n?e:e.parentNode;r;){if((o=r.parentNode)===t)return r;r=o}return null}function g(e){var t=e.nodeType;return 3==t||4==t||8==t}function y(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function v(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e}function _(e,t,n){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),v(o,e),n)for(var r,s=0;r=n[s++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>u(e)&&++r.offset;return o}function b(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=a)return e.ownerDocument;if(typeof e.document!=a)return e.document;if(e.parentNode)return b(e.parentNode);throw i.createError("getDocument: no document found for node")}function E(e){var t=b(e);if(typeof t.defaultView!=a)return t.defaultView;if(typeof t.parentWindow!=a)return t.parentWindow;throw i.createError("Cannot get a window object for node")}function w(e){if(typeof e.contentDocument!=a)return e.contentDocument;if(typeof e.contentWindow!=a)return e.contentWindow.document;throw i.createError("getIframeDocument: No Document object found for iframe element")}function R(e){if(typeof e.contentWindow!=a)return e.contentWindow;if(typeof e.contentDocument!=a)return e.contentDocument.defaultView;throw i.createError("getIframeWindow: No Window object found for iframe element")}function N(e){return e&&s.isHostMethod(e,"setTimeout")&&s.isHostObject(e,"document")}function S(e,t,n){var o,r;if(e?s.isHostProperty(e,"nodeType")?o=1==(r=e).nodeType&&"iframe"==r.tagName.toLowerCase()?w(e):b(e):N(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o}function j(e){for(var t;t=e.parentNode;)e=t;return e}function C(e,t,n,o){var r,s,a,c,l;if(e==n)return t===o?0:t<o?-1:1;if(r=m(n,e,!0))return t<=u(r)?-1:1;if(r=m(e,n,!0))return u(r)<o?-1:1;if(!(s=f(e,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((a=e===s?s:m(e,s,!0))===(c=n===s?s:m(n,s,!0)))throw i.createError("comparePoints got to case 4 and childA and childB are the same!");for(l=s.firstChild;l;){if(l===a)return-1;if(l===c)return 1;l=l.nextSibling}}function O(e){if(!e)return"[No node]";if(g(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+u(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function A(e){for(var t,n=b(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}s.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||i.fail("document missing a Node creation method"),s.isHostMethod(document,"getElementsByTagName")||i.fail("document missing getElementsByTagName method"),typeof window.getComputedStyle!=a?o=function(e,t){return E(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=a?o=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:i.fail("No means of obtaining computed style properties found");var T=o;function x(e,t,n){var o=(0,s.getBody)(e),r=e.createElement("div");r.contentEditable=""+!!n,t&&(r.innerHTML=t);var i=o.firstChild;return i?o.insertBefore(r,i):o.appendChild(r),r}function k(e){return e.parentNode.removeChild(e)}var I=function(){function e(e){this.root=e,this._next=e}return e.prototype.hasNext=function(){return!!this._next},e.prototype.next=function(){var t,n,o=e._current=this._next;if(e._current)if(t=o.firstChild)this._next=t;else{for(n=null;o!==this.root&&!(n=o.nextSibling);)o=o.parentNode;this._next=n}return e._current},e.prototype.detach=function(){e._current=this._next=this.root=null},e._current=null,e}();function D(e){return new I(e)}var P=function(){function e(e,t){this.node=e,this.offset=t}return e.prototype.equals=function(e){return!!e&&this.node===e.node&&this.offset==e.offset},e.prototype.inspect=function(){return"[DomPosition("+O(this.node)+":"+this.offset+")]"},e.prototype.toString=function(){return this.inspect()},e}()},"./node_modules/rangy2/esm5/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{config:()=>o.config,features:()=>o.features,isBrowser:()=>o.isBrowser,onDocReady:()=>o.onDocReady,version:()=>o.version,util:()=>r,Module:()=>s.Module,DOMException:()=>i.DOMException,dom:()=>a,DomRange:()=>c.DomRange,RangeBase:()=>c.RangeBase,Selection:()=>c.Selection,WrappedRange:()=>c.WrappedRange,WrappedSelection:()=>c.WrappedSelection,createNativeRange:()=>c.createNativeRange,createPrototypeRange:()=>c.createPrototypeRange,createRange:()=>c.createRange,createRangyRange:()=>c.createRangyRange,getNativeSelection:()=>c.getNativeSelection,getRangeDocument:()=>c.getRangeDocument,getSelection:()=>c.getSelection,isSelectionValid:()=>c.isSelectionValid,rangesEqual:()=>c.rangesEqual,shimCreateRange:()=>c.shimCreateRange,shimGetSelection:()=>c.shimGetSelection,shim:()=>l});n("./node_modules/core-js/features/array/includes.js"),n("./node_modules/core-js/features/object/assign.js");var o=n("./node_modules/rangy2/esm5/api.js"),r=n("./node_modules/rangy2/esm5/util.js"),s=n("./node_modules/rangy2/esm5/module.js"),i=n("./node_modules/rangy2/esm5/DOMException.js"),a=n("./node_modules/rangy2/esm5/dom.js"),c=n("./node_modules/rangy2/esm5/internal/index.js");function l(e){e=e||window,(0,c.shimCreateRange)(e),(0,c.shimGetSelection)(e)}},"./node_modules/rangy2/esm5/internal/_.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DomRange:()=>o.DomRange,RangeBase:()=>o.RangeBase,createPrototypeRange:()=>o.createPrototypeRange,createRangyRange:()=>o.createRangyRange,getRangeDocument:()=>o.getRangeDocument,rangeProperties:()=>o.rangeProperties,rangesEqual:()=>o.rangesEqual,WrappedRange:()=>r.WrappedRange,createNativeRange:()=>r.createNativeRange,createRange:()=>r.createRange,shimCreateRange:()=>r.shimCreateRange,Selection:()=>s.Selection,WrappedSelBase:()=>s.WrappedSelBase,WrappedSelection:()=>s.WrappedSelection,getNativeSelection:()=>s.getNativeSelection,getSelection:()=>s.getSelection,isSelectionValid:()=>s.isSelectionValid,shimGetSelection:()=>s.shimGetSelection});var o=n("./node_modules/rangy2/esm5/internal/domrange/index.js"),r=n("./node_modules/rangy2/esm5/internal/wrappedrange.js"),s=n("./node_modules/rangy2/esm5/internal/wrappedselection.js")},"./node_modules/rangy2/esm5/internal/domrange/RangeIterator.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{RangeIterator:()=>i,cloneSubtree:()=>a,iterateSubtree:()=>c,deleteSubtree:()=>l,extractSubtree:()=>u});var o=n("./node_modules/rangy2/esm5/DOMException.js"),r=n("./node_modules/rangy2/esm5/dom.js"),s=n("./node_modules/rangy2/esm5/internal/domrange/_.js"),i=function(){function e(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,this._current=null,this._next=null,this._first=null,this._last=null,this.isSingleCharacterDataNode=!1,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&(0,r.isCharacterDataNode)(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||(0,r.isCharacterDataNode)(this.sc)?(0,r.getClosestAncestorIn)(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||(0,r.isCharacterDataNode)(this.ec)?(0,r.getClosestAncestorIn)(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}return e.prototype.reset=function(){this._current=null,this._next=this._first},e.prototype.hasNext=function(){return!!this._next},e.prototype.detach=function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null},e.prototype.next=function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,(0,r.isCharacterDataNode)(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},e.prototype.remove=function(){var e,t,n=this._current;!(0,r.isCharacterDataNode)(n)||n!==this.sc&&n!==this.ec?n.parentNode&&(0,r.removeNode)(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},e.prototype.isPartiallySelectedSubtree=function(){var e=this._current;return(0,s.isNonTextPartiallySelected)(e,this.range)},e.prototype.getSubtreeIterator=function(){var t;if(this.isSingleCharacterDataNode)(t=this.range.cloneRange()).collapse(!1);else{t=new s.DomRange((0,s.getRangeDocument)(this.range));var n=this._current,o=n,i=0,a=n,c=(0,r.getNodeLength)(n);(0,r.isOrIsAncestorOf)(n,this.sc)&&(o=this.sc,i=this.so),(0,r.isOrIsAncestorOf)(n,this.ec)&&(a=this.ec,c=this.eo),(0,s.updateBoundaries)(t,o,i,a,c)}return new e(t,this.clonePartiallySelectedTextNodes)},e}();function a(e){for(var t,n,r,i=(0,s.getRangeDocument)(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(r=e.getSubtreeIterator(),n.appendChild(a(r)),r.detach()),10==n.nodeType)throw new o.DOMException("HIERARCHY_REQUEST_ERR");i.appendChild(n)}return i}function c(e,t,n){var o,s,i,a;for(void 0===n&&(n={stop:!1});i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i))return void(n.stop=!0);if(c(a=e.getSubtreeIterator(),t,n),a.detach(),n.stop)return}else for(o=r.createIterator(i);s=o.next();)if(!1===t(s))return void(n.stop=!0)}function l(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(l(t=e.getSubtreeIterator()),t.detach()):e.remove()}function u(e){for(var t,n,r=(0,s.getRangeDocument)(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(u(n)),n.detach()):e.remove(),10==t.nodeType)throw new o.DOMException("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}},"./node_modules/rangy2/esm5/internal/domrange/_.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DomRangeBase:()=>o.DomRangeBase,RangeBase:()=>o.RangeBase,assertNoDocTypeNotationEntityAncestor:()=>o.assertNoDocTypeNotationEntityAncestor,assertNode:()=>o.assertNode,assertNodeNotReadOnly:()=>o.assertNodeNotReadOnly,assertRangeValid:()=>o.assertRangeValid,assertSameDocumentOrFragment:()=>o.assertSameDocumentOrFragment,assertValidNodeType:()=>o.assertValidNodeType,assertValidOffset:()=>o.assertValidOffset,beforeAfterNodeTypes:()=>o.beforeAfterNodeTypes,getElementAncestor:()=>o.getElementAncestor,getRangeDocument:()=>o.getRangeDocument,insertableNodeTypes:()=>o.insertableNodeTypes,isNonTextPartiallySelected:()=>o.isNonTextPartiallySelected,isRangeValid:()=>o.isRangeValid,rangeProperties:()=>o.rangeProperties,rootContainerNodeTypes:()=>o.rootContainerNodeTypes,surroundNodeTypes:()=>o.surroundNodeTypes,updateBoundaries:()=>o.updateBoundaries,RangeIterator:()=>r.RangeIterator,cloneSubtree:()=>r.cloneSubtree,deleteSubtree:()=>r.deleteSubtree,extractSubtree:()=>r.extractSubtree,iterateSubtree:()=>r.iterateSubtree,comparisonConstants:()=>s.comparisonConstants,copyComparisonConstants:()=>s.copyComparisonConstants,createDomRangeP1:()=>s.createDomRangeP1,rangeInspect:()=>s.rangeInspect,rangeToHtml:()=>s.rangeToHtml,rangesEqual:()=>s.rangesEqual,DomRange:()=>i.DomRange,createPrototypeRange:()=>i.createPrototypeRange,createRangyRange:()=>i.createRangyRange});var o=n("./node_modules/rangy2/esm5/internal/domrange/util.js"),r=n("./node_modules/rangy2/esm5/internal/domrange/RangeIterator.js"),s=n("./node_modules/rangy2/esm5/internal/domrange/part1.js"),i=n("./node_modules/rangy2/esm5/internal/domrange/part2.js")},"./node_modules/rangy2/esm5/internal/domrange/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{rangeProperties:()=>o.rangeProperties,RangeBase:()=>o.RangeBase,rangesEqual:()=>o.rangesEqual,getRangeDocument:()=>o.getRangeDocument,createPrototypeRange:()=>o.createPrototypeRange,DomRange:()=>o.DomRange,createRangyRange:()=>o.createRangyRange});var o=n("./node_modules/rangy2/esm5/internal/domrange/_.js")},"./node_modules/rangy2/esm5/internal/domrange/part1.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{rangeInspect:()=>u,rangeToHtml:()=>d,comparisonConstants:()=>f,copyComparisonConstants:()=>h,createDomRangeP1:()=>p,rangesEqual:()=>m});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/DOMException.js"),s=n("./node_modules/rangy2/esm5/dom.js"),i=n("./node_modules/rangy2/esm5/internal/domrange/_.js"),a=n("./node_modules/rangy2/esm5/internal/_.js");function c(e,t,n){var o=11==e.nodeType?e.firstChild:e;return(0,s.isCharacterDataNode)(t)?n==t.length?s.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:(0,s.splitDataNode)(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),o}function l(e,t,n){if((0,i.assertRangeValid)(e),(0,i.assertRangeValid)(t),(0,i.getRangeDocument)(t)!=(0,i.getRangeDocument)(e))throw new r.DOMException("WRONG_DOCUMENT_ERR");var o=(0,s.comparePoints)(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=(0,s.comparePoints)(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&a>=0:o<0&&a>0}function u(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+s.inspectNode(e.startContainer)+":"+e.startOffset+", "+s.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function d(e){(0,i.assertRangeValid)(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var f={START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,NODE_BEFORE:0,NODE_AFTER:1,NODE_BEFORE_AND_AFTER:2,NODE_INSIDE:3};function h(e){Object.assign(e,f),Object.assign(e.prototype,f)}function p(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.compareBoundaryPoints=function(e,t){var n,o,r,a;(0,i.assertRangeValid)(this),(0,i.assertSameDocumentOrFragment)(this.startContainer,t.startContainer);var c=3==e||0==e?"start":"end",l=1==e||0==e?"start":"end";return n=this[c+"Container"],o=this[c+"Offset"],r=t[l+"Container"],a=t[l+"Offset"],(0,s.comparePoints)(n,o,r,a)},t.prototype.insertNode=function(e){if((0,i.assertRangeValid)(this),(0,i.assertValidNodeType)(e,i.insertableNodeTypes),(0,i.assertNodeNotReadOnly)(this.startContainer),(0,s.isOrIsAncestorOf)(e,this.startContainer))throw new r.DOMException("HIERARCHY_REQUEST_ERR");var t=c(e,this.startContainer,this.startOffset);this.setStartBefore(t)},t.prototype.cloneContents=function(){var e,t;if((0,i.assertRangeValid)(this),this.collapsed)return(0,i.getRangeDocument)(this).createDocumentFragment();if(this.startContainer===this.endContainer&&(0,s.isCharacterDataNode)(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=(0,i.getRangeDocument)(this).createDocumentFragment()).appendChild(e),t;var n=new i.RangeIterator(this,!0);return e=(0,i.cloneSubtree)(n),n.detach(),e},t.prototype.canSurroundContents=function(){(0,i.assertRangeValid)(this),(0,i.assertNodeNotReadOnly)(this.startContainer),(0,i.assertNodeNotReadOnly)(this.endContainer);var e=new i.RangeIterator(this,!0),t=e._first&&(0,i.isNonTextPartiallySelected)(e._first,this)||e._last&&(0,i.isNonTextPartiallySelected)(e._last,this);return e.detach(),!t},t.prototype.surroundContents=function(e){if((0,i.assertValidNodeType)(e,i.surroundNodeTypes),!this.canSurroundContents())throw new r.DOMException("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);c(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},t.prototype.cloneRange=function(){(0,i.assertRangeValid)(this);for(var e=new i.DomRange((0,i.getRangeDocument)(this)),t=0,n=i.rangeProperties;t<n.length;t++){var o=n[t];e[o]=this[o]}return e},t.prototype.toString=function(){(0,i.assertRangeValid)(this);var e=this.startContainer;if(e===this.endContainer&&(0,s.isCharacterDataNode)(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new i.RangeIterator(this,!0);return(0,i.iterateSubtree)(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},t.prototype.compareNode=function(e){(0,i.assertRangeValid)(this);var t=e.parentNode,n=(0,s.getNodeIndex)(e);if(!t)throw new r.DOMException("NOT_FOUND_ERR");var o=this.comparePoint(t,n),a=this.comparePoint(t,n+1);return o<0?a>0?2:0:a>0?1:3},t.prototype.comparePoint=function(e,t){return(0,i.assertRangeValid)(this),(0,i.assertNode)(e,"HIERARCHY_REQUEST_ERR"),(0,i.assertSameDocumentOrFragment)(e,this.startContainer),(0,s.comparePoints)(e,t,this.startContainer,this.startOffset)<0?-1:(0,s.comparePoints)(e,t,this.endContainer,this.endOffset)>0?1:0},t.prototype.createContextualFragment=function(e){var t=this.startContainer,n=(0,s.getDocument)(t);if(!t)throw new r.DOMException("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:(0,s.isCharacterDataNode)(t)&&(o=s.parentElement(t)),(o=null===o||"HTML"==o.nodeName&&s.isHtmlNamespace((0,s.getDocument)(o).documentElement)&&s.isHtmlNamespace(o)?n.createElement("body"):o.cloneNode(!1)).innerHTML=e,s.fragmentFromNodeChildren(o)},t.prototype.toHtml=function(){return d(this)},t.prototype.intersectsNode=function(e,t){if((0,i.assertRangeValid)(this),(0,s.getRootContainer)(e)!=(n=this,(0,s.getRootContainer)(n.startContainer)))return!1;var n,o=e.parentNode,r=(0,s.getNodeIndex)(e);if(!o)return!0;var a=(0,s.comparePoints)(o,r,this.endContainer,this.endOffset),c=(0,s.comparePoints)(o,r+1,this.startContainer,this.startOffset);return t?a<=0&&c>=0:a<0&&c>0},t.prototype.isPointInRange=function(e,t){return(0,i.assertRangeValid)(this),(0,i.assertNode)(e,"HIERARCHY_REQUEST_ERR"),(0,i.assertSameDocumentOrFragment)(e,this.startContainer),(0,s.comparePoints)(e,t,this.startContainer,this.startOffset)>=0&&(0,s.comparePoints)(e,t,this.endContainer,this.endOffset)<=0},t.prototype.intersectsRange=function(e){return l(this,e,!1)},t.prototype.intersectsOrTouchesRange=function(e){return l(this,e,!0)},t.prototype.intersection=function(e){if(this.intersectsRange(e)){var t=(0,s.comparePoints)(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=(0,s.comparePoints)(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();return-1==t&&o.setStart(e.startContainer,e.startOffset),1==n&&o.setEnd(e.endContainer,e.endOffset),o}return null},t.prototype.union=function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==(0,s.comparePoints)(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==(0,s.comparePoints)(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new r.DOMException("Ranges do not intersect")},t.prototype.containsNode=function(e,t){return t?this.intersectsNode(e,!1):3==this.compareNode(e)},t.prototype.containsNodeContents=function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,(0,s.getNodeLength)(e))<=0},t.prototype.containsRange=function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},t.prototype.containsNodeText=function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var o=n.pop();return t.setEnd(o,o.length),this.containsRange(t)}return this.containsNodeContents(e)},t.prototype.getNodes=function(e,t){return(0,i.assertRangeValid)(this),function(e,t,n){var o,r=!(!t||!t.length),a=!!n;r&&(o=new RegExp("^("+t.join("|")+")$"));var c=[];return(0,i.iterateSubtree)(new i.RangeIterator(e,!1),(function(t){if((!r||o.test(t.nodeType.toString()))&&(!a||n(t))){var i=e.startContainer;if(t!=i||!(0,s.isCharacterDataNode)(i)||e.startOffset!=i.length){var l=e.endContainer;t==l&&(0,s.isCharacterDataNode)(l)&&0==e.endOffset||c.push(t)}}})),c}(this,e,t)},t.prototype.getDocument=function(){return(0,i.getRangeDocument)(this)},t.prototype.collapseBefore=function(e){this.setEndBefore(e),this.collapse(!1)},t.prototype.collapseAfter=function(e){this.setStartAfter(e),this.collapse(!0)},t.prototype.getBookmark=function(e){var t=(0,i.getRangeDocument)(this),n=(0,a.createRange)(t);e=e||s.getBody(t),n.selectNodeContents(e);var o=this.intersection(n),r=0,c=0;return o&&(n.setEnd(o.startContainer,o.startOffset),c=(r=n.toString().length)+o.toString().length),{start:r,end:c,containerNode:e}},t.prototype.moveToBookmark=function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var o,r,s,i,a=[t],c=!1,l=!1;!l&&(o=a.pop());)if(3==o.nodeType)r=n+o.length,!c&&e.start>=n&&e.start<=r&&(this.setStart(o,e.start-n),c=!0),c&&e.end>=n&&e.end<=r&&(this.setEnd(o,e.end-n),l=!0),n=r;else for(s=(i=o.childNodes).length;s--;)a.push(i[s])},t.prototype.getName=function(){return"DomRange"},t.prototype.equals=function(e){return m(this,e)},t.prototype.isValid=function(){return(0,i.isRangeValid)(this)},t.prototype.inspect=function(){return u(this)},t.prototype.detach=function(){},t.prototype.select=function(e){(0,a.getSelection)(this.getDocument()).setSingleRange(this,e)},t}(e)}function m(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},"./node_modules/rangy2/esm5/internal/domrange/part2.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{createPrototypeRange:()=>f,DomRange:()=>h,createRangyRange:()=>p});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/module.js"),s=n("./node_modules/rangy2/esm5/dom.js"),i=n("./node_modules/rangy2/esm5/internal/domrange/_.js"),a=new r.Module("DomRange",["DomUtil"]);function c(e){return new s.DomPosition(e.parentNode,(0,s.getNodeIndex)(e))}function l(e){return new s.DomPosition(e.parentNode,(0,s.getNodeIndex)(e)+1)}function u(e,t){(0,i.assertRangeValid)(e);var n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset,c=n===r;(0,s.isCharacterDataNode)(r)&&a>0&&a<r.length&&(0,s.splitDataNode)(r,a,t),(0,s.isCharacterDataNode)(n)&&o>0&&o<n.length&&(n=(0,s.splitDataNode)(n,o,t),c?(a-=o,r=n):r==n.parentNode&&a>=(0,s.getNodeIndex)(n)&&a++,o=0),e.setStartAndEnd(n,o,r,a)}function d(e,t){return function(){(0,i.assertRangeValid)(this);var n,o=this.startContainer,r=this.startOffset,a=this.commonAncestorContainer,c=new i.RangeIterator(this,!0);o!==a&&(o=(n=l((0,s.getClosestAncestorIn)(o,a,!0))).node,r=n.offset),(0,i.iterateSubtree)(c,i.assertNodeNotReadOnly),c.reset();var u=e(c);return c.detach(),t(this,o,r,o,r),u}}function f(e,t){var n=e,r=(0,i.createDomRangeP1)(n);Object.assign(r.prototype,i.comparisonConstants);var a=function(e,t){function n(e,t){return function(n){(0,i.assertValidNodeType)(n,i.beforeAfterNodeTypes),(0,i.assertValidNodeType)((0,s.getRootContainer)(n),i.rootContainerNodeTypes);var o=(e?c:l)(n);(t?r:a)(this,o.node,o.offset)}}function r(e,n,o){var r=e.endContainer,i=e.endOffset;n===e.startContainer&&o===e.startOffset||((0,s.getRootContainer)(n)==(0,s.getRootContainer)(r)&&1!=(0,s.comparePoints)(n,o,r,i)||(r=n,i=o),t(e,n,o,r,i))}function a(e,n,o){var r=e.startContainer,i=e.startOffset;n===e.endContainer&&o===e.endOffset||((0,s.getRootContainer)(n)==(0,s.getRootContainer)(r)&&-1!=(0,s.comparePoints)(n,o,r,i)||(r=n,i=o),t(e,r,i,n,o))}return function(e){function f(){var o=null!==e&&e.apply(this,arguments)||this;return o.setStartBefore=n(!0,!0),o.setStartAfter=n(!1,!0),o.setEndBefore=n(!0,!1),o.setEndAfter=n(!1,!1),o.extractContents=d(i.extractSubtree,t),o.deleteContents=d(i.deleteSubtree,t),o}return o.__extends(f,e),f.prototype.setStart=function(e,t){(0,i.assertNoDocTypeNotationEntityAncestor)(e,!0),(0,i.assertValidOffset)(e,t),r(this,e,t)},f.prototype.setEnd=function(e,t){(0,i.assertNoDocTypeNotationEntityAncestor)(e,!0),(0,i.assertValidOffset)(e,t),a(this,e,t)},f.prototype.setStartAndEnd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e[0],r=e[1],s=o,a=r;switch(e.length){case 3:a=e[2];break;case 4:s=e[2],a=e[3]}(0,i.assertNoDocTypeNotationEntityAncestor)(o,!0),(0,i.assertValidOffset)(o,r),(0,i.assertNoDocTypeNotationEntityAncestor)(s,!0),(0,i.assertValidOffset)(s,a),t(this,o,r,s,a)},f.prototype.setBoundary=function(e,t,n){this["set"+(n?"Start":"End")](e,t)},f.prototype.collapse=function(e){(0,i.assertRangeValid)(this),e?t(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):t(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},f.prototype.selectNodeContents=function(e){(0,i.assertNoDocTypeNotationEntityAncestor)(e,!0),t(this,e,0,e,(0,s.getNodeLength)(e))},f.prototype.selectNode=function(e){(0,i.assertNoDocTypeNotationEntityAncestor)(e,!1),(0,i.assertValidNodeType)(e,i.beforeAfterNodeTypes);var n=c(e),o=l(e);t(this,n.node,n.offset,o.node,o.offset)},f.prototype.splitBoundaries=function(){u(this)},f.prototype.splitBoundariesPreservingPositions=function(e){u(this,e)},f.prototype.normalizeBoundaries=function(){(0,i.assertRangeValid)(this);var e,n=this.startContainer,o=this.startOffset,r=this.endContainer,a=this.endOffset,c=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(r=e,a=e.length,e.appendData(t.data),(0,s.removeNode)(t))},l=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){n=e;var i=e.length;if(o=t.length,e.insertData(0,t.data),(0,s.removeNode)(t),n==r)a+=o,r=n;else if(r==e.parentNode){var c=(0,s.getNodeIndex)(e);a==c?(r=e,a=i):a>c&&a--}}},u=!0;if((0,s.isCharacterDataNode)(r))a==r.length?c(r):0==a&&(e=r.previousSibling)&&e.nodeType==r.nodeType&&(a=e.length,n==r&&(u=!1),e.appendData(r.data),(0,s.removeNode)(r),r=e);else{if(a>0){var d=r.childNodes[a-1];d&&(0,s.isCharacterDataNode)(d)&&c(d)}u=!this.collapsed}if(u){if((0,s.isCharacterDataNode)(n))0==o?l(n):o==n.length&&(e=n.nextSibling)&&e.nodeType==n.nodeType&&(r==e&&(r=n,a+=n.length),n.appendData(e.data),(0,s.removeNode)(e));else if(o<n.childNodes.length){var f=n.childNodes[o];f&&(0,s.isCharacterDataNode)(f)&&l(f)}}else n=r,o=a;t(this,n,o,r,a)},f.prototype.collapseToPoint=function(e,t){(0,i.assertNoDocTypeNotationEntityAncestor)(e,!0),(0,i.assertValidOffset)(e,t),this.setStartAndEnd(e,t)},f.prototype.parentElement=function(){return(0,i.assertRangeValid)(this),(0,i.getElementAncestor)(this.commonAncestorContainer,!0)},f}(e)}(r,t);return Object.assign(a,i.comparisonConstants)}var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.inspect=i.rangeInspect,t.toHtml=i.rangeToHtml,t.getRangeDocument=i.getRangeDocument,t.rangesEqual=i.rangesEqual,t}(f(i.DomRangeBase,i.updateBoundaries));function p(e){return e=(0,s.getContentDocument)(e,a,"createRangyRange"),new h(e)}Object.assign(h,{rangeProperties:i.rangeProperties,RangeIterator:i.RangeIterator,copyComparisonConstants:i.copyComparisonConstants,createPrototypeRange:f})},"./node_modules/rangy2/esm5/internal/domrange/util.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{isNonTextPartiallySelected:()=>i,beforeAfterNodeTypes:()=>a,rootContainerNodeTypes:()=>c,insertableNodeTypes:()=>l,surroundNodeTypes:()=>u,getElementAncestor:()=>m,assertNoDocTypeNotationEntityAncestor:()=>g,assertValidNodeType:()=>y,assertValidOffset:()=>v,assertSameDocumentOrFragment:()=>_,assertNodeNotReadOnly:()=>b,assertNode:()=>E,isRangeValid:()=>R,assertRangeValid:()=>N,getRangeDocument:()=>S,updateBoundaries:()=>j,rangeProperties:()=>C,RangeBase:()=>O,DomRangeBase:()=>A});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/DOMException.js"),s=n("./node_modules/rangy2/esm5/dom.js");function i(e,t){return 3!=e.nodeType&&((0,s.isOrIsAncestorOf)(e,t.startContainer)||(0,s.isOrIsAncestorOf)(e,t.endContainer))}var a=[1,3,4,5,7,8,10],c=[2,9,11],l=[1,3,4,5,7,8,10,11],u=[1,3,4,5,7,8];function d(e){return function(t,n){for(var o,r=n?t:t.parentNode;r;){if(o=r.nodeType,e.includes(o))return r;r=r.parentNode}return null}}var f=d([9,11]),h=d([5,6,10,12]),p=d([6,10,12]),m=d([1]);function g(e,t){if(p(e,t))throw new r.DOMException("INVALID_NODE_TYPE_ERR")}function y(e,t){if(!t.includes(e.nodeType))throw new r.DOMException("INVALID_NODE_TYPE_ERR")}function v(e,t){if(t<0||t>((0,s.isCharacterDataNode)(e)?e.length:e.childNodes.length))throw new r.DOMException("INDEX_SIZE_ERR")}function _(e,t){if(f(e,!0)!==f(t,!0))throw new r.DOMException("WRONG_DOCUMENT_ERR")}function b(e){if(h(e,!0))throw new r.DOMException("NO_MODIFICATION_ALLOWED_ERR")}function E(e,t){if(!e)throw new r.DOMException(t)}function w(e,t){return t<=((0,s.isCharacterDataNode)(e)?e.length:e.childNodes.length)}function R(e){return!!e.startContainer&&!!e.endContainer&&(0,s.getRootContainer)(e.startContainer)==(0,s.getRootContainer)(e.endContainer)&&w(e.startContainer,e.startOffset)&&w(e.endContainer,e.endOffset)}function N(e){if(!R(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function S(e){return e.document||(0,s.getDocument)(e.startContainer)}function j(e,t,n,o,r){e.startContainer=t,e.startOffset=n,e.endContainer=o,e.endOffset=r,e.document=s.getDocument(t),function(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:s.getCommonAncestor(e.startContainer,e.endContainer)}(e)}var C=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],O=function(){},A=function(e){function t(t){var n=e.call(this)||this;return j(n,t,0,t,0),n}return o.__extends(t,e),t}(O)},"./node_modules/rangy2/esm5/internal/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{RangeBase:()=>o.RangeBase,rangesEqual:()=>o.rangesEqual,getRangeDocument:()=>o.getRangeDocument,createPrototypeRange:()=>o.createPrototypeRange,DomRange:()=>o.DomRange,createRangyRange:()=>o.createRangyRange,WrappedRange:()=>o.WrappedRange,createNativeRange:()=>o.createNativeRange,createRange:()=>o.createRange,shimCreateRange:()=>o.shimCreateRange,getNativeSelection:()=>o.getNativeSelection,isSelectionValid:()=>o.isSelectionValid,getSelection:()=>o.getSelection,Selection:()=>o.Selection,WrappedSelection:()=>o.WrappedSelection,shimGetSelection:()=>o.shimGetSelection});var o=n("./node_modules/rangy2/esm5/internal/_.js")},"./node_modules/rangy2/esm5/internal/wrappedrange.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WrappedRange:()=>d,createNativeRange:()=>f,createRange:()=>h,shimCreateRange:()=>p});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/util.js"),s=n("./node_modules/rangy2/esm5/api.js"),i=n("./node_modules/rangy2/esm5/module.js"),a=n("./node_modules/rangy2/esm5/dom.js"),c=n("./node_modules/rangy2/esm5/internal/_.js"),l=new i.Module("WrappedRange",["DomRange"]);function u(e){for(var t=0,n=c.rangeProperties;t<n.length;t++){var o=n[t];e[o]=e.nativeRange[o]}e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}var d=function(e){function t(n){var o=e.call(this)||this;if(o.nativeRange=n,o.setStartBefore=t.createBeforeAfterNodeSetter("setStartBefore"),o.setStartAfter=t.createBeforeAfterNodeSetter("setStartAfter"),o.setEndBefore=t.createBeforeAfterNodeSetter("setEndBefore"),o.setEndAfter=t.createBeforeAfterNodeSetter("setEndAfter"),!n)throw l.createError("WrappedRange: Range must be specified");return u(o),o}return o.__extends(t,e),t.prototype.selectNode=function(e){this.nativeRange.selectNode(e),u(this)},t.prototype.cloneContents=function(){return this.nativeRange.cloneContents()},t.prototype.surroundContents=function(e){this.nativeRange.surroundContents(e),u(this)},t.prototype.collapse=function(e){this.nativeRange.collapse(e),u(this)},t.prototype.cloneRange=function(){return new t(this.nativeRange.cloneRange())},t.prototype.refresh=function(){u(this)},t.prototype.toString=function(){return this.nativeRange.toString()},t.prototype.setStart=function(e,t){this.nativeRange.setStart(e,t),u(this)},t.prototype.setEnd=function(e,t){this.nativeRange.setEnd(e,t),u(this)},t.createBeforeAfterNodeSetter=function(e){return function(t){this.nativeRange[e](t),u(this)}},t.prototype.selectNodeContents=function(e){this.setStartAndEnd(e,0,(0,a.getNodeLength)(e))},t.prototype.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},t.prototype.getName=function(){return"WrappedRange"},t}((0,c.createPrototypeRange)(c.RangeBase,(function(e,t,n,o,r){var s=e.startContainer!==t||e.startOffset!=n,i=e.endContainer!==o||e.endOffset!=r,a=!e.equals(e.nativeRange);(s||i||a)&&(e.setEnd(o,r),e.setStart(t,n))})));function f(e){return(e=(0,a.getContentDocument)(e,l,"createNativeRange")).createRange()}function h(e){return e=(0,a.getContentDocument)(e,l,"createRange"),new d(f(e))}function p(e){e||(e=window);var t=e.document;void 0===t.createRange&&(t.createRange=function(){return h(t)})}(0,s.onDocReady)((function(){var e=document.createTextNode("test");(0,a.getBody)(document).appendChild(e);var t=document.createRange(),n=document.createElement("div");n.innerHTML="123";var o=n.firstChild,s=(0,a.getBody)(document);s.appendChild(n),t.setStart(o,1),t.setEnd(o,2),t.deleteContents();var i=d.prototype;"13"==o.data&&(i.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return u(this),e}),s.removeChild(n),(0,r.isHostMethod)(t,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),s.removeChild(e),s=null}))},"./node_modules/rangy2/esm5/internal/wrappedselection.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{getNativeSelection:()=>m,isSelectionValid:()=>y,getSelection:()=>I,WrappedSelBase:()=>D,WrappedSelection:()=>P,Selection:()=>B,shimGetSelection:()=>M});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/module.js"),s=n("./node_modules/rangy2/esm5/api.js"),i=n("./node_modules/rangy2/esm5/DOMException.js"),a=n("./node_modules/rangy2/esm5/util.js"),c=n("./node_modules/rangy2/esm5/dom.js"),l=n("./node_modules/rangy2/esm5/internal/_.js"),u=new r.Module("WrappedSelection",["DomRange","WrappedRange"]),d="boolean",f="number";function h(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function p(e,t){if(e){if(c.isWindow(e))return e;if(e instanceof P)return e.win;var n=c.getContentDocument(e,u,t);return c.getWindow(n)}return window}function m(e){return p(e,"getWinSelection").getSelection()}var g=function(e){var t=!1;return e.anchorNode&&(t=1==c.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t};function y(){return!0}var v=m();v||u.fail("Native selection was null (possibly issue 138?)");var _,b=(0,l.createNativeRange)(document),E=s.features.selectionHasAnchorAndFocus=a.areHostProperties(v,["anchorNode","focusNode","anchorOffset","focusOffset"]),w=s.features.selectionHasExtend=(0,a.isHostMethod)(v,"extend"),R=s.features.selectionHasRangeCount=typeof v.rangeCount==f,N=w?function(e,t){var n=l.DomRange.getRangeDocument(t),o=(0,l.createRange)(n);o.collapseToPoint(t.endContainer,t.endOffset),e.addRange(O(o)),e.extend(t.startContainer,t.startOffset)}:null,S=E?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};function j(e,t,n){var o=n?"end":"start",r=n?"start":"end";e.anchorNode=t[o+"Container"],e.anchorOffset=t[o+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function C(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function O(e){var t;return e instanceof l.DomRange?((t=(0,l.createNativeRange)(e.getDocument())).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset)):e instanceof l.WrappedRange?t=e.nativeRange:e instanceof Range&&(t=e),t}function A(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}(0,a.isHostMethod)(v,"getRangeAt")?_=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:E&&(_=function(e){var t=(0,c.getDocument)(e.anchorNode),n=(0,l.createRange)(t);return n.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&n.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),n});var T,x=[];function k(e,t){for(var n,o,r=x.length;r--;)if(o=(n=x[r]).selection,"deleteAll"==t)A(o);else if(n.win==e)return"delete"==t?(x.splice(r,1),!0):o;return"deleteAll"==t&&(x.length=0),null}function I(e){if(e&&e instanceof P)return e.refresh(),e;var t=k(e=p(e,"getNativeSelection")),n=m(e);return t?(t.nativeSelection=n,t.refresh()):(t=new P(n,e),x.push({win:e,selection:t})),t}(0,a.isHostMethod)(v,"getRangeAt")&&typeof v.rangeCount==f?T=function(e){if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new l.WrappedRange(e.nativeSelection.getRangeAt(t));j(e,e._ranges[e.rangeCount-1],g(e.nativeSelection)),e.isCollapsed=S(e)}else C(e)}:E&&typeof v.isCollapsed==d&&typeof b.collapsed==d&&s.features.implementsDomRange?T=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=_(n,0),e._ranges=[t],e.rangeCount=1,function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}(e),e.isCollapsed=S(e)):C(e)}:u.fail("No means of obtaining a Range or TextRange from the user's selection was found");var D=function(e,t){this.nativeSelection=e,this.win=t,this._ranges=[],3==arguments.length&&(this.win=arguments[2]),this.refresh()};var P=function(e){var t;function n(e,t){N(e.nativeSelection,t),e.refresh()}var r=R?function(e,t){if(h(t)&&w)n(this,e);else{var o;s.features.selectionSupportsMultipleRanges?o=this.rangeCount:(this.removeAllRanges(),o=0);var r=O(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(s.config.checkSelectionRanges){var i=_(this.nativeSelection,this.rangeCount-1);i&&!(0,l.rangesEqual)(i,e)&&(e=new l.WrappedRange(i))}this._ranges[this.rangeCount-1]=e,j(this,e,g(this.nativeSelection)),this.isCollapsed=S(this)}else this.refresh()}}:function(e,t){h(t)&&w?n(this,e):(this.nativeSelection.addRange(O(e)),this.refresh())};function a(e,t){if(e.win.document!=(0,c.getDocument)(t))throw new i.DOMException("WRONG_DOCUMENT_ERR")}function u(e){return function(t,n){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(e?"Start":"End")](t,n):(o=(0,l.createRange)(this.win.document)).setStartAndEnd(t,n),this.setSingleRange(o,this.isBackward())}}return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addRange=r,t.isBackwards=t.isBackward,t.setStart=u(!0),t.setEnd=u(!1),t}return o.__extends(t,e),t.prototype.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),C(this)},t.prototype.setRanges=function(e){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])},t.prototype.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new i.DOMException("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},t.prototype.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(T(this),e){var r=t.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;for(;r--;)if(!(0,l.rangesEqual)(t[r],this._ranges[r]))return!0;return!1}},t.prototype.removeRange=function(e){!function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)(0,l.rangesEqual)(t,n[o])||e.addRange(n[o]);e.rangeCount||C(e)}(this,e)},t.prototype.isBackward=function(){return g(this)},t.prototype.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},t.prototype.collapse=function(e,t){a(this,e);var n=(0,l.createRange)(e);n.collapseToPoint(e,t),this.setSingleRange(n),this.isCollapsed=!0},t.prototype.collapseToStart=function(){if(!this.rangeCount)throw new i.DOMException("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},t.prototype.collapseToEnd=function(){if(!this.rangeCount)throw new i.DOMException("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},t.prototype.selectAllChildren=function(e){a(this,e);var t=(0,l.createRange)(e);t.selectNodeContents(e),this.setSingleRange(t)},t.prototype.deleteFromDocument=function(){if(this.rangeCount){var e=this.getAllRanges();if(e.length){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}}},t.prototype.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t},t.prototype.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},t.prototype.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},t.prototype.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(o){n.push(o[e].apply(o,t||[]))})),n},t.prototype.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},t.prototype.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},t.prototype.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},t.prototype.moveToBookmark=function(e){for(var t,n,o=[],r=0;t=e.rangeBookmarks[r++];)(n=(0,l.createRange)(this.win)).moveToBookmark(t),o.push(n);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},t.prototype.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},t.prototype.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},t.prototype.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(l.DomRange.toHtml(t))})),e.join("")},t.inspect=function(e){var t=[],n=new c.DomPosition(e.anchorNode,e.anchorOffset),o=new c.DomPosition(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var s=0,i=e.rangeCount;s<i;++s)t[s]=l.DomRange.inspect(e.getRangeAt(s));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"},t.prototype.getName=function(){return"WrappedSelection"},t.prototype.inspect=function(){return t.inspect(this)},t.prototype.detach=function(){k(this.win,"delete"),A(this)},t.detachAll=function(){k(null,"deleteAll")},t}(e),t.isDirectionBackward=h,t}(D),B=P;function M(e){e||(e=window),void 0===e.getSelection&&(e.getSelection=function(){return I(e)})}},"./node_modules/rangy2/esm5/module.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Module:()=>o});var o=function(){function e(e,t){this.name=e,this.dependencies=t}return e.prototype.fail=function(e){throw console.log("Module '"+this.name+"' failed to load: "+e),new Error(e)},e.prototype.warn=function(e){console.log("Module "+this.name+": "+e)},e.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},e}()},"./node_modules/rangy2/esm5/util.js":(e,t,n)=>{"use strict";function o(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function r(e,t){return!("object"!=typeof e[t]||!e[t])}function s(e,t){return void 0!==e[t]}function i(e){return function(t,n){for(var o=n.length;o--;)if(!e(t,n[o]))return!1;return!0}}n.r(t),n.d(t,{isHostMethod:()=>o,isHostObject:()=>r,isHostProperty:()=>s,areHostMethods:()=>a,areHostObjects:()=>c,areHostProperties:()=>l,getBody:()=>u});var a=i(o),c=i(r),l=i(s);function u(e){return r(e,"body")?e.body:e.getElementsByTagName("body")[0]}},"./node_modules/split.js/dist/split.js":function(e){e.exports=function(){"use strict";var e="undefined"!=typeof window?window:null,t=null===e,n=t?void 0:e.document,o="addEventListener",r="removeEventListener",s="getBoundingClientRect",i="_a",a="_b",c="_c",l="horizontal",u=function(){return!1},d=t?"calc":["","-webkit-","-moz-","-o-"].filter((function(e){var t=n.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length})).shift()+"calc",f=function(e){return"string"==typeof e||e instanceof String},h=function(e){if(f(e)){var t=n.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},p=function(e,t,n){var o=e[t];return void 0!==o?o:n},m=function(e,t,n,o){if(t){if("end"===o)return 0;if("center"===o)return e/2}else if(n){if("start"===o)return 0;if("center"===o)return e/2}return e},g=function(e,t){var o=n.createElement("div");return o.className="gutter gutter-"+t,o},y=function(e,t,n){var o={};return f(t)?o[e]=t:o[e]=d+"("+t+"% - "+n+"px)",o},v=function(e,t){var n;return(n={})[e]=t+"px",n};return function(d,f){if(void 0===f&&(f={}),t)return{};var _,b,E,w,R,N,S=d;Array.from&&(S=Array.from(S));var j=h(S[0]).parentNode,C=getComputedStyle?getComputedStyle(j):null,O=C?C.flexDirection:null,A=p(f,"sizes")||S.map((function(){return 100/S.length})),T=p(f,"minSize",100),x=Array.isArray(T)?T:S.map((function(){return T})),k=p(f,"maxSize",1/0),I=Array.isArray(k)?k:S.map((function(){return k})),D=p(f,"expandToMin",!1),P=p(f,"gutterSize",10),B=p(f,"gutterAlign","center"),M=p(f,"snapOffset",30),L=p(f,"dragInterval",1),H=p(f,"direction",l),W=p(f,"cursor",H===l?"col-resize":"row-resize"),q=p(f,"gutter",g),F=p(f,"elementStyle",y),z=p(f,"gutterStyle",v);function V(e,t,n,o){var r=F(_,t,n,o);Object.keys(r).forEach((function(t){e.style[t]=r[t]}))}function $(e,t,n){var o=z(_,t,n);Object.keys(o).forEach((function(t){e.style[t]=o[t]}))}function U(){return N.map((function(e){return e.size}))}function G(e){return"touches"in e?e.touches[0][b]:e[b]}function K(e){var t=N[this.a],n=N[this.b],o=t.size+n.size;t.size=e/this.size*o,n.size=o-e/this.size*o,V(t.element,t.size,this[a],t.i),V(n.element,n.size,this[c],n.i)}function Y(e){var t,n=N[this.a],o=N[this.b];this.dragging&&(t=G(e)-this.start+(this[a]-this.dragOffset),L>1&&(t=Math.round(t/L)*L),t<=n.minSize+M+this[a]?t=n.minSize+this[a]:t>=this.size-(o.minSize+M+this[c])&&(t=this.size-(o.minSize+this[c])),t>=n.maxSize-M+this[a]?t=n.maxSize+this[a]:t<=this.size-(o.maxSize-M+this[c])&&(t=this.size-(o.maxSize+this[c])),K.call(this,t),p(f,"onDrag",u)(U()))}function J(){var e=N[this.a].element,t=N[this.b].element,n=e[s](),o=t[s]();this.size=n[_]+o[_]+this[a]+this[c],this.start=n[E],this.end=n[w]}function Q(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var n=e[R];return 0===n?null:n-=H===l?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}function X(e){var t=Q(j);if(null===t)return e;if(x.reduce((function(e,t){return e+t}),0)>t)return e;var n=0,o=[],r=e.map((function(r,s){var i=t*r/100,a=m(P,0===s,s===e.length-1,B),c=x[s]+a;return i<c?(n+=c-i,o.push(0),c):(o.push(i-c),i)}));return 0===n?e:r.map((function(e,r){var s=e;if(n>0&&o[r]-n>0){var i=Math.min(n,o[r]-n);n-=i,s=e-i}return s/t*100}))}function Z(){var t=this,o=N[t.a].element,s=N[t.b].element;t.dragging&&p(f,"onDragEnd",u)(U()),t.dragging=!1,e[r]("mouseup",t.stop),e[r]("touchend",t.stop),e[r]("touchcancel",t.stop),e[r]("mousemove",t.move),e[r]("touchmove",t.move),t.stop=null,t.move=null,o[r]("selectstart",u),o[r]("dragstart",u),s[r]("selectstart",u),s[r]("dragstart",u),o.style.userSelect="",o.style.webkitUserSelect="",o.style.MozUserSelect="",o.style.pointerEvents="",s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor="",n.body.style.cursor=""}function ee(t){if(!("button"in t)||0===t.button){var r=this,s=N[r.a].element,i=N[r.b].element;r.dragging||p(f,"onDragStart",u)(U()),t.preventDefault(),r.dragging=!0,r.move=Y.bind(r),r.stop=Z.bind(r),e[o]("mouseup",r.stop),e[o]("touchend",r.stop),e[o]("touchcancel",r.stop),e[o]("mousemove",r.move),e[o]("touchmove",r.move),s[o]("selectstart",u),s[o]("dragstart",u),i[o]("selectstart",u),i[o]("dragstart",u),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none",i.style.pointerEvents="none",r.gutter.style.cursor=W,r.parent.style.cursor=W,n.body.style.cursor=W,J.call(r),r.dragOffset=G(t)-r.end}}H===l?(_="width",b="clientX",E="left",w="right",R="clientWidth"):"vertical"===H&&(_="height",b="clientY",E="top",w="bottom",R="clientHeight"),A=X(A);var te=[];function ne(e){var t=e.i===te.length,n=t?te[e.i-1]:te[e.i];J.call(n);var o=t?n.size-e.minSize-n[c]:e.minSize+n[a];K.call(n,o)}function oe(e){var t=X(e);t.forEach((function(e,n){if(n>0){var o=te[n-1],r=N[o.a],s=N[o.b];r.size=t[n-1],s.size=e,V(r.element,r.size,o[a],r.i),V(s.element,s.size,o[c],s.i)}}))}function re(e,t){te.forEach((function(n){if(!0!==t?n.parent.removeChild(n.gutter):(n.gutter[r]("mousedown",n[i]),n.gutter[r]("touchstart",n[i])),!0!==e){var o=F(_,n.a.size,n[a]);Object.keys(o).forEach((function(e){N[n.a].element.style[e]="",N[n.b].element.style[e]=""}))}}))}return(N=S.map((function(e,t){var n,r={element:h(e),size:A[t],minSize:x[t],maxSize:I[t],i:t};if(t>0&&((n={a:t-1,b:t,dragging:!1,direction:H,parent:j})[a]=m(P,t-1==0,!1,B),n[c]=m(P,!1,t===S.length-1,B),"row-reverse"===O||"column-reverse"===O)){var s=n.a;n.a=n.b,n.b=s}if(t>0){var l=q(t,H,r.element);$(l,P,t),n[i]=ee.bind(n),l[o]("mousedown",n[i]),l[o]("touchstart",n[i]),j.insertBefore(l,r.element),n.gutter=l}return V(r.element,r.size,m(P,0===t,t===S.length-1,B),t),t>0&&te.push(n),r}))).forEach((function(e){var t=e.element[s]()[_];t<e.minSize&&(D?ne(e):e.minSize=t)})),{setSizes:oe,getSizes:U,collapse:function(e){ne(N[e])},destroy:re,parent:j,pairs:te}}}()},"./src/sat.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Sat:()=>a});var o=n("./node_modules/rangy2/bundles/index.umd.js"),r=n("./node_modules/rangy-classapplier/bundles/index.umd.js"),s=n("./node_modules/mark.js/dist/mark.js"),i=n.n(s);class a{constructor(e,t,n,o,r,s,i,a,f){this.updated=!1,this.removeSpan=(e,t,n)=>{if(t.forEach((t=>{e.classList.remove(t)})),n.forEach((t=>{e.removeAttribute(t)})),0===e.classList.length){const t=e.parentElement;e.replaceWith(...Array.from(e.childNodes)),t.normalize()}},this.getOffset=(e,t)=>{let n=e.offsetTop,o=e.offsetLeft,r=e.offsetParent;for(;r!==t&&null!==r;)n+=r.offsetTop+2*Number(this.content_window.getComputedStyle(r).borderWidth.slice(0,-2)),o+=r.offsetLeft,r=r.offsetParent;return{offset_top:n,offset_left:o}},this.rgbTo16=e=>{var t;return"#"+(null===(t=e.match(/\d+/g))||void 0===t?void 0:t.map((e=>("0"+parseInt(e).toString(16)).slice(-2))).join(""))},this.getSelectorFromElement=e=>{const t=[];for(;e;){let n=e.nodeName.toLowerCase();if(e.id){n+="#"+e.id,t.unshift(n);break}n+=":nth-of-type("+this.getSiblingElementsIndex(e,n)+")",t.unshift(n),e=e.parentNode}return t},this.getSiblingElementsIndex=(e,t)=>{let n=1,o=e;for(;o=o.previousElementSibling;)o.nodeName.toLowerCase()===t&&++n;return n},this.tool_type=e,this.content_root=t,this.content_window=n,this.dark_mode=s,this.word=new c(this,r,i,a,f),this.cv=new l(this,o),this.comment=new d(this),this.decoration=new u(this)}hslToRgb(e,t,n){let o,r,s;if(0==t)o=r=s=n;else{const i=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e};let a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;o=i(c,a,e+1/3),r=i(c,a,e),s=i(c,a,e-1/3)}return"#"+`0${Math.floor(255*o).toString(16)}`.slice(-2)+`0${Math.floor(255*r).toString(16)}`.slice(-2)+`0${Math.floor(255*s).toString(16)}`.slice(-2)}}class c{constructor(e,t,n,o,r){this.option={},this.selected_color={},this.block_mode_pattern="[ァ-ヶーｱ-ﾝﾞﾟ一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*",this.setOption=e=>{this.option=e,Object.keys(this.option).forEach((e=>{this.option[e]&&this.selected_color[e]&&(this.option[e].color=this.selected_color[e])}))},this.setColor=(e,t)=>{this.selected_color[e]=t,this.option[e]&&(this.option[e].color=t)},this.clear=e=>{Array.from(e.querySelectorAll("span.word_inversion")).forEach((e=>{if(Array.from(e.classList).forEach((t=>{-1!==t.indexOf("word_inversion")&&e.classList.remove(t)})),e.removeAttribute("data-markjs"),0===e.classList.length&&1===e.attributes.length){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}}));let t=this.sat.content_window.document.head.querySelector("style#SAT_word_inversion");null!==t&&t.remove(),"pdf"===this.sat.tool_type&&(t=document.head.querySelector("style#SAT_word_inversion"),null!==t&&t.remove())},this.getWordColors=e=>{const t=[],n=this.sat.word.lightness;for(let o=0;o<e;o++)t.push(this.sat.hslToRgb(o/e,1,n));return t},this.calcWordColor=e=>.299*parseInt(e.substr(1,2),16)+.587*parseInt(e.substr(3,2),16)+.114*parseInt(e.substr(5,2),16)>=140?"#111":"#eed",this.sat=e,this.selected_color=t,this.block_mode=o,this.auto_sieve_mode=r,this.lightness=n}invert(e){this.clear(e);let t="",n="";const o=new(i())(e),r={element:"span",accuracy:"partially",separateWordSearch:!1,acrossElements:!0,ignoreJoiners:!0,ignorePunctuation:":;.,-–—‒_(){}[]!'\"+=".split(""),each:e=>{e.classList.add("word_inversion")},className:"",done:e=>{0===e&&this.auto_sieve_mode&&this.option[t]&&this.option[t].words&&(this.option[t].words=this.option[t].words.filter((e=>e!==n)),0===this.option[t].words.length&&delete this.option[t])}};"web"===this.sat.tool_type&&(r.accuracy="complementary");const s=document.createElement("style");s.type="text/css",s.id="SAT_word_inversion";const a=document.createElement("style");a.type="text/css",a.id="SAT_word_inversion",this.sat.content_window.document.head.prepend(s),"pdf"===this.sat.tool_type&&document.head.prepend(a);for(const e in this.option){r.className=`word_inversion_class${Number(e)}`;const i=this.option[e].color;s.sheet.insertRule(`span.word_inversion_class${e} {background-color: ${i} !important; color: ${"pdf"===this.sat.tool_type?i:this.calcWordColor(i)} !important}`,0),"pdf"===this.sat.tool_type&&a.sheet.insertRule(`span.word_inversion_class${e} {background-color: ${i} ! important; color: ${this.calcWordColor(i)} !important} `,0),this.option[e].words.forEach((s=>{if(t=e,n=s,/^\/.*\/[dgimsuy]*$/.test(s)){let e,t="";s.match(/([dgimsuy]+)$/)&&(t=s.match(/([dgimsuy]+)$/)[0],s=s.slice(0,-t.length)),e=this.block_mode?new RegExp(`${this.block_mode_pattern}${s.slice(1,-1)}${this.block_mode_pattern}`,t):new RegExp(s.slice(1,-1),t),o.markRegExp(e,r)}else if(this.block_mode){s=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),console.log(s);const e=new RegExp(`${this.block_mode_pattern}${s}${this.block_mode_pattern}`,"i");o.markRegExp(e,r)}else o.mark(s,r)}))}}}class l{constructor(e,t){this.word_rect=[],this.comment_circle=[],this.highlight_rect=[],this.updateData=()=>{this.word_rect=[];const e={};Array.from(new Set(Object.keys(this.sat.word.option).map((e=>this.sat.word.option[e].color)))).filter((e=>""!==e)).forEach(((t,n)=>{e[t]=n}));const t=Object.keys(e).length,n=this.sat.content_root.parentElement.scrollHeight;Array.from(this.sat.content_root.querySelectorAll("span.word_inversion")).forEach((o=>{const r=this.sat.rgbTo16(window.getComputedStyle(o).backgroundColor),s="web"===this.sat.tool_type||"pdf"===this.sat.tool_type?0:35,i=s+(this.element.width-s)*(e[r]/t),a=this.sat.getOffset(o,this.sat.content_root.offsetParent),c=this.element.height*(a.offset_top/n),l=3*Math.max(o.offsetHeight/this.element.height,2);this.word_rect.push([r,Math.round(i)-.5,Math.round(c-l/2)-.5,Math.round((this.element.width-s)/t)+0,5,Math.round(l/2)])})),this.comment_circle=[];const o=Array.from(this.sat.content_root.querySelectorAll("span.commented")).map((e=>{const t=this.sat.getOffset(e,this.sat.content_root.offsetParent);return e.setAttribute("offset_top",t.offset_top.toString()),e.setAttribute("offset_left",t.offset_left.toString()),e})).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=[...e[t.getAttribute("comment_id")]||[],t],e)),{});Object.keys(o).map((e=>o[e].sort(((e,t)=>e.getAttribute("offset_top")!==t.getAttribute("offset_top")?e.getAttribute("offset_top")<t.getAttribute("offset_top")?-1:1:e.getAttribute("offset_left")<t.getAttribute("offset_left")?-1:1)))).sort(((e,t)=>e[0].getAttribute("offset_top")!==t[0].getAttribute("offset_top")?e[0].getAttribute("offset_top")<t[0].getAttribute("offset_top")?-1:1:e[0].getAttribute("offset_left")<t[0].getAttribute("offset_left")?-1:1)).forEach((e=>{this.comment_circle.push({y:this.element.height*(this.sat.getOffset(e[0],this.sat.content_root.offsetParent).offset_top/n),color:e[0].style.backgroundColor})})),this.highlight_rect=[],Array.from(document.querySelectorAll("span.highlighted")).forEach((e=>{this.highlight_rect.push({y:this.element.height*((this.sat.getOffset(e,this.sat.content_root.offsetParent).offset_top-3)/n),color:e.style.backgroundColor})}))},this.draw=()=>{const e=this.element.getContext("2d");let t;e.clearRect(0,0,this.element.width,this.element.height),"web"===this.sat.tool_type||"pdf"===this.sat.tool_type?(e.fillStyle="black",e.fillRect(0,0,200,window.innerHeight)):(e.fillStyle="#333333",e.fillRect(0,0,30,window.innerHeight)),this.word_rect.forEach((t=>{e.fillStyle=t[0],e.fillRect(t[1],t[2],t[3],t[4])})),this.comment_circle.forEach((t=>{e.fillStyle=t.color,e.beginPath(),e.arc(10,t.y,5,0,2*Math.PI,!1),e.fill()})),this.highlight_rect.forEach((t=>{e.fillStyle=t.color,e.fillRect(20,t.y-5,10,10)})),e.strokeStyle="white",e.lineWidth=5,t="pdf"===this.sat.tool_type?this.sat.content_root.parentElement:"web"===this.sat.tool_type?document.scrollingElement:document.getElementById("main");const n=t.scrollTop,o=t.scrollHeight,r=document.querySelector("div.top")?document.querySelector("div.top").offsetHeight:0;e.strokeRect(2.5,n*(this.element.height/o),this.element.width-2.5,(window.innerHeight-r)*(this.element.height/o))},this.sat=e,this.element=t}}class u{constructor(e){this.add=e=>{"underline"===e?(0,r.createClassApplier)(e,{elementTagName:"u",normalize:!0}).toggleSelection(this.sat.content_window):(0,r.createClassApplier)(e,{elementTagName:"span",normalize:!0}).toggleSelection(this.sat.content_window)},this.highlight=e=>{(0,r.createClassApplier)("highlighted_tmp",{elementTagName:"span",normalize:!1}).toggleSelection(this.sat.content_window);const t=(0,o.getSelection)(this.sat.content_window);t.getRangeAt(0).getNodes([],(e=>e instanceof HTMLSpanElement&&e.classList.contains("highlighted_tmp"))).forEach((t=>{t.style.backgroundColor=e,t.style.borderBottomColor=e,t.classList.remove("highlighted_tmp"),t.classList.add("highlighted")}));const n=t.getRangeAt(0).commonAncestorContainer.parentElement.closest("span.commented");n&&(n.style.backgroundColor=e,n.classList.remove("highlighted_tmp"),n.classList.add("highlighted")),this.sat.cv.updateData(),this.sat.cv.draw()},this.dehighlight=()=>{const e=(0,o.getSelection)(this.sat.content_window);e.rangeCount&&(e.getRangeAt(0).getNodes([1]).forEach((e=>{e instanceof HTMLSpanElement&&(e.classList.length>0?Array.from(e.classList).forEach((t=>{"highlighted"===t&&(e.style.backgroundColor="",e.style.borderBottomColor="",this.sat.removeSpan(e,[t],[]))})):e.style.backgroundColor="")})),[(0,o.getSelection)(this.sat.content_window).getRangeAt(0).startContainer,(0,o.getSelection)(this.sat.content_window).getRangeAt(0).endContainer].forEach((e=>{for(;e&&e!==this.sat.content_root;){const t=e.parentElement;e instanceof HTMLSpanElement&&(e.classList.length>0?Array.from(e.classList).forEach((t=>{"highlighted"===t&&(e.style.backgroundColor="",e.style.borderBottomColor="",this.sat.removeSpan(e,[t],[]))})):e.style.backgroundColor=""),e=t}}))),this.sat.cv.updateData(),this.sat.cv.draw()},this.sat=e}}class d{constructor(e){this.comment_index=0,this.span_info={},this.box_info={},this.box_sorted_info=[],this.addComment=e=>{const t=this.addSpan(e);this.addBox(t,e),this.sort(),this.arrange();const n=window.document.createRange(),o=window.document.querySelector(`div.comment[comment_id="${t}"] > p`);n.setStart(o,0),n.setEnd(o,0),window.focus(),window.getSelection().removeAllRanges(),window.getSelection().addRange(n),this.sat.cv.updateData(),this.sat.cv.draw()},this.remove=e=>{var t;this.sat.content_root.querySelectorAll(`span.commented[comment_id="${e}"]`).forEach(((e,t)=>{this.sat.removeSpan(e,["commented","span_onmouse"],["comment_id"])})),null===(t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`))||void 0===t||t.remove(),Array.from(document.getElementById("comment_svg").querySelectorAll(`polygon[comment_id="${e}"]`)).forEach((e=>{e.remove()})),delete this.span_info[e],delete this.box_info[e]},this.addSpan=e=>{(0,r.createClassApplier)("commented",{elementTagName:"span",normalize:!0}).toggleSelection(this.sat.content_window);const t={},n=[];for(Array.from(this.sat.content_root.querySelectorAll("span.commented")).forEach((e=>{null!==e.getAttribute("comment_id")?t[e.getAttribute("comment_id")]="commented":n.push(e)}));t[this.comment_index];)this.comment_index++;const o=this.comment_index;return this.comment_index++,n.forEach((t=>{t.setAttribute("comment_id",o.toString()),t.style.backgroundColor=e,t.style.borderColor=e;const n=this.sat.getOffset(t,this.sat.content_root.offsetParent);t.setAttribute("offset_top",n.offset_top.toString()),t.setAttribute("offset_left",n.offset_left.toString())})),n.forEach((e=>{e.addEventListener("mouseover",(t=>{this.onMouseOver(e.getAttribute("comment_id"))}))})),n.forEach((e=>{e.addEventListener("mouseout",(t=>{t.relatedTarget instanceof HTMLElement&&null!==t.relatedTarget.parentElement&&null!==t.relatedTarget.parentElement.closest(`span.commented[comment_id="${e.getAttribute("comment_id")}"]`)||this.onMouseOut(e.getAttribute("comment_id"))}))})),o.toString()},this.addBox=(e,t)=>{var n;const o=document.createElement("p");"pdf"===this.sat.tool_type&&(this.box_info[e]?o.innerText=this.box_info[e].content:this.box_info[e]={content:"",page_number:null===(n=this.span_info[e])||void 0===n?void 0:n.map((e=>Number(e.page_number))).reduce(((e,t)=>Math.min(e,t)))});const r=document.createElement("div");r.classList.add("comment"),r.contentEditable="true",r.id=e,r.setAttribute("comment_id",e),r.style.backgroundColor=t,r.style.borderColor=t,r.appendChild(o),document.getElementById("comment_div").appendChild(r);const s=document.createElementNS("http://www.w3.org/2000/svg","polygon");s.setAttribute("comment_id",e),s.style.fill=t,s.style.stroke=t,document.getElementById("comment_svg").querySelector("svg").appendChild(s),r.addEventListener("mouseover",(e=>{this.onMouseOver(r.getAttribute("comment_id"))})),r.addEventListener("mouseout",(e=>{e.relatedTarget instanceof HTMLElement&&null!==e.relatedTarget.parentElement&&null!==e.relatedTarget.parentElement.closest(`div.comment[comment_id="${r.getAttribute("comment_id")}"]`)||this.onMouseOut(r.getAttribute("comment_id"))})),r.addEventListener("input",this.onInput),s.addEventListener("click",(e=>{this.onPolygonClick(r.getAttribute("comment_id"))}))},this.onMouseOver=e=>{var t;null===(t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`))||void 0===t||t.classList.add("div_onmouse"),Array.from(this.sat.content_root.querySelectorAll(`span.commented[comment_id="${e}"]`)).forEach((e=>{e.classList.add("span_onmouse")}))},this.onMouseOut=e=>{var t;null===(t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`))||void 0===t||t.classList.remove("div_onmouse"),Array.from(this.sat.content_root.querySelectorAll(`span.commented[comment_id="${e}"]`)).forEach((e=>{e.classList.remove("span_onmouse")}))},this.onInput=()=>{this.sat.updated=!0},this.onPolygonClick=e=>{const t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`),n=document.getElementById("color_picker"),o=document.getElementById("color_picker_comment");o.setAttribute("color_id","comment_color"),o.style.display="block";const r=this.sat.getOffset(t,this.sat.content_root);o.style.top=`${Math.max(r.offset_top-o.offsetHeight/2+10,40)}px`,o.style.left=r.offset_left-o.offsetWidth-15+"px",n.setAttribute("mode","comment"),n.setAttribute("comment_id",e),n.setAttribute("comment_color",t.style.backgroundColor)},this.sort=()=>{const e=Array.from(this.sat.content_root.querySelectorAll("span.commented")).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=[...e[t.getAttribute("comment_id")]||[],t],e)),{}),t=Object.keys(e).map((t=>e[t].sort(((e,t)=>Number(e.getAttribute("offset_top"))!==Number(t.getAttribute("offset_top"))?Number(e.getAttribute("offset_top"))<Number(t.getAttribute("offset_top"))?-1:1:Number(e.getAttribute("offset_left"))<Number(t.getAttribute("offset_left"))?-1:1)))).sort(((e,t)=>Number(e[0].getAttribute("offset_top"))!==Number(t[0].getAttribute("offset_top"))?Number(e[0].getAttribute("offset_top"))<Number(t[0].getAttribute("offset_top"))?-1:1:Number(e[0].getAttribute("offset_left"))<Number(t[0].getAttribute("offset_left"))?-1:1)),n=Array.from(document.getElementById("comment_div").querySelectorAll("div.comment")).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=t,e)),{}),o=Array.from(document.getElementById("comment_svg").querySelectorAll("polygon")).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=t,e)),{});this.box_sorted_info=t.filter((e=>e.length>0)).map((e=>({comment_id:e[0].getAttribute("comment_id"),first_span:e[0],div:n[e[0].getAttribute("comment_id")],polygon:o[e[0].getAttribute("comment_id")]})))},this.arrange=e=>{for(let e=0;e<this.box_sorted_info.length;e++){let t=0;e>0&&(t=this.box_sorted_info[e-1].div.offsetTop+this.box_sorted_info[e-1].div.offsetHeight),this.box_sorted_info[e].div.style.top=`${Math.max(t+10,parseInt(this.box_sorted_info[e].first_span.getAttribute("offset_top")))}px`,this.box_sorted_info[e].polygon.setAttribute("points",`0 ${Number(this.box_sorted_info[e].first_span.getAttribute("offset_top"))+8}, 15 ${this.box_sorted_info[e].div.offsetTop+5}, 15 ${this.box_sorted_info[e].div.offsetTop+30}`)}},this.sat=e}}},"./node_modules/tslib/tslib.es6.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>s,__rest:()=>i,__decorate:()=>a,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>f,__exportStar:()=>h,__values:()=>p,__read:()=>m,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>_,__asyncDelegator:()=>b,__asyncValues:()=>E,__makeTemplateObject:()=>w,__importStar:()=>R,__importDefault:()=>N,__classPrivateFieldGet:()=>S,__classPrivateFieldSet:()=>j});var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o(e,t)};function r(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function i(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function a(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i}function c(e,t){return function(n,o){t(n,o,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))}function d(e,t){var n,o,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}function h(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,s=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=s.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,r++)o[r]=s[i];return o}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(e){r[e]&&(o[e]=function(t){return new Promise((function(n,o){s.push([e,t,n,o])>1||a(e,t)}))})}function a(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(s[0][2],n)}catch(e){u(s[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function b(e){var t,n;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){t[o]=e[o]?function(t){return(n=!n)?{value:v(e[o](t)),done:"return"===o}:r?r(t):t}:r}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,r){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,r,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function j(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o);var e=n("./src/sat.ts"),t=n("./node_modules/rangy2/bundles/index.umd.js"),r=n("./node_modules/split.js/dist/split.js"),s=n.n(r),i=n("./node_modules/hotkeys-js/dist/hotkeys.js"),a=n.n(i),c=function(e,t,n,o){return new(n||(n=Promise))((function(r,s){function i(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};let l;function u(){return c(this,void 0,void 0,(function*(){l.content_root.normalize(),Array.from(document.querySelectorAll("img")).forEach((e=>{"data:image/"!==e.src.substr(0,11)&&(e.src=function(e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),t.toDataURL("image/png")}(e))}));const e=document.querySelector("html").cloneNode(!0);Array.from(e.querySelectorAll(".gutter")).forEach((e=>{e.remove()})),e.querySelector("#spinner").classList.remove("visible"),Array.from(e.querySelectorAll("script")).forEach((e=>{/log[^/]*\.js/.test(e.src)&&e.remove()})),e.querySelector("#doc_title").setAttribute("value",e.querySelector("#doc_title").value),e.querySelector("#block_mode").checked&&e.querySelector("#block_mode").setAttribute("checked",""),e.querySelector("#auto_sieve_mode").checked&&e.querySelector("#auto_sieve_mode").setAttribute("checked",""),e.querySelector("#word_query").innerHTML=e.querySelector("#word_query").innerHTML,e.querySelector("#selected_color").innerHTML=JSON.stringify(l.word.selected_color);let t=Array.from(e.querySelectorAll("link")).filter((e=>"stylesheet"===e.rel)).map((t=>()=>new Promise(((n,o)=>{fetch(t.href).then((e=>e.text())).then((o=>{t.remove();const r=document.createElement("style");r.innerHTML=o,e.querySelector("head").appendChild(r),n(null)}))}))));yield d(t),t=Array.from(e.querySelectorAll("script")).filter((e=>void 0!==e.src&&""!==e.src)).map((e=>()=>new Promise(((t,n)=>{-1===e.src.indexOf("js-tazumen")?fetch(e.src).then((e=>e.text())).then((n=>{e.removeAttribute("src"),e.innerHTML=n,t(null)})):t(null)})))),yield d(t);const n=e.innerHTML,o=document.doctype.name,r=document.doctype.publicId,s=document.doctype.systemId,i="<!DOCTYPE "+o+(r?' PUBLIC "'+r+'"':"")+(s?' "'+s+'"':"")+">";let a="<html";const c=e.attributes;for(let e=0,t=c.length;e<t;e++){const t=c[e];a+=" "+t.nodeName+(t.nodeValue?'="'+t.nodeValue+'"':"")}a+=">";const u=new Blob([i,"\n",a,"\n",n,"\n</html>"]),f=(window.URL||window.webkitURL).createObjectURL(u),h=document.createElement("a");h.download=`${document.title}.html`,h.href=f,document.body.appendChild(h),h.click(),document.body.removeChild(h),l.updated=!1}))}function d(e){let t=Promise.resolve();return e.forEach((e=>{t=t.then(e)})),t}function f(e){const t=l.content_window.getSelection();t&&l.content_root.contains(t.anchorNode)&&l.content_root.contains(t.focusNode)&&(l.decoration.add(e),l.updated=!0)}function h(){const e=document.getElementById("btn_highlight").getAttribute("highlightColor"),t=l.content_window.getSelection();t&&l.content_root.contains(t.anchorNode)&&l.content_root.contains(t.focusNode)&&(l.decoration.highlight(e),l.updated=!0)}function p(){l.decoration.dehighlight()}function m(){const e=document.getElementById("btn_comment").getAttribute("commentColor"),n=l.content_window.getSelection();if(!n)return;if(!l.content_root.contains(n.anchorNode)||!l.content_root.contains(n.focusNode))return;const o=(0,t.getSelection)(l.content_window);if(o.rangeCount){if(o.getRangeAt(0).getNodes([],(e=>e instanceof Element&&e.classList.contains("commented"))).length>0)return void alert("同じ領域に複数のコメントをつけることはできません。");if(null!==o.getRangeAt(0).commonAncestorContainer.parentElement.closest("span.commented"))return void alert("同じ領域に複数のコメントをつけることはできません。")}l.comment.addComment(e),l.updated=!0}function g(){const e=document.getElementById("word_query").innerText.trim().replace(/[\r\n]+/g," ");if(""===e||/^\s+$/.test(e))return{};const t=e.split(/\s+/).map((e=>{const t=e.match(/(^\/|[^\\]\/|\/$)/g);return t&&t.length>0&&t.length%2==0?y(e,[]):e.split(/[+＋]/g)})),n=l.word.getWordColors(t.length),o={};return t.forEach(((e,t)=>{e.forEach((e=>{o[t]||(o[t]={words:[],color:""}),"/"!==e.substr(0,1)?o[t].words.push(e.replace(/_/g," ")):o[t].words.push(e),o[t].color=n[t]}))})),o}function y(e,t){if("/"!==e.substr(0,1)){const n=e.indexOf("+");return-1===n?(t.push(e),t):(t.push(e.substring(0,n)),y(e.substring(n+1),t))}{const n=e.match(/[^\\]\/[dgimsuy]*/);return n?(t.push(e.substring(0,n.index+n[0].length)),e.length===n.index+n[0].length?t:y(e.substring(n.index+n[0].length+1),t)):t}}function v(){const e=document.getElementById("word_query");e.innerHTML="",Object.keys(l.word.option).forEach((t=>{l.word.option[t].words.forEach(((n,o)=>{const r=document.createElement("span");r.innerText=n.replace(/ /g,"_"),r.setAttribute("mode","word_inversion"),r.setAttribute("color_id",t),r.classList.add("query_unit"),r.classList.add(`word_inversion_class${t}`),r.onclick=e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("color_id",e.target.getAttribute("color_id")),t.style.display="block",t.style.left=l.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",t.setAttribute("mode","word_inversion"),e.preventDefault(),e.stopPropagation()},e.appendChild(r),o!==l.word.option[t].words.length-1&&e.appendChild(document.createTextNode("+"))})),e.appendChild(document.createTextNode(" "))}))}function _(e){const t=l.content_window.document.getElementById("viewer").querySelector(`div.page[data-page-number="${e}"]`);l.word.invert(t),l.cv.updateData(),l.cv.draw()}function b(e,t,n){document.getElementById("loading_message").innerHTML=e;const o=document.getElementById("spinner");o.classList.add("visible"),new Promise(((e,o)=>{setTimeout((()=>{n(),e(null)}),t)})).then((()=>{o.classList.remove("visible")}))}window.addEventListener("load",(()=>c(void 0,void 0,void 0,(function*(){const t=document.getElementById("tool_type").innerText;let n,o;"pdf"===t?(window.decoratePage=_,yield new Promise(((e,t)=>{const n=setInterval((()=>{document.querySelector("iframe").contentWindow.document.body&&""!==document.querySelector("iframe").contentWindow.document.body.innerHTML&&(clearInterval(n),e(null))}),500)})).then((()=>{o=document.querySelector("iframe").contentWindow,n=o.document.getElementById("viewer")}))):(o=window,n=document.getElementById("content"));const r=window.getComputedStyle(document.getElementById("spectrum")),i=document.getElementById("spectrum_bar");i.width=Number(r.width.replace("px","")),i.height=Number(r.height.replace("px",""));const d=document.getElementById("selected_color").innerHTML,y=d?JSON.parse(d):{};l=new e.Sat(t,n,o,i,y,document.getElementById("dark_mode").checked,Number(document.getElementById("word_inversion_lightness").value),document.getElementById("block_mode").checked,document.getElementById("auto_sieve_mode").checked),function(){c(this,void 0,void 0,(function*(){document.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");"none"===t.style.display||t.contains(e.target)||(t.style.display="none");const n=document.getElementById("color_picker_comment");"none"===n.style.display||n.contains(e.target)||(n.style.display="none",t.setAttribute("comment_id",""))})),Array.from(document.querySelectorAll("div.comment")).forEach((e=>{e.addEventListener("mouseover",(t=>{l.comment.onMouseOver(e.getAttribute("comment_id"))})),e.addEventListener("mouseout",(t=>{t instanceof MouseEvent&&t.relatedTarget instanceof HTMLElement&&null!==t.relatedTarget.parentElement&&null!==t.relatedTarget.parentElement.closest(`div.comment[comment_id="${e.getAttribute("comment_id")}"]`)||l.comment.onMouseOut(e.getAttribute("comment_id"))}))})),Array.from(document.getElementById("comment_svg").querySelectorAll("polygon")).forEach((e=>{e.addEventListener("click",(e=>{e.target instanceof SVGPolygonElement&&l.comment.onPolygonClick(e.target.getAttribute("comment_id"))}))})),Array.from(l.content_root.querySelectorAll("span.commented")).forEach((e=>{e.addEventListener("mouseover",(t=>{l.comment.onMouseOver(e.getAttribute("comment_id"))})),e.addEventListener("mouseout",(t=>{t instanceof MouseEvent&&t.relatedTarget instanceof HTMLElement&&null!==t.relatedTarget.parentElement&&null!==t.relatedTarget.parentElement.closest(`span.commented[comment_id="${e.getAttribute("comment_id")}"]`)||l.comment.onMouseOut(e.getAttribute("comment_id"))}))})),"pdf"===l.tool_type?l.content_root.parentElement.addEventListener("scroll",(e=>{l.cv.draw();const t=document.getElementById("comment_container");t.scrollTo(0,e.target.scrollTop*(t.scrollHeight/e.target.scrollHeight))})):document.getElementById("main").addEventListener("scroll",(e=>{l.cv.draw()})),window.addEventListener("resize",(e=>{setTimeout((()=>{const e=window.getComputedStyle(document.getElementById("spectrum")),t=document.getElementById("spectrum_bar");t.width=Number(e.width.replace("px","")),t.height=Number(e.height.replace("px","")),l.cv.updateData(),l.cv.draw(),l.comment.sort(),l.comment.arrange()}),0)})),l.cv.element.onclick=e=>{"pdf"===l.tool_type?l.content_root.parentElement.scrollTo(0,e.layerY*(l.content_root.parentElement.scrollHeight/l.cv.element.height)-l.cv.element.height/2):document.getElementById("main").scrollTo(0,e.layerY*(document.getElementById("main").scrollHeight/l.cv.element.height)-l.cv.element.height/2)},l.cv.element.onmousedown=e=>{l.cv.element.onmousemove=e=>{"pdf"===l.tool_type?(l.content_root.parentElement.scrollTo(0,e.layerY*(l.content_root.parentElement.scrollHeight/l.cv.element.height)-l.cv.element.height/2),document.getElementById("comment_container").scrollTo(0,e.layerY*(document.getElementById("comment_container").scrollHeight/l.cv.element.height)-l.cv.element.height/2)):document.getElementById("main").scrollTo(0,e.layerY*(document.getElementById("main").scrollHeight/l.cv.element.height)-l.cv.element.height/2)},l.cv.element.onmouseup=()=>{l.cv.element.onmousemove=null,l.cv.element.onmouseup=null}},l.cv.element.onmouseover=()=>{l.cv.element.onmousemove=null},window.addEventListener("beforeunload",(e=>{l.updated&&"pdf"!==l.tool_type&&(e.returnValue="編集内容が保存されていませんが、ページを離れてもよろしいですか？")})),document.getElementById("doc_title").addEventListener("input",(e=>{e.target instanceof HTMLInputElement&&(""!==e.target.value?document.title=e.target.value:"free_text"===l.tool_type?document.title="SAT（フリーテキスト版）":"pdf"===l.tool_type?document.title="SAT（PDF版）":document.title="SAT (Spectrum Annotation Tool)")})),document.getElementById("word_inversion_lightness").addEventListener("change",(e=>{localStorage.setItem("SAT_word_inversion_lightness",e.target.value),e.target instanceof HTMLInputElement&&(l.word.lightness=Number(e.target.value),l.word.setOption(g()),l.word.invert(l.content_root),v(),l.cv.updateData(),l.cv.draw())})),document.getElementById("block_mode").addEventListener("change",(e=>{localStorage.setItem("SAT_block_mode",e.target.checked.toString()),b("ワード反転中...",10,(()=>{e.target instanceof HTMLInputElement&&e.target.checked?(l.word.block_mode=!0,l.word.invert(l.content_root),l.cv.updateData(),l.cv.draw()):(l.word.block_mode=!1,l.word.invert(l.content_root),l.cv.updateData(),l.cv.draw())}))})),document.getElementById("auto_sieve_mode").addEventListener("change",(e=>{localStorage.setItem("SAT_auto_sieve_mode",e.target.checked.toString()),e.target instanceof HTMLInputElement&&(l.word.auto_sieve_mode=e.target.checked)})),document.getElementById("btn_bold").addEventListener("click",(()=>{f("bold")})),document.getElementById("btn_underline").addEventListener("click",(()=>{f("underline")})),document.getElementById("btn_highlight").addEventListener("click",(()=>{var e;h(),null===(e=l.content_window.getSelection())||void 0===e||e.removeAllRanges()})),document.getElementById("btn_select_highlight_color").addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("mode","highlight"),t.style.display="block",t.style.left=l.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",e.preventDefault(),e.stopPropagation()})),document.getElementById("btn_select_comment_color").addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("mode","comment"),t.style.display="block",t.style.left=l.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",e.preventDefault(),e.stopPropagation()})),document.getElementById("btn_erase").addEventListener("click",(e=>{var t;p(),null===(t=l.content_window.getSelection())||void 0===t||t.removeAllRanges()})),document.getElementById("btn_comment").addEventListener("click",(()=>{m()})),document.getElementById("btn_download").addEventListener("click",(()=>{b("ダウンロードファイル生成中...",150,u)})),document.getElementById("btn_editUnlock").addEventListener("click",(()=>{document.getElementById("content").contentEditable="true",document.getElementById("li_editUnlock").classList.add("hidden"),document.getElementById("li_editLock").classList.remove("hidden")})),document.getElementById("btn_editLock").addEventListener("click",(()=>{document.getElementById("content").contentEditable="false",document.getElementById("li_editLock").classList.add("hidden"),document.getElementById("li_editUnlock").classList.remove("hidden")})),document.getElementById("word_query").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),b("ワード反転中...",0,(()=>{l.word.setOption(g()),l.word.invert(l.content_root),v(),l.cv.updateData(),l.cv.draw(),document.getElementById("word_query").blur(),l.updated=!0})))})),document.getElementById("dark_mode").addEventListener("change",(e=>{e.target instanceof HTMLInputElement&&(localStorage.setItem("SAT_dark_mode",e.target.checked.toString()),e.target.checked?(document.body.classList.add("dark"),document.getElementById("btn_comment").setAttribute("commentColor","#3333cc"),document.getElementById("btn_comment").style.backgroundColor="#3333cc",l.dark_mode=!0):(document.body.classList.remove("dark"),document.getElementById("btn_comment").setAttribute("commentColor","#ffcccc"),document.getElementById("btn_comment").style.backgroundColor="#ffcccc",l.dark_mode=!1),"pdf"===l.tool_type&&(e.target.checked?l.content_window.document.body.classList.add("dark"):l.content_window.document.body.classList.remove("dark")),l.cv.updateData(),l.cv.draw())})),document.getElementById("colormap").addEventListener("mouseout",(e=>{!function(){const e=document.getElementById("color_picker").getAttribute("mode");if("highlight"===e)return;if("comment"===e){const e=document.getElementById("color_picker").getAttribute("comment_id");if(e){const t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`),n=document.getElementById("comment_svg").querySelector(`polygon[comment_id="${e}"]`),o=document.querySelectorAll(`span.commented[comment_id="${e}"]`),r=document.getElementById("color_picker").getAttribute("comment_color");t.style.backgroundColor=r,t.style.borderColor=r,n.style.fill=r,n.style.stroke=r,o.forEach((e=>{e.style.backgroundColor=r,e.style.borderColor=r}))}}else{const e=document.getElementById("color_picker").getAttribute("color_id");Array.from(document.getElementById("word_query").querySelectorAll("span")).filter((t=>t.getAttribute("color_id")===e)).forEach((e=>{e.removeAttribute("style")}))}}()})),Array.from(document.getElementById("colormap").querySelectorAll("area")).forEach((e=>{e.addEventListener("mouseover",(t=>{!function(e){const t=document.getElementById("color_picker").getAttribute("mode");if("highlight"===t)return;if("comment"===t){const t=document.getElementById("color_picker").getAttribute("comment_id");if(t){const n=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${t}"]`),o=document.getElementById("comment_svg").querySelector(`polygon[comment_id="${t}"]`),r=document.querySelectorAll(`span.commented[comment_id="${t}"]`);n.style.backgroundColor=e,n.style.borderColor=e,o.style.fill=e,o.style.stroke=e,r.forEach((t=>{t.style.backgroundColor=e,t.style.borderColor=e}))}}else{const t=document.getElementById("color_picker").getAttribute("color_id");Array.from(document.getElementById("word_query").querySelectorAll("span")).filter((e=>e.getAttribute("color_id")===t)).forEach((t=>{t.style.setProperty("background-color",e,"important"),t.style.color=l.word.calcWordColor(e)}))}}(e.alt)})),e.addEventListener("click",(t=>{!function(e){e=e.toLowerCase();const t=document.getElementById("color_picker").getAttribute("mode");if("highlight"===t){localStorage.setItem("SAT_highlight_color",e);const t=document.getElementById("btn_highlight");t.setAttribute("highlightColor",e),t.style.backgroundColor=e}else if("comment"===t)localStorage.setItem("SAT_comment_color",e),document.getElementById("btn_comment").style.backgroundColor=e,document.getElementById("btn_comment").setAttribute("commentColor",e),document.getElementById("color_picker").setAttribute("comment_id",""),l.cv.updateData(),l.cv.draw();else{const t=document.getElementById("color_picker").getAttribute("color_id");b("ワード反転中...",0,(()=>{l.word.setColor(Number(t),e),l.word.invert(l.content_root),v(),l.cv.updateData(),l.cv.draw()}))}document.getElementById("color_picker").style.display="none"}(e.alt)}))}));new MutationObserver((e=>{e.forEach((e=>{e.removedNodes.forEach((e=>{if(e instanceof HTMLSpanElement&&e.classList.contains("commented")){const t=e.getAttribute("comment_id");document.getElementById("content").querySelector(`span.commented[comment_id="${t}"]`)||l.comment.remove(t),l.cv.updateData(),l.cv.draw(),l.comment.sort(),l.comment.arrange()}}))}))})).observe(document.getElementById("content"),{childList:!0,subtree:!0});new MutationObserver((e=>{l.comment.arrange()})).observe(document.getElementById("comment_div"),{attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height"]});new MutationObserver((e=>{l.cv.updateData(),l.cv.draw(),l.comment.sort(),l.comment.arrange()})).observe(document.body,{attributes:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height","offsetWidth","clientWidth","scrollWidth","width"]});let e,t;if(new MutationObserver((e=>{l.cv.updateData(),l.cv.draw(),l.comment.sort(),l.comment.arrange()})).observe(document.getElementById("spectrum"),{attributes:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height","offsetWidth","clientWidth","scrollWidth","width"]}),document.getElementById("content").addEventListener("input",(e=>{l.updated=!0,l.comment.arrange()})),document.getElementById("word_query").addEventListener("click",(e=>{e.target instanceof HTMLElement&&e.target.querySelectorAll("span").forEach((e=>{e.className="",e.onclick=null}))})),document.getElementById("word_query").addEventListener("paste",(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})),"pdf"!==l.tool_type&&s()(["#content","#comment_container"],{sizes:[70,30],minSize:[50,50],elementStyle:(e,t,n,o)=>({width:`${t}%`}),onDragEnd:e=>{setTimeout((()=>{l.comment.arrange(),l.cv.updateData(),l.cv.draw()}),0),l.comment.arrange(),l.cv.updateData(),l.cv.draw()},gutterSize:5}),localStorage.getItem("SAT_word_inversion_lightness")&&(document.getElementById("word_inversion_lightness").value=localStorage.getItem("SAT_word_inversion_lightness"),l.word.lightness=Number(localStorage.getItem("SAT_word_inversion_lightness"))),document.getElementById("dark_mode").checked.toString()!==localStorage.getItem("SAT_dark_mode")&&document.getElementById("dark_mode").click(),document.getElementById("block_mode").checked.toString()!==localStorage.getItem("SAT_block_mode")&&document.getElementById("block_mode").click(),document.getElementById("auto_sieve_mode").checked.toString()!==localStorage.getItem("SAT_auto_sieve_mode")&&document.getElementById("auto_sieve_mode").click(),e=localStorage.getItem("SAT_highlight_color")){const t=document.getElementById("btn_highlight");t.setAttribute("highlightColor",e),t.style.backgroundColor=e}if(t=localStorage.getItem("SAT_comment_color")){const e=document.getElementById("btn_comment");e.setAttribute("commentColor",t),e.style.backgroundColor=t}}))}(),function(){a().filter=e=>!0,"free_text"===l.tool_type&&(a()("ctrl+b",((e,t)=>{e.preventDefault(),f("bold")})),a()("ctrl+u",((e,t)=>{e.preventDefault(),f("underline")})),a()("ctrl+h",((e,t)=>{var n;e.preventDefault(),h(),null===(n=l.content_window.getSelection())||void 0===n||n.removeAllRanges()})),a()("ctrl+d",((e,t)=>{var n;e.preventDefault(),p(),null===(n=l.content_window.getSelection())||void 0===n||n.removeAllRanges()})),a()("ctrl+1",((e,t)=>{e.preventDefault(),m()})),a()("ctrl+s",((e,t)=>{e.preventDefault(),b("ダウンロードファイル生成中...",150,u)})));a()("ctrl+shift+f",((e,t)=>{function n(e){const t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),null==n||n.removeAllRanges(),null==n||n.addRange(t),e.focus(),t.detach()}e.preventDefault();const o=document.getElementById("word_query");o.click(),n(o)})),document.addEventListener("keydown",(e=>{var t,n,o;if(e instanceof KeyboardEvent&&8===e.keyCode){let r=!0;const s=e.target;if("word_query"===s.id)r=!1;else if(s.isContentEditable){r=!1;const e=null===(o=null===(n=null===(t=window.getSelection())||void 0===t?void 0:t.anchorNode)||void 0===n?void 0:n.parentElement)||void 0===o?void 0:o.closest("div.comment");!e||"\n"!==e.innerText&&""!==e.innerText||(r=!0,l.updated=!0,l.comment.remove(e.getAttribute("comment_id")),l.cv.updateData(),l.cv.draw(),l.comment.sort(),l.comment.arrange())}else("INPUT"===s.tagName||"TEXTAREA"===s.tagName)&&(r=!1);if(r)return void e.preventDefault()}}))}(),l.word.setOption(g()),l.word.invert(l.content_root),v(),setTimeout((()=>{l.cv.updateData(),l.cv.draw(),l.comment.sort(),l.comment.arrange()}),100)}))))})()})();
//# sourceMappingURL=main.js.map