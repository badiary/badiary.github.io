/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={"./node_modules/core-js/es/array/includes.js":(e,t,n)=>{n("./node_modules/core-js/modules/es.array.includes.js");var o=n("./node_modules/core-js/internals/entry-unbind.js");e.exports=o("Array","includes")},"./node_modules/core-js/es/object/assign.js":(e,t,n)=>{n("./node_modules/core-js/modules/es.object.assign.js");var o=n("./node_modules/core-js/internals/path.js");e.exports=o.Object.assign},"./node_modules/core-js/features/array/includes.js":(e,t,n)=>{var o=n("./node_modules/core-js/stable/array/includes.js");e.exports=o},"./node_modules/core-js/features/object/assign.js":(e,t,n)=>{var o=n("./node_modules/core-js/stable/object/assign.js");e.exports=o},"./node_modules/core-js/internals/a-function.js":e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},"./node_modules/core-js/internals/add-to-unscopables.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/well-known-symbol.js"),r=n("./node_modules/core-js/internals/object-create.js"),i=n("./node_modules/core-js/internals/object-define-property.js"),s=o("unscopables"),a=Array.prototype;null==a[s]&&i.f(a,s,{configurable:!0,value:r(null)}),e.exports=function(e){a[s][e]=!0}},"./node_modules/core-js/internals/an-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e){if(!o(e))throw TypeError(String(e)+" is not an object");return e}},"./node_modules/core-js/internals/array-includes.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-indexed-object.js"),r=n("./node_modules/core-js/internals/to-length.js"),i=n("./node_modules/core-js/internals/to-absolute-index.js"),s=function(e){return function(t,n,s){var a,c=o(t),l=r(c.length),u=i(s,l);if(e&&n!=n){for(;l>u;)if((a=c[u++])!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"./node_modules/core-js/internals/classof-raw.js":e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"./node_modules/core-js/internals/copy-constructor-properties.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/has.js"),r=n("./node_modules/core-js/internals/own-keys.js"),i=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),s=n("./node_modules/core-js/internals/object-define-property.js");e.exports=function(e,t){for(var n=r(t),a=s.f,c=i.f,l=0;l<n.length;l++){var u=n[l];o(e,u)||a(e,u,c(t,u))}}},"./node_modules/core-js/internals/create-non-enumerable-property.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/object-define-property.js"),i=n("./node_modules/core-js/internals/create-property-descriptor.js");e.exports=o?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"./node_modules/core-js/internals/create-property-descriptor.js":e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/internals/descriptors.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/fails.js");e.exports=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"./node_modules/core-js/internals/document-create-element.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/is-object.js"),i=o.document,s=r(i)&&r(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},"./node_modules/core-js/internals/engine-user-agent.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js");e.exports=o("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":(e,t,n)=>{var o,r,i=n("./node_modules/core-js/internals/global.js"),s=n("./node_modules/core-js/internals/engine-user-agent.js"),a=i.process,c=i.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u?r=(o=u.split("."))[0]<4?1:o[0]+o[1]:s&&(!(o=s.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=s.match(/Chrome\/(\d+)/))&&(r=o[1]),e.exports=r&&+r},"./node_modules/core-js/internals/entry-unbind.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/function-bind-context.js"),i=Function.call;e.exports=function(e,t,n){return r(i,o[e].prototype[t],n)}},"./node_modules/core-js/internals/enum-bug-keys.js":e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,i=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),s=n("./node_modules/core-js/internals/redefine.js"),a=n("./node_modules/core-js/internals/set-global.js"),c=n("./node_modules/core-js/internals/copy-constructor-properties.js"),l=n("./node_modules/core-js/internals/is-forced.js");e.exports=function(e,t){var n,u,d,f,p,h=e.target,m=e.global,g=e.stat;if(n=m?o:g?o[h]||a(h,{}):(o[h]||{}).prototype)for(u in t){if(f=t[u],d=e.noTargetGet?(p=r(n,u))&&p.value:n[u],!l(m?u:h+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),s(n,u,f,e)}}},"./node_modules/core-js/internals/fails.js":e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/core-js/internals/function-bind-context.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/a-function.js");e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(o[e]):o[e]&&o[e][t]}},"./node_modules/core-js/internals/global.js":(e,t,n)=>{var o=function(e){return e&&e.Math==Math&&e};e.exports=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-object.js"),r={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return r.call(o(e),t)}},"./node_modules/core-js/internals/hidden-keys.js":e=>{e.exports={}},"./node_modules/core-js/internals/html.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js");e.exports=o("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/fails.js"),i=n("./node_modules/core-js/internals/document-create-element.js");e.exports=!o&&!r((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/internals/indexed-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/fails.js"),r=n("./node_modules/core-js/internals/classof-raw.js"),i="".split;e.exports=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==r(e)?i.call(e,""):Object(e)}:Object},"./node_modules/core-js/internals/inspect-source.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/shared-store.js"),r=Function.toString;"function"!=typeof o.inspectSource&&(o.inspectSource=function(e){return r.call(e)}),e.exports=o.inspectSource},"./node_modules/core-js/internals/internal-state.js":(e,t,n)=>{var o,r,i,s=n("./node_modules/core-js/internals/native-weak-map.js"),a=n("./node_modules/core-js/internals/global.js"),c=n("./node_modules/core-js/internals/is-object.js"),l=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),u=n("./node_modules/core-js/internals/has.js"),d=n("./node_modules/core-js/internals/shared-store.js"),f=n("./node_modules/core-js/internals/shared-key.js"),p=n("./node_modules/core-js/internals/hidden-keys.js"),h="Object already initialized",m=a.WeakMap;if(s||d.state){var g=d.state||(d.state=new m),y=g.get,v=g.has,b=g.set;o=function(e,t){if(v.call(g,e))throw new TypeError(h);return t.facade=e,b.call(g,e,t),t},r=function(e){return y.call(g,e)||{}},i=function(e){return v.call(g,e)}}else{var _=f("state");p[_]=!0,o=function(e,t){if(u(e,_))throw new TypeError(h);return t.facade=e,l(e,_,t),t},r=function(e){return u(e,_)?e[_]:{}},i=function(e){return u(e,_)}}e.exports={set:o,get:r,has:i,enforce:function(e){return i(e)?r(e):o(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=r(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},"./node_modules/core-js/internals/is-forced.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/fails.js"),r=/#|\.prototype\./,i=function(e,t){var n=a[s(e)];return n==l||n!=c&&("function"==typeof t?o(t):!!t)},s=i.normalize=function(e){return String(e).replace(r,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",l=i.POLYFILL="P";e.exports=i},"./node_modules/core-js/internals/is-object.js":e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/internals/is-pure.js":e=>{e.exports=!1},"./node_modules/core-js/internals/is-symbol.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js"),r=n("./node_modules/core-js/internals/use-symbol-as-uid.js");e.exports=r?function(e){return"symbol"==typeof e}:function(e){var t=o("Symbol");return"function"==typeof t&&Object(e)instanceof t}},"./node_modules/core-js/internals/native-symbol.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/engine-v8-version.js"),r=n("./node_modules/core-js/internals/fails.js");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},"./node_modules/core-js/internals/native-weak-map.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/inspect-source.js"),i=o.WeakMap;e.exports="function"==typeof i&&/native code/.test(r(i))},"./node_modules/core-js/internals/object-assign.js":(e,t,n)=>{"use strict";var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/fails.js"),i=n("./node_modules/core-js/internals/object-keys.js"),s=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),a=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),c=n("./node_modules/core-js/internals/to-object.js"),l=n("./node_modules/core-js/internals/indexed-object.js"),u=Object.assign,d=Object.defineProperty;e.exports=!u||r((function(){if(o&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||i(u({},t)).join("")!=r}))?function(e,t){for(var n=c(e),r=arguments.length,u=1,d=s.f,f=a.f;r>u;)for(var p,h=l(arguments[u++]),m=d?i(h).concat(d(h)):i(h),g=m.length,y=0;g>y;)p=m[y++],o&&!f.call(h,p)||(n[p]=h[p]);return n}:u},"./node_modules/core-js/internals/object-create.js":(e,t,n)=>{var o,r=n("./node_modules/core-js/internals/an-object.js"),i=n("./node_modules/core-js/internals/object-define-properties.js"),s=n("./node_modules/core-js/internals/enum-bug-keys.js"),a=n("./node_modules/core-js/internals/hidden-keys.js"),c=n("./node_modules/core-js/internals/html.js"),l=n("./node_modules/core-js/internals/document-create-element.js"),u=n("./node_modules/core-js/internals/shared-key.js"),d=u("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"</"+"script>"},h=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{o=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&o?h(o):((t=l("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):h(o);for(var n=s.length;n--;)delete m.prototype[s[n]];return m()};a[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=r(e),n=new f,f.prototype=null,n[d]=e):n=m(),void 0===t?n:i(n,t)}},"./node_modules/core-js/internals/object-define-properties.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/object-define-property.js"),i=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/object-keys.js");e.exports=o?Object.defineProperties:function(e,t){i(e);for(var n,o=s(t),a=o.length,c=0;a>c;)r.f(e,n=o[c++],t[n]);return e}},"./node_modules/core-js/internals/object-define-property.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/ie8-dom-define.js"),i=n("./node_modules/core-js/internals/an-object.js"),s=n("./node_modules/core-js/internals/to-property-key.js"),a=Object.defineProperty;t.f=o?a:function(e,t,n){if(i(e),t=s(t),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/descriptors.js"),r=n("./node_modules/core-js/internals/object-property-is-enumerable.js"),i=n("./node_modules/core-js/internals/create-property-descriptor.js"),s=n("./node_modules/core-js/internals/to-indexed-object.js"),a=n("./node_modules/core-js/internals/to-property-key.js"),c=n("./node_modules/core-js/internals/has.js"),l=n("./node_modules/core-js/internals/ie8-dom-define.js"),u=Object.getOwnPropertyDescriptor;t.f=o?u:function(e,t){if(e=s(e),t=a(t),l)try{return u(e,t)}catch(e){}if(c(e,t))return i(!r.f.call(e,t),e[t])}},"./node_modules/core-js/internals/object-get-own-property-names.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/object-keys-internal.js"),r=n("./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,r)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":(e,t)=>{t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-keys-internal.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/has.js"),r=n("./node_modules/core-js/internals/to-indexed-object.js"),i=n("./node_modules/core-js/internals/array-includes.js").indexOf,s=n("./node_modules/core-js/internals/hidden-keys.js");e.exports=function(e,t){var n,a=r(e),c=0,l=[];for(n in a)!o(s,n)&&o(a,n)&&l.push(n);for(;t.length>c;)o(a,n=t[c++])&&(~i(l,n)||l.push(n));return l}},"./node_modules/core-js/internals/object-keys.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/object-keys-internal.js"),r=n("./node_modules/core-js/internals/enum-bug-keys.js");e.exports=Object.keys||function(e){return o(e,r)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":(e,t)=>{"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,r=o&&!n.call({1:2},1);t.f=r?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},"./node_modules/core-js/internals/ordinary-to-primitive.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-object.js");e.exports=function(e,t){var n,r;if("string"===t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if("string"!==t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/get-built-in.js"),r=n("./node_modules/core-js/internals/object-get-own-property-names.js"),i=n("./node_modules/core-js/internals/object-get-own-property-symbols.js"),s=n("./node_modules/core-js/internals/an-object.js");e.exports=o("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=i.f;return n?t.concat(n(e)):t}},"./node_modules/core-js/internals/path.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js");e.exports=o},"./node_modules/core-js/internals/redefine.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/create-non-enumerable-property.js"),i=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/set-global.js"),a=n("./node_modules/core-js/internals/inspect-source.js"),c=n("./node_modules/core-js/internals/internal-state.js"),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,a){var c,l=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,p=!!a&&!!a.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||r(n,"name",t),(c=u(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==o?(l?!p&&e[t]&&(f=!0):delete e[t],f?e[t]=n:r(e,t,n)):f?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},"./node_modules/core-js/internals/require-object-coercible.js":e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},"./node_modules/core-js/internals/set-global.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js");e.exports=function(e,t){try{Object.defineProperty(o,e,{value:t,configurable:!0,writable:!0})}catch(n){o[e]=t}return t}},"./node_modules/core-js/internals/shared-key.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/shared.js"),r=n("./node_modules/core-js/internals/uid.js"),i=o("keys");e.exports=function(e){return i[e]||(i[e]=r(e))}},"./node_modules/core-js/internals/shared-store.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/set-global.js"),i="__core-js_shared__",s=o[i]||r(i,{});e.exports=s},"./node_modules/core-js/internals/shared.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-pure.js"),r=n("./node_modules/core-js/internals/shared-store.js");(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.17.3",mode:o?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/to-absolute-index.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-integer.js"),r=Math.max,i=Math.min;e.exports=function(e,t){var n=o(e);return n<0?r(n+t,0):i(n,t)}},"./node_modules/core-js/internals/to-indexed-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/indexed-object.js"),r=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return o(r(e))}},"./node_modules/core-js/internals/to-integer.js":e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},"./node_modules/core-js/internals/to-length.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-integer.js"),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/require-object-coercible.js");e.exports=function(e){return Object(o(e))}},"./node_modules/core-js/internals/to-primitive.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/is-object.js"),r=n("./node_modules/core-js/internals/is-symbol.js"),i=n("./node_modules/core-js/internals/ordinary-to-primitive.js"),s=n("./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");e.exports=function(e,t){if(!o(e)||r(e))return e;var n,a=e[s];if(void 0!==a){if(void 0===t&&(t="default"),n=a.call(e,t),!o(n)||r(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),i(e,t)}},"./node_modules/core-js/internals/to-property-key.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/to-primitive.js"),r=n("./node_modules/core-js/internals/is-symbol.js");e.exports=function(e){var t=o(e,"string");return r(t)?t:String(t)}},"./node_modules/core-js/internals/uid.js":e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/native-symbol.js");e.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/global.js"),r=n("./node_modules/core-js/internals/shared.js"),i=n("./node_modules/core-js/internals/has.js"),s=n("./node_modules/core-js/internals/uid.js"),a=n("./node_modules/core-js/internals/native-symbol.js"),c=n("./node_modules/core-js/internals/use-symbol-as-uid.js"),l=r("wks"),u=o.Symbol,d=c?u:u&&u.withoutSetter||s;e.exports=function(e){return i(l,e)&&(a||"string"==typeof l[e])||(a&&i(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},"./node_modules/core-js/modules/es.array.includes.js":(e,t,n)=>{"use strict";var o=n("./node_modules/core-js/internals/export.js"),r=n("./node_modules/core-js/internals/array-includes.js").includes,i=n("./node_modules/core-js/internals/add-to-unscopables.js");o({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},"./node_modules/core-js/modules/es.object.assign.js":(e,t,n)=>{var o=n("./node_modules/core-js/internals/export.js"),r=n("./node_modules/core-js/internals/object-assign.js");o({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},"./node_modules/core-js/stable/array/includes.js":(e,t,n)=>{var o=n("./node_modules/core-js/es/array/includes.js");e.exports=o},"./node_modules/core-js/stable/object/assign.js":(e,t,n)=>{var o=n("./node_modules/core-js/es/object/assign.js");e.exports=o},"./node_modules/hotkeys-js/dist/hotkeys.js":function(e){e.exports=function(){"use strict";var e="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function t(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function n(e,t){for(var n=t.slice(0,t.length-1),o=0;o<n.length;o++)n[o]=e[n[o].toLowerCase()];return n}function o(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function r(e,t){for(var n=e.length>=t.length?e:t,o=e.length>=t.length?t:e,r=!0,i=0;i<n.length;i++)-1===o.indexOf(n[i])&&(r=!1);return r}for(var i={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":e?173:189,"=":e?61:187,";":e?59:186,"'":222,"[":219,"]":221,"\\":220},s={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},a={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},c={16:!1,18:!1,17:!1,91:!1},l={},u=1;u<20;u++)i["f".concat(u)]=111+u;var d=[],f="all",p=[],h=function(e){return i[e.toLowerCase()]||s[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function m(e){f=e||"all"}function g(){return f||"all"}function y(){return d.slice(0)}function v(e){var t=e.target||e.srcElement,n=t.tagName,o=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(o=!1),o}function b(e){return"string"==typeof e&&(e=h(e)),-1!==d.indexOf(e)}function _(e,t){var n,o;for(var r in e||(e=g()),l)if(Object.prototype.hasOwnProperty.call(l,r))for(n=l[r],o=0;o<n.length;)n[o].scope===e?n.splice(o,1):o++;g()===e&&m(t||"all")}function w(e){var t=e.keyCode||e.which||e.charCode,n=d.indexOf(t);if(n>=0&&d.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&d.splice(0,d.length),93!==t&&224!==t||(t=91),t in c)for(var o in c[t]=!1,s)s[o]===t&&(O[o]=!1)}function E(e){if(e){if(Array.isArray(e))e.forEach((function(e){e.key&&j(e)}));else if("object"==typeof e)e.key&&j(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var r=n[0],i=n[1];"function"==typeof r&&(i=r,r=""),j({key:e,scope:r,method:i,splitKey:"+"})}}else Object.keys(l).forEach((function(e){return delete l[e]}))}var j=function(e){var t=e.key,i=e.scope,a=e.method,c=e.splitKey,u=void 0===c?"+":c;o(t).forEach((function(e){var t=e.split(u),o=t.length,c=t[o-1],d="*"===c?"*":h(c);if(l[d]){i||(i=g());var f=o>1?n(s,t):[];l[d]=l[d].map((function(e){return a&&e.method!==a||e.scope!==i||!r(e.mods,f)?e:{}}))}}))};function S(e,t,n){var o;if(t.scope===n||"all"===t.scope){for(var r in o=t.mods.length>0,c)Object.prototype.hasOwnProperty.call(c,r)&&(!c[r]&&t.mods.indexOf(+r)>-1||c[r]&&-1===t.mods.indexOf(+r))&&(o=!1);(0!==t.mods.length||c[16]||c[18]||c[17]||c[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function R(e){var t=l["*"],n=e.keyCode||e.which||e.charCode;if(O.filter.call(this,e)){if(93!==n&&224!==n||(n=91),-1===d.indexOf(n)&&229!==n&&d.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=a[t];e[t]&&-1===d.indexOf(n)?d.push(n):!e[t]&&d.indexOf(n)>-1?d.splice(d.indexOf(n),1):"metaKey"===t&&e[t]&&3===d.length&&(e.ctrlKey||e.shiftKey||e.altKey||(d=d.slice(d.indexOf(n))))})),n in c){for(var o in c[n]=!0,s)s[o]===n&&(O[o]=!0);if(!t)return}for(var r in c)Object.prototype.hasOwnProperty.call(c,r)&&(c[r]=e[a[r]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===d.indexOf(17)&&d.push(17),-1===d.indexOf(18)&&d.push(18),c[17]=!0,c[18]=!0);var i=g();if(t)for(var u=0;u<t.length;u++)t[u].scope===i&&("keydown"===e.type&&t[u].keydown||"keyup"===e.type&&t[u].keyup)&&S(e,t[u],i);if(n in l)for(var f=0;f<l[n].length;f++)if(("keydown"===e.type&&l[n][f].keydown||"keyup"===e.type&&l[n][f].keyup)&&l[n][f].key){for(var p=l[n][f],m=p.splitKey,y=p.key.split(m),v=[],b=0;b<y.length;b++)v.push(h(y[b]));v.sort().join("")===d.sort().join("")&&S(e,p,i)}}}function N(e){return p.indexOf(e)>-1}function O(e,r,i){d=[];var a=o(e),c=[],u="all",f=document,m=0,g=!1,y=!0,v="+";for(void 0===i&&"function"==typeof r&&(i=r),"[object Object]"===Object.prototype.toString.call(r)&&(r.scope&&(u=r.scope),r.element&&(f=r.element),r.keyup&&(g=r.keyup),void 0!==r.keydown&&(y=r.keydown),"string"==typeof r.splitKey&&(v=r.splitKey)),"string"==typeof r&&(u=r);m<a.length;m++)c=[],(e=a[m].split(v)).length>1&&(c=n(s,e)),(e="*"===(e=e[e.length-1])?"*":h(e))in l||(l[e]=[]),l[e].push({keyup:g,keydown:y,scope:u,mods:c,shortcut:a[m],method:i,key:a[m],splitKey:v});void 0!==f&&!N(f)&&window&&(p.push(f),t(f,"keydown",(function(e){R(e)})),t(window,"focus",(function(){d=[]})),t(f,"keyup",(function(e){R(e),w(e)})))}var C={setScope:m,getScope:g,deleteScope:_,getPressedKeyCodes:y,isPressed:b,filter:v,unbind:E};for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(O[x]=C[x]);if("undefined"!=typeof window){var T=window.hotkeys;O.noConflict=function(e){return e&&window.hotkeys===O&&(window.hotkeys=T),O},window.hotkeys=O}return O}()},"./node_modules/mark.js/dist/mark.js":function(e){e.exports=function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(n){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;t(this,e),this.ctx=n,this.iframes=o,this.exclude=r,this.iframesTimeout=i}return n(e,[{key:"getContexts",value:function(){var e=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach((function(t){var n=e.filter((function(e){return e.contains(t)})).length>0;-1!==e.indexOf(t)||n||e.push(t)})),e}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=void 0;try{var r=e.contentWindow;if(o=r.document,!r||!o)throw new Error("iframe inaccessible")}catch(e){n()}o&&t(o)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var o=this,r=!1,i=null,s=function s(){if(!r){r=!0,clearTimeout(i);try{o.isIframeBlank(e)||(e.removeEventListener("load",s),o.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",s),i=setTimeout(s,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,o=0;this.forEachIframe(e,(function(){return!0}),(function(e){o++,n.waitForIframes(e.querySelector("html"),(function(){--o||t()}))}),(function(e){e||t()}))}},{key:"forEachIframe",value:function(t,n,o){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},s=t.querySelectorAll("iframe"),a=s.length,c=0;s=Array.prototype.slice.call(s);var l=function(){--a<=0&&i(c)};a||l(),s.forEach((function(t){e.matches(t,r.exclude)?l():r.onIframeReady(t,(function(e){n(t)&&(c++,o(e)),l()}),l)}))}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:(null===t||e.nextNode())&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,o){var r=!1,i=!1;return o.forEach((function(e,t){e.val===n&&(r=t,i=e.handled)})),this.compareNodeIframe(e,t,n)?(!1!==r||i?!1===r||i||(o[r].handled=!0):o.push({val:n,handled:!0}),!0):(!1===r&&o.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,o){var r=this;e.forEach((function(e){e.handled||r.getIframeContents(e.val,(function(e){r.createInstanceOnIframe(e).forEachNode(t,n,o)}))}))}},{key:"iterateThroughNodes",value:function(e,t,n,o,r){for(var i=this,s=this.createIterator(t,e,o),a=[],c=[],l=void 0,u=void 0,d=function(){var e=i.getIteratorNode(s);return u=e.prevNode,l=e.node};d();)this.iframes&&this.forEachIframe(t,(function(e){return i.checkIframeFilter(l,u,e,a)}),(function(t){i.createInstanceOnIframe(t).forEachNode(e,(function(e){return c.push(e)}),o)})),c.push(l);c.forEach((function(e){n(e)})),this.iframes&&this.handleOpenIframes(a,e,n,o),r()}},{key:"forEachNode",value:function(e,t,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=this.getContexts(),s=i.length;s||r(),i.forEach((function(i){var a=function(){o.iterateThroughNodes(e,i,t,n,(function(){--s<=0&&r()}))};o.iframes?o.waitForIframes(i,a):a()}))}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,o=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(o){var r=!1;return n.every((function(t){return!o.call(e,t)||(r=!0,!1)})),r}return!1}}]),e}(),i=function(){function i(e){t(this,i),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return n(i,[{key:"log",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",o=this.opt.log;this.opt.debug&&"object"===(void 0===o?"undefined":e(o))&&"function"==typeof o[n]&&o[n]("mark.js: "+t)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",o=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r),a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i);""!==s&&""!==a&&(e=e.replace(new RegExp("("+this.escapeStr(s)+"|"+this.escapeStr(a)+")","gm"+n),o+"("+this.processSynomyms(s)+"|"+this.processSynomyms(a)+")"+o))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,(function(e){return"\\"===e.charAt(0)?"?":""}))).replace(/(?:\\)*\*/g,(function(e){return"\\"===e.charAt(0)?"*":""}))}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,(function(e,t,n){var o=n.charAt(t+1);return/[(|)\\]/.test(o)||""===o?e:e+"\0"}))}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],o=[];return e.split("").forEach((function(r){n.every((function(n){if(-1!==n.indexOf(r)){if(o.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),o.push(n)}return!0}))})),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",o=this.opt.accuracy,r="string"==typeof o?o:o.value,i="string"==typeof o?[]:o.limiters,s="";switch(i.forEach((function(e){s+="|"+t.escapeStr(e)})),r){default:return"()("+e+")";case"complementary":return"()([^"+(s="\\s"+(s||this.escapeStr(n)))+"]*"+e+"[^"+s+"]*)";case"exactly":return"(^|\\s"+s+")("+e+")(?=$|\\s"+s+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach((function(e){t.opt.separateWordSearch?e.split(" ").forEach((function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)})):e.trim()&&-1===n.indexOf(e)&&n.push(e)})),{keywords:n.sort((function(e,t){return t.length-e.length})),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],o=0;return e.sort((function(e,t){return e.start-t.start})).forEach((function(e){var r=t.callNoMatchOnInvalidRanges(e,o),i=r.start,s=r.end;r.valid&&(e.start=i,e.length=s-i,n.push(e),o=s)})),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,o=void 0,r=!1;return e&&void 0!==e.start?(o=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&o-t>0&&o-n>0?r=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:o,valid:r}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var o=void 0,r=!0,i=n.length,s=t-i,a=parseInt(e.start,10)-s;return(o=(a=a>i?i:a)+parseInt(e.length,10))>i&&(o=i,this.log("End range automatically set to the max value of "+i)),a<0||o-a<0||a>i||o>i?(r=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(a,o).replace(/\s+/g,"")&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:a,end:o,valid:r}}},{key:"getTextNodes",value:function(e){var t=this,n="",o=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(function(e){o.push({start:n.length,end:(n+=e.textContent).length,node:e})}),(function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),(function(){e({value:n,nodes:o})}))}},{key:"matchesExclude",value:function(e){return r.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var o=this.opt.element?this.opt.element:"mark",r=e.splitText(t),i=r.splitText(n-t),s=document.createElement(o);return s.setAttribute("data-markjs","true"),this.opt.className&&s.setAttribute("class",this.opt.className),s.textContent=r.textContent,r.parentNode.replaceChild(s,r),i}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,o,r){var i=this;e.nodes.every((function(s,a){var c=e.nodes[a+1];if(void 0===c||c.start>t){if(!o(s.node))return!1;var l=t-s.start,u=(n>s.end?s.end:n)-s.start,d=e.value.substr(0,s.start),f=e.value.substr(u+s.start);if(s.node=i.wrapRangeInTextNode(s.node,l,u),e.value=d+f,e.nodes.forEach((function(t,n){n>=a&&(e.nodes[n].start>0&&n!==a&&(e.nodes[n].start-=u),e.nodes[n].end-=u)})),n-=u,r(s.node.previousSibling,s.start),!(n>s.end))return!1;t=s.end}return!0}))}},{key:"wrapMatches",value:function(e,t,n,o,r){var i=this,s=0===t?0:t+1;this.getTextNodes((function(t){t.nodes.forEach((function(t){t=t.node;for(var r=void 0;null!==(r=e.exec(t.textContent))&&""!==r[s];)if(n(r[s],t)){var a=r.index;if(0!==s)for(var c=1;c<s;c++)a+=r[c].length;t=i.wrapRangeInTextNode(t,a,a+r[s].length),o(t.previousSibling),e.lastIndex=0}})),r()}))}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,o,r){var i=this,s=0===t?0:t+1;this.getTextNodes((function(t){for(var a=void 0;null!==(a=e.exec(t.value))&&""!==a[s];){var c=a.index;if(0!==s)for(var l=1;l<s;l++)c+=a[l].length;var u=c+a[s].length;i.wrapRangeInMappedTextNode(t,c,u,(function(e){return n(a[s],e)}),(function(t,n){e.lastIndex=n,o(t)}))}r()}))}},{key:"wrapRangeFromIndex",value:function(e,t,n,o){var r=this;this.getTextNodes((function(i){var s=i.value.length;e.forEach((function(e,o){var a=r.checkWhitespaceRanges(e,s,i.value),c=a.start,l=a.end;a.valid&&r.wrapRangeInMappedTextNode(i,c,l,(function(n){return t(n,e,i.value.substring(c,l),o)}),(function(t){n(t,e)}))})),o()}))}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var o=0,r="wrapMatches",i=function(e){o++,n.opt.each(e)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,(function(e,t){return n.opt.filter(t,e,o)}),i,(function(){0===o&&n.opt.noMatch(e),n.opt.done(o)}))}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var o=0,r="wrapMatches",i=this.getSeparatedKeywords("string"==typeof e?[e]:e),s=i.keywords,a=i.length,c=this.opt.caseSensitive?"":"i",l=function e(t){var i=new RegExp(n.createRegExp(t),"gm"+c),l=0;n.log('Searching with expression "'+i+'"'),n[r](i,1,(function(e,r){return n.opt.filter(r,t,o,l)}),(function(e){l++,o++,n.opt.each(e)}),(function(){0===l&&n.opt.noMatch(t),s[a-1]===t?n.opt.done(o):e(s[s.indexOf(t)+1])}))};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===a?this.opt.done(o):l(s[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var o=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,(function(e,t,o,r){return n.opt.filter(e,t,o,r)}),(function(e,t){o++,n.opt.each(e,t)}),(function(){n.opt.done(o)}))):this.opt.done(o)}},{key:"unmark",value:function(e){var t=this;this.opt=e;var n=this.opt.element?this.opt.element:"*";n+="[data-markjs]",this.opt.className&&(n+="."+this.opt.className),this.log('Removal selector "'+n+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(function(e){t.unwrapMatches(e)}),(function(e){var o=r.matches(e,n),i=t.matchesExclude(e);return!o||i?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}},{key:"opt",set:function(e){this._opt=o({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new r(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),i}();function s(e){var t=this,n=new i(e);return this.mark=function(e,o){return n.mark(e,o),t},this.markRegExp=function(e,o){return n.markRegExp(e,o),t},this.markRanges=function(e,o){return n.markRanges(e,o),t},this.unmark=function(e){return n.unmark(e),t},this}return s}()},"./node_modules/rangy-classapplier/bundles/index.umd.js":function(e,t,n){!function(e,t){"use strict";var n=t.dom.DomPosition,o=t.util.isHostMethod,r=new t.Module("ClassApplier",["WrappedSelection"]),i="span",s=o(document,"createElementNS");function a(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function c(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function l(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function u(e,t){return"object"==typeof e.classList?e.classList.contains(t):l("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function d(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,o=n?e.className:e.getAttribute("class");o?l(o,t)||(o+=" "+t):o=t,n?e.className=o:e.setAttribute("class",o)}}var f=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var o="string"==typeof t.className,r=o?t.className:t.getAttribute("class");r=r.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),o?t.className=r:t.setAttribute("class",r)}}}();function p(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function h(e){return e&&e.split(/\s+/).sort().join(" ")}function m(e){return h(p(e))}function g(e,t){return m(e)==m(t)}function y(e,t){for(var n=t.split(/\s+/),o=0,r=n.length;o<r;++o)if(!u(e,c(n[o])))return!1;return!0}function v(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function b(e,t,n,o,r){var i=e.node,s=e.offset,a=i,c=s;i==o&&s>r&&++c,i!=t||s!=n&&s!=n+1||(a=o,c+=r-n),i==t&&s>n+1&&--c,e.node=a,e.offset=c}function _(e,t,n){e.node==t&&e.offset>n&&--e.offset}function w(e,n,o,r){-1==o&&(o=n.childNodes.length);var i=e.parentNode,s=t.dom.getNodeIndex(e);r.forEach((function(e){b(e,i,s,n,o)})),n.childNodes.length==o?n.appendChild(e):n.insertBefore(e,n.childNodes[o])}function E(e,n){var o=e.parentNode,r=t.dom.getNodeIndex(e);n.forEach((function(e){_(e,o,r)})),t.dom.removeNode(e)}function j(e,t,n,o,r){for(var i,s=[];i=e.firstChild;)w(i,t,n++,r),s.push(i);return o&&E(e,r),s}function S(e,n){return j(e,e.parentNode,t.dom.getNodeIndex(e),!0,n)}function R(e,t){var n=e.cloneRange();n.selectNodeContents(t);var o=n.intersection(e);return""!=(o?o.toString():"")}function N(e){for(var t,n=e.getNodes([3]),o=0;(t=n[o])&&!R(e,t);)++o;for(var r=n.length-1;(t=n[r])&&!R(e,t);)--r;return n.slice(o,r+1)}function O(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,o,r,i=0,s=e.attributes.length;i<s;++i)if("class"!=(r=(n=e.attributes[i]).name)){if(null===n!=(null===(o=t.attributes.getNamedItem(r))))return!1;if(n.specified!=o.specified)return!1;if(n.specified&&n.nodeValue!==o.nodeValue)return!1}return!0}function C(e,t){for(var n,o=0,r=e.attributes.length;o<r;++o)if(n=e.attributes[o].name,(!t||!t.includes(n))&&e.attributes[o].specified&&"class"!=n)return!0;return!1}var x=t.dom.getComputedStyleProperty,T="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||T(e.parentNode))};function A(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||T(e)&&!T(e.parentNode))}function k(e){return(T(e)||1!=e.nodeType&&T(e.parentNode))&&!A(e)}var I=/^inline(-block|-table)?$/i;function D(e){return e&&1==e.nodeType&&!I.test(x(e,"display"))}var P=/[^\r\n\t\f \u200B]/;function L(e){if(0==e.data.length)return!0;if(P.test(e.data))return!1;switch(x(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return D(e.previousSibling)||D(e.nextSibling)}function B(e){var t,o,r=[];for(t=0;o=e[t++];)r.push(new n(o.startContainer,o.startOffset),new n(o.endContainer,o.endOffset));return r}function M(e,t){for(var n,o,r,i=0,s=e.length;i<s;++i)n=e[i],o=t[2*i],r=t[2*i+1],n.setStartAndEnd(o.node,o.offset,r.node,r.offset)}function z(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n!=e.length||!!e.nextSibling:n>0&&n<e.childNodes.length}function W(e,n,o,i){var s,a,c=0==o;if(t.dom.isAncestorOf(n,e))return e;if(t.dom.isCharacterDataNode(n)){var l=t.dom.getNodeIndex(n);if(0==o)o=l;else{if(o!=n.length)throw r.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+o+" in "+n.data);o=l+1}n=n.parentNode}if(z(n,o)){s=n.cloneNode(!1),a=n.parentNode,s.id&&s.removeAttribute("id");for(var u,d=0;u=n.childNodes[o];)w(u,s,d++,i);return w(s,a,t.dom.getNodeIndex(n)+1,i),n==e?s:W(e,a,t.dom.getNodeIndex(s),i)}if(e!=n){s=n.parentNode;var f=t.dom.getNodeIndex(n);return c||f++,W(e,s,f,i)}return e}function H(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&g(e,t)&&O(e,t)&&"inline"==x(e,"display")&&"inline"==x(t,"display")}function q(e){var t=e?"nextSibling":"previousSibling";return function(n,o){var r=n.parentNode,i=n[t];if(i){if(i&&3==i.nodeType)return i}else if(o&&(i=r[t])&&1==i.nodeType&&H(r,i)){var s=i[e?"firstChild":"lastChild"];if(s&&3==s.nodeType)return s}return null}}var F=q(!1),V=q(!0),U=function(){function e(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&this.textNodes.push(t)}return e.prototype.doMerge=function(e){var n=this.textNodes,o=n[0];if(n.length>1){var r,i=t.dom.getNodeIndex(o),s=[],a=0,c=n.length;n.forEach((function(n,l){r=n.parentNode,l>0&&(r.removeChild(n),r.hasChildNodes()||t.dom.removeNode(r),e&&e.forEach((function(e){e.node==n&&(e.node=o,e.offset+=a),e.node==r&&e.offset>i&&(--e.offset,e.offset==i+1&&l<c-1&&(e.node=o,e.offset=a))}))),s[l]=n.data,a+=n.data.length})),o.data=s.join("")}return o.data},e.prototype.getLength=function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},e.prototype.toString=function(){var e=[];return this.textNodes.forEach((function(t,n){e[n]="'"+t.data+"'"})),"[Merge("+e.join(",")+")]"},e}(),$=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],G={},Y={hasClass:u,addClass:d,removeClass:f,getClass:p,hasSameClasses:g,hasAllClasses:y,replaceWithOwnChildren:S,elementsHaveSameNonClassAttributes:O,elementHasNonClassAttributes:C,splitNodeAt:W,isEditableElement:T,isEditingHost:A,isEditable:k},K=function(){function e(e,t,n){this.className=e,this.elementTagName=i,this.ignoreWhiteSpace=!0,this.applyToEditableOnly=!1,this.useExistingElements=!0,this.removeEmptyElements=!0;var o,r,s,l,u=this;u.cssClass=e;var d=null,f={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),n=t.tagNames,d=t.elementProperties,f=t.elementAttributes,r=0;l=$[r++];)t.hasOwnProperty(l)&&(u[l]=t[l]);o=t.normalize}else o=t;u.normalize=void 0===o||o,u.attrExceptions=[];var p=document.createElement(u.elementTagName);if(u.elementProperties=u.copyPropertiesToElement(d,p,!0),a(f,(function(e,t){u.attrExceptions.push(e),f[e]=""+t})),u.elementAttributes=f,u.elementSortedClassName=u.elementProperties.hasOwnProperty("className")?h(u.elementProperties.className+" "+e):e,u.applyToAnyTagName=!1,"string"==typeof n)"*"==n?u.applyToAnyTagName=!0:u.tagNames=c(n.toLowerCase()).split(/\s*,\s*/);else if("object"==typeof n&&"number"==typeof n.length)for(u.tagNames=[],r=0,s=n.length;r<s;++r)"*"==n[r]?u.applyToAnyTagName=!0:u.tagNames.push(n[r].toLowerCase());else u.tagNames=[u.elementTagName]}return e.prototype.copyPropertiesToElement=function(e,t,n){var o,r,i,s,a,c,l={};for(var u in e)if(e.hasOwnProperty(u))if(s=e[u],a=t[u],"className"==u)d(t,s),d(t,this.className),t[u]=h(t[u]),n&&(l[u]=s);else if("style"==u){for(o in r=a,n&&(l[u]=i={}),e[u])e[u].hasOwnProperty(o)&&(r[o]=s[o],n&&(i[o]=r[o]));this.attrExceptions.push(u)}else t[u]=s,n&&(l[u]=t[u],c=G.hasOwnProperty(u)?G[u]:u,this.attrExceptions.push(c));return n?l:""},e.prototype.copyAttributesToElement=function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},e.prototype.appliesToElement=function(e){return this.tagNames.includes(e.tagName.toLowerCase())},e.prototype.getEmptyElements=function(e){var t=this;return e.getNodes([1],(function(e){return t.appliesToElement(e)&&!e.hasChildNodes()}))},e.prototype.hasClass=function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&u(e,this.className)},e.prototype.getSelfOrAncestorWithClass=function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},e.prototype.isModifiable=function(e){return!this.applyToEditableOnly||k(e)},e.prototype.isIgnorableWhiteSpaceNode=function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&L(e)},e.prototype.postApply=function(e,t,n,o){var r,i,s=e[0],a=e[e.length-1],c=[],l=s,u=a,d=0,f=a.length;e.forEach((function(e){(i=F(e,!o))?(r||(r=new U(i),c.push(r)),r.textNodes.push(e),e===s&&(l=r.textNodes[0],d=l.length),e===a&&(u=r.textNodes[0],f=r.getLength())):r=null}));var p=V(a,!o);if(p&&(r||(r=new U(a),c.push(r)),r.textNodes.push(p)),c.length){for(var h=0,m=c.length;h<m;++h)c[h].doMerge(n);t.setStartAndEnd(l,d,u,f)}},e.prototype.createContainer=function(e){var n=t.dom.getDocument(e),o=s&&!t.dom.isHtmlNamespace(e)&&e.namespaceURI?n.createElementNS(e.namespaceURI,this.elementTagName):n.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,o,!1),this.copyAttributesToElement(this.elementAttributes,o),d(o,this.className),this.onElementCreate&&this.onElementCreate(o,this),o},e.prototype.elementHasProperties=function(e,t){var n=this;return a(t,(function(t,o){if("className"==t)return y(e,o);if("object"==typeof o){if(!n.elementHasProperties(e[t],o))return!1}else if(e[t]!==o)return!1}))},e.prototype.elementHasAttributes=function(e,t){return a(t,(function(t,n){if(e.getAttribute(t)!==n)return!1}))},e.prototype.applyToTextNode=function(e,t){if(v(e)){var n=e.parentNode;if(1==n.childNodes.length&&this.useExistingElements&&this.appliesToElement(n)&&this.elementHasProperties(n,this.elementProperties)&&this.elementHasAttributes(n,this.elementAttributes))d(n,this.className);else{var o=e.parentNode,r=this.createContainer(o);o.insertBefore(r,e),r.appendChild(e)}}},e.prototype.isRemovable=function(e){return e.tagName.toLowerCase()==this.elementTagName&&m(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!C(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},e.prototype.isEmptyContainer=function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},e.prototype.removeEmptyContainers=function(e){var t=this,n=e.getNodes([1],(function(e){return t.isEmptyContainer(e)})),o=[e],r=B(o);n.forEach((function(e){E(e,r)})),M(o,r)},e.prototype.undoToTextNode=function(e,t,n,o){if(!t.containsNode(n)){var r=t.cloneRange();r.selectNode(n),r.isPointInRange(t.endContainer,t.endOffset)&&(W(n,t.endContainer,t.endOffset,o),t.setEndAfter(n)),r.isPointInRange(t.startContainer,t.startOffset)&&(n=W(n,t.startContainer,t.startOffset,o))}this.isRemovable(n)?S(n,o):f(n,this.className)},e.prototype.splitAncestorWithClass=function(e,t,n){var o=this.getSelfOrAncestorWithClass(e);o&&W(o,e,t,n)},e.prototype.undoToAncestor=function(e,t){this.isRemovable(e)?S(e,t):f(e,this.className)},e.prototype.applyToRange=function(e,t){var n=this,o=B((t=t||[])||[]);e.splitBoundariesPreservingPositions(o),n.removeEmptyElements&&n.removeEmptyContainers(e);var r=N(e);if(r.length){r.forEach((function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,o)}));var i=r[r.length-1];e.setStartAndEnd(r[0],0,i,i.length),n.normalize&&n.postApply(r,e,o,!1),M(t,o)}n.getEmptyElements(e).forEach((function(e){d(e,n.className)}))},e.prototype.applyToRanges=function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},e.prototype.applyToSelection=function(e){var n=t.getSelection(e);n.setRanges(this.applyToRanges(n.getAllRanges()))},e.prototype.undoToRange=function(e,t){var n=this,o=B(t=t||[]);e.splitBoundariesPreservingPositions(o),n.removeEmptyElements&&n.removeEmptyContainers(e);var r,i,s=N(e),a=s[s.length-1];if(s.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,o),n.splitAncestorWithClass(e.startContainer,e.startOffset,o);for(var c=0,l=s.length;c<l;++c)r=s[c],(i=n.getSelfOrAncestorWithClass(r))&&n.isModifiable(r)&&n.undoToAncestor(i,o);e.setStartAndEnd(s[0],0,a,a.length),n.normalize&&n.postApply(s,e,o,!0),M(t,o)}n.getEmptyElements(e).forEach((function(e){f(e,n.className)}))},e.prototype.undoToRanges=function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},e.prototype.undoToSelection=function(e){var n=t.getSelection(e),o=t.getSelection(e).getAllRanges();this.undoToRanges(o),n.setRanges(o)},e.prototype.isAppliedToRange=function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,o=0;n=t[o++];)if(!this.isIgnorableWhiteSpaceNode(n)&&R(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},e.prototype.isAppliedToRanges=function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},e.prototype.isAppliedToSelection=function(e){var n=t.getSelection(e);return this.isAppliedToRanges(n.getAllRanges())},e.prototype.toggleRange=function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},e.prototype.toggleSelection=function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},e.prototype.getElementsWithClassIntersectingRange=function(e){var t=[],n=this;return e.getNodes([3],(function(e){var o=n.getSelfOrAncestorWithClass(e);o&&!t.includes(o)&&t.push(o)})),t},e.prototype.detach=function(){},e.util=Y,e}();function J(e,t,n){return new K(e,t,n)}e.ClassApplier=K,e.CssClassApplier=K,e.createClassApplier=J,Object.defineProperty(e,"__esModule",{value:!0})}(t,n("./node_modules/rangy2/esm5/index.js"))},"./node_modules/rangy2/bundles/index.umd.js":function(e,t){!function(e){"use strict";var t=function(e){try{return!!e()}catch(e){return!0}},n={}.toString,o=function(e){return n.call(e).slice(8,-1)},r="".split,i=t((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?r.call(e,""):Object(e)}:Object,s=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},a=function(e){return i(s(e))},c=Math.ceil,l=Math.floor,u=function(e){return isNaN(e=+e)?0:(e>0?l:c)(e)},d=Math.min,f=function(e){return e>0?d(u(e),9007199254740991):0},p=Math.max,h=Math.min,m=function(e,t){var n=u(e);return n<0?p(n+t,0):h(n,t)},g=function(e){return function(t,n,o){var r,i=a(t),s=f(i.length),c=m(o,s);if(e&&n!=n){for(;s>c;)if((r=i[c++])!=r)return!0}else for(;s>c;c++)if((e||c in i)&&i[c]===n)return e||c||0;return!e&&-1}},y="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math?self:Function("return this")(),v=!t((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),b={}.propertyIsEnumerable,_=Object.getOwnPropertyDescriptor,w={f:_&&!b.call({1:2},1)?function(e){var t=_(this,e);return!!t&&t.enumerable}:b},E=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},j=function(e){return"object"==typeof e?null!==e:"function"==typeof e},S=function(e,t){if(!j(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!j(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!j(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!j(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")},R={}.hasOwnProperty,N=function(e,t){return R.call(e,t)},O=y.document,C=j(O)&&j(O.createElement),x=function(e){return C?O.createElement(e):{}},T=!v&&!t((function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a})),A=Object.getOwnPropertyDescriptor,k={f:v?A:function(e,t){if(e=a(e),t=S(t,!0),T)try{return A(e,t)}catch(e){}if(N(e,t))return E(!w.f.call(e,t),e[t])}},I=function(e){if(!j(e))throw TypeError(String(e)+" is not an object");return e},D=Object.defineProperty,P={f:v?D:function(e,t,n){if(I(e),t=S(t,!0),I(n),T)try{return D(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},L=v?function(e,t,n){return P.f(e,t,E(1,n))}:function(e,t,n){return e[t]=n,e};function B(e,t){return e(t={exports:{}},t.exports),t.exports}var M,z,W,H=function(e,t){try{L(y,e,t)}catch(n){y[e]=t}return t},q=B((function(e){var t="__core-js_shared__",n=y[t]||H(t,{});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.0.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),F=q("native-function-to-string",Function.toString),V=y.WeakMap,U="function"==typeof V&&/native code/.test(F.call(V)),$=0,G=Math.random(),Y=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++$+G).toString(36))},K=q("keys"),J=function(e){return K[e]||(K[e]=Y(e))},Z={},Q=y.WeakMap,X=function(e){return W(e)?z(e):M(e,{})},ee=function(e){return function(t){var n;if(!j(t)||(n=z(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(U){var te=new Q,ne=te.get,oe=te.has,re=te.set;M=function(e,t){return re.call(te,e,t),t},z=function(e){return ne.call(te,e)||{}},W=function(e){return oe.call(te,e)}}else{var ie=J("state");Z[ie]=!0,M=function(e,t){return L(e,ie,t),t},z=function(e){return N(e,ie)?e[ie]:{}},W=function(e){return N(e,ie)}}var se={set:M,get:z,has:W,enforce:X,getterFor:ee},ae=B((function(e){var t=se.get,n=se.enforce,o=String(F).split("toString");q("inspectSource",(function(e){return F.call(e)})),(e.exports=function(e,t,r,i){var s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,c=!!i&&!!i.noTargetGet;"function"==typeof r&&("string"!=typeof t||N(r,"name")||L(r,"name",t),n(r).source=o.join("string"==typeof t?t:"")),e!==y?(s?!c&&e[t]&&(a=!0):delete e[t],a?e[t]=r:L(e,t,r)):a?e[t]=r:H(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||F.call(this)}))})),ce=g(!1),le=function(e,t){var n,o=a(e),r=0,i=[];for(n in o)!N(Z,n)&&N(o,n)&&i.push(n);for(;t.length>r;)N(o,n=t[r++])&&(~ce(i,n)||i.push(n));return i},ue=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],de=ue.concat("length","prototype"),fe={f:Object.getOwnPropertyNames||function(e){return le(e,de)}},pe={f:Object.getOwnPropertySymbols},he=y.Reflect,me=he&&he.ownKeys||function(e){var t=fe.f(I(e)),n=pe.f;return n?t.concat(n(e)):t},ge=function(e,t){for(var n=me(t),o=P.f,r=k.f,i=0;i<n.length;i++){var s=n[i];N(e,s)||o(e,s,r(t,s))}},ye=/#|\.prototype\./,ve=function(e,n){var o=_e[be(e)];return o==Ee||o!=we&&("function"==typeof n?t(n):!!n)},be=ve.normalize=function(e){return String(e).replace(ye,".").toLowerCase()},_e=ve.data={},we=ve.NATIVE="N",Ee=ve.POLYFILL="P",je=ve,Se=k.f,Re=function(e,t){var n,o,r,i,s,a=e.target,c=e.global,l=e.stat;if(n=c?y:l?y[a]||H(a,{}):(y[a]||{}).prototype)for(o in t){if(i=t[o],r=e.noTargetGet?(s=Se(n,o))&&s.value:n[o],!je(c?o:a+(l?".":"#")+o,e.forced)&&void 0!==r){if(typeof i==typeof r)continue;ge(i,r)}(e.sham||r&&r.sham)&&L(i,"sham",!0),ae(n,o,i,e)}},Ne=!t((function(){return!String(Symbol())})),Oe=q("wks"),Ce=y.Symbol,xe=function(e){return Oe[e]||(Oe[e]=Ne&&Ce[e]||(Ne?Ce:Y)("Symbol."+e))},Te=Object.keys||function(e){return le(e,ue)},Ae=v?Object.defineProperties:function(e,t){I(e);for(var n,o=Te(t),r=o.length,i=0;r>i;)P.f(e,n=o[i++],t[n]);return e},ke=y.document,Ie=ke&&ke.documentElement,De=J("IE_PROTO"),Pe="prototype",Le=function(){},Be=function(){var e,t=x("iframe"),n=ue.length,o="<",r="script",i=">",s="java"+r+":";for(t.style.display="none",Ie.appendChild(t),t.src=String(s),(e=t.contentWindow.document).open(),e.write(o+r+i+"document.F=Object"+o+"/"+r+i),e.close(),Be=e.F;n--;)delete Be[Pe][ue[n]];return Be()},Me=Object.create||function(e,t){var n;return null!==e?(Le[Pe]=I(e),n=new Le,Le[Pe]=null,n[De]=e):n=Be(),void 0===t?n:Ae(n,t)};Z[De]=!0;var ze=xe("unscopables"),We=Array.prototype;null==We[ze]&&L(We,ze,Me(null));var He=function(e){We[ze][e]=!0},qe=g(!0);Re({target:"Array",proto:!0},{includes:function(e){return qe(this,e,arguments.length>1?arguments[1]:void 0)}}),He("includes");var Fe,Ve,Ue=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},$e=function(e,t,n){if(Ue(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}},Ge=Function.call,Ye=(Fe="includes",$e(Ge,y.Array.prototype[Fe],Ve),function(e){return Object(s(e))}),Ke=Object.assign,Je=!Ke||t((function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!=Ke({},e)[n]||Te(Ke({},t)).join("")!=o}))?function(e,t){for(var n=Ye(e),o=arguments.length,r=1,s=pe.f,a=w.f;o>r;)for(var c,l=i(arguments[r++]),u=s?Te(l).concat(s(l)):Te(l),d=u.length,f=0;d>f;)a.call(l,c=u[f++])&&(n[c]=l[c]);return n}:Ke;Re({target:"Object",stat:!0,forced:Object.assign!==Je},{assign:Je}),y.Object.assign;var Ze="undefined",Qe="2.1.0",Xe=typeof window!=Ze&&typeof document!=Ze;Xe||console.log("Rangy can only run in a browser");var et={implementsDomRange:!0,implementsTextRange:!1,htmlParsingConforms:!0,crashyTextNodes:!1,implementsWinGetSelection:!0,implementsDocSelection:!1,selectionSupportsMultipleRanges:!1,implementsControlRange:!1},tt={preferTextRange:!1,checkSelectionRanges:!0};function nt(e){if(Xe)if("complete"==document.readyState)e();else{var t=function(){document.removeEventListener("DOMContentLoaded",t,!1),e()};document.addEventListener("DOMContentLoaded",t,!1)}}function ot(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function rt(e,t){return!("object"!=typeof e[t]||!e[t])}function it(e,t){return void 0!==e[t]}function st(e){return function(t,n){for(var o=n.length;o--;)if(!e(t,n[o]))return!1;return!0}}var at=st(ot),ct=st(rt),lt=st(it);function ut(e){return rt(e,"body")?e.body:e.getElementsByTagName("body")[0]}var dt=Object.freeze({isHostMethod:ot,isHostObject:rt,isHostProperty:it,areHostMethods:at,areHostObjects:ct,areHostProperties:lt,getBody:ut}),ft=function(){function e(e,t){this.name=e,this.dependencies=t}return e.prototype.fail=function(e){throw console.log("Module '"+this.name+"' failed to load: "+e),new Error(e)},e.prototype.warn=function(e){console.log("Module "+this.name+": "+e)},e.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},e}();function pt(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}pt.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},pt.prototype.toString=function(){return this.message};var ht,mt=new ft("DomUtil",[]),gt="undefined";function yt(e){var t;return typeof e.namespaceURI==gt||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function vt(e){var t=e.parentNode;return 1==t.nodeType?t:null}function bt(e){for(var t=0;e=e.previousSibling;)++t;return t}function _t(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function wt(e,t){var n,o=[];for(n=e;n;n=n.parentNode)o.push(n);for(n=t;n;n=n.parentNode)if(o.includes(n))return n;return null}function Et(e,t,n){for(var o=n?t:t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}function jt(e,t){return Et(e,t,!0)}function St(e,t,n){for(var o,r=n?e:e.parentNode;r;){if((o=r.parentNode)===t)return r;r=o}return null}function Rt(e){var t=e.nodeType;return 3==t||4==t||8==t}function Nt(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function Ot(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e}function Ct(e,t,n){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),Ot(o,e),n)for(var r,i=0;r=n[i++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>bt(e)&&++r.offset;return o}function xt(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=gt)return e.ownerDocument;if(typeof e.document!=gt)return e.document;if(e.parentNode)return xt(e.parentNode);throw mt.createError("getDocument: no document found for node")}function Tt(e){var t=xt(e);if(typeof t.defaultView!=gt)return t.defaultView;if(typeof t.parentWindow!=gt)return t.parentWindow;throw mt.createError("Cannot get a window object for node")}function At(e){if(typeof e.contentDocument!=gt)return e.contentDocument;if(typeof e.contentWindow!=gt)return e.contentWindow.document;throw mt.createError("getIframeDocument: No Document object found for iframe element")}function kt(e){if(typeof e.contentWindow!=gt)return e.contentWindow;if(typeof e.contentDocument!=gt)return e.contentDocument.defaultView;throw mt.createError("getIframeWindow: No Window object found for iframe element")}function It(e){return e&&ot(e,"setTimeout")&&rt(e,"document")}function Dt(e){return 1==e.nodeType&&"iframe"==e.tagName.toLowerCase()}function Pt(e,t,n){var o;if(e?it(e,"nodeType")?o=Dt(e)?At(e):xt(e):It(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o}function Lt(e){for(var t;t=e.parentNode;)e=t;return e}function Bt(e,t,n,o){var r,i,s,a,c;if(e==n)return t===o?0:t<o?-1:1;if(r=St(n,e,!0))return t<=bt(r)?-1:1;if(r=St(e,n,!0))return bt(r)<o?-1:1;if(!(i=wt(e,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((s=e===i?i:St(e,i,!0))===(a=n===i?i:St(n,i,!0)))throw mt.createError("comparePoints got to case 4 and childA and childB are the same!");for(c=i.firstChild;c;){if(c===s)return-1;if(c===a)return 1;c=c.nextSibling}}function Mt(e){if(!e)return"[No node]";if(Rt(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+bt(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function zt(e){for(var t,n=xt(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}at(document,["createDocumentFragment","createElement","createTextNode"])||mt.fail("document missing a Node creation method"),ot(document,"getElementsByTagName")||mt.fail("document missing getElementsByTagName method"),typeof window.getComputedStyle!=gt?ht=function(e,t){return Tt(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=gt?ht=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:mt.fail("No means of obtaining computed style properties found");var Wt=ht;function Ht(e,t,n){var o=ut(e),r=e.createElement("div");r.contentEditable=""+!!n,t&&(r.innerHTML=t);var i=o.firstChild;return i?o.insertBefore(r,i):o.appendChild(r),r}function qt(e){return e.parentNode.removeChild(e)}var Ft=function(){function e(e){this.root=e,this._next=e}return e.prototype.hasNext=function(){return!!this._next},e.prototype.next=function(){var t,n,o=e._current=this._next;if(e._current)if(t=o.firstChild)this._next=t;else{for(n=null;o!==this.root&&!(n=o.nextSibling);)o=o.parentNode;this._next=n}return e._current},e.prototype.detach=function(){e._current=this._next=this.root=null},e._current=null,e}();function Vt(e){return new Ft(e)}var Ut=function(){function e(e,t){this.node=e,this.offset=t}return e.prototype.equals=function(e){return!!e&&this.node===e.node&&this.offset==e.offset},e.prototype.inspect=function(){return"[DomPosition("+Mt(this.node)+":"+this.offset+")]"},e.prototype.toString=function(){return this.inspect()},e}(),$t=Object.freeze({getBody:ut,isHtmlNamespace:yt,parentElement:vt,getNodeIndex:bt,getNodeLength:_t,getCommonAncestor:wt,isAncestorOf:Et,isOrIsAncestorOf:jt,getClosestAncestorIn:St,isCharacterDataNode:Rt,isTextOrCommentNode:Nt,insertAfter:Ot,splitDataNode:Ct,getDocument:xt,getWindow:Tt,getIframeDocument:At,getIframeWindow:kt,isWindow:It,getContentDocument:Pt,getRootContainer:Lt,comparePoints:Bt,inspectNode:Mt,fragmentFromNodeChildren:zt,getComputedStyleProperty:Wt,createTestElement:Ht,removeNode:qt,NodeIterator:Ft,createIterator:Vt,DomPosition:Ut}),Gt=function(e,t){return Gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Gt(e,t)};function Yt(e,t){function n(){this.constructor=e}Gt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Kt(e,t){return 3!=e.nodeType&&(jt(e,t.startContainer)||jt(e,t.endContainer))}var Jt=[1,3,4,5,7,8,10],Zt=[2,9,11],Qt=[5,6,10,12],Xt=[1,3,4,5,7,8,10,11],en=[1,3,4,5,7,8];function tn(e){return function(t,n){for(var o,r=n?t:t.parentNode;r;){if(o=r.nodeType,e.includes(o))return r;r=r.parentNode}return null}}var nn=tn([9,11]),on=tn(Qt),rn=tn([6,10,12]),sn=tn([1]);function an(e,t){if(rn(e,t))throw new pt("INVALID_NODE_TYPE_ERR")}function cn(e,t){if(!t.includes(e.nodeType))throw new pt("INVALID_NODE_TYPE_ERR")}function ln(e,t){if(t<0||t>(Rt(e)?e.length:e.childNodes.length))throw new pt("INDEX_SIZE_ERR")}function un(e,t){if(nn(e,!0)!==nn(t,!0))throw new pt("WRONG_DOCUMENT_ERR")}function dn(e){if(on(e,!0))throw new pt("NO_MODIFICATION_ALLOWED_ERR")}function fn(e,t){if(!e)throw new pt(t)}function pn(e,t){return t<=(Rt(e)?e.length:e.childNodes.length)}function hn(e){return!!e.startContainer&&!!e.endContainer&&Lt(e.startContainer)==Lt(e.endContainer)&&pn(e.startContainer,e.startOffset)&&pn(e.endContainer,e.endOffset)}function mn(e){if(!hn(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function gn(e){return e.document||xt(e.startContainer)}function yn(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:wt(e.startContainer,e.endContainer)}function vn(e,t,n,o,r){e.startContainer=t,e.startOffset=n,e.endContainer=o,e.endOffset=r,e.document=xt(t),yn(e)}var bn=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],_n=function(){function e(){}return e}(),wn=function(e){function t(t){var n=e.call(this)||this;return vn(n,t,0,t,0),n}return Yt(t,e),t}(_n),En=function(){function e(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,this._current=null,this._next=null,this._first=null,this._last=null,this.isSingleCharacterDataNode=!1,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&Rt(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||Rt(this.sc)?St(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||Rt(this.ec)?St(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}return e.prototype.reset=function(){this._current=null,this._next=this._first},e.prototype.hasNext=function(){return!!this._next},e.prototype.detach=function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null},e.prototype.next=function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,Rt(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},e.prototype.remove=function(){var e,t,n=this._current;!Rt(n)||n!==this.sc&&n!==this.ec?n.parentNode&&qt(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},e.prototype.isPartiallySelectedSubtree=function(){return Kt(this._current,this.range)},e.prototype.getSubtreeIterator=function(){var t;if(this.isSingleCharacterDataNode)(t=this.range.cloneRange()).collapse(!1);else{t=new Zn(gn(this.range));var n=this._current,o=n,r=0,i=n,s=_t(n);jt(n,this.sc)&&(o=this.sc,r=this.so),jt(n,this.ec)&&(i=this.ec,s=this.eo),vn(t,o,r,i,s)}return new e(t,this.clonePartiallySelectedTextNodes)},e}();function jn(e){for(var t,n,o,r=gn(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(o=e.getSubtreeIterator(),n.appendChild(jn(o)),o.detach()),10==n.nodeType)throw new pt("HIERARCHY_REQUEST_ERR");r.appendChild(n)}return r}function Sn(e,t,n){var o,r,i,s;for(void 0===n&&(n={stop:!1});i=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(i))return void(n.stop=!0);if(Sn(s=e.getSubtreeIterator(),t,n),s.detach(),n.stop)return}else for(o=Vt(i);r=o.next();)if(!1===t(r))return void(n.stop=!0)}function Rn(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(Rn(t=e.getSubtreeIterator()),t.detach()):e.remove()}function Nn(e){for(var t,n,o=gn(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(Nn(n)),n.detach()):e.remove(),10==t.nodeType)throw new pt("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function On(e){return Lt(e.startContainer)}function Cn(e,t,n){var o=11==e.nodeType?e.firstChild:e;return Rt(t)?n==t.length?Ot(e,t):t.parentNode.insertBefore(e,0==n?t:Ct(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),o}function xn(e,t,n){if(mn(e),mn(t),gn(t)!=gn(e))throw new pt("WRONG_DOCUMENT_ERR");var o=Bt(e.startContainer,e.startOffset,t.endContainer,t.endOffset),r=Bt(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&r>=0:o<0&&r>0}function Tn(e,t,n){var o,r=!(!t||!t.length),i=!!n;r&&(o=new RegExp("^("+t.join("|")+")$"));var s=[];return Sn(new En(e,!1),(function(t){if((!r||o.test(t.nodeType.toString()))&&(!i||n(t))){var a=e.startContainer;if(t!=a||!Rt(a)||e.startOffset!=a.length){var c=e.endContainer;t==c&&Rt(c)&&0==e.endOffset||s.push(t)}}})),s}function An(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+Mt(e.startContainer)+":"+e.startOffset+", "+Mt(e.endContainer)+":"+e.endOffset+")]"}function kn(e){mn(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var In=0,Dn=1,Pn=3,Ln=0,Bn=1,Mn=2,zn=3,Wn={START_TO_START:In,START_TO_END:Dn,END_TO_END:2,END_TO_START:Pn,NODE_BEFORE:Ln,NODE_AFTER:Bn,NODE_BEFORE_AND_AFTER:Mn,NODE_INSIDE:zn};function Hn(e){Object.assign(e,Wn),Object.assign(e.prototype,Wn)}function qn(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yt(t,e),t.prototype.compareBoundaryPoints=function(e,t){mn(this),un(this.startContainer,t.startContainer);var n=e==Pn||e==In?"start":"end",o=e==Dn||e==In?"start":"end";return Bt(this[n+"Container"],this[n+"Offset"],t[o+"Container"],t[o+"Offset"])},t.prototype.insertNode=function(e){if(mn(this),cn(e,Xt),dn(this.startContainer),jt(e,this.startContainer))throw new pt("HIERARCHY_REQUEST_ERR");var t=Cn(e,this.startContainer,this.startOffset);this.setStartBefore(t)},t.prototype.cloneContents=function(){var e,t;if(mn(this),this.collapsed)return gn(this).createDocumentFragment();if(this.startContainer===this.endContainer&&Rt(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=gn(this).createDocumentFragment()).appendChild(e),t;var n=new En(this,!0);return e=jn(n),n.detach(),e},t.prototype.canSurroundContents=function(){mn(this),dn(this.startContainer),dn(this.endContainer);var e=new En(this,!0),t=e._first&&Kt(e._first,this)||e._last&&Kt(e._last,this);return e.detach(),!t},t.prototype.surroundContents=function(e){if(cn(e,en),!this.canSurroundContents())throw new pt("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);Cn(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},t.prototype.cloneRange=function(){mn(this);for(var e=new Zn(gn(this)),t=0,n=bn;t<n.length;t++){var o=n[t];e[o]=this[o]}return e},t.prototype.toString=function(){mn(this);var e=this.startContainer;if(e===this.endContainer&&Rt(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new En(this,!0);return Sn(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},t.prototype.compareNode=function(e){mn(this);var t=e.parentNode,n=bt(e);if(!t)throw new pt("NOT_FOUND_ERR");var o=this.comparePoint(t,n),r=this.comparePoint(t,n+1);return o<0?r>0?Mn:Ln:r>0?Bn:zn},t.prototype.comparePoint=function(e,t){return mn(this),fn(e,"HIERARCHY_REQUEST_ERR"),un(e,this.startContainer),Bt(e,t,this.startContainer,this.startOffset)<0?-1:Bt(e,t,this.endContainer,this.endOffset)>0?1:0},t.prototype.createContextualFragment=function(e){var t=this.startContainer,n=xt(t);if(!t)throw new pt("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:Rt(t)&&(o=vt(t)),(o=null===o||"HTML"==o.nodeName&&yt(xt(o).documentElement)&&yt(o)?n.createElement("body"):o.cloneNode(!1)).innerHTML=e,zt(o)},t.prototype.toHtml=function(){return kn(this)},t.prototype.intersectsNode=function(e,t){if(mn(this),Lt(e)!=On(this))return!1;var n=e.parentNode,o=bt(e);if(!n)return!0;var r=Bt(n,o,this.endContainer,this.endOffset),i=Bt(n,o+1,this.startContainer,this.startOffset);return t?r<=0&&i>=0:r<0&&i>0},t.prototype.isPointInRange=function(e,t){return mn(this),fn(e,"HIERARCHY_REQUEST_ERR"),un(e,this.startContainer),Bt(e,t,this.startContainer,this.startOffset)>=0&&Bt(e,t,this.endContainer,this.endOffset)<=0},t.prototype.intersectsRange=function(e){return xn(this,e,!1)},t.prototype.intersectsOrTouchesRange=function(e){return xn(this,e,!0)},t.prototype.intersection=function(e){if(this.intersectsRange(e)){var t=Bt(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=Bt(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();return-1==t&&o.setStart(e.startContainer,e.startOffset),1==n&&o.setEnd(e.endContainer,e.endOffset),o}return null},t.prototype.union=function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==Bt(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==Bt(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new pt("Ranges do not intersect")},t.prototype.containsNode=function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==zn},t.prototype.containsNodeContents=function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,_t(e))<=0},t.prototype.containsRange=function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},t.prototype.containsNodeText=function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var o=n.pop();return t.setEnd(o,o.length),this.containsRange(t)}return this.containsNodeContents(e)},t.prototype.getNodes=function(e,t){return mn(this),Tn(this,e,t)},t.prototype.getDocument=function(){return gn(this)},t.prototype.collapseBefore=function(e){this.setEndBefore(e),this.collapse(!1)},t.prototype.collapseAfter=function(e){this.setStartAfter(e),this.collapse(!0)},t.prototype.getBookmark=function(e){var t=gn(this),n=io(t);e=e||ut(t),n.selectNodeContents(e);var o=this.intersection(n),r=0,i=0;return o&&(n.setEnd(o.startContainer,o.startOffset),i=(r=n.toString().length)+o.toString().length),{start:r,end:i,containerNode:e}},t.prototype.moveToBookmark=function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var o,r,i,s,a=[t],c=!1,l=!1;!l&&(o=a.pop());)if(3==o.nodeType)r=n+o.length,!c&&e.start>=n&&e.start<=r&&(this.setStart(o,e.start-n),c=!0),c&&e.end>=n&&e.end<=r&&(this.setEnd(o,e.end-n),l=!0),n=r;else for(i=(s=o.childNodes).length;i--;)a.push(s[i])},t.prototype.getName=function(){return"DomRange"},t.prototype.equals=function(e){return Fn(this,e)},t.prototype.isValid=function(){return hn(this)},t.prototype.inspect=function(){return An(this)},t.prototype.detach=function(){},t.prototype.select=function(e){Io(this.getDocument()).setSingleRange(this,e)},t}(e)}function Fn(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}var Vn=new ft("DomRange",["DomUtil"]);function Un(e){return new Ut(e.parentNode,bt(e))}function $n(e){return new Ut(e.parentNode,bt(e)+1)}function Gn(e,t){mn(e);var n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset,s=n===r;Rt(r)&&i>0&&i<r.length&&Ct(r,i,t),Rt(n)&&o>0&&o<n.length&&(n=Ct(n,o,t),s?(i-=o,r=n):r==n.parentNode&&i>=bt(n)&&i++,o=0),e.setStartAndEnd(n,o,r,i)}function Yn(e,t){return function(){mn(this);var n,o=this.startContainer,r=this.startOffset,i=this.commonAncestorContainer,s=new En(this,!0);o!==i&&(o=(n=$n(St(o,i,!0))).node,r=n.offset),Sn(s,dn),s.reset();var a=e(s);return s.detach(),t(this,o,r,o,r),a}}function Kn(e,t){function n(e,t){return function(n){cn(n,Jt),cn(Lt(n),Zt);var i=(e?Un:$n)(n);(t?o:r)(this,i.node,i.offset)}}function o(e,n,o){var r=e.endContainer,i=e.endOffset;n===e.startContainer&&o===e.startOffset||(Lt(n)==Lt(r)&&1!=Bt(n,o,r,i)||(r=n,i=o),t(e,n,o,r,i))}function r(e,n,o){var r=e.startContainer,i=e.startOffset;n===e.endContainer&&o===e.endOffset||(Lt(n)==Lt(r)&&-1!=Bt(n,o,r,i)||(r=n,i=o),t(e,r,i,n,o))}return function(e){function i(){var o=null!==e&&e.apply(this,arguments)||this;return o.setStartBefore=n(!0,!0),o.setStartAfter=n(!1,!0),o.setEndBefore=n(!0,!1),o.setEndAfter=n(!1,!1),o.extractContents=Yn(Nn,t),o.deleteContents=Yn(Rn,t),o}return Yt(i,e),i.prototype.setStart=function(e,t){an(e,!0),ln(e,t),o(this,e,t)},i.prototype.setEnd=function(e,t){an(e,!0),ln(e,t),r(this,e,t)},i.prototype.setStartAndEnd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e[0],r=e[1],i=o,s=r;switch(e.length){case 3:s=e[2];break;case 4:i=e[2],s=e[3]}an(o,!0),ln(o,r),an(i,!0),ln(i,s),t(this,o,r,i,s)},i.prototype.setBoundary=function(e,t,n){this["set"+(n?"Start":"End")](e,t)},i.prototype.collapse=function(e){mn(this),e?t(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):t(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},i.prototype.selectNodeContents=function(e){an(e,!0),t(this,e,0,e,_t(e))},i.prototype.selectNode=function(e){an(e,!1),cn(e,Jt);var n=Un(e),o=$n(e);t(this,n.node,n.offset,o.node,o.offset)},i.prototype.splitBoundaries=function(){Gn(this)},i.prototype.splitBoundariesPreservingPositions=function(e){Gn(this,e)},i.prototype.normalizeBoundaries=function(){mn(this);var e,n=this.startContainer,o=this.startOffset,r=this.endContainer,i=this.endOffset,s=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(r=e,i=e.length,e.appendData(t.data),qt(t))},a=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){n=e;var s=e.length;if(o=t.length,e.insertData(0,t.data),qt(t),n==r)i+=o,r=n;else if(r==e.parentNode){var a=bt(e);i==a?(r=e,i=s):i>a&&i--}}},c=!0;if(Rt(r))i==r.length?s(r):0==i&&(e=r.previousSibling)&&e.nodeType==r.nodeType&&(i=e.length,n==r&&(c=!1),e.appendData(r.data),qt(r),r=e);else{if(i>0){var l=r.childNodes[i-1];l&&Rt(l)&&s(l)}c=!this.collapsed}if(c){if(Rt(n))0==o?a(n):o==n.length&&(e=n.nextSibling)&&e.nodeType==n.nodeType&&(r==e&&(r=n,i+=n.length),n.appendData(e.data),qt(e));else if(o<n.childNodes.length){var u=n.childNodes[o];u&&Rt(u)&&a(u)}}else n=r,o=i;t(this,n,o,r,i)},i.prototype.collapseToPoint=function(e,t){an(e,!0),ln(e,t),this.setStartAndEnd(e,t)},i.prototype.parentElement=function(){return mn(this),sn(this.commonAncestorContainer,!0)},i}(e)}function Jn(e,t){var n=qn(e);Object.assign(n.prototype,Wn);var o=Kn(n,t);return Object.assign(o,Wn)}var Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yt(t,e),t.inspect=An,t.toHtml=kn,t.getRangeDocument=gn,t.rangesEqual=Fn,t}(Jn(wn,vn));function Qn(e){return e=Pt(e,Vn,"createRangyRange"),new Zn(e)}Object.assign(Zn,{rangeProperties:bn,RangeIterator:En,copyComparisonConstants:Hn,createPrototypeRange:Jn});var Xn=new ft("WrappedRange",["DomRange"]);function eo(e){for(var t=0,n=bn;t<n.length;t++){var o=n[t];e[o]=e.nativeRange[o]}e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function to(e,t,n,o,r){var i=e.startContainer!==t||e.startOffset!=n,s=e.endContainer!==o||e.endOffset!=r,a=!e.equals(e.nativeRange);(i||s||a)&&(e.setEnd(o,r),e.setStart(t,n))}var no=function(e){function t(n){var o=e.call(this)||this;if(o.nativeRange=n,o.setStartBefore=t.createBeforeAfterNodeSetter("setStartBefore"),o.setStartAfter=t.createBeforeAfterNodeSetter("setStartAfter"),o.setEndBefore=t.createBeforeAfterNodeSetter("setEndBefore"),o.setEndAfter=t.createBeforeAfterNodeSetter("setEndAfter"),!n)throw Xn.createError("WrappedRange: Range must be specified");return eo(o),o}return Yt(t,e),t.prototype.selectNode=function(e){this.nativeRange.selectNode(e),eo(this)},t.prototype.cloneContents=function(){return this.nativeRange.cloneContents()},t.prototype.surroundContents=function(e){this.nativeRange.surroundContents(e),eo(this)},t.prototype.collapse=function(e){this.nativeRange.collapse(e),eo(this)},t.prototype.cloneRange=function(){return new t(this.nativeRange.cloneRange())},t.prototype.refresh=function(){eo(this)},t.prototype.toString=function(){return this.nativeRange.toString()},t.prototype.setStart=function(e,t){this.nativeRange.setStart(e,t),eo(this)},t.prototype.setEnd=function(e,t){this.nativeRange.setEnd(e,t),eo(this)},t.createBeforeAfterNodeSetter=function(e){return function(t){this.nativeRange[e](t),eo(this)}},t.prototype.selectNodeContents=function(e){this.setStartAndEnd(e,0,_t(e))},t.prototype.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},t.prototype.getName=function(){return"WrappedRange"},t}(Jn(_n,to));function oo(){var e=document.createTextNode("test");ut(document).appendChild(e);var t=document.createRange(),n=document.createElement("div");n.innerHTML="123";var o=n.firstChild,r=ut(document);r.appendChild(n),t.setStart(o,1),t.setEnd(o,2),t.deleteContents();var i=no.prototype;"13"==o.data&&(i.deleteContents=function(){this.nativeRange.deleteContents(),eo(this)},i.extractContents=function(){var e=this.nativeRange.extractContents();return eo(this),e}),r.removeChild(n),ot(t,"createContextualFragment")&&(i.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),r.removeChild(e),r=null}function ro(e){return(e=Pt(e,Xn,"createNativeRange")).createRange()}function io(e){return e=Pt(e,Xn,"createRange"),new no(ro(e))}function so(e){e||(e=window);var t=e.document;void 0===t.createRange&&(t.createRange=function(){return io(t)})}nt(oo);var ao=new ft("WrappedSelection",["DomRange","WrappedRange"]),co="boolean",lo="number";function uo(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function fo(e,t){return e?It(e)?e:e instanceof Lo?e.win:Tt(Pt(e,ao,t)):window}function po(e){return fo(e,"getWinSelection").getSelection()}function ho(e){var t=!1;return e.anchorNode&&(t=1==Bt(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}var mo=ho;function go(){return!0}var yo=po();yo||ao.fail("Native selection was null (possibly issue 138?)");var vo,bo=ro(document),_o=et.selectionHasAnchorAndFocus=lt(yo,["anchorNode","focusNode","anchorOffset","focusOffset"]),wo=et.selectionHasExtend=ot(yo,"extend"),Eo=et.selectionHasRangeCount=typeof yo.rangeCount==lo,jo=wo?function(e,t){var n=io(Zn.getRangeDocument(t));n.collapseToPoint(t.endContainer,t.endOffset),e.addRange(Co(n)),e.extend(t.startContainer,t.startOffset)}:null,So=_o?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};function Ro(e,t,n){var o=n?"end":"start",r=n?"start":"end";e.anchorNode=t[o+"Container"],e.anchorOffset=t[o+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function No(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function Oo(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function Co(e){var t;return e instanceof Zn?((t=ro(e.getDocument())).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset)):e instanceof no?t=e.nativeRange:e instanceof Range&&(t=e),t}function xo(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}ot(yo,"getRangeAt")?vo=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:_o&&(vo=function(e){var t=io(xt(e.anchorNode));return t.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),t.collapsed!==this.isCollapsed&&t.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),t});var To,Ao=[];function ko(e,t){for(var n,o,r=Ao.length;r--;)if(o=(n=Ao[r]).selection,"deleteAll"==t)xo(o);else if(n.win==e)return"delete"==t?(Ao.splice(r,1),!0):o;return"deleteAll"==t&&(Ao.length=0),null}function Io(e){if(e&&e instanceof Lo)return e.refresh(),e;var t=ko(e=fo(e,"getNativeSelection")),n=po(e);return t?(t.nativeSelection=n,t.refresh()):(t=new Lo(n,e),Ao.push({win:e,selection:t})),t}ot(yo,"getRangeAt")&&typeof yo.rangeCount==lo?To=function(e){if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new no(e.nativeSelection.getRangeAt(t));Ro(e,e._ranges[e.rangeCount-1],mo(e.nativeSelection)),e.isCollapsed=So(e)}else Oo(e)}:_o&&typeof yo.isCollapsed==co&&typeof bo.collapsed==co&&et.implementsDomRange?To=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=vo(n,0),e._ranges=[t],e.rangeCount=1,No(e),e.isCollapsed=So(e)):Oo(e)}:ao.fail("No means of obtaining a Range or TextRange from the user's selection was found");var Do=function(){function e(e,t){this.nativeSelection=e,this.win=t,this._ranges=[],3==arguments.length&&(this.win=arguments[2]),this.refresh()}return e}();function Po(e){var t;function n(e,t){jo(e.nativeSelection,t),e.refresh()}var o=Eo?function(e,t){if(uo(t)&&wo)n(this,e);else{var o;et.selectionSupportsMultipleRanges?o=this.rangeCount:(this.removeAllRanges(),o=0);var r=Co(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(tt.checkSelectionRanges){var i=vo(this.nativeSelection,this.rangeCount-1);i&&!Fn(i,e)&&(e=new no(i))}this._ranges[this.rangeCount-1]=e,Ro(this,e,mo(this.nativeSelection)),this.isCollapsed=So(this)}else this.refresh()}}:function(e,t){uo(t)&&wo?n(this,e):(this.nativeSelection.addRange(Co(e)),this.refresh())};function r(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)Fn(t,n[o])||e.addRange(n[o]);e.rangeCount||Oo(e)}function i(e,t){if(e.win.document!=xt(t))throw new pt("WRONG_DOCUMENT_ERR")}function s(e){return function(t,n){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(e?"Start":"End")](t,n):(o=io(this.win.document)).setStartAndEnd(t,n),this.setSingleRange(o,this.isBackward())}}return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addRange=o,t.isBackwards=t.isBackward,t.setStart=s(!0),t.setEnd=s(!1),t}return Yt(t,e),t.prototype.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),Oo(this)},t.prototype.setRanges=function(e){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])},t.prototype.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new pt("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},t.prototype.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(To(this),e){var r=t.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;for(;r--;)if(!Fn(t[r],this._ranges[r]))return!0;return!1}},t.prototype.removeRange=function(e){r(this,e)},t.prototype.isBackward=function(){return mo(this)},t.prototype.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},t.prototype.collapse=function(e,t){i(this,e);var n=io(e);n.collapseToPoint(e,t),this.setSingleRange(n),this.isCollapsed=!0},t.prototype.collapseToStart=function(){if(!this.rangeCount)throw new pt("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},t.prototype.collapseToEnd=function(){if(!this.rangeCount)throw new pt("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},t.prototype.selectAllChildren=function(e){i(this,e);var t=io(e);t.selectNodeContents(e),this.setSingleRange(t)},t.prototype.deleteFromDocument=function(){if(this.rangeCount){var e=this.getAllRanges();if(e.length){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}}},t.prototype.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t},t.prototype.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},t.prototype.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},t.prototype.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(o){n.push(o[e].apply(o,t||[]))})),n},t.prototype.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},t.prototype.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},t.prototype.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},t.prototype.moveToBookmark=function(e){for(var t,n,o=[],r=0;t=e.rangeBookmarks[r++];)(n=io(this.win)).moveToBookmark(t),o.push(n);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},t.prototype.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},t.prototype.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},t.prototype.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(Zn.toHtml(t))})),e.join("")},t.inspect=function(e){var t=[],n=new Ut(e.anchorNode,e.anchorOffset),o=new Ut(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var i=0,s=e.rangeCount;i<s;++i)t[i]=Zn.inspect(e.getRangeAt(i));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"},t.prototype.getName=function(){return"WrappedSelection"},t.prototype.inspect=function(){return t.inspect(this)},t.prototype.detach=function(){ko(this.win,"delete"),xo(this)},t.detachAll=function(){ko(null,"deleteAll")},t}(e),t.isDirectionBackward=uo,t}var Lo=Po(Do),Bo=Lo;function Mo(e){e||(e=window),void 0===e.getSelection&&(e.getSelection=function(){return Io(e)})}function zo(e){so(e=e||window),Mo(e)}e.DOMException=pt,e.DomRange=Zn,e.Module=ft,e.RangeBase=_n,e.Selection=Bo,e.WrappedRange=no,e.WrappedSelection=Lo,e.config=tt,e.createNativeRange=ro,e.createPrototypeRange=Jn,e.createRange=io,e.createRangyRange=Qn,e.dom=$t,e.features=et,e.getNativeSelection=po,e.getRangeDocument=gn,e.getSelection=Io,e.isBrowser=Xe,e.isSelectionValid=go,e.onDocReady=nt,e.rangesEqual=Fn,e.shim=zo,e.shimCreateRange=so,e.shimGetSelection=Mo,e.util=dt,e.version=Qe,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"./node_modules/rangy2/esm5/DOMException.js":(e,t,n)=>{"use strict";function o(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}n.r(t),n.d(t,{DOMException:()=>o}),o.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},o.prototype.toString=function(){return this.message}},"./node_modules/rangy2/esm5/api.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{version:()=>r,isBrowser:()=>i,features:()=>s,config:()=>a,onDocReady:()=>c});var o="undefined",r="%%build:version%%",i=typeof window!=o&&typeof document!=o;i||console.log("Rangy can only run in a browser");var s={implementsDomRange:!0,implementsTextRange:!1,htmlParsingConforms:!0,crashyTextNodes:!1,implementsWinGetSelection:!0,implementsDocSelection:!1,selectionSupportsMultipleRanges:!1,implementsControlRange:!1},a={preferTextRange:!1,checkSelectionRanges:!0};function c(e){if(i)if("complete"==document.readyState)e();else{var t=function(){document.removeEventListener("DOMContentLoaded",t,!1),e()};document.addEventListener("DOMContentLoaded",t,!1)}}},"./node_modules/rangy2/esm5/dom.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{getBody:()=>i.getBody,isHtmlNamespace:()=>c,parentElement:()=>l,getNodeIndex:()=>u,getNodeLength:()=>d,getCommonAncestor:()=>f,isAncestorOf:()=>p,isOrIsAncestorOf:()=>h,getClosestAncestorIn:()=>m,isCharacterDataNode:()=>g,isTextOrCommentNode:()=>y,insertAfter:()=>v,splitDataNode:()=>b,getDocument:()=>_,getWindow:()=>w,getIframeDocument:()=>E,getIframeWindow:()=>j,isWindow:()=>S,getContentDocument:()=>R,getRootContainer:()=>N,comparePoints:()=>O,inspectNode:()=>C,fragmentFromNodeChildren:()=>x,getComputedStyleProperty:()=>T,createTestElement:()=>A,removeNode:()=>k,NodeIterator:()=>I,createIterator:()=>D,DomPosition:()=>P});var o,r=n("./node_modules/rangy2/esm5/module.js"),i=n("./node_modules/rangy2/esm5/util.js"),s=new r.Module("DomUtil",[]),a="undefined";function c(e){var t;return typeof e.namespaceURI==a||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function l(e){var t=e.parentNode;return 1==t.nodeType?t:null}function u(e){for(var t=0;e=e.previousSibling;)++t;return t}function d(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function f(e,t){var n,o=[];for(n=e;n;n=n.parentNode)o.push(n);for(n=t;n;n=n.parentNode)if(o.includes(n))return n;return null}function p(e,t,n){for(var o=n?t:t.parentNode;o;){if(o===e)return!0;o=o.parentNode}return!1}function h(e,t){return p(e,t,!0)}function m(e,t,n){for(var o,r=n?e:e.parentNode;r;){if((o=r.parentNode)===t)return r;r=o}return null}function g(e){var t=e.nodeType;return 3==t||4==t||8==t}function y(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function v(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e}function b(e,t,n){var o=e.cloneNode(!1);if(o.deleteData(0,t),e.deleteData(t,e.length-t),v(o,e),n)for(var r,i=0;r=n[i++];)r.node==e&&r.offset>t?(r.node=o,r.offset-=t):r.node==e.parentNode&&r.offset>u(e)&&++r.offset;return o}function _(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=a)return e.ownerDocument;if(typeof e.document!=a)return e.document;if(e.parentNode)return _(e.parentNode);throw s.createError("getDocument: no document found for node")}function w(e){var t=_(e);if(typeof t.defaultView!=a)return t.defaultView;if(typeof t.parentWindow!=a)return t.parentWindow;throw s.createError("Cannot get a window object for node")}function E(e){if(typeof e.contentDocument!=a)return e.contentDocument;if(typeof e.contentWindow!=a)return e.contentWindow.document;throw s.createError("getIframeDocument: No Document object found for iframe element")}function j(e){if(typeof e.contentWindow!=a)return e.contentWindow;if(typeof e.contentDocument!=a)return e.contentDocument.defaultView;throw s.createError("getIframeWindow: No Window object found for iframe element")}function S(e){return e&&i.isHostMethod(e,"setTimeout")&&i.isHostObject(e,"document")}function R(e,t,n){var o,r;if(e?i.isHostProperty(e,"nodeType")?o=1==(r=e).nodeType&&"iframe"==r.tagName.toLowerCase()?E(e):_(e):S(e)&&(o=e.document):o=document,!o)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return o}function N(e){for(var t;t=e.parentNode;)e=t;return e}function O(e,t,n,o){var r,i,a,c,l;if(e==n)return t===o?0:t<o?-1:1;if(r=m(n,e,!0))return t<=u(r)?-1:1;if(r=m(e,n,!0))return u(r)<o?-1:1;if(!(i=f(e,n)))throw new Error("comparePoints error: nodes have no common ancestor");if((a=e===i?i:m(e,i,!0))===(c=n===i?i:m(n,i,!0)))throw s.createError("comparePoints got to case 4 and childA and childB are the same!");for(l=i.firstChild;l;){if(l===a)return-1;if(l===c)return 1;l=l.nextSibling}}function C(e){if(!e)return"[No node]";if(g(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+u(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function x(e){for(var t,n=_(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}i.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||s.fail("document missing a Node creation method"),i.isHostMethod(document,"getElementsByTagName")||s.fail("document missing getElementsByTagName method"),typeof window.getComputedStyle!=a?o=function(e,t){return w(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=a?o=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:s.fail("No means of obtaining computed style properties found");var T=o;function A(e,t,n){var o=(0,i.getBody)(e),r=e.createElement("div");r.contentEditable=""+!!n,t&&(r.innerHTML=t);var s=o.firstChild;return s?o.insertBefore(r,s):o.appendChild(r),r}function k(e){return e.parentNode.removeChild(e)}var I=function(){function e(e){this.root=e,this._next=e}return e.prototype.hasNext=function(){return!!this._next},e.prototype.next=function(){var t,n,o=e._current=this._next;if(e._current)if(t=o.firstChild)this._next=t;else{for(n=null;o!==this.root&&!(n=o.nextSibling);)o=o.parentNode;this._next=n}return e._current},e.prototype.detach=function(){e._current=this._next=this.root=null},e._current=null,e}();function D(e){return new I(e)}var P=function(){function e(e,t){this.node=e,this.offset=t}return e.prototype.equals=function(e){return!!e&&this.node===e.node&&this.offset==e.offset},e.prototype.inspect=function(){return"[DomPosition("+C(this.node)+":"+this.offset+")]"},e.prototype.toString=function(){return this.inspect()},e}()},"./node_modules/rangy2/esm5/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{config:()=>o.config,features:()=>o.features,isBrowser:()=>o.isBrowser,onDocReady:()=>o.onDocReady,version:()=>o.version,util:()=>r,Module:()=>i.Module,DOMException:()=>s.DOMException,dom:()=>a,DomRange:()=>c.DomRange,RangeBase:()=>c.RangeBase,Selection:()=>c.Selection,WrappedRange:()=>c.WrappedRange,WrappedSelection:()=>c.WrappedSelection,createNativeRange:()=>c.createNativeRange,createPrototypeRange:()=>c.createPrototypeRange,createRange:()=>c.createRange,createRangyRange:()=>c.createRangyRange,getNativeSelection:()=>c.getNativeSelection,getRangeDocument:()=>c.getRangeDocument,getSelection:()=>c.getSelection,isSelectionValid:()=>c.isSelectionValid,rangesEqual:()=>c.rangesEqual,shimCreateRange:()=>c.shimCreateRange,shimGetSelection:()=>c.shimGetSelection,shim:()=>l});n("./node_modules/core-js/features/array/includes.js"),n("./node_modules/core-js/features/object/assign.js");var o=n("./node_modules/rangy2/esm5/api.js"),r=n("./node_modules/rangy2/esm5/util.js"),i=n("./node_modules/rangy2/esm5/module.js"),s=n("./node_modules/rangy2/esm5/DOMException.js"),a=n("./node_modules/rangy2/esm5/dom.js"),c=n("./node_modules/rangy2/esm5/internal/index.js");function l(e){e=e||window,(0,c.shimCreateRange)(e),(0,c.shimGetSelection)(e)}},"./node_modules/rangy2/esm5/internal/_.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DomRange:()=>o.DomRange,RangeBase:()=>o.RangeBase,createPrototypeRange:()=>o.createPrototypeRange,createRangyRange:()=>o.createRangyRange,getRangeDocument:()=>o.getRangeDocument,rangeProperties:()=>o.rangeProperties,rangesEqual:()=>o.rangesEqual,WrappedRange:()=>r.WrappedRange,createNativeRange:()=>r.createNativeRange,createRange:()=>r.createRange,shimCreateRange:()=>r.shimCreateRange,Selection:()=>i.Selection,WrappedSelBase:()=>i.WrappedSelBase,WrappedSelection:()=>i.WrappedSelection,getNativeSelection:()=>i.getNativeSelection,getSelection:()=>i.getSelection,isSelectionValid:()=>i.isSelectionValid,shimGetSelection:()=>i.shimGetSelection});var o=n("./node_modules/rangy2/esm5/internal/domrange/index.js"),r=n("./node_modules/rangy2/esm5/internal/wrappedrange.js"),i=n("./node_modules/rangy2/esm5/internal/wrappedselection.js")},"./node_modules/rangy2/esm5/internal/domrange/RangeIterator.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{RangeIterator:()=>s,cloneSubtree:()=>a,iterateSubtree:()=>c,deleteSubtree:()=>l,extractSubtree:()=>u});var o=n("./node_modules/rangy2/esm5/DOMException.js"),r=n("./node_modules/rangy2/esm5/dom.js"),i=n("./node_modules/rangy2/esm5/internal/domrange/_.js"),s=function(){function e(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,this._current=null,this._next=null,this._first=null,this._last=null,this.isSingleCharacterDataNode=!1,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&(0,r.isCharacterDataNode)(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||(0,r.isCharacterDataNode)(this.sc)?(0,r.getClosestAncestorIn)(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||(0,r.isCharacterDataNode)(this.ec)?(0,r.getClosestAncestorIn)(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}return e.prototype.reset=function(){this._current=null,this._next=this._first},e.prototype.hasNext=function(){return!!this._next},e.prototype.detach=function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null},e.prototype.next=function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,(0,r.isCharacterDataNode)(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},e.prototype.remove=function(){var e,t,n=this._current;!(0,r.isCharacterDataNode)(n)||n!==this.sc&&n!==this.ec?n.parentNode&&(0,r.removeNode)(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},e.prototype.isPartiallySelectedSubtree=function(){var e=this._current;return(0,i.isNonTextPartiallySelected)(e,this.range)},e.prototype.getSubtreeIterator=function(){var t;if(this.isSingleCharacterDataNode)(t=this.range.cloneRange()).collapse(!1);else{t=new i.DomRange((0,i.getRangeDocument)(this.range));var n=this._current,o=n,s=0,a=n,c=(0,r.getNodeLength)(n);(0,r.isOrIsAncestorOf)(n,this.sc)&&(o=this.sc,s=this.so),(0,r.isOrIsAncestorOf)(n,this.ec)&&(a=this.ec,c=this.eo),(0,i.updateBoundaries)(t,o,s,a,c)}return new e(t,this.clonePartiallySelectedTextNodes)},e}();function a(e){for(var t,n,r,s=(0,i.getRangeDocument)(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(r=e.getSubtreeIterator(),n.appendChild(a(r)),r.detach()),10==n.nodeType)throw new o.DOMException("HIERARCHY_REQUEST_ERR");s.appendChild(n)}return s}function c(e,t,n){var o,i,s,a;for(void 0===n&&(n={stop:!1});s=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(s))return void(n.stop=!0);if(c(a=e.getSubtreeIterator(),t,n),a.detach(),n.stop)return}else for(o=r.createIterator(s);i=o.next();)if(!1===t(i))return void(n.stop=!0)}function l(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(l(t=e.getSubtreeIterator()),t.detach()):e.remove()}function u(e){for(var t,n,r=(0,i.getRangeDocument)(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(u(n)),n.detach()):e.remove(),10==t.nodeType)throw new o.DOMException("HIERARCHY_REQUEST_ERR");r.appendChild(t)}return r}},"./node_modules/rangy2/esm5/internal/domrange/_.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{DomRangeBase:()=>o.DomRangeBase,RangeBase:()=>o.RangeBase,assertNoDocTypeNotationEntityAncestor:()=>o.assertNoDocTypeNotationEntityAncestor,assertNode:()=>o.assertNode,assertNodeNotReadOnly:()=>o.assertNodeNotReadOnly,assertRangeValid:()=>o.assertRangeValid,assertSameDocumentOrFragment:()=>o.assertSameDocumentOrFragment,assertValidNodeType:()=>o.assertValidNodeType,assertValidOffset:()=>o.assertValidOffset,beforeAfterNodeTypes:()=>o.beforeAfterNodeTypes,getElementAncestor:()=>o.getElementAncestor,getRangeDocument:()=>o.getRangeDocument,insertableNodeTypes:()=>o.insertableNodeTypes,isNonTextPartiallySelected:()=>o.isNonTextPartiallySelected,isRangeValid:()=>o.isRangeValid,rangeProperties:()=>o.rangeProperties,rootContainerNodeTypes:()=>o.rootContainerNodeTypes,surroundNodeTypes:()=>o.surroundNodeTypes,updateBoundaries:()=>o.updateBoundaries,RangeIterator:()=>r.RangeIterator,cloneSubtree:()=>r.cloneSubtree,deleteSubtree:()=>r.deleteSubtree,extractSubtree:()=>r.extractSubtree,iterateSubtree:()=>r.iterateSubtree,comparisonConstants:()=>i.comparisonConstants,copyComparisonConstants:()=>i.copyComparisonConstants,createDomRangeP1:()=>i.createDomRangeP1,rangeInspect:()=>i.rangeInspect,rangeToHtml:()=>i.rangeToHtml,rangesEqual:()=>i.rangesEqual,DomRange:()=>s.DomRange,createPrototypeRange:()=>s.createPrototypeRange,createRangyRange:()=>s.createRangyRange});var o=n("./node_modules/rangy2/esm5/internal/domrange/util.js"),r=n("./node_modules/rangy2/esm5/internal/domrange/RangeIterator.js"),i=n("./node_modules/rangy2/esm5/internal/domrange/part1.js"),s=n("./node_modules/rangy2/esm5/internal/domrange/part2.js")},"./node_modules/rangy2/esm5/internal/domrange/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{rangeProperties:()=>o.rangeProperties,RangeBase:()=>o.RangeBase,rangesEqual:()=>o.rangesEqual,getRangeDocument:()=>o.getRangeDocument,createPrototypeRange:()=>o.createPrototypeRange,DomRange:()=>o.DomRange,createRangyRange:()=>o.createRangyRange});var o=n("./node_modules/rangy2/esm5/internal/domrange/_.js")},"./node_modules/rangy2/esm5/internal/domrange/part1.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{rangeInspect:()=>u,rangeToHtml:()=>d,comparisonConstants:()=>f,copyComparisonConstants:()=>p,createDomRangeP1:()=>h,rangesEqual:()=>m});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/DOMException.js"),i=n("./node_modules/rangy2/esm5/dom.js"),s=n("./node_modules/rangy2/esm5/internal/domrange/_.js"),a=n("./node_modules/rangy2/esm5/internal/_.js");function c(e,t,n){var o=11==e.nodeType?e.firstChild:e;return(0,i.isCharacterDataNode)(t)?n==t.length?i.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:(0,i.splitDataNode)(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),o}function l(e,t,n){if((0,s.assertRangeValid)(e),(0,s.assertRangeValid)(t),(0,s.getRangeDocument)(t)!=(0,s.getRangeDocument)(e))throw new r.DOMException("WRONG_DOCUMENT_ERR");var o=(0,i.comparePoints)(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=(0,i.comparePoints)(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?o<=0&&a>=0:o<0&&a>0}function u(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+i.inspectNode(e.startContainer)+":"+e.startOffset+", "+i.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function d(e){(0,s.assertRangeValid)(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}var f={START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,NODE_BEFORE:0,NODE_AFTER:1,NODE_BEFORE_AND_AFTER:2,NODE_INSIDE:3};function p(e){Object.assign(e,f),Object.assign(e.prototype,f)}function h(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.compareBoundaryPoints=function(e,t){var n,o,r,a;(0,s.assertRangeValid)(this),(0,s.assertSameDocumentOrFragment)(this.startContainer,t.startContainer);var c=3==e||0==e?"start":"end",l=1==e||0==e?"start":"end";return n=this[c+"Container"],o=this[c+"Offset"],r=t[l+"Container"],a=t[l+"Offset"],(0,i.comparePoints)(n,o,r,a)},t.prototype.insertNode=function(e){if((0,s.assertRangeValid)(this),(0,s.assertValidNodeType)(e,s.insertableNodeTypes),(0,s.assertNodeNotReadOnly)(this.startContainer),(0,i.isOrIsAncestorOf)(e,this.startContainer))throw new r.DOMException("HIERARCHY_REQUEST_ERR");var t=c(e,this.startContainer,this.startOffset);this.setStartBefore(t)},t.prototype.cloneContents=function(){var e,t;if((0,s.assertRangeValid)(this),this.collapsed)return(0,s.getRangeDocument)(this).createDocumentFragment();if(this.startContainer===this.endContainer&&(0,i.isCharacterDataNode)(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=(0,s.getRangeDocument)(this).createDocumentFragment()).appendChild(e),t;var n=new s.RangeIterator(this,!0);return e=(0,s.cloneSubtree)(n),n.detach(),e},t.prototype.canSurroundContents=function(){(0,s.assertRangeValid)(this),(0,s.assertNodeNotReadOnly)(this.startContainer),(0,s.assertNodeNotReadOnly)(this.endContainer);var e=new s.RangeIterator(this,!0),t=e._first&&(0,s.isNonTextPartiallySelected)(e._first,this)||e._last&&(0,s.isNonTextPartiallySelected)(e._last,this);return e.detach(),!t},t.prototype.surroundContents=function(e){if((0,s.assertValidNodeType)(e,s.surroundNodeTypes),!this.canSurroundContents())throw new r.DOMException("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);c(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},t.prototype.cloneRange=function(){(0,s.assertRangeValid)(this);for(var e=new s.DomRange((0,s.getRangeDocument)(this)),t=0,n=s.rangeProperties;t<n.length;t++){var o=n[t];e[o]=this[o]}return e},t.prototype.toString=function(){(0,s.assertRangeValid)(this);var e=this.startContainer;if(e===this.endContainer&&(0,i.isCharacterDataNode)(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new s.RangeIterator(this,!0);return(0,s.iterateSubtree)(n,(function(e){3!=e.nodeType&&4!=e.nodeType||t.push(e.data)})),n.detach(),t.join("")},t.prototype.compareNode=function(e){(0,s.assertRangeValid)(this);var t=e.parentNode,n=(0,i.getNodeIndex)(e);if(!t)throw new r.DOMException("NOT_FOUND_ERR");var o=this.comparePoint(t,n),a=this.comparePoint(t,n+1);return o<0?a>0?2:0:a>0?1:3},t.prototype.comparePoint=function(e,t){return(0,s.assertRangeValid)(this),(0,s.assertNode)(e,"HIERARCHY_REQUEST_ERR"),(0,s.assertSameDocumentOrFragment)(e,this.startContainer),(0,i.comparePoints)(e,t,this.startContainer,this.startOffset)<0?-1:(0,i.comparePoints)(e,t,this.endContainer,this.endOffset)>0?1:0},t.prototype.createContextualFragment=function(e){var t=this.startContainer,n=(0,i.getDocument)(t);if(!t)throw new r.DOMException("INVALID_STATE_ERR");var o=null;return 1==t.nodeType?o=t:(0,i.isCharacterDataNode)(t)&&(o=i.parentElement(t)),(o=null===o||"HTML"==o.nodeName&&i.isHtmlNamespace((0,i.getDocument)(o).documentElement)&&i.isHtmlNamespace(o)?n.createElement("body"):o.cloneNode(!1)).innerHTML=e,i.fragmentFromNodeChildren(o)},t.prototype.toHtml=function(){return d(this)},t.prototype.intersectsNode=function(e,t){if((0,s.assertRangeValid)(this),(0,i.getRootContainer)(e)!=(n=this,(0,i.getRootContainer)(n.startContainer)))return!1;var n,o=e.parentNode,r=(0,i.getNodeIndex)(e);if(!o)return!0;var a=(0,i.comparePoints)(o,r,this.endContainer,this.endOffset),c=(0,i.comparePoints)(o,r+1,this.startContainer,this.startOffset);return t?a<=0&&c>=0:a<0&&c>0},t.prototype.isPointInRange=function(e,t){return(0,s.assertRangeValid)(this),(0,s.assertNode)(e,"HIERARCHY_REQUEST_ERR"),(0,s.assertSameDocumentOrFragment)(e,this.startContainer),(0,i.comparePoints)(e,t,this.startContainer,this.startOffset)>=0&&(0,i.comparePoints)(e,t,this.endContainer,this.endOffset)<=0},t.prototype.intersectsRange=function(e){return l(this,e,!1)},t.prototype.intersectsOrTouchesRange=function(e){return l(this,e,!0)},t.prototype.intersection=function(e){if(this.intersectsRange(e)){var t=(0,i.comparePoints)(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=(0,i.comparePoints)(this.endContainer,this.endOffset,e.endContainer,e.endOffset),o=this.cloneRange();return-1==t&&o.setStart(e.startContainer,e.startOffset),1==n&&o.setEnd(e.endContainer,e.endOffset),o}return null},t.prototype.union=function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==(0,i.comparePoints)(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==(0,i.comparePoints)(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new r.DOMException("Ranges do not intersect")},t.prototype.containsNode=function(e,t){return t?this.intersectsNode(e,!1):3==this.compareNode(e)},t.prototype.containsNodeContents=function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,(0,i.getNodeLength)(e))<=0},t.prototype.containsRange=function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},t.prototype.containsNodeText=function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var o=n.pop();return t.setEnd(o,o.length),this.containsRange(t)}return this.containsNodeContents(e)},t.prototype.getNodes=function(e,t){return(0,s.assertRangeValid)(this),function(e,t,n){var o,r=!(!t||!t.length),a=!!n;r&&(o=new RegExp("^("+t.join("|")+")$"));var c=[];return(0,s.iterateSubtree)(new s.RangeIterator(e,!1),(function(t){if((!r||o.test(t.nodeType.toString()))&&(!a||n(t))){var s=e.startContainer;if(t!=s||!(0,i.isCharacterDataNode)(s)||e.startOffset!=s.length){var l=e.endContainer;t==l&&(0,i.isCharacterDataNode)(l)&&0==e.endOffset||c.push(t)}}})),c}(this,e,t)},t.prototype.getDocument=function(){return(0,s.getRangeDocument)(this)},t.prototype.collapseBefore=function(e){this.setEndBefore(e),this.collapse(!1)},t.prototype.collapseAfter=function(e){this.setStartAfter(e),this.collapse(!0)},t.prototype.getBookmark=function(e){var t=(0,s.getRangeDocument)(this),n=(0,a.createRange)(t);e=e||i.getBody(t),n.selectNodeContents(e);var o=this.intersection(n),r=0,c=0;return o&&(n.setEnd(o.startContainer,o.startOffset),c=(r=n.toString().length)+o.toString().length),{start:r,end:c,containerNode:e}},t.prototype.moveToBookmark=function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var o,r,i,s,a=[t],c=!1,l=!1;!l&&(o=a.pop());)if(3==o.nodeType)r=n+o.length,!c&&e.start>=n&&e.start<=r&&(this.setStart(o,e.start-n),c=!0),c&&e.end>=n&&e.end<=r&&(this.setEnd(o,e.end-n),l=!0),n=r;else for(i=(s=o.childNodes).length;i--;)a.push(s[i])},t.prototype.getName=function(){return"DomRange"},t.prototype.equals=function(e){return m(this,e)},t.prototype.isValid=function(){return(0,s.isRangeValid)(this)},t.prototype.inspect=function(){return u(this)},t.prototype.detach=function(){},t.prototype.select=function(e){(0,a.getSelection)(this.getDocument()).setSingleRange(this,e)},t}(e)}function m(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},"./node_modules/rangy2/esm5/internal/domrange/part2.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{createPrototypeRange:()=>f,DomRange:()=>p,createRangyRange:()=>h});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/module.js"),i=n("./node_modules/rangy2/esm5/dom.js"),s=n("./node_modules/rangy2/esm5/internal/domrange/_.js"),a=new r.Module("DomRange",["DomUtil"]);function c(e){return new i.DomPosition(e.parentNode,(0,i.getNodeIndex)(e))}function l(e){return new i.DomPosition(e.parentNode,(0,i.getNodeIndex)(e)+1)}function u(e,t){(0,s.assertRangeValid)(e);var n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset,c=n===r;(0,i.isCharacterDataNode)(r)&&a>0&&a<r.length&&(0,i.splitDataNode)(r,a,t),(0,i.isCharacterDataNode)(n)&&o>0&&o<n.length&&(n=(0,i.splitDataNode)(n,o,t),c?(a-=o,r=n):r==n.parentNode&&a>=(0,i.getNodeIndex)(n)&&a++,o=0),e.setStartAndEnd(n,o,r,a)}function d(e,t){return function(){(0,s.assertRangeValid)(this);var n,o=this.startContainer,r=this.startOffset,a=this.commonAncestorContainer,c=new s.RangeIterator(this,!0);o!==a&&(o=(n=l((0,i.getClosestAncestorIn)(o,a,!0))).node,r=n.offset),(0,s.iterateSubtree)(c,s.assertNodeNotReadOnly),c.reset();var u=e(c);return c.detach(),t(this,o,r,o,r),u}}function f(e,t){var n=e,r=(0,s.createDomRangeP1)(n);Object.assign(r.prototype,s.comparisonConstants);var a=function(e,t){function n(e,t){return function(n){(0,s.assertValidNodeType)(n,s.beforeAfterNodeTypes),(0,s.assertValidNodeType)((0,i.getRootContainer)(n),s.rootContainerNodeTypes);var o=(e?c:l)(n);(t?r:a)(this,o.node,o.offset)}}function r(e,n,o){var r=e.endContainer,s=e.endOffset;n===e.startContainer&&o===e.startOffset||((0,i.getRootContainer)(n)==(0,i.getRootContainer)(r)&&1!=(0,i.comparePoints)(n,o,r,s)||(r=n,s=o),t(e,n,o,r,s))}function a(e,n,o){var r=e.startContainer,s=e.startOffset;n===e.endContainer&&o===e.endOffset||((0,i.getRootContainer)(n)==(0,i.getRootContainer)(r)&&-1!=(0,i.comparePoints)(n,o,r,s)||(r=n,s=o),t(e,r,s,n,o))}return function(e){function f(){var o=null!==e&&e.apply(this,arguments)||this;return o.setStartBefore=n(!0,!0),o.setStartAfter=n(!1,!0),o.setEndBefore=n(!0,!1),o.setEndAfter=n(!1,!1),o.extractContents=d(s.extractSubtree,t),o.deleteContents=d(s.deleteSubtree,t),o}return o.__extends(f,e),f.prototype.setStart=function(e,t){(0,s.assertNoDocTypeNotationEntityAncestor)(e,!0),(0,s.assertValidOffset)(e,t),r(this,e,t)},f.prototype.setEnd=function(e,t){(0,s.assertNoDocTypeNotationEntityAncestor)(e,!0),(0,s.assertValidOffset)(e,t),a(this,e,t)},f.prototype.setStartAndEnd=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e[0],r=e[1],i=o,a=r;switch(e.length){case 3:a=e[2];break;case 4:i=e[2],a=e[3]}(0,s.assertNoDocTypeNotationEntityAncestor)(o,!0),(0,s.assertValidOffset)(o,r),(0,s.assertNoDocTypeNotationEntityAncestor)(i,!0),(0,s.assertValidOffset)(i,a),t(this,o,r,i,a)},f.prototype.setBoundary=function(e,t,n){this["set"+(n?"Start":"End")](e,t)},f.prototype.collapse=function(e){(0,s.assertRangeValid)(this),e?t(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):t(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},f.prototype.selectNodeContents=function(e){(0,s.assertNoDocTypeNotationEntityAncestor)(e,!0),t(this,e,0,e,(0,i.getNodeLength)(e))},f.prototype.selectNode=function(e){(0,s.assertNoDocTypeNotationEntityAncestor)(e,!1),(0,s.assertValidNodeType)(e,s.beforeAfterNodeTypes);var n=c(e),o=l(e);t(this,n.node,n.offset,o.node,o.offset)},f.prototype.splitBoundaries=function(){u(this)},f.prototype.splitBoundariesPreservingPositions=function(e){u(this,e)},f.prototype.normalizeBoundaries=function(){(0,s.assertRangeValid)(this);var e,n=this.startContainer,o=this.startOffset,r=this.endContainer,a=this.endOffset,c=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(r=e,a=e.length,e.appendData(t.data),(0,i.removeNode)(t))},l=function(e){var t=e.previousSibling;if(t&&t.nodeType==e.nodeType){n=e;var s=e.length;if(o=t.length,e.insertData(0,t.data),(0,i.removeNode)(t),n==r)a+=o,r=n;else if(r==e.parentNode){var c=(0,i.getNodeIndex)(e);a==c?(r=e,a=s):a>c&&a--}}},u=!0;if((0,i.isCharacterDataNode)(r))a==r.length?c(r):0==a&&(e=r.previousSibling)&&e.nodeType==r.nodeType&&(a=e.length,n==r&&(u=!1),e.appendData(r.data),(0,i.removeNode)(r),r=e);else{if(a>0){var d=r.childNodes[a-1];d&&(0,i.isCharacterDataNode)(d)&&c(d)}u=!this.collapsed}if(u){if((0,i.isCharacterDataNode)(n))0==o?l(n):o==n.length&&(e=n.nextSibling)&&e.nodeType==n.nodeType&&(r==e&&(r=n,a+=n.length),n.appendData(e.data),(0,i.removeNode)(e));else if(o<n.childNodes.length){var f=n.childNodes[o];f&&(0,i.isCharacterDataNode)(f)&&l(f)}}else n=r,o=a;t(this,n,o,r,a)},f.prototype.collapseToPoint=function(e,t){(0,s.assertNoDocTypeNotationEntityAncestor)(e,!0),(0,s.assertValidOffset)(e,t),this.setStartAndEnd(e,t)},f.prototype.parentElement=function(){return(0,s.assertRangeValid)(this),(0,s.getElementAncestor)(this.commonAncestorContainer,!0)},f}(e)}(r,t);return Object.assign(a,s.comparisonConstants)}var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.inspect=s.rangeInspect,t.toHtml=s.rangeToHtml,t.getRangeDocument=s.getRangeDocument,t.rangesEqual=s.rangesEqual,t}(f(s.DomRangeBase,s.updateBoundaries));function h(e){return e=(0,i.getContentDocument)(e,a,"createRangyRange"),new p(e)}Object.assign(p,{rangeProperties:s.rangeProperties,RangeIterator:s.RangeIterator,copyComparisonConstants:s.copyComparisonConstants,createPrototypeRange:f})},"./node_modules/rangy2/esm5/internal/domrange/util.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{isNonTextPartiallySelected:()=>s,beforeAfterNodeTypes:()=>a,rootContainerNodeTypes:()=>c,insertableNodeTypes:()=>l,surroundNodeTypes:()=>u,getElementAncestor:()=>m,assertNoDocTypeNotationEntityAncestor:()=>g,assertValidNodeType:()=>y,assertValidOffset:()=>v,assertSameDocumentOrFragment:()=>b,assertNodeNotReadOnly:()=>_,assertNode:()=>w,isRangeValid:()=>j,assertRangeValid:()=>S,getRangeDocument:()=>R,updateBoundaries:()=>N,rangeProperties:()=>O,RangeBase:()=>C,DomRangeBase:()=>x});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/DOMException.js"),i=n("./node_modules/rangy2/esm5/dom.js");function s(e,t){return 3!=e.nodeType&&((0,i.isOrIsAncestorOf)(e,t.startContainer)||(0,i.isOrIsAncestorOf)(e,t.endContainer))}var a=[1,3,4,5,7,8,10],c=[2,9,11],l=[1,3,4,5,7,8,10,11],u=[1,3,4,5,7,8];function d(e){return function(t,n){for(var o,r=n?t:t.parentNode;r;){if(o=r.nodeType,e.includes(o))return r;r=r.parentNode}return null}}var f=d([9,11]),p=d([5,6,10,12]),h=d([6,10,12]),m=d([1]);function g(e,t){if(h(e,t))throw new r.DOMException("INVALID_NODE_TYPE_ERR")}function y(e,t){if(!t.includes(e.nodeType))throw new r.DOMException("INVALID_NODE_TYPE_ERR")}function v(e,t){if(t<0||t>((0,i.isCharacterDataNode)(e)?e.length:e.childNodes.length))throw new r.DOMException("INDEX_SIZE_ERR")}function b(e,t){if(f(e,!0)!==f(t,!0))throw new r.DOMException("WRONG_DOCUMENT_ERR")}function _(e){if(p(e,!0))throw new r.DOMException("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new r.DOMException(t)}function E(e,t){return t<=((0,i.isCharacterDataNode)(e)?e.length:e.childNodes.length)}function j(e){return!!e.startContainer&&!!e.endContainer&&(0,i.getRootContainer)(e.startContainer)==(0,i.getRootContainer)(e.endContainer)&&E(e.startContainer,e.startOffset)&&E(e.endContainer,e.endOffset)}function S(e){if(!j(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function R(e){return e.document||(0,i.getDocument)(e.startContainer)}function N(e,t,n,o,r){e.startContainer=t,e.startOffset=n,e.endContainer=o,e.endOffset=r,e.document=i.getDocument(t),function(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:i.getCommonAncestor(e.startContainer,e.endContainer)}(e)}var O=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],C=function(){},x=function(e){function t(t){var n=e.call(this)||this;return N(n,t,0,t,0),n}return o.__extends(t,e),t}(C)},"./node_modules/rangy2/esm5/internal/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{RangeBase:()=>o.RangeBase,rangesEqual:()=>o.rangesEqual,getRangeDocument:()=>o.getRangeDocument,createPrototypeRange:()=>o.createPrototypeRange,DomRange:()=>o.DomRange,createRangyRange:()=>o.createRangyRange,WrappedRange:()=>o.WrappedRange,createNativeRange:()=>o.createNativeRange,createRange:()=>o.createRange,shimCreateRange:()=>o.shimCreateRange,getNativeSelection:()=>o.getNativeSelection,isSelectionValid:()=>o.isSelectionValid,getSelection:()=>o.getSelection,Selection:()=>o.Selection,WrappedSelection:()=>o.WrappedSelection,shimGetSelection:()=>o.shimGetSelection});var o=n("./node_modules/rangy2/esm5/internal/_.js")},"./node_modules/rangy2/esm5/internal/wrappedrange.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{WrappedRange:()=>d,createNativeRange:()=>f,createRange:()=>p,shimCreateRange:()=>h});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/util.js"),i=n("./node_modules/rangy2/esm5/api.js"),s=n("./node_modules/rangy2/esm5/module.js"),a=n("./node_modules/rangy2/esm5/dom.js"),c=n("./node_modules/rangy2/esm5/internal/_.js"),l=new s.Module("WrappedRange",["DomRange"]);function u(e){for(var t=0,n=c.rangeProperties;t<n.length;t++){var o=n[t];e[o]=e.nativeRange[o]}e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}var d=function(e){function t(n){var o=e.call(this)||this;if(o.nativeRange=n,o.setStartBefore=t.createBeforeAfterNodeSetter("setStartBefore"),o.setStartAfter=t.createBeforeAfterNodeSetter("setStartAfter"),o.setEndBefore=t.createBeforeAfterNodeSetter("setEndBefore"),o.setEndAfter=t.createBeforeAfterNodeSetter("setEndAfter"),!n)throw l.createError("WrappedRange: Range must be specified");return u(o),o}return o.__extends(t,e),t.prototype.selectNode=function(e){this.nativeRange.selectNode(e),u(this)},t.prototype.cloneContents=function(){return this.nativeRange.cloneContents()},t.prototype.surroundContents=function(e){this.nativeRange.surroundContents(e),u(this)},t.prototype.collapse=function(e){this.nativeRange.collapse(e),u(this)},t.prototype.cloneRange=function(){return new t(this.nativeRange.cloneRange())},t.prototype.refresh=function(){u(this)},t.prototype.toString=function(){return this.nativeRange.toString()},t.prototype.setStart=function(e,t){this.nativeRange.setStart(e,t),u(this)},t.prototype.setEnd=function(e,t){this.nativeRange.setEnd(e,t),u(this)},t.createBeforeAfterNodeSetter=function(e){return function(t){this.nativeRange[e](t),u(this)}},t.prototype.selectNodeContents=function(e){this.setStartAndEnd(e,0,(0,a.getNodeLength)(e))},t.prototype.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},t.prototype.getName=function(){return"WrappedRange"},t}((0,c.createPrototypeRange)(c.RangeBase,(function(e,t,n,o,r){var i=e.startContainer!==t||e.startOffset!=n,s=e.endContainer!==o||e.endOffset!=r,a=!e.equals(e.nativeRange);(i||s||a)&&(e.setEnd(o,r),e.setStart(t,n))})));function f(e){return(e=(0,a.getContentDocument)(e,l,"createNativeRange")).createRange()}function p(e){return e=(0,a.getContentDocument)(e,l,"createRange"),new d(f(e))}function h(e){e||(e=window);var t=e.document;void 0===t.createRange&&(t.createRange=function(){return p(t)})}(0,i.onDocReady)((function(){var e=document.createTextNode("test");(0,a.getBody)(document).appendChild(e);var t=document.createRange(),n=document.createElement("div");n.innerHTML="123";var o=n.firstChild,i=(0,a.getBody)(document);i.appendChild(n),t.setStart(o,1),t.setEnd(o,2),t.deleteContents();var s=d.prototype;"13"==o.data&&(s.deleteContents=function(){this.nativeRange.deleteContents(),u(this)},s.extractContents=function(){var e=this.nativeRange.extractContents();return u(this),e}),i.removeChild(n),(0,r.isHostMethod)(t,"createContextualFragment")&&(s.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),i.removeChild(e),i=null}))},"./node_modules/rangy2/esm5/internal/wrappedselection.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{getNativeSelection:()=>m,isSelectionValid:()=>y,getSelection:()=>I,WrappedSelBase:()=>D,WrappedSelection:()=>P,Selection:()=>L,shimGetSelection:()=>B});var o=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/rangy2/esm5/module.js"),i=n("./node_modules/rangy2/esm5/api.js"),s=n("./node_modules/rangy2/esm5/DOMException.js"),a=n("./node_modules/rangy2/esm5/util.js"),c=n("./node_modules/rangy2/esm5/dom.js"),l=n("./node_modules/rangy2/esm5/internal/_.js"),u=new r.Module("WrappedSelection",["DomRange","WrappedRange"]),d="boolean",f="number";function p(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function h(e,t){if(e){if(c.isWindow(e))return e;if(e instanceof P)return e.win;var n=c.getContentDocument(e,u,t);return c.getWindow(n)}return window}function m(e){return h(e,"getWinSelection").getSelection()}var g=function(e){var t=!1;return e.anchorNode&&(t=1==c.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t};function y(){return!0}var v=m();v||u.fail("Native selection was null (possibly issue 138?)");var b,_=(0,l.createNativeRange)(document),w=i.features.selectionHasAnchorAndFocus=a.areHostProperties(v,["anchorNode","focusNode","anchorOffset","focusOffset"]),E=i.features.selectionHasExtend=(0,a.isHostMethod)(v,"extend"),j=i.features.selectionHasRangeCount=typeof v.rangeCount==f,S=E?function(e,t){var n=l.DomRange.getRangeDocument(t),o=(0,l.createRange)(n);o.collapseToPoint(t.endContainer,t.endOffset),e.addRange(C(o)),e.extend(t.startContainer,t.startOffset)}:null,R=w?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};function N(e,t,n){var o=n?"end":"start",r=n?"start":"end";e.anchorNode=t[o+"Container"],e.anchorOffset=t[o+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function O(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function C(e){var t;return e instanceof l.DomRange?((t=(0,l.createNativeRange)(e.getDocument())).setEnd(e.endContainer,e.endOffset),t.setStart(e.startContainer,e.startOffset)):e instanceof l.WrappedRange?t=e.nativeRange:e instanceof Range&&(t=e),t}function x(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}(0,a.isHostMethod)(v,"getRangeAt")?b=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:w&&(b=function(e){var t=(0,c.getDocument)(e.anchorNode),n=(0,l.createRange)(t);return n.setStartAndEnd(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),n.collapsed!==this.isCollapsed&&n.setStartAndEnd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset),n});var T,A=[];function k(e,t){for(var n,o,r=A.length;r--;)if(o=(n=A[r]).selection,"deleteAll"==t)x(o);else if(n.win==e)return"delete"==t?(A.splice(r,1),!0):o;return"deleteAll"==t&&(A.length=0),null}function I(e){if(e&&e instanceof P)return e.refresh(),e;var t=k(e=h(e,"getNativeSelection")),n=m(e);return t?(t.nativeSelection=n,t.refresh()):(t=new P(n,e),A.push({win:e,selection:t})),t}(0,a.isHostMethod)(v,"getRangeAt")&&typeof v.rangeCount==f?T=function(e){if(e._ranges.length=e.rangeCount=e.nativeSelection.rangeCount,e.rangeCount){for(var t=0,n=e.rangeCount;t<n;++t)e._ranges[t]=new l.WrappedRange(e.nativeSelection.getRangeAt(t));N(e,e._ranges[e.rangeCount-1],g(e.nativeSelection)),e.isCollapsed=R(e)}else O(e)}:w&&typeof v.isCollapsed==d&&typeof _.collapsed==d&&i.features.implementsDomRange?T=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=b(n,0),e._ranges=[t],e.rangeCount=1,function(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}(e),e.isCollapsed=R(e)):O(e)}:u.fail("No means of obtaining a Range or TextRange from the user's selection was found");var D=function(e,t){this.nativeSelection=e,this.win=t,this._ranges=[],3==arguments.length&&(this.win=arguments[2]),this.refresh()};var P=function(e){var t;function n(e,t){S(e.nativeSelection,t),e.refresh()}var r=j?function(e,t){if(p(t)&&E)n(this,e);else{var o;i.features.selectionSupportsMultipleRanges?o=this.rangeCount:(this.removeAllRanges(),o=0);var r=C(e).cloneRange();try{this.nativeSelection.addRange(r)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(i.config.checkSelectionRanges){var s=b(this.nativeSelection,this.rangeCount-1);s&&!(0,l.rangesEqual)(s,e)&&(e=new l.WrappedRange(s))}this._ranges[this.rangeCount-1]=e,N(this,e,g(this.nativeSelection)),this.isCollapsed=R(this)}else this.refresh()}}:function(e,t){p(t)&&E?n(this,e):(this.nativeSelection.addRange(C(e)),this.refresh())};function a(e,t){if(e.win.document!=(0,c.getDocument)(t))throw new s.DOMException("WRONG_DOCUMENT_ERR")}function u(e){return function(t,n){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(e?"Start":"End")](t,n):(o=(0,l.createRange)(this.win.document)).setStartAndEnd(t,n),this.setSingleRange(o,this.isBackward())}}return t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addRange=r,t.isBackwards=t.isBackward,t.setStart=u(!0),t.setEnd=u(!1),t}return o.__extends(t,e),t.prototype.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),O(this)},t.prototype.setRanges=function(e){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)this.addRange(e[t])},t.prototype.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new s.DOMException("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},t.prototype.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,o=this.anchorOffset;if(T(this),e){var r=t.length;if(r!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=o)return!0;for(;r--;)if(!(0,l.rangesEqual)(t[r],this._ranges[r]))return!0;return!1}},t.prototype.removeRange=function(e){!function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var o=0,r=n.length;o<r;++o)(0,l.rangesEqual)(t,n[o])||e.addRange(n[o]);e.rangeCount||O(e)}(this,e)},t.prototype.isBackward=function(){return g(this)},t.prototype.toString=function(){for(var e=[],t=0,n=this.rangeCount;t<n;++t)e[t]=""+this._ranges[t];return e.join("")},t.prototype.collapse=function(e,t){a(this,e);var n=(0,l.createRange)(e);n.collapseToPoint(e,t),this.setSingleRange(n),this.isCollapsed=!0},t.prototype.collapseToStart=function(){if(!this.rangeCount)throw new s.DOMException("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},t.prototype.collapseToEnd=function(){if(!this.rangeCount)throw new s.DOMException("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},t.prototype.selectAllChildren=function(e){a(this,e);var t=(0,l.createRange)(e);t.selectNodeContents(e),this.setSingleRange(t)},t.prototype.deleteFromDocument=function(){if(this.rangeCount){var e=this.getAllRanges();if(e.length){this.removeAllRanges();for(var t=0,n=e.length;t<n;++t)e[t].deleteContents();this.addRange(e[n-1])}}},t.prototype.eachRange=function(e,t){for(var n=0,o=this._ranges.length;n<o;++n)if(e(this.getRangeAt(n)))return t},t.prototype.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},t.prototype.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},t.prototype.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(o){n.push(o[e].apply(o,t||[]))})),n},t.prototype.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},t.prototype.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},t.prototype.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},t.prototype.moveToBookmark=function(e){for(var t,n,o=[],r=0;t=e.rangeBookmarks[r++];)(n=(0,l.createRange)(this.win)).moveToBookmark(t),o.push(n);e.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},t.prototype.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},t.prototype.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},t.prototype.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(l.DomRange.toHtml(t))})),e.join("")},t.inspect=function(e){var t=[],n=new c.DomPosition(e.anchorNode,e.anchorOffset),o=new c.DomPosition(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var i=0,s=e.rangeCount;i<s;++i)t[i]=l.DomRange.inspect(e.getRangeAt(i));return"["+r+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+o.inspect()+"]"},t.prototype.getName=function(){return"WrappedSelection"},t.prototype.inspect=function(){return t.inspect(this)},t.prototype.detach=function(){k(this.win,"delete"),x(this)},t.detachAll=function(){k(null,"deleteAll")},t}(e),t.isDirectionBackward=p,t}(D),L=P;function B(e){e||(e=window),void 0===e.getSelection&&(e.getSelection=function(){return I(e)})}},"./node_modules/rangy2/esm5/module.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Module:()=>o});var o=function(){function e(e,t){this.name=e,this.dependencies=t}return e.prototype.fail=function(e){throw console.log("Module '"+this.name+"' failed to load: "+e),new Error(e)},e.prototype.warn=function(e){console.log("Module "+this.name+": "+e)},e.prototype.createError=function(e){return new Error("Error in Rangy "+this.name+" module: "+e)},e}()},"./node_modules/rangy2/esm5/util.js":(e,t,n)=>{"use strict";function o(e,t){var n=typeof e[t];return"function"==n||!("object"!=n||!e[t])||"unknown"==n}function r(e,t){return!("object"!=typeof e[t]||!e[t])}function i(e,t){return void 0!==e[t]}function s(e){return function(t,n){for(var o=n.length;o--;)if(!e(t,n[o]))return!1;return!0}}n.r(t),n.d(t,{isHostMethod:()=>o,isHostObject:()=>r,isHostProperty:()=>i,areHostMethods:()=>a,areHostObjects:()=>c,areHostProperties:()=>l,getBody:()=>u});var a=s(o),c=s(r),l=s(i);function u(e){return r(e,"body")?e.body:e.getElementsByTagName("body")[0]}},"./node_modules/split.js/dist/split.js":function(e){e.exports=function(){"use strict";var e="undefined"!=typeof window?window:null,t=null===e,n=t?void 0:e.document,o="addEventListener",r="removeEventListener",i="getBoundingClientRect",s="_a",a="_b",c="_c",l="horizontal",u=function(){return!1},d=t?"calc":["","-webkit-","-moz-","-o-"].filter((function(e){var t=n.createElement("div");return t.style.cssText="width:"+e+"calc(9px)",!!t.style.length})).shift()+"calc",f=function(e){return"string"==typeof e||e instanceof String},p=function(e){if(f(e)){var t=n.querySelector(e);if(!t)throw new Error("Selector "+e+" did not match a DOM element");return t}return e},h=function(e,t,n){var o=e[t];return void 0!==o?o:n},m=function(e,t,n,o){if(t){if("end"===o)return 0;if("center"===o)return e/2}else if(n){if("start"===o)return 0;if("center"===o)return e/2}return e},g=function(e,t){var o=n.createElement("div");return o.className="gutter gutter-"+t,o},y=function(e,t,n){var o={};return f(t)?o[e]=t:o[e]=d+"("+t+"% - "+n+"px)",o},v=function(e,t){var n;return(n={})[e]=t+"px",n};return function(d,f){if(void 0===f&&(f={}),t)return{};var b,_,w,E,j,S,R=d;Array.from&&(R=Array.from(R));var N=p(R[0]).parentNode,O=getComputedStyle?getComputedStyle(N):null,C=O?O.flexDirection:null,x=h(f,"sizes")||R.map((function(){return 100/R.length})),T=h(f,"minSize",100),A=Array.isArray(T)?T:R.map((function(){return T})),k=h(f,"maxSize",1/0),I=Array.isArray(k)?k:R.map((function(){return k})),D=h(f,"expandToMin",!1),P=h(f,"gutterSize",10),L=h(f,"gutterAlign","center"),B=h(f,"snapOffset",30),M=h(f,"dragInterval",1),z=h(f,"direction",l),W=h(f,"cursor",z===l?"col-resize":"row-resize"),H=h(f,"gutter",g),q=h(f,"elementStyle",y),F=h(f,"gutterStyle",v);function V(e,t,n,o){var r=q(b,t,n,o);Object.keys(r).forEach((function(t){e.style[t]=r[t]}))}function U(e,t,n){var o=F(b,t,n);Object.keys(o).forEach((function(t){e.style[t]=o[t]}))}function $(){return S.map((function(e){return e.size}))}function G(e){return"touches"in e?e.touches[0][_]:e[_]}function Y(e){var t=S[this.a],n=S[this.b],o=t.size+n.size;t.size=e/this.size*o,n.size=o-e/this.size*o,V(t.element,t.size,this[a],t.i),V(n.element,n.size,this[c],n.i)}function K(e){var t,n=S[this.a],o=S[this.b];this.dragging&&(t=G(e)-this.start+(this[a]-this.dragOffset),M>1&&(t=Math.round(t/M)*M),t<=n.minSize+B+this[a]?t=n.minSize+this[a]:t>=this.size-(o.minSize+B+this[c])&&(t=this.size-(o.minSize+this[c])),t>=n.maxSize-B+this[a]?t=n.maxSize+this[a]:t<=this.size-(o.maxSize-B+this[c])&&(t=this.size-(o.maxSize+this[c])),Y.call(this,t),h(f,"onDrag",u)($()))}function J(){var e=S[this.a].element,t=S[this.b].element,n=e[i](),o=t[i]();this.size=n[b]+o[b]+this[a]+this[c],this.start=n[w],this.end=n[E]}function Z(e){if(!getComputedStyle)return null;var t=getComputedStyle(e);if(!t)return null;var n=e[j];return 0===n?null:n-=z===l?parseFloat(t.paddingLeft)+parseFloat(t.paddingRight):parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}function Q(e){var t=Z(N);if(null===t)return e;if(A.reduce((function(e,t){return e+t}),0)>t)return e;var n=0,o=[],r=e.map((function(r,i){var s=t*r/100,a=m(P,0===i,i===e.length-1,L),c=A[i]+a;return s<c?(n+=c-s,o.push(0),c):(o.push(s-c),s)}));return 0===n?e:r.map((function(e,r){var i=e;if(n>0&&o[r]-n>0){var s=Math.min(n,o[r]-n);n-=s,i=e-s}return i/t*100}))}function X(){var t=this,o=S[t.a].element,i=S[t.b].element;t.dragging&&h(f,"onDragEnd",u)($()),t.dragging=!1,e[r]("mouseup",t.stop),e[r]("touchend",t.stop),e[r]("touchcancel",t.stop),e[r]("mousemove",t.move),e[r]("touchmove",t.move),t.stop=null,t.move=null,o[r]("selectstart",u),o[r]("dragstart",u),i[r]("selectstart",u),i[r]("dragstart",u),o.style.userSelect="",o.style.webkitUserSelect="",o.style.MozUserSelect="",o.style.pointerEvents="",i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor="",n.body.style.cursor=""}function ee(t){if(!("button"in t)||0===t.button){var r=this,i=S[r.a].element,s=S[r.b].element;r.dragging||h(f,"onDragStart",u)($()),t.preventDefault(),r.dragging=!0,r.move=K.bind(r),r.stop=X.bind(r),e[o]("mouseup",r.stop),e[o]("touchend",r.stop),e[o]("touchcancel",r.stop),e[o]("mousemove",r.move),e[o]("touchmove",r.move),i[o]("selectstart",u),i[o]("dragstart",u),s[o]("selectstart",u),s[o]("dragstart",u),i.style.userSelect="none",i.style.webkitUserSelect="none",i.style.MozUserSelect="none",i.style.pointerEvents="none",s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",r.gutter.style.cursor=W,r.parent.style.cursor=W,n.body.style.cursor=W,J.call(r),r.dragOffset=G(t)-r.end}}z===l?(b="width",_="clientX",w="left",E="right",j="clientWidth"):"vertical"===z&&(b="height",_="clientY",w="top",E="bottom",j="clientHeight"),x=Q(x);var te=[];function ne(e){var t=e.i===te.length,n=t?te[e.i-1]:te[e.i];J.call(n);var o=t?n.size-e.minSize-n[c]:e.minSize+n[a];Y.call(n,o)}function oe(e){var t=Q(e);t.forEach((function(e,n){if(n>0){var o=te[n-1],r=S[o.a],i=S[o.b];r.size=t[n-1],i.size=e,V(r.element,r.size,o[a],r.i),V(i.element,i.size,o[c],i.i)}}))}function re(e,t){te.forEach((function(n){if(!0!==t?n.parent.removeChild(n.gutter):(n.gutter[r]("mousedown",n[s]),n.gutter[r]("touchstart",n[s])),!0!==e){var o=q(b,n.a.size,n[a]);Object.keys(o).forEach((function(e){S[n.a].element.style[e]="",S[n.b].element.style[e]=""}))}}))}return(S=R.map((function(e,t){var n,r={element:p(e),size:x[t],minSize:A[t],maxSize:I[t],i:t};if(t>0&&((n={a:t-1,b:t,dragging:!1,direction:z,parent:N})[a]=m(P,t-1==0,!1,L),n[c]=m(P,!1,t===R.length-1,L),"row-reverse"===C||"column-reverse"===C)){var i=n.a;n.a=n.b,n.b=i}if(t>0){var l=H(t,z,r.element);U(l,P,t),n[s]=ee.bind(n),l[o]("mousedown",n[s]),l[o]("touchstart",n[s]),N.insertBefore(l,r.element),n.gutter=l}return V(r.element,r.size,m(P,0===t,t===R.length-1,L),t),t>0&&te.push(n),r}))).forEach((function(e){var t=e.element[i]()[b];t<e.minSize&&(D?ne(e):e.minSize=t)})),{setSizes:oe,getSizes:$,collapse:function(e){ne(S[e])},destroy:re,parent:N,pairs:te}}}()},"./node_modules/tesseract.js/dist/tesseract.min.js":e=>{window,e.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=function(e,t){return"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))}},function(e,t){var n=this,o=!1;t.logging=o,t.setLogging=function(e){o=e},t.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o?console.log.apply(n,t):null}},function(e,t){var n,o,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=a(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){var o,r;void 0===(r="function"==typeof(o=function(){return function(){var e=arguments.length;if(0===e)throw new Error("resolveUrl requires at least one argument; got none.");var t=document.createElement("base");if(t.href=arguments[0],1===e)return t.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(t,n.firstChild);for(var o,r=document.createElement("a"),i=1;i<e;i++)r.href=arguments[i],o=r.href,t.href=o;return n.removeChild(t),o}})?o.call(t,n,t,e):o)||(e.exports=r)},function(e,t,n){var o=n(0),r=0;e.exports=function(e){var t=e.id,n=e.action,i=e.payload,s=void 0===i?{}:i,a=t;return void 0===a&&(a=o("Job",r),r+=1),{id:a,action:n,payload:s}}},function(e,t,n){function o(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=n(11),u=n(14),d=n(4),f=n(1).log,p=n(0),h=n(15).defaultOEM,m=n(16),g=m.defaultOptions,y=m.spawnWorker,v=m.terminateWorker,b=m.onMessage,_=m.loadImage,w=m.send,E=0;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p("Worker",E),n=l(s({},g,{},e)),o=n.logger,i=n.errorHandler,a=c(n,["logger","errorHandler"]),m={},j={},S=y(a);E+=1;var R=function(e,t){m[e]=t},N=function(e,t){j[e]=t},O=function(e){var n=e.id,o=e.action,r=e.payload;return new Promise((function(e,i){f("[".concat(t,"]: Start ").concat(n,", action=").concat(o)),R(o,e),N(o,i),w(S,{workerId:t,jobId:n,action:o,payload:r})}))},C=function(e){return O(d({id:e,action:"load",payload:{options:a}}))},x=function(e,t,n){return O(d({id:n,action:"FS",payload:{method:"writeFile",args:[e,t]}}))},T=function(e,t){return O(d({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}}))},A=function(e,t){return O(d({id:t,action:"FS",payload:{method:"unlink",args:[e]}}))},k=function(e,t,n){return O(d({id:n,action:"FS",payload:{method:e,args:t}}))},I=function(){return O(d({id:arguments.length>1?arguments[1]:void 0,action:"loadLanguage",payload:{langs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",options:a}}))},D=function(){return O(d({id:arguments.length>2?arguments[2]:void 0,action:"initialize",payload:{langs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",oem:arguments.length>1&&void 0!==arguments[1]?arguments[1]:h}}))},P=function(){return O(d({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}))},L=function(){var e=r(regeneratorRuntime.mark((function e(t){var n,o,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},o=r.length>2?r[2]:void 0,e.t0=O,e.t1=d,e.t2=o,e.next=7,_(t);case 7:return e.t3=e.sent,e.t4=n,e.t5={image:e.t3,options:e.t4},e.t6={id:e.t2,action:"recognize",payload:e.t5},e.t7=(0,e.t1)(e.t6),e.abrupt("return",(0,e.t0)(e.t7));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){return O(d({id:arguments.length>2?arguments[2]:void 0,action:"getPDF",payload:{title:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tesseract OCR Result",textonly:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}))},M=function(){var e=r(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=O,e.t1=d,e.t2=n,e.next=5,_(t);case 5:return e.t3=e.sent,e.t4={image:e.t3},e.t5={id:e.t2,action:"detect",payload:e.t4},e.t6=(0,e.t1)(e.t5),e.abrupt("return",(0,e.t0)(e.t6));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==S&&(v(S),S=null),e.abrupt("return",Promise.resolve());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return b(S,(function(e){var t=e.workerId,n=e.jobId,r=e.status,a=e.action,c=e.data;if("resolve"===r){f("[".concat(t,"]: Complete ").concat(n));var l=c;"recognize"===a?l=u(c):"getPDF"===a&&(l=Array.from(s({},c,{length:Object.keys(c).length}))),m[a]({jobId:n,data:l})}else if("reject"===r){if(j[a](c),!i)throw Error(c);i(c)}else"progress"===r&&o(c)})),{id:t,worker:S,setResolve:R,setReject:N,load:C,writeText:x,readText:T,removeFile:A,FS:k,loadLanguage:I,initialize:D,setParameters:P,recognize:L,getPDF:B,detect:M,terminate:z}}},function(e,t){e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},function(e,t,n){function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(8);var i=n(10),s=n(5),a=n(25),c=n(6),l=n(26),u=n(1).setLogging;e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({OEM:c,PSM:l,createScheduler:i,createWorker:s,setLogging:u},a)},function(e,t,n){(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=function(e){"use strict";var n,o=Object.prototype,r=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(e,t,n,o){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),s=new C(o||[]);return i._invoke=function(e,t,n){var o=d;return function(r,i){if(o===p)throw new Error("Generator is already running");if(o===h){if("throw"===r)throw i;return T()}for(n.method=r,n.arg=i;;){var s=n.delegate;if(s){var a=R(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=u(e,t,n);if("normal"===c.type){if(o=n.done?h:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=h,n.method="throw",n.arg=c.arg)}}}(e,n,s),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",m={};function g(){}function y(){}function v(){}var b={};b[s]=function(){return this};var _=Object.getPrototypeOf,w=_&&_(_(x([])));w&&w!==o&&r.call(w,s)&&(b=w);var E=v.prototype=g.prototype=Object.create(b);function j(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){var n;this._invoke=function(o,i){function s(){return new Promise((function(n,s){!function n(o,i,s,a){var c=u(e[o],e,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===t(d)&&r.call(d,"__await")?Promise.resolve(d.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):Promise.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,a)}))}a(c.arg)}(o,i,n,s)}))}return n=n?n.then(s,s):s()}}function R(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,R(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function x(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:n,done:!0}}return y.prototype=E.constructor=v,v.constructor=y,v[c]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},j(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,o,r){var i=new S(l(t,n,o,r));return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(E),E[c]="Generator",E[s]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=x,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,r){return a.type="throw",a.arg=e,t.next=o,r&&(t.method="next",t.arg=n),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;O(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:x(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),m}},e}("object"===t(e)?e.exports:{});try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}}).call(this,n(9)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var o=this;function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(o,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var s=e.apply(t,n);function a(e){i(s,o,r,a,c,"next",e)}function c(e){i(s,o,r,a,c,"throw",e)}a(void 0)}))}}var a=n(4),c=n(1).log,l=n(0),u=0;e.exports=function(){var e=l("Scheduler",u),t={},n={},i=[];u+=1;var d=function(){return Object.keys(t).length},f=function(){if(0!==i.length)for(var e=Object.keys(t),o=0;o<e.length;o+=1)if(void 0===n[e[o]]){i[0](t[e[o]]);break}},p=function(t,l){return new Promise((function(u,d){var p=a({action:t,payload:l});i.push(function(){var e=s(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.shift(),n[s.id]=p,e.prev=2,e.t0=u,e.next=6,s[t].apply(o,[].concat(r(l),[p.id]));case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=13;break;case 10:e.prev=10,e.t2=e.catch(2),d(e.t2);case 13:return e.prev=13,delete n[s.id],f(),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[2,10,13,17]])})));return function(t){return e.apply(this,arguments)}}()),c("[".concat(e,"]: Add ").concat(p.id," to JobQueue")),c("[".concat(e,"]: JobQueue length=").concat(i.length)),f()}))};return{addWorker:function(n){return t[n.id]=n,c("[".concat(e,"]: Add ").concat(n.id)),c("[".concat(e,"]: Number of workers=").concat(d())),f(),n.id},addJob:function(){var t=s(regeneratorRuntime.mark((function t(n){var o,r,i,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==d()){t.next=2;break}throw Error("[".concat(e,"]: You need to have at least one worker before adding jobs"));case 2:for(o=s.length,r=new Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=s[i];return t.abrupt("return",p(n,r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),terminate:function(){var e=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object.keys(t).forEach(function(){var e=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[n].terminate();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=[];case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getQueueLen:function(){return i.length},getNumWorkers:d}}},function(e,t,n){function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="browser"===n(12)("type")?n(3):function(e){return e};e.exports=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return["corePath","workerPath","langPath"].forEach((function(n){void 0!==e[n]&&(t[n]=i(t[n]))})),t}},function(e,t,n){(function(t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(13);e.exports=function(e){var n={};return r()?n.type="electron":"object"===("undefined"==typeof window?"undefined":o(window))?n.type="browser":"function"==typeof importScripts?n.type="webworker":"object"===(void 0===t?"undefined":o(t))&&(n.type="node"),void 0===e?n:n[e]}}).call(this,n(2))},function(e,t,n){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){return"undefined"!=typeof window&&"object"===n(window.process)&&"renderer"===window.process.type||!(void 0===t||"object"!==n(t.versions)||!t.versions.electron)||"object"===("undefined"==typeof navigator?"undefined":n(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}}).call(this,n(2))},function(e,t){function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=function(e){var t=[],n=[],r=[],i=[],s=[];return e.blocks.forEach((function(a){a.paragraphs.forEach((function(t){t.lines.forEach((function(n){n.words.forEach((function(r){r.symbols.forEach((function(i){s.push(o({},i,{page:e,block:a,paragraph:t,line:n,word:r}))})),i.push(o({},r,{page:e,block:a,paragraph:t,line:n}))})),r.push(o({},n,{page:e,block:a,paragraph:t}))})),n.push(o({},t,{page:e,block:a}))})),t.push(o({},a,{page:e}))})),o({},e,{blocks:t,paragraphs:n,lines:r,words:i,symbols:s})}},function(e,t,n){var o=n(6);e.exports={defaultOEM:o.DEFAULT}},function(e,t,n){var o=n(17),r=n(20),i=n(21),s=n(22),a=n(23),c=n(24);e.exports={defaultOptions:o,spawnWorker:r,terminateWorker:i,onMessage:s,send:a,loadImage:c}},function(e,t,n){(function(t){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(3),a=n(18),c=a.version,l=a.dependencies,u=n(19);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u,{workerPath:void 0!==t&&"development"===t.env.TESS_ENV?s("/dist/worker.dev.js?nocache=".concat(Math.random().toString(36).slice(3))):"https://unpkg.com/tesseract.js@v".concat(c,"/dist/worker.min.js"),corePath:"https://unpkg.com/tesseract.js-core@v".concat(l["tesseract.js-core"].substring(1),"/tesseract-core.").concat("object"===("undefined"==typeof WebAssembly?"undefined":o(WebAssembly))?"wasm":"asm",".js")})}).call(this,n(2))},function(e){e.exports=JSON.parse('{"name":"tesseract.js","version":"2.1.1","description":"Pure Javascript Multilingual OCR","main":"src/index.js","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.dev.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html","lint":"eslint src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.7.7","@babel/preset-env":"^7.7.7","acorn":"^6.4.0","babel-loader":"^8.0.6","cors":"^2.8.5","eslint":"^5.16.0","eslint-config-airbnb":"^17.1.1","eslint-plugin-import":"^2.19.1","eslint-plugin-jsx-a11y":"^6.2.3","eslint-plugin-react":"^7.17.0","expect.js":"^0.3.1","express":"^4.17.1","mocha":"^5.2.0","mocha-headless-chrome":"^2.0.3","npm-run-all":"^4.1.5","nyc":"^15.0.0","rimraf":"^2.7.1","wait-on":"^3.3.0","webpack":"^4.41.4","webpack-bundle-analyzer":"^3.6.0","webpack-cli":"^3.3.10","webpack-dev-middleware":"^3.7.2"},"dependencies":{"bmp-js":"^0.1.0","file-type":"^12.4.1","idb-keyval":"^3.2.0","is-electron":"^2.2.0","is-url":"^1.2.4","node-fetch":"^2.6.0","opencollective-postinstall":"^2.0.2","regenerator-runtime":"^0.13.3","resolve-url":"^0.2.1","tesseract.js-core":"^2.2.0","zlibjs":"^0.3.1"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}')},function(e,t){e.exports={langPath:"https://tessdata.projectnaptha.com/4.0.0",workerBlobURL:!0,logger:function(){}}},function(e,t){e.exports=function(e){var t,n=e.workerPath,o=e.workerBlobURL;if(Blob&&URL&&o){var r=new Blob(['importScripts("'.concat(n,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(r))}else t=new Worker(n);return t}},function(e,t){e.exports=function(e){e.terminate()}},function(e,t){e.exports=function(e,t){e.onmessage=function(e){var n=e.data;t(n)}}},function(e,t){function n(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(o,r)}e.exports=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.postMessage(n);case 1:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(r,i){var s=e.apply(t,o);function a(e){n(s,r,i,a,c,"next",e)}function c(e){n(s,r,i,a,c,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()},function(e,t,n){function o(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}var i=n(3),s=function(e){return new Promise((function(t,n){var o=new FileReader;o.onload=function(){t(o.result)},o.onerror=function(e){var t=e.target.error.code;n(Error("File could not be read! Code=".concat(t)))},o.readAsArrayBuffer(e)}))},a=function(){var e=r(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,void 0!==t){e.next=3;break}return e.abrupt("return","undefined");case 3:if("string"!=typeof t){e.next=16;break}if(!/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)){e.next=8;break}n=atob(t.split(",")[1]).split("").map((function(e){return e.charCodeAt(0)})),e.next=14;break;case 8:return e.next=10,fetch(i(t));case 10:return o=e.sent,e.next=13,o.arrayBuffer();case 13:n=e.sent;case 14:e.next=34;break;case 16:if(!(t instanceof HTMLElement)){e.next=30;break}if("IMG"!==t.tagName){e.next=21;break}return e.next=20,a(t.src);case 20:n=e.sent;case 21:if("VIDEO"!==t.tagName){e.next=25;break}return e.next=24,a(t.poster);case 24:n=e.sent;case 25:if("CANVAS"!==t.tagName){e.next=28;break}return e.next=28,new Promise((function(e){t.toBlob(function(){var t=r(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(o);case 2:n=t.sent,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 28:e.next=34;break;case 30:if(!(t instanceof File||t instanceof Blob)){e.next=34;break}return e.next=33,s(t);case 33:n=e.sent;case 34:return e.abrupt("return",new Uint8Array(n));case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.exports=a},function(e,t,n){function o(e,t,n,o,r,i,s){try{var a=e[i](s),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(o,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}var i=n(5),s=function(){var e=r(regeneratorRuntime.mark((function e(t,n,o){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i(o),e.next=3,s.load();case 3:return e.next=5,s.loadLanguage(n);case 5:return e.next=7,s.initialize(n);case 7:return e.abrupt("return",s.recognize(t).finally(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.terminate();case 2:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),a=function(){var e=r(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i(n),e.next=3,o.load();case 3:return e.next=5,o.loadLanguage("osd");case 5:return e.next=7,o.initialize("osd");case 7:return e.abrupt("return",o.detect(t).finally(r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.terminate();case 2:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();e.exports={recognize:s,detect:a}},function(e,t){e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12"}}])},"./src/sat.ts":(e,t,n)=>{"use strict";n.r(t),n.d(t,{Sat:()=>a});var o=n("./node_modules/rangy2/bundles/index.umd.js"),r=n("./node_modules/rangy-classapplier/bundles/index.umd.js"),i=n("./node_modules/mark.js/dist/mark.js"),s=n.n(i);class a{constructor(e,t,n,o,r,i,s,a){this.updated=!1,this.removeSpan=(e,t,n)=>{if(t.forEach((t=>{e.classList.remove(t)})),n.forEach((t=>{e.removeAttribute(t)})),0===e.classList.length){const t=e.parentElement;e.replaceWith(...Array.from(e.childNodes)),t.normalize()}},this.getOffset=(e,t)=>{let n=e.offsetTop,o=e.offsetLeft,r=e.offsetParent;for(;r!==t&&null!==r;)n+=r.offsetTop+2*Number(this.content_window.getComputedStyle(r).borderWidth.slice(0,-2)),o+=r.offsetLeft,r=r.offsetParent;return{offset_top:n,offset_left:o}},this.rgbTo16=e=>{var t;return"#"+(null===(t=e.match(/\d+/g))||void 0===t?void 0:t.map((e=>("0"+parseInt(e).toString(16)).slice(-2))).join(""))},this.hslToRgb=(e,t,n)=>{const o=Math.min(e,359)/60,r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(o%2-1)),s=n-.5*r;let a=s,c=s,l=s;return o<1?(a+=r,c=+i,l+=0):o<2?(a+=i,c+=r,l+=0):o<3?(a+=0,c+=r,l+=i):o<4?(a+=0,c+=i,l+=r):o<5?(a+=i,c+=0,l+=r):o<6?(a+=r,c+=0,l+=i):(a=0,c=0,l=0),"#"+`0${Math.floor(255*a).toString(16)}`.slice(-2)+`0${Math.floor(255*c).toString(16)}`.slice(-2)+`0${Math.floor(255*l).toString(16)}`.slice(-2)},this.getSelectorFromElement=e=>{const t=[];for(;e;){let n=e.nodeName.toLowerCase();if(e.id){n+="#"+e.id,t.unshift(n);break}n+=":nth-of-type("+this.getSiblingElementsIndex(e,n)+")",t.unshift(n),e=e.parentNode}return t},this.getSiblingElementsIndex=(e,t)=>{let n=1,o=e;for(;o=o.previousElementSibling;)o.nodeName.toLowerCase()===t&&++n;return n},this.tool_type=e,this.content_root=t,this.content_window=n,this.dark_mode=i,this.zumen_analysis_mode=s,this.word=new c(this,r,a),this.cv=new l(this,o),this.comment=new d(this),this.decoration=new u(this),this.tazumen=new f(this)}}class c{constructor(e,t,n){this.option={},this.selected_color={},this.block_mode=!1,this.setOption=e=>{this.option=e,Object.keys(this.option).forEach((e=>{this.option[e]&&this.selected_color[e]&&(this.option[e].color=this.selected_color[e])}))},this.setColor=(e,t)=>{this.selected_color[e]=t,this.option[e]&&(this.option[e].color=t)},this.clear=e=>{Array.from(e.querySelectorAll("span.word_inversion")).forEach((e=>{if(Array.from(e.classList).forEach((t=>{-1!==t.indexOf("word_inversion")&&e.classList.remove(t)})),e.removeAttribute("data-markjs"),0===e.classList.length&&1===e.attributes.length){const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),t.normalize()}}));let t=this.sat.content_window.document.head.querySelector("style#SAT_word_inversion");null!==t&&t.remove(),"pdf"===this.sat.tool_type&&(t=document.head.querySelector("style#SAT_word_inversion"),null!==t&&t.remove())},this.getWordColors=e=>{const t=[],n=360/e,o=this.sat.dark_mode?.35:.7;for(let r=0;r<e;r++)t.push(this.sat.hslToRgb((0+r*n)%360,1,o));return t},this.calcWordColor=e=>.299*parseInt(e.substr(1,2),16)+.587*parseInt(e.substr(3,2),16)+.114*parseInt(e.substr(5,2),16)>=140?"#111":"#eed",this.sat=e,this.selected_color=t,this.block_mode=n}invert(e){this.clear(e);const t=new(s())(e),n={element:"span",accuracy:"partially",separateWordSearch:!1,acrossElements:!0,ignoreJoiners:!0,ignorePunctuation:":;.,-–—‒_(){}[]!'\"+=".split(""),each:e=>{e.classList.add("word_inversion")},className:""};"web"===this.sat.tool_type&&(n.accuracy="complementary");const o=document.createElement("style");o.type="text/css",o.id="SAT_word_inversion";const r=document.createElement("style");r.type="text/css",r.id="SAT_word_inversion",this.sat.content_window.document.head.prepend(o),"pdf"===this.sat.tool_type&&document.head.prepend(r);for(const e in this.option){n.className=`word_inversion_class${Number(e)}`;const i=this.option[e].color;o.sheet.insertRule(`span.word_inversion_class${e} {background-color: ${i} !important; color: ${"pdf"===this.sat.tool_type?i:this.calcWordColor(i)}}`,0),"pdf"===this.sat.tool_type&&r.sheet.insertRule(`span.word_inversion_class${e} {background-color: ${i} ! important; color: ${this.calcWordColor(i)}}`,0),this.option[e].words.forEach((e=>{if(/^\/.*\/[dgimsuy]*$/.test(e)){let o,r="";e.match(/([dgimsuy]+)$/)&&(r=e.match(/([dgimsuy]+)$/)[0],e=e.slice(0,-r.length)),o=this.block_mode?new RegExp(`[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*${e.slice(1,-1)}[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*`,r):new RegExp(e.slice(1,-1),r),t.markRegExp(o,n)}else if(this.block_mode){const o=new RegExp(`[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*${e}[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*`,"i");t.markRegExp(o,n)}else t.mark(e,n)}))}}}class l{constructor(e,t){this.word_rect=[],this.comment_circle=[],this.highlight_rect=[],this.updateData=()=>{this.word_rect=[];const e={};Array.from(new Set(Object.keys(this.sat.word.option).map((e=>this.sat.word.option[e].color)))).filter((e=>""!==e)).forEach(((t,n)=>{e[t]=n}));const t=Object.keys(e).length,n=this.sat.content_root.parentElement.scrollHeight;Array.from(this.sat.content_root.querySelectorAll("span.word_inversion")).forEach((o=>{const r=this.sat.rgbTo16(window.getComputedStyle(o).backgroundColor),i="web"===this.sat.tool_type||"pdf"===this.sat.tool_type?0:35,s=i+(this.element.width-i)*(e[r]/t),a=this.sat.getOffset(o,this.sat.content_root.offsetParent),c=this.element.height*(a.offset_top/n),l=3*Math.max(o.offsetHeight/this.element.height,2);this.word_rect.push([r,Math.round(s)-.5,Math.round(c-l/2)-.5,Math.round((this.element.width-i)/t)+0,5,Math.round(l/2)])})),this.comment_circle=[];const o=Array.from(this.sat.content_root.querySelectorAll("span.commented")).map((e=>{const t=this.sat.getOffset(e,this.sat.content_root.offsetParent);return e.setAttribute("offset_top",t.offset_top.toString()),e.setAttribute("offset_left",t.offset_left.toString()),e})).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=[...e[t.getAttribute("comment_id")]||[],t],e)),{});Object.keys(o).map((e=>o[e].sort(((e,t)=>e.getAttribute("offset_top")!==t.getAttribute("offset_top")?e.getAttribute("offset_top")<t.getAttribute("offset_top")?-1:1:e.getAttribute("offset_left")<t.getAttribute("offset_left")?-1:1)))).sort(((e,t)=>e[0].getAttribute("offset_top")!==t[0].getAttribute("offset_top")?e[0].getAttribute("offset_top")<t[0].getAttribute("offset_top")?-1:1:e[0].getAttribute("offset_left")<t[0].getAttribute("offset_left")?-1:1)).forEach((e=>{this.comment_circle.push({y:this.element.height*(this.sat.getOffset(e[0],this.sat.content_root.offsetParent).offset_top/n),color:e[0].style.backgroundColor})})),this.highlight_rect=[],Array.from(document.querySelectorAll("span.highlighted")).forEach((e=>{this.highlight_rect.push({y:this.element.height*((this.sat.getOffset(e,this.sat.content_root.offsetParent).offset_top-3)/n),color:e.style.backgroundColor})}))},this.draw=()=>{const e=this.element.getContext("2d");let t;e.clearRect(0,0,this.element.width,this.element.height),"web"===this.sat.tool_type||"pdf"===this.sat.tool_type?(e.fillStyle="black",e.fillRect(0,0,200,window.innerHeight)):(e.fillStyle="#333333",e.fillRect(0,0,30,window.innerHeight)),this.word_rect.forEach((t=>{e.fillStyle=t[0],e.fillRect(t[1],t[2],t[3],t[4])})),this.comment_circle.forEach((t=>{e.fillStyle=t.color,e.beginPath(),e.arc(10,t.y,5,0,2*Math.PI,!1),e.fill()})),this.highlight_rect.forEach((t=>{e.fillStyle=t.color,e.fillRect(20,t.y-5,10,10)})),e.strokeStyle="white",e.lineWidth=5,t="pdf"===this.sat.tool_type?this.sat.content_root.parentElement:"web"===this.sat.tool_type?document.scrollingElement:document.getElementById("main");const n=t.scrollTop,o=t.scrollHeight,r=document.querySelector("div.top")?document.querySelector("div.top").offsetHeight:0;e.strokeRect(2.5,n*(this.element.height/o),this.element.width-2.5,(window.innerHeight-r)*(this.element.height/o))},this.sat=e,this.element=t}}class u{constructor(e){this.add=e=>{(0,r.createClassApplier)(e,{elementTagName:"span",normalize:!0}).toggleSelection(this.sat.content_window)},this.highlight=e=>{(0,r.createClassApplier)("highlighted_tmp",{elementTagName:"span",normalize:!1}).toggleSelection(this.sat.content_window);const t=(0,o.getSelection)(this.sat.content_window);t.getRangeAt(0).getNodes([],(e=>e instanceof HTMLSpanElement&&e.classList.contains("highlighted_tmp"))).forEach((t=>{t.style.backgroundColor=e,t.style.borderBottomColor=e,t.classList.remove("highlighted_tmp"),t.classList.add("highlighted")}));let n=t.getRangeAt(0).commonAncestorContainer.parentElement.closest("span.commented");n&&(n.style.backgroundColor=e,n.classList.remove("highlighted_tmp"),n.classList.add("highlighted")),this.sat.cv.updateData(),this.sat.cv.draw()},this.dehighlight=()=>{const e=(0,o.getSelection)(this.sat.content_window);e.rangeCount&&(e.getRangeAt(0).getNodes([1]).forEach((e=>{e instanceof HTMLSpanElement&&(e.classList.length>0?Array.from(e.classList).forEach((t=>{"highlighted"===t&&(e.style.backgroundColor="",e.style.borderBottomColor="",this.sat.removeSpan(e,[t],[]))})):e.style.backgroundColor="")})),[(0,o.getSelection)(this.sat.content_window).getRangeAt(0).startContainer,(0,o.getSelection)(this.sat.content_window).getRangeAt(0).endContainer].forEach((e=>{for(;e&&e!==this.sat.content_root;){const t=e.parentElement;e instanceof HTMLSpanElement&&(e.classList.length>0?Array.from(e.classList).forEach((t=>{"highlighted"===t&&(e.style.backgroundColor="",e.style.borderBottomColor="",this.sat.removeSpan(e,[t],[]))})):e.style.backgroundColor=""),e=t}}))),this.sat.cv.updateData(),this.sat.cv.draw()},this.sat=e}}class d{constructor(e){this.comment_index=0,this.span_info={},this.box_info={},this.box_sorted_info=[],this.addComment=e=>{const t=this.addSpan(e);this.addBox(t,e),this.sort(),this.arrange();const n=window.document.createRange(),o=window.document.querySelector(`div.comment[comment_id="${t}"] > p`);n.setStart(o,0),n.setEnd(o,0),window.focus(),window.getSelection().removeAllRanges(),window.getSelection().addRange(n),this.sat.cv.updateData(),this.sat.cv.draw()},this.remove=e=>{var t;this.sat.content_root.querySelectorAll(`span.commented[comment_id="${e}"]`).forEach(((e,t)=>{this.sat.removeSpan(e,["commented","span_onmouse"],["comment_id"])})),null===(t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`))||void 0===t||t.remove(),Array.from(document.getElementById("comment_svg").querySelectorAll(`polygon[comment_id="${e}"]`)).forEach((e=>{e.remove()})),delete this.span_info[e],delete this.box_info[e]},this.addSpan=e=>{(0,r.createClassApplier)("commented",{elementTagName:"span",normalize:!0}).toggleSelection(this.sat.content_window);const t={},n=[];for(Array.from(this.sat.content_root.querySelectorAll("span.commented")).forEach((e=>{null!==e.getAttribute("comment_id")?t[e.getAttribute("comment_id")]="commented":n.push(e)}));t[this.comment_index];)this.comment_index++;const o=this.comment_index;return this.comment_index++,n.forEach((t=>{t.setAttribute("comment_id",o.toString()),t.style.backgroundColor=e,t.style.borderColor=e;const n=this.sat.getOffset(t,this.sat.content_root.offsetParent);t.setAttribute("offset_top",n.offset_top.toString()),t.setAttribute("offset_left",n.offset_left.toString())})),n.forEach((e=>{e.addEventListener("mouseover",(t=>{this.onMouseOver(e.getAttribute("comment_id"))}))})),n.forEach((e=>{e.addEventListener("mouseout",(t=>{t.relatedTarget instanceof HTMLElement&&null!==t.relatedTarget.parentElement&&null!==t.relatedTarget.parentElement.closest(`span.commented[comment_id="${e.getAttribute("comment_id")}"]`)||this.onMouseOut(e.getAttribute("comment_id"))}))})),o.toString()},this.addBox=(e,t)=>{var n;const o=document.createElement("p");"pdf"===this.sat.tool_type&&(this.box_info[e]?o.innerText=this.box_info[e].content:this.box_info[e]={content:"",page_number:null===(n=this.span_info[e])||void 0===n?void 0:n.map((e=>Number(e.page_number))).reduce(((e,t)=>Math.min(e,t)))});const r=document.createElement("div");r.classList.add("comment"),r.contentEditable="true",r.id=e,r.setAttribute("comment_id",e),r.style.backgroundColor=t,r.style.borderColor=t,r.appendChild(o),document.getElementById("comment_div").appendChild(r);const i=document.createElementNS("http://www.w3.org/2000/svg","polygon");i.setAttribute("comment_id",e),i.style.fill=t,i.style.stroke=t,document.getElementById("comment_svg").querySelector("svg").appendChild(i),r.addEventListener("mouseover",(e=>{this.onMouseOver(r.getAttribute("comment_id"))})),r.addEventListener("mouseout",(e=>{e.relatedTarget instanceof HTMLElement&&null!==e.relatedTarget.parentElement&&null!==e.relatedTarget.parentElement.closest(`div.comment[comment_id="${r.getAttribute("comment_id")}"]`)||this.onMouseOut(r.getAttribute("comment_id"))})),r.addEventListener("input",this.onInput),i.addEventListener("click",(e=>{this.onPolygonClick(r.getAttribute("comment_id"))}))},this.onMouseOver=e=>{var t;null===(t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`))||void 0===t||t.classList.add("div_onmouse"),Array.from(this.sat.content_root.querySelectorAll(`span.commented[comment_id="${e}"]`)).forEach((e=>{e.classList.add("span_onmouse")}))},this.onMouseOut=e=>{var t;null===(t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`))||void 0===t||t.classList.remove("div_onmouse"),Array.from(this.sat.content_root.querySelectorAll(`span.commented[comment_id="${e}"]`)).forEach((e=>{e.classList.remove("span_onmouse")}))},this.onInput=()=>{this.sat.updated=!0},this.onPolygonClick=e=>{const t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`),n=document.getElementById("color_picker"),o=document.getElementById("color_picker_comment");o.setAttribute("color_id","comment_color"),o.style.display="block";const r=this.sat.getOffset(t,this.sat.content_root);o.style.top=`${Math.max(r.offset_top-o.offsetHeight/2+10,40)}px`;const i=document.getElementById("zumen");o.style.left=i?r.offset_left-o.offsetWidth-i.offsetWidth-15+"px":r.offset_left-o.offsetWidth-15+"px",n.setAttribute("mode","comment"),n.setAttribute("comment_id",e),n.setAttribute("comment_color",t.style.backgroundColor)},this.sort=()=>{const e=Array.from(this.sat.content_root.querySelectorAll("span.commented")).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=[...e[t.getAttribute("comment_id")]||[],t],e)),{}),t=Object.keys(e).map((t=>e[t].sort(((e,t)=>Number(e.getAttribute("offset_top"))!==Number(t.getAttribute("offset_top"))?Number(e.getAttribute("offset_top"))<Number(t.getAttribute("offset_top"))?-1:1:Number(e.getAttribute("offset_left"))<Number(t.getAttribute("offset_left"))?-1:1)))).sort(((e,t)=>Number(e[0].getAttribute("offset_top"))!==Number(t[0].getAttribute("offset_top"))?Number(e[0].getAttribute("offset_top"))<Number(t[0].getAttribute("offset_top"))?-1:1:Number(e[0].getAttribute("offset_left"))<Number(t[0].getAttribute("offset_left"))?-1:1)),n=Array.from(document.getElementById("comment_div").querySelectorAll("div.comment")).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=t,e)),{}),o=Array.from(document.getElementById("comment_svg").querySelectorAll("polygon")).reduce(((e,t)=>(e[t.getAttribute("comment_id")]=t,e)),{});this.box_sorted_info=t.filter((e=>e.length>0)).map((e=>({comment_id:e[0].getAttribute("comment_id"),first_span:e[0],div:n[e[0].getAttribute("comment_id")],polygon:o[e[0].getAttribute("comment_id")]})))},this.arrange=e=>{for(let e=0;e<this.box_sorted_info.length;e++){let t=0;e>0&&(t=this.box_sorted_info[e-1].div.offsetTop+this.box_sorted_info[e-1].div.offsetHeight),this.box_sorted_info[e].div.style.top=`${Math.max(t+10,parseInt(this.box_sorted_info[e].first_span.getAttribute("offset_top")))}px`,this.box_sorted_info[e].polygon.setAttribute("points",`0 ${Number(this.box_sorted_info[e].first_span.getAttribute("offset_top"))+8}, 15 ${this.box_sorted_info[e].div.offsetTop+5}, 15 ${this.box_sorted_info[e].div.offsetTop+30}`)}},this.sat=e}}class f{constructor(e){this.fugo_dic={},this.zumen_fugo_dic={},this.fugo_white_list="",this.extractFugo=e=>{let t,n,o,r=e.match(/請求項/g),i=e.match(/claim/gi);if((r?r.length:0)>=(i?i.length:0)){t="ja",n=e=this.zen2Han(e);let r=n.match(/[【［\[]0001[】］\]]/);r&&(n=n.substring(r.index)),n=n.replace(/【[^】]*】/g," ").replace(/[【［\[][0-9]{4}[】］\]]/g," ").replace(/(実施例?|比較例|従来例|形態|請求項|特開[平昭]?|平成|昭和|変形例|手続補正|第|該|当該|変形例|前記|上記|特許|国際公開|図|乃至|特許文献|好ましくは|例えば|から|まで|以上|以下|未満|または|又は|および|及び|若しくは|\.|JP|US|WO|DE)[0-9]+[a-zA-Z]*/g," "),o=/([a-zA-Z]{0,1}[0-9]{1,4})([一-龠あ-んア-ンァ-ヶa-zA-Z][^0-9,，、。\s】]{0,20})/g}else{t="en",n=e;let r=n.match(/[【［\[]0001[】］\]]/);r&&(n=n.substring(r.index)),n=n.replace(/【[^】]*】/g," ").replace(/[【［\[][0-9]{4}[】］\]]/g," ").replace(/\b(exapmle|between|from|to|of|and|or|claim|about|than|at|a|thru|through|JP|US|WO|DE)\s*[0-9]+[a-zA-Z]*/gi," ").replace(/[0-9]+[0-9a-zA-Z]*[^0-9a-zA-Z\s]+/g,""),o=/\b([a-zA-Z]{0,1}[0-9]{1,4})\s([^0-9.,]{0,39}[a-zA-Z])\b/g}let s,a,c=n.split("").reverse().join("");this.fugo_dic={},Object.entries([...c.matchAll(o)].reduce(((e,t)=>{let n=t[1].split("").reverse().join(""),o=t[2];return n in e||(e[n]=[]),e[n].push(String(o)),e}),{})).map((e=>{let t=e[0],n=e[1],o=n.length,r="",i=0;if(1===o)r=n[0].match(/^[一-龠ア-ンァ-ヶa-zA-Z]+/)?n[0].match(/^[^あ-ん\(\)]+/)[0].split("").reverse().join(""):"";else for(;n;){let[e,t]=Object.entries(n.map((e=>e.substring(i,i+1).toLowerCase())).reduce(((e,t)=>(t in e||(e[t]=0),e[t]++,e)),{})).reduce(((e,t)=>(e[1]<t[1]&&(e[0]=t[0],e[1]=t[1]),e)),["",0]);if(t/o<.7)break;r=`${e}${r}`,i++,n=n.filter((e=>e.length>i))}return[t,r]})).filter((e=>""!==e[1].replace(/\s/g,""))).forEach((e=>{let t=e[0],n=e[1].replace(/^\s/,"").replace(/^[てにをはのへ]([一-龠ア-ンァ-ヶA-Z0-9])/,"$1");this.fugo_dic[t]=n})),this.fugo_white_list=Array.from(new Set(["0123456789",...Object.keys(this.fugo_dic)].join("").split(""))).join(""),this.zumen_fugo_dic={};let l=Object.entries(this.fugo_dic);"ja"===t?(e=e.replace(/[、。，,]/g,""),s=/【([0-9]{4})】([^【]+)/g,a=/図[0-9]+(?:[-0-9a-zA-Z]*[0-9a-zA-Z])?/g):(s=/\[([0-9]{4})\]([^\[]+)/g,a=/(FIG|Fig)\.?\s*[0-9]+(?:[-0-9a-zA-Z]*[0-9a-zA-Z])?/g),[...e.matchAll(s)].forEach((e=>{let t=e[2];[...t.trim().matchAll(a)].forEach((e=>{let n=e[0];l.forEach((e=>{let o=`${e[1]}${e[0]}`;-1!==t.indexOf(o)&&(n in this.zumen_fugo_dic||(this.zumen_fugo_dic[n]={}),this.zumen_fugo_dic[n][e[0]]=e[1])}))}))}))},this.zen2Han=e=>e.replace(/[！-～]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)})).replace(/”/g,'"').replace(/’/g,"'").replace(/‘/g,"`").replace(/￥/g,"\\").replace(/　/g," "),this.sat=e}}},"./node_modules/tslib/tslib.es6.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{__extends:()=>r,__assign:()=>i,__rest:()=>s,__decorate:()=>a,__param:()=>c,__metadata:()=>l,__awaiter:()=>u,__generator:()=>d,__createBinding:()=>f,__exportStar:()=>p,__values:()=>h,__read:()=>m,__spread:()=>g,__spreadArrays:()=>y,__await:()=>v,__asyncGenerator:()=>b,__asyncDelegator:()=>_,__asyncValues:()=>w,__makeTemplateObject:()=>E,__importStar:()=>j,__importDefault:()=>S,__classPrivateFieldGet:()=>R,__classPrivateFieldSet:()=>N});var o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},o(e,t)};function r(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};function s(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function a(e,t,n,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(i<3?r(s):i>3?r(t,n,s):r(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,o){t(n,o,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))}function d(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function f(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,r++)o[r]=i[s];return o}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(e){r[e]&&(o[e]=function(t){return new Promise((function(n,o){i.push([e,t,n,o])>1||a(e,t)}))})}function a(e,t){try{(n=r[e](t)).value instanceof v?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}}function _(e){var t,n;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){t[o]=e[o]?function(t){return(n=!n)?{value:v(e[o](t)),done:"return"===o}:r?r(t):t}:r}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,r){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,r,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function j(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function R(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function N(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o);var e=n("./src/sat.ts"),t=n("./node_modules/rangy2/bundles/index.umd.js"),r=n("./node_modules/split.js/dist/split.js"),i=n.n(r),s=n("./node_modules/hotkeys-js/dist/hotkeys.js"),a=n.n(s),c=n("./node_modules/tesseract.js/dist/tesseract.min.js"),l=n.n(c),u=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};let d,f=!1;function p(){return u(this,void 0,void 0,(function*(){d.content_root.normalize(),Array.from(document.querySelectorAll("img")).forEach((e=>{"data:image/"!==e.src.substr(0,11)&&(e.src=function(e){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0),t.toDataURL("image/png")}(e))}));const e=document.querySelector("html").cloneNode(!0);Array.from(e.querySelectorAll(".gutter")).forEach((e=>{e.remove()})),e.querySelector("#spinner").classList.remove("visible"),Array.from(e.querySelectorAll("script")).forEach((e=>{/log[^/]*\.js/.test(e.src)&&e.remove()})),e.querySelector("#doc_title").setAttribute("value",e.querySelector("#doc_title").value),e.querySelector("#block_mode").checked&&e.querySelector("#block_mode").setAttribute("checked",""),e.querySelector("#word_query").innerHTML=e.querySelector("#word_query").innerHTML,e.querySelector("#selected_color").innerHTML=JSON.stringify(d.word.selected_color);let t=Array.from(e.querySelectorAll("link")).filter((e=>"stylesheet"===e.rel)).map((t=>()=>new Promise(((n,o)=>{fetch(t.href).then((e=>e.text())).then((o=>{t.remove();const r=document.createElement("style");r.innerHTML=o,e.querySelector("head").appendChild(r),n(null)}))}))));yield h(t),t=Array.from(e.querySelectorAll("script")).filter((e=>void 0!==e.src&&""!==e.src)).map((e=>()=>new Promise(((t,n)=>{-1===e.src.indexOf("js-tazumen")?fetch(e.src).then((e=>e.text())).then((n=>{e.removeAttribute("src"),e.innerHTML=n,t(null)})):t(null)})))),yield h(t);const n=e.innerHTML,o=document.doctype.name,r=document.doctype.publicId,i=document.doctype.systemId,s="<!DOCTYPE "+o+(r?' PUBLIC "'+r+'"':"")+(i?' "'+i+'"':"")+">";let a="<html";const c=e.attributes;for(let e=0,t=c.length;e<t;e++){const t=c[e];a+=" "+t.nodeName+(t.nodeValue?'="'+t.nodeValue+'"':"")}a+=">";const l=new Blob([s,"\n",a,"\n",n,"\n</html>"]),u=(window.URL||window.webkitURL).createObjectURL(l),f=document.createElement("a");f.download=`${document.title}.html`,f.href=u,document.body.appendChild(f),f.click(),document.body.removeChild(f),d.updated=!1}))}function h(e){let t=Promise.resolve();return e.forEach((e=>{t=t.then(e)})),t}function m(e){const t=d.content_window.getSelection();t&&d.content_root.contains(t.anchorNode)&&d.content_root.contains(t.focusNode)&&(d.decoration.add(e),d.updated=!0)}function g(){const e=document.getElementById("btn_highlight").getAttribute("highlightColor"),t=d.content_window.getSelection();t&&d.content_root.contains(t.anchorNode)&&d.content_root.contains(t.focusNode)&&(d.decoration.highlight(e),d.updated=!0)}function y(){d.decoration.dehighlight()}function v(){const e=document.getElementById("btn_comment").getAttribute("commentColor"),n=d.content_window.getSelection();if(!n)return;if(!d.content_root.contains(n.anchorNode)||!d.content_root.contains(n.focusNode))return;const o=(0,t.getSelection)(d.content_window);if(o.rangeCount){if(o.getRangeAt(0).getNodes([],(e=>e instanceof Element&&e.classList.contains("commented"))).length>0)return void alert("同じ領域に複数のコメントをつけることはできません。");if(null!==o.getRangeAt(0).commonAncestorContainer.parentElement.closest("span.commented"))return void alert("同じ領域に複数のコメントをつけることはできません。")}d.comment.addComment(e),d.updated=!0}function b(){const e=document.getElementById("word_query").innerText.trim().replace(/[\r\n]+/g," ");if(""===e||/^\s+$/.test(e))return{};const t=e.split(/\s+/).map((e=>{const t=e.match(/(^\/|[^\\]\/|\/$)/g);return t&&t.length>0&&t.length%2==0?_(e,[]):e.split(/[+＋]/g)})),n=d.word.getWordColors(t.length),o={};return t.forEach(((e,t)=>{e.forEach((e=>{o[t]||(o[t]={words:[],color:""}),"/"!==e.substr(0,1)?o[t].words.push(e.replace(/_/g," ")):o[t].words.push(e),o[t].color=n[t]}))})),o}function _(e,t){if("/"!==e.substr(0,1)){const n=e.indexOf("+");return-1===n?(t.push(e),t):(t.push(e.substring(0,n)),_(e.substring(n+1),t))}{const n=e.match(/[^\\]\/[dgimsuy]*/);return n?(t.push(e.substring(0,n.index+n[0].length)),e.length===n.index+n[0].length?t:_(e.substring(n.index+n[0].length+1),t)):t}}function w(){const e=document.getElementById("word_query");e.innerHTML="",Object.keys(d.word.option).forEach((t=>{d.word.option[t].words.forEach(((n,o)=>{const r=document.createElement("span");r.innerText=n.replace(/ /g,"_"),r.setAttribute("mode","word_inversion"),r.setAttribute("color_id",t),r.classList.add("query_unit"),r.classList.add(`word_inversion_class${t}`),r.onclick=e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("color_id",e.target.getAttribute("color_id")),t.style.display="block",t.style.left=d.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",t.setAttribute("mode","word_inversion"),e.preventDefault(),e.stopPropagation()},e.appendChild(r),o!==d.word.option[t].words.length-1&&e.appendChild(document.createTextNode("+"))})),e.appendChild(document.createTextNode(" "))}))}function E(e){document.getElementById("doc_title").value=e.page_title,document.title=e.page_title,document.getElementById("content").innerHTML=e.text_content;const t=document.getElementById("zumen"),n={},o=document.getElementById("content").innerText.match(/【図[^】]+】[^【]+/g);o&&o.forEach((e=>{const t=e.match(/【(図[^】]+)】([^【]+)/);3===(null==t?void 0:t.length)&&(n[C(t[1])]=t[2])})),e.zumen_arr.forEach((e=>{const o=document.createElement("div"),r=document.createElement("h3");if(r.innerHTML=e.title,o.appendChild(r),n[e.title]){const t=document.createElement("div");t.innerText=n[e.title],t.classList.add("cap"),o.appendChild(t)}const i=document.createElement("img");i.src=e.data_url,o.appendChild(i);const s=document.createElement("div");s.setAttribute("contenteditable","true"),s.setAttribute("placeholder","メモを入力..."),s.classList.add("memo"),o.appendChild(s);const a=document.createElement("hr");o.appendChild(a),t.appendChild(o)})),j(),document.getElementById("word_query").innerText=e.word_arr.map((e=>e.join("+"))).join(" "),d.word.setOption(b()),d.word.invert(d.content_root),w(),d.cv.updateData(),d.cv.draw(),document.getElementById("spinner").classList.remove("visible"),d.updated=!1}function j(){Array.from(document.getElementById("zumen").querySelectorAll("img")).forEach((e=>{e.addEventListener("click",(e=>{if(e.target instanceof HTMLElement)if(f){const t=window.open("","","width=500,height=500,scrollbars=yes,resizable=yes,status=yes");let n=document.title;e.target.parentElement.querySelector("h3")&&(n=`図${e.target.parentElement.querySelector("h3").innerText.substr(1)} - ${n}`),t.document.title=n;const o=document.createElement("h3");o.innerText=n,o.style.textAlign="center",o.style.height="20px",t.document.body.append(o);let r=document.createElement("div");if(r.style.display="flex",r.style.width="80%",r.style.height="90%",r.style.margin="auto",e.target.parentElement.querySelector("p.fugo")&&""!==e.target.parentElement.querySelector("p.fugo").innerText){let t=document.createElement("div"),n=document.createElement("dl");n.style.display="flex",n.style.flexWrap="wrap",n.style.width="100%",e.target.parentElement.querySelector("p.fugo").innerText.split("\n").forEach((e=>{let[t,o]=e.split(","),r=document.createElement("dt");r.style.width="20%",r.style.margin="0",r.style.padding="0",r.style.paddingBottom="5px",r.innerText=t,n.appendChild(r);let i=document.createElement("dd");i.style.width="80%",i.style.margin="0",i.style.padding="0",i.style.paddingBottom="5px",i.innerText=o,n.appendChild(i)})),t.appendChild(n),r.appendChild(t)}const i=document.createElement("div");i.style.width="100%",i.style.height="95%",i.style.textAlign="center",i.style.margin="auto";const s=e.target.cloneNode();if(s.style.objectFit="contain",s.style.width="90%",s.style.height="90%",document.body.classList.contains("dark")&&(t.document.body.style.color="#ddd",t.document.body.style.backgroundColor="#333",s.style.filter="invert(100%)"),i.appendChild(s),r.appendChild(i),t.document.body.append(r),e.target.parentElement.querySelector("div.cap")){const n=document.createElement("div");n.innerText=e.target.parentElement.querySelector("div.cap").innerText,n.style.textAlign="center",t.document.body.append(n)}f=!1}else f=!0,setTimeout((()=>(e=>{if(f&&e.target instanceof HTMLImageElement){e.target.src=function(e){const t=document.createElement("canvas"),n=t.getContext("2d"),o=new Image;return o.src=e,t.height=o.width,t.width=o.height,n.rotate(90*Math.PI/180),n.translate(0,-t.width),n.drawImage(o,0,0),t.toDataURL("image/jpeg",100)}(e.target.src);let t=document.getElementById("zumen_analysis");t.innerText="図面解析中...(0 / 1)",R(e.target.parentElement),t.innerText=""}f=!1})(e)),300)}))})),Array.from(document.getElementById("content").querySelectorAll("a")).forEach((e=>{e.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=C(e.target.innerText);Array.from(document.getElementById("zumen").querySelectorAll("h3")).some((e=>e.innerText===t&&(e.scrollIntoView(),!0)))}))}))}function S(){const e=document.getElementById("zumen");null!==e&&("none"===window.getComputedStyle(e).display?e.style.display="inline":e.style.display="none",d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange())}function R(e){return u(this,void 0,void 0,(function*(){e.querySelector("h3").classList.remove("analysed");const t=l().createWorker({});yield t.load(),yield t.loadLanguage("eng"),yield t.initialize("eng"),yield t.setParameters({tessedit_char_whitelist:d.tazumen.fugo_white_list});const{data:{text:n}}=yield t.recognize(e.querySelector("img"));yield t.terminate();let o,r=n.match(/[0-9]+[a-zA-Z]{0,3}/g);r||(r=[]),console.log("図面から抽出された符号一覧"),console.log(r),r=r.filter((e=>e in d.tazumen.fugo_dic)),e.querySelector("h3")&&(o=e.querySelector("h3").innerText,console.log("図面タイトル：",o),console.log(d.tazumen.zumen_fugo_dic[o]),""!==o&&d.tazumen.zumen_fugo_dic[o]&&r.concat(Object.keys(d.tazumen.zumen_fugo_dic[o]))),r=Array.from(new Set(r));let i=r.sort(((e,t)=>{let n=Number(e.match(/[0-9]+/)),o=Number(t.match(/[0-9]+/));return n<o?-1:n>o?1:e<t?-1:e>t?1:0})).map((e=>`${e},${d.tazumen.fugo_dic[e]}`)).join("\n"),s=e.querySelector("p.fugo");s||(s=document.createElement("p"),s.style.display="none",s.classList.add("fugo")),s.innerText=i,e.appendChild(s),e.querySelector("h3").classList.add("analysed")}))}function N(e){const t=d.content_window.document.getElementById("viewer").querySelector(`div.page[data-page-number="${e}"]`);d.word.invert(t),d.cv.updateData(),d.cv.draw()}function O(e,t,n){document.getElementById("loading_message").innerHTML=e;const o=document.getElementById("spinner");o.classList.add("visible"),new Promise(((e,o)=>{setTimeout((()=>{n(),e(null)}),t)})).then((()=>{o.classList.remove("visible")}))}function C(e){return e.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(e=>String.fromCharCode(e.charCodeAt(0)-65248)))}window.addEventListener("load",(()=>u(void 0,void 0,void 0,(function*(){const t=document.getElementById("tool_type").innerText;let n,o;"pdf"===t?(window.decoratePage=N,yield new Promise(((e,t)=>{const n=setInterval((()=>{document.querySelector("iframe").contentWindow.document.body&&""!==document.querySelector("iframe").contentWindow.document.body.innerHTML&&(clearInterval(n),e(null))}),500)})).then((()=>{o=document.querySelector("iframe").contentWindow,n=o.document.getElementById("viewer")}))):(o=window,n=document.getElementById("content"));const r=window.getComputedStyle(document.getElementById("spectrum")),s=document.getElementById("spectrum_bar");s.width=Number(r.width.replace("px","")),s.height=Number(r.height.replace("px",""));const c=document.getElementById("selected_color").innerHTML,l=c?JSON.parse(c):{};d=new e.Sat(t,n,o,s,l,document.getElementById("dark_mode").checked,document.getElementById("zumen_analysis_mode").checked,document.getElementById("block_mode").checked),function(){u(this,void 0,void 0,(function*(){document.addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");"none"===t.style.display||t.contains(e.target)||(t.style.display="none");const n=document.getElementById("color_picker_comment");"none"===n.style.display||n.contains(e.target)||(n.style.display="none",t.setAttribute("comment_id",""));const o=document.getElementById("help");"none"===o.style.display||o.contains(e.target)||(o.style.display="none")})),Array.from(document.querySelectorAll("div.comment")).forEach((e=>{e.addEventListener("mouseover",(t=>{d.comment.onMouseOver(e.getAttribute("comment_id"))})),e.addEventListener("mouseout",(t=>{t instanceof MouseEvent&&t.relatedTarget instanceof HTMLElement&&null!==t.relatedTarget.parentElement&&null!==t.relatedTarget.parentElement.closest(`div.comment[comment_id="${e.getAttribute("comment_id")}"]`)||d.comment.onMouseOut(e.getAttribute("comment_id"))}))})),Array.from(document.getElementById("comment_svg").querySelectorAll("polygon")).forEach((e=>{e.addEventListener("click",(e=>{e.target instanceof SVGPolygonElement&&d.comment.onPolygonClick(e.target.getAttribute("comment_id"))}))})),Array.from(d.content_root.querySelectorAll("span.commented")).forEach((e=>{e.addEventListener("mouseover",(t=>{d.comment.onMouseOver(e.getAttribute("comment_id"))})),e.addEventListener("mouseout",(t=>{t instanceof MouseEvent&&t.relatedTarget instanceof HTMLElement&&null!==t.relatedTarget.parentElement&&null!==t.relatedTarget.parentElement.closest(`span.commented[comment_id="${e.getAttribute("comment_id")}"]`)||d.comment.onMouseOut(e.getAttribute("comment_id"))}))})),"pdf"===d.tool_type?d.content_root.parentElement.addEventListener("scroll",(e=>{d.cv.draw();const t=document.getElementById("comment_container");t.scrollTo(0,e.target.scrollTop*(t.scrollHeight/e.target.scrollHeight))})):document.getElementById("main").addEventListener("scroll",(e=>{d.cv.draw()})),window.addEventListener("resize",(e=>{setTimeout((()=>{const e=window.getComputedStyle(document.getElementById("spectrum")),t=document.getElementById("spectrum_bar");t.width=Number(e.width.replace("px","")),t.height=Number(e.height.replace("px","")),d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange()}),0)})),d.cv.element.onclick=e=>{"pdf"===d.tool_type?d.content_root.parentElement.scrollTo(0,e.layerY*(d.content_root.parentElement.scrollHeight/d.cv.element.height)-d.cv.element.height/2):document.getElementById("main").scrollTo(0,e.layerY*(document.getElementById("main").scrollHeight/d.cv.element.height)-d.cv.element.height/2)},d.cv.element.onmousedown=e=>{d.cv.element.onmousemove=e=>{"pdf"===d.tool_type?(d.content_root.parentElement.scrollTo(0,e.layerY*(d.content_root.parentElement.scrollHeight/d.cv.element.height)-d.cv.element.height/2),document.getElementById("comment_container").scrollTo(0,e.layerY*(document.getElementById("comment_container").scrollHeight/d.cv.element.height)-d.cv.element.height/2)):document.getElementById("main").scrollTo(0,e.layerY*(document.getElementById("main").scrollHeight/d.cv.element.height)-d.cv.element.height/2)},d.cv.element.onmouseup=()=>{d.cv.element.onmousemove=null,d.cv.element.onmouseup=null}},d.cv.element.onmouseover=()=>{d.cv.element.onmousemove=null},window.addEventListener("beforeunload",(e=>{d.updated&&(e.returnValue="編集内容が保存されていませんが、ページを離れてもよろしいですか？")})),document.getElementById("doc_title").addEventListener("input",(e=>{e.target instanceof HTMLInputElement&&(""!==e.target.value?document.title=e.target.value:"free_text"===d.tool_type?document.title="SAT（フリーテキスト版）":"pdf"===d.tool_type?document.title="SAT（PDF版）":document.title="SAT (Spectrum Annotation Tool)")})),document.getElementById("block_mode").addEventListener("change",(e=>{localStorage.setItem("SAT_block_mode",e.target.checked.toString()),O("ワード反転中...",10,(()=>{e.target instanceof HTMLInputElement&&e.target.checked?(d.word.block_mode=!0,d.word.invert(d.content_root),d.cv.updateData(),d.cv.draw()):(d.word.block_mode=!1,d.word.invert(d.content_root),d.cv.updateData(),d.cv.draw())}))})),document.getElementById("btn_bold").addEventListener("click",(()=>{m("bold")})),document.getElementById("btn_underline").addEventListener("click",(()=>{m("underline")})),document.getElementById("btn_highlight").addEventListener("click",(()=>{var e;g(),null===(e=d.content_window.getSelection())||void 0===e||e.removeAllRanges()})),document.getElementById("btn_select_highlight_color").addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("mode","highlight"),t.style.display="block",t.style.left=d.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",e.preventDefault(),e.stopPropagation()})),document.getElementById("btn_select_comment_color").addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("color_picker");t.setAttribute("mode","comment"),t.style.display="block",t.style.left=d.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("color_picker").offsetWidth/2+"px",e.preventDefault(),e.stopPropagation()})),document.getElementById("btn_erase").addEventListener("click",(e=>{var t;y(),null===(t=d.content_window.getSelection())||void 0===t||t.removeAllRanges()})),document.getElementById("btn_comment").addEventListener("click",(()=>{v()})),document.getElementById("btn_download").addEventListener("click",(()=>{O("ダウンロードファイル生成中...",150,p)})),document.getElementById("btn_figureOn").addEventListener("click",(()=>{S(),document.getElementById("li_figureOn").classList.add("hidden"),document.getElementById("li_figureOff").classList.remove("hidden")})),document.getElementById("btn_figureOff").addEventListener("click",(()=>{S(),document.getElementById("li_figureOff").classList.add("hidden"),document.getElementById("li_figureOn").classList.remove("hidden")})),document.getElementById("btn_editUnlock").addEventListener("click",(()=>{document.getElementById("content").contentEditable="true",document.getElementById("li_editUnlock").classList.add("hidden"),document.getElementById("li_editLock").classList.remove("hidden")})),document.getElementById("btn_editLock").addEventListener("click",(()=>{document.getElementById("content").contentEditable="false",document.getElementById("li_editLock").classList.add("hidden"),document.getElementById("li_editUnlock").classList.remove("hidden")})),document.getElementById("word_query").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),O("ワード反転中...",0,(()=>{d.word.setOption(b()),d.word.invert(d.content_root),w(),d.cv.updateData(),d.cv.draw(),document.getElementById("word_query").blur(),d.updated=!0})))})),document.getElementById("btn_word_inversion_help").addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("help");"block"===t.style.display?t.style.display="none":(t.style.display="block",t.innerHTML='\n            <h3>ワード反転方法</h3>\n            <p> （入力例）<img src="./img/word_inversion_example.png" style="vertical-align: middle";/></p>\n            <ul>\n              <li>\n                反転したいワードを、スペースで区切って入力した後、Enterキーを押してください。\n              </li>\n              <li>＋で繋いだワードは同じ色に反転されます。</li>\n              <li>\n                _（アンダーバー）は、色反転時に半角スペースとして変換されます。英語の複数語をまとめて色反転したい場合にご使用ください。<br />\n              </li>\n              <li>\n                /でワードを囲むと、正規表現として認識されます。（例：/請求項[0-9０-９]+/）<br />\n                末尾のオプションは省略可能です。（自動でgオプションがつきます）\n              </li>\n  \n              <li>\n                ワード反転後、ボックス中のワードをクリックすると、反転色を変更できます。\n              </li>\n              <li>\n                ブロック反転にチェックを入れると、漢字・カタカナ・英数字を含めたブロック単位で反転を行います。\n              </li>\n            </ul>',t.style.left=d.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("help").offsetWidth/2+"px",e.preventDefault(),e.stopPropagation())})),document.getElementById("btn_marker_help").addEventListener("click",(e=>{if(!(e.target instanceof HTMLElement))return;const t=document.getElementById("help");"block"===t.style.display?t.style.display="none":(t.style.display="block",t.innerHTML="\n          <h3>本文の装飾方法</h3>\n          <p> マーカーなどの装飾を行いたい箇所をドラッグして選択した後に、ボタンを押してください。</p>\n          <p> コメントボタンで挿入したコメントを削除したい場合は、右側のコメントボックス内の文字を全て削除して空にした状態で、さらにBackspaceキーを押してください。</p>\n          <p> 挿入したコメントの吹き出しの三角形をクリックすると、コメントの色を変えることができます。</p>\n          <p> マーカーを削除したい場合は、<b>同じ色で</b>削除したい部分をマークするか、ハイライト削除ボタンを使用してください。</p>",t.style.left=d.getOffset(e.target,document.body).offset_left+e.target.offsetWidth/2-document.getElementById("help").offsetWidth/2+"px",e.preventDefault(),e.stopPropagation())})),document.getElementById("dark_mode").addEventListener("change",(e=>{e.target instanceof HTMLInputElement&&(localStorage.setItem("SAT_dark_mode",e.target.checked.toString()),e.target.checked?(document.body.classList.add("dark"),d.dark_mode=!0):(document.body.classList.remove("dark"),d.dark_mode=!1),"pdf"===d.tool_type&&(e.target.checked?d.content_window.document.body.classList.add("dark"):d.content_window.document.body.classList.remove("dark")),d.cv.updateData(),d.cv.draw())})),document.getElementById("zumen_analysis_mode").addEventListener("change",(e=>{e.target instanceof HTMLInputElement&&(localStorage.setItem("SAT_zumen_analysis_mode",e.target.checked.toString()),e.target.checked?(d.zumen_analysis_mode=!0,function(){u(this,void 0,void 0,(function*(){let e=document.getElementById("zumen_analysis");d.tazumen.extractFugo(document.getElementById("content").innerText),console.log("--- テキストからの符号データ抽出結果 ---"),console.log(d.tazumen.fugo_dic),console.log("--- テキストからの図面と符号の関係抽出結果 ---"),console.log(d.tazumen.zumen_fugo_dic),console.log("--- 画像からの符号データ抽出結果 ---");let t=Array.from(document.querySelectorAll("#zumen > div")).filter((e=>!e.querySelector("p.fugo"))),n=0;e.innerText=`図面解析中...(${n}/${t.length})`;for(let o=0;o<t.length;o++)console.log(`図面解析中...(${o}番目)`),yield R(t[o]),n++,n===t.length?e.innerText="":e.innerText=`図面解析中...(${n}/${t.length})`}))}()):d.zumen_analysis_mode=!1)})),document.getElementById("colormap").addEventListener("mouseout",(e=>{!function(){const e=document.getElementById("color_picker").getAttribute("mode");if("highlight"===e)return;if("comment"===e){const e=document.getElementById("color_picker").getAttribute("comment_id");if(e){const t=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${e}"]`),n=document.getElementById("comment_svg").querySelector(`polygon[comment_id="${e}"]`),o=document.querySelectorAll(`span.commented[comment_id="${e}"]`);let r=document.getElementById("color_picker").getAttribute("comment_color");t.style.backgroundColor=r,t.style.borderColor=r,n.style.fill=r,n.style.stroke=r,o.forEach((e=>{e.style.backgroundColor=r,e.style.borderColor=r}))}}else{const e=document.getElementById("color_picker").getAttribute("color_id");Array.from(document.getElementById("word_query").querySelectorAll("span")).filter((t=>t.getAttribute("color_id")===e)).forEach((e=>{e.removeAttribute("style")}))}}()})),Array.from(document.getElementById("colormap").querySelectorAll("area")).forEach((e=>{e.addEventListener("mouseover",(t=>{!function(e){const t=document.getElementById("color_picker").getAttribute("mode");if("highlight"===t)return;if("comment"===t){const t=document.getElementById("color_picker").getAttribute("comment_id");if(t){const n=document.getElementById("comment_div").querySelector(`div.comment[comment_id="${t}"]`),o=document.getElementById("comment_svg").querySelector(`polygon[comment_id="${t}"]`),r=document.querySelectorAll(`span.commented[comment_id="${t}"]`);n.style.backgroundColor=e,n.style.borderColor=e,o.style.fill=e,o.style.stroke=e,r.forEach((t=>{t.style.backgroundColor=e,t.style.borderColor=e}))}}else{const t=document.getElementById("color_picker").getAttribute("color_id");Array.from(document.getElementById("word_query").querySelectorAll("span")).filter((e=>e.getAttribute("color_id")===t)).forEach((t=>{t.style.setProperty("background-color",e,"important"),t.style.color=d.word.calcWordColor(e)}))}}(e.alt)})),e.addEventListener("click",(t=>{!function(e){e=e.toLowerCase();const t=document.getElementById("color_picker").getAttribute("mode");if("highlight"===t){localStorage.setItem("SAT_highlight_color",e);const t=document.getElementById("btn_highlight");t.setAttribute("highlightColor",e),t.style.backgroundColor=e}else if("comment"===t)localStorage.setItem("SAT_comment_color",e),document.getElementById("btn_comment").style.backgroundColor=e,document.getElementById("btn_comment").setAttribute("commentColor",e),document.getElementById("color_picker").setAttribute("comment_id",""),d.cv.updateData(),d.cv.draw();else{const t=document.getElementById("color_picker").getAttribute("color_id");O("ワード反転中...",0,(()=>{d.word.setColor(Number(t),e),d.word.invert(d.content_root),w(),d.cv.updateData(),d.cv.draw()}))}document.getElementById("color_picker").style.display="none"}(e.alt)}))}));new MutationObserver((e=>{e.forEach((e=>{e.removedNodes.forEach((e=>{if(e instanceof HTMLSpanElement&&e.classList.contains("commented")){const t=e.getAttribute("comment_id");document.getElementById("content").querySelector(`span.commented[comment_id="${t}"]`)||d.comment.remove(t),d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange()}}))}))})).observe(document.getElementById("content"),{childList:!0,subtree:!0});new MutationObserver((e=>{d.comment.arrange()})).observe(document.getElementById("comment_div"),{attributes:!0,childList:!0,subtree:!0,characterData:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height"]});new MutationObserver((e=>{d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange()})).observe(document.body,{attributes:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height","offsetWidth","clientWidth","scrollWidth","width"]});let e,t;if(new MutationObserver((e=>{d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange()})).observe(document.getElementById("spectrum"),{attributes:!0,attributeFilter:["offsetHeight","clientHeight","scrollHeight","height","offsetWidth","clientWidth","scrollWidth","width"]}),document.getElementById("content").addEventListener("input",(e=>{d.updated=!0,d.comment.arrange()})),document.getElementById("word_query").addEventListener("click",(e=>{e.target instanceof HTMLElement&&e.target.querySelectorAll("span").forEach((e=>{e.className="",e.onclick=null}))})),document.getElementById("word_query").addEventListener("paste",(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)})),"pdf"!==d.tool_type&&i()(["#content","#comment_container"],{sizes:[70,30],minSize:[50,50],elementStyle:(e,t,n,o)=>({width:`${t}%`}),onDragEnd:e=>{setTimeout((()=>{d.comment.arrange(),d.cv.updateData(),d.cv.draw()}),0),d.comment.arrange(),d.cv.updateData(),d.cv.draw()},gutterSize:5}),document.getElementById("dark_mode").checked.toString()!==localStorage.getItem("SAT_dark_mode")&&document.getElementById("dark_mode").click(),document.getElementById("block_mode").checked.toString()!==localStorage.getItem("SAT_block_mode")&&document.getElementById("block_mode").click(),e=localStorage.getItem("SAT_highlight_color")){const t=document.getElementById("btn_highlight");t.setAttribute("highlightColor",e),t.style.backgroundColor=e}if(t=localStorage.getItem("SAT_comment_color")){const e=document.getElementById("btn_comment");e.setAttribute("commentColor",t),e.style.backgroundColor=t}if("tazumen"===d.tool_type&&(i()(["div#zumen","div#text"],{sizes:[30,70],elementStyle:(e,t,n,o)=>({width:`calc(${t}% - ${n+20}px)`}),onDragEnd:e=>{setTimeout((()=>{d.comment.arrange(),d.cv.updateData(),d.cv.draw()}),0),d.comment.arrange(),d.cv.updateData(),d.cv.draw()},gutterSize:4}),j()),"tazumen"===d.tool_type&&"tazumen_gyomu"===document.getElementById("content").innerHTML){const e=document.getElementById("paste_modal_window");e.style.display="block";const t=document.getElementById("paste_modal_input");t.focus(),t.addEventListener("paste",(t=>{const n=(t.clipboardData||window.clipboardData).getData("text");e.style.display="none",t.preventDefault(),E(JSON.parse(n));let o=document.getElementById("zumen_analysis_mode");(o.checked||o.checked.toString()!==localStorage.getItem("SAT_zumen_analysis_mode"))&&o.click()}))}window.addEventListener("message",(e=>{switch(console.log("受信したメッセージ"),console.log(e),e.data.message_type){case"tazumen":if("http://npsx8.jpo.go.jp"===e.origin){E(e.data);let t=document.getElementById("zumen_analysis_mode");(t.checked||t.checked.toString()!==localStorage.getItem("SAT_zumen_analysis_mode"))&&t.click(),d.updated=!0}break;case"free_text":d.content_root.innerText=e.data.innerText}}))}))}(),function(){a().filter=e=>!0,("free_text"===d.tool_type||"tazumen"===d.tool_type)&&(a()("ctrl+b",((e,t)=>{e.preventDefault(),m("bold")})),a()("ctrl+u",((e,t)=>{e.preventDefault(),m("underline")})),a()("ctrl+h",((e,t)=>{var n;e.preventDefault(),g(),null===(n=d.content_window.getSelection())||void 0===n||n.removeAllRanges()})),a()("ctrl+d",((e,t)=>{var n;e.preventDefault(),y(),null===(n=d.content_window.getSelection())||void 0===n||n.removeAllRanges()})),a()("ctrl+1",((e,t)=>{e.preventDefault(),v()})),a()("ctrl+s",((e,t)=>{e.preventDefault(),O("ダウンロードファイル生成中...",150,p)})));a()("ctrl+shift+f",((e,t)=>{function n(e){const t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),null==n||n.removeAllRanges(),null==n||n.addRange(t),e.focus(),t.detach()}e.preventDefault();const o=document.getElementById("word_query");o.click(),n(o)})),document.addEventListener("keydown",(e=>{var t,n,o;if(e instanceof KeyboardEvent)if(8===e.keyCode){let r=!0;const i=e.target;if("word_query"===i.id)r=!1;else if(i.isContentEditable){r=!1;const e=null===(o=null===(n=null===(t=window.getSelection())||void 0===t?void 0:t.anchorNode)||void 0===n?void 0:n.parentElement)||void 0===o?void 0:o.closest("div.comment");!e||"\n"!==e.innerText&&""!==e.innerText||(r=!0,d.updated=!0,d.comment.remove(e.getAttribute("comment_id")),d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange())}else("INPUT"===i.tagName||"TEXTAREA"===i.tagName)&&(r=!1);if(r)return void e.preventDefault()}else 112===e.keyCode&&(S(),e.preventDefault())}))}(),d.word.setOption(b()),d.word.invert(d.content_root),w(),setTimeout((()=>{d.cv.updateData(),d.cv.draw(),d.comment.sort(),d.comment.arrange()}),0)}))))})()})();
//# sourceMappingURL=main.js.map