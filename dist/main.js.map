{"version":3,"file":"main.js","mappings":"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","sources":["webpack://sat/./node_modules/core-js/es/array/includes.js","webpack://sat/./node_modules/core-js/es/object/assign.js","webpack://sat/./node_modules/core-js/features/array/includes.js","webpack://sat/./node_modules/core-js/features/object/assign.js","webpack://sat/./node_modules/core-js/internals/a-function.js","webpack://sat/./node_modules/core-js/internals/add-to-unscopables.js","webpack://sat/./node_modules/core-js/internals/an-object.js","webpack://sat/./node_modules/core-js/internals/array-includes.js","webpack://sat/./node_modules/core-js/internals/classof-raw.js","webpack://sat/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://sat/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://sat/./node_modules/core-js/internals/create-property-descriptor.js","webpack://sat/./node_modules/core-js/internals/descriptors.js","webpack://sat/./node_modules/core-js/internals/document-create-element.js","webpack://sat/./node_modules/core-js/internals/engine-user-agent.js","webpack://sat/./node_modules/core-js/internals/engine-v8-version.js","webpack://sat/./node_modules/core-js/internals/entry-unbind.js","webpack://sat/./node_modules/core-js/internals/enum-bug-keys.js","webpack://sat/./node_modules/core-js/internals/export.js","webpack://sat/./node_modules/core-js/internals/fails.js","webpack://sat/./node_modules/core-js/internals/function-bind-context.js","webpack://sat/./node_modules/core-js/internals/get-built-in.js","webpack://sat/./node_modules/core-js/internals/global.js","webpack://sat/./node_modules/core-js/internals/has.js","webpack://sat/./node_modules/core-js/internals/hidden-keys.js","webpack://sat/./node_modules/core-js/internals/html.js","webpack://sat/./node_modules/core-js/internals/ie8-dom-define.js","webpack://sat/./node_modules/core-js/internals/indexed-object.js","webpack://sat/./node_modules/core-js/internals/inspect-source.js","webpack://sat/./node_modules/core-js/internals/internal-state.js","webpack://sat/./node_modules/core-js/internals/is-forced.js","webpack://sat/./node_modules/core-js/internals/is-object.js","webpack://sat/./node_modules/core-js/internals/is-pure.js","webpack://sat/./node_modules/core-js/internals/is-symbol.js","webpack://sat/./node_modules/core-js/internals/native-symbol.js","webpack://sat/./node_modules/core-js/internals/native-weak-map.js","webpack://sat/./node_modules/core-js/internals/object-assign.js","webpack://sat/./node_modules/core-js/internals/object-create.js","webpack://sat/./node_modules/core-js/internals/object-define-properties.js","webpack://sat/./node_modules/core-js/internals/object-define-property.js","webpack://sat/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://sat/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://sat/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://sat/./node_modules/core-js/internals/object-keys-internal.js","webpack://sat/./node_modules/core-js/internals/object-keys.js","webpack://sat/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://sat/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://sat/./node_modules/core-js/internals/own-keys.js","webpack://sat/./node_modules/core-js/internals/path.js","webpack://sat/./node_modules/core-js/internals/redefine.js","webpack://sat/./node_modules/core-js/internals/require-object-coercible.js","webpack://sat/./node_modules/core-js/internals/set-global.js","webpack://sat/./node_modules/core-js/internals/shared-key.js","webpack://sat/./node_modules/core-js/internals/shared-store.js","webpack://sat/./node_modules/core-js/internals/shared.js","webpack://sat/./node_modules/core-js/internals/to-absolute-index.js","webpack://sat/./node_modules/core-js/internals/to-indexed-object.js","webpack://sat/./node_modules/core-js/internals/to-integer.js","webpack://sat/./node_modules/core-js/internals/to-length.js","webpack://sat/./node_modules/core-js/internals/to-object.js","webpack://sat/./node_modules/core-js/internals/to-primitive.js","webpack://sat/./node_modules/core-js/internals/to-property-key.js","webpack://sat/./node_modules/core-js/internals/uid.js","webpack://sat/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://sat/./node_modules/core-js/internals/well-known-symbol.js","webpack://sat/./node_modules/core-js/modules/es.array.includes.js","webpack://sat/./node_modules/core-js/modules/es.object.assign.js","webpack://sat/./node_modules/core-js/stable/array/includes.js","webpack://sat/./node_modules/core-js/stable/object/assign.js","webpack://sat/./node_modules/hotkeys-js/dist/hotkeys.js","webpack://sat/./node_modules/is-electron/index.js","webpack://sat/./node_modules/mark.js/dist/mark.js","webpack://sat/./node_modules/rangy-classapplier/bundles/index.umd.js","webpack://sat/./node_modules/rangy2/bundles/index.umd.js","webpack://sat/./node_modules/rangy2/esm5/DOMException.js","webpack://sat/./node_modules/rangy2/esm5/api.js","webpack://sat/./node_modules/rangy2/esm5/dom.js","webpack://sat/./node_modules/rangy2/esm5/index.js","webpack://sat/./node_modules/rangy2/esm5/internal/domrange/RangeIterator.js","webpack://sat/./node_modules/rangy2/esm5/internal/domrange/part1.js","webpack://sat/./node_modules/rangy2/esm5/internal/domrange/part2.js","webpack://sat/./node_modules/rangy2/esm5/internal/domrange/util.js","webpack://sat/./node_modules/rangy2/esm5/internal/wrappedrange.js","webpack://sat/./node_modules/rangy2/esm5/internal/wrappedselection.js","webpack://sat/./node_modules/rangy2/esm5/module.js","webpack://sat/./node_modules/rangy2/esm5/util.js","webpack://sat/./node_modules/regenerator-runtime/runtime.js","webpack://sat/./node_modules/resolve-url/resolve-url.js","webpack://sat/./node_modules/split.js/dist/split.js","webpack://sat/./node_modules/tesseract.js/src/Tesseract.js","webpack://sat/./node_modules/tesseract.js/src/constants/OEM.js","webpack://sat/./node_modules/tesseract.js/src/constants/PSM.js","webpack://sat/./node_modules/tesseract.js/src/constants/config.js","webpack://sat/./node_modules/tesseract.js/src/constants/defaultOptions.js","webpack://sat/./node_modules/tesseract.js/src/createJob.js","webpack://sat/./node_modules/tesseract.js/src/createScheduler.js","webpack://sat/./node_modules/tesseract.js/src/createWorker.js","webpack://sat/./node_modules/tesseract.js/src/index.js","webpack://sat/./node_modules/tesseract.js/src/utils/circularize.js","webpack://sat/./node_modules/tesseract.js/src/utils/getEnvironment.js","webpack://sat/./node_modules/tesseract.js/src/utils/getId.js","webpack://sat/./node_modules/tesseract.js/src/utils/log.js","webpack://sat/./node_modules/tesseract.js/src/utils/resolvePaths.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/defaultOptions.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/index.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/loadImage.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/onMessage.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/send.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/spawnWorker.js","webpack://sat/./node_modules/tesseract.js/src/worker/browser/terminateWorker.js","webpack://sat/./src/sat.ts","webpack://sat/./node_modules/tslib/tslib.es6.js","webpack://sat/webpack/bootstrap","webpack://sat/webpack/runtime/compat get default export","webpack://sat/webpack/runtime/define property getters","webpack://sat/webpack/runtime/global","webpack://sat/webpack/runtime/hasOwnProperty shorthand","webpack://sat/webpack/runtime/make namespace object","webpack://sat/./src/main.ts"],"sourcesContent":["require('../../modules/es.array.includes');\nvar entryUnbind = require('../../internals/entry-unbind');\n\nmodule.exports = entryUnbind('Array', 'includes');\n","require('../../modules/es.object.assign');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object.assign;\n","var parent = require('../../stable/array/includes');\n\nmodule.exports = parent;\n","var parent = require('../../stable/object/assign');\n\nmodule.exports = parent;\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] < 4 ? 1 : match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\n\nvar call = Function.call;\n\nmodule.exports = function (CONSTRUCTOR, METHOD, length) {\n  return bind(call, global[CONSTRUCTOR].prototype[METHOD], length);\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var toObject = require('../internals/to-object');\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty.call(toObject(it), key);\n};\n","module.exports = {};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- requied for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    if (wmhas.call(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (objectHas(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = false;\n","var getBuiltIn = require('../internals/get-built-in');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return typeof $Symbol == 'function' && Object(it) instanceof $Symbol;\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","var isObject = require('../internals/is-object');\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (pref !== 'string' && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (key, value) {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.17.3',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = input[TO_PRIMITIVE];\n  var result;\n  if (exoticToPrim !== undefined) {\n    if (pref === undefined) pref = 'default';\n    result = exoticToPrim.call(input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : String(key);\n};\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","var parent = require('../../es/array/includes');\n\nmodule.exports = parent;\n","var parent = require('../../es/object/assign');\n\nmodule.exports = parent;\n","/*!\n * hotkeys-js v3.8.7\n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.\n * \n * Copyright (c) 2021 kenny wong <wowohoo@qq.com>\n * http://jaywcjlove.github.io/hotkeys\n * \n * Licensed under the MIT license.\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.hotkeys = factory());\n}(this, (function () { 'use strict';\n\n  var isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\n  function addEvent(object, event, method) {\n    if (object.addEventListener) {\n      object.addEventListener(event, method, false);\n    } else if (object.attachEvent) {\n      object.attachEvent(\"on\".concat(event), function () {\n        method(window.event);\n      });\n    }\n  } // 修饰键转换成对应的键码\n\n\n  function getMods(modifier, key) {\n    var mods = key.slice(0, key.length - 1);\n\n    for (var i = 0; i < mods.length; i++) {\n      mods[i] = modifier[mods[i].toLowerCase()];\n    }\n\n    return mods;\n  } // 处理传的key字符串转换成数组\n\n\n  function getKeys(key) {\n    if (typeof key !== 'string') key = '';\n    key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n    var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n    var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n    for (; index >= 0;) {\n      keys[index - 1] += ',';\n      keys.splice(index, 1);\n      index = keys.lastIndexOf('');\n    }\n\n    return keys;\n  } // 比较修饰键的数组\n\n\n  function compareArray(a1, a2) {\n    var arr1 = a1.length >= a2.length ? a1 : a2;\n    var arr2 = a1.length >= a2.length ? a2 : a1;\n    var isIndex = true;\n\n    for (var i = 0; i < arr1.length; i++) {\n      if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n    }\n\n    return isIndex;\n  }\n\n  var _keyMap = {\n    backspace: 8,\n    tab: 9,\n    clear: 12,\n    enter: 13,\n    return: 13,\n    esc: 27,\n    escape: 27,\n    space: 32,\n    left: 37,\n    up: 38,\n    right: 39,\n    down: 40,\n    del: 46,\n    delete: 46,\n    ins: 45,\n    insert: 45,\n    home: 36,\n    end: 35,\n    pageup: 33,\n    pagedown: 34,\n    capslock: 20,\n    num_0: 96,\n    num_1: 97,\n    num_2: 98,\n    num_3: 99,\n    num_4: 100,\n    num_5: 101,\n    num_6: 102,\n    num_7: 103,\n    num_8: 104,\n    num_9: 105,\n    num_multiply: 106,\n    num_add: 107,\n    num_enter: 108,\n    num_subtract: 109,\n    num_decimal: 110,\n    num_divide: 111,\n    '⇪': 20,\n    ',': 188,\n    '.': 190,\n    '/': 191,\n    '`': 192,\n    '-': isff ? 173 : 189,\n    '=': isff ? 61 : 187,\n    ';': isff ? 59 : 186,\n    '\\'': 222,\n    '[': 219,\n    ']': 221,\n    '\\\\': 220\n  }; // Modifier Keys\n\n  var _modifier = {\n    // shiftKey\n    '⇧': 16,\n    shift: 16,\n    // altKey\n    '⌥': 18,\n    alt: 18,\n    option: 18,\n    // ctrlKey\n    '⌃': 17,\n    ctrl: 17,\n    control: 17,\n    // metaKey\n    '⌘': 91,\n    cmd: 91,\n    command: 91\n  };\n  var modifierMap = {\n    16: 'shiftKey',\n    18: 'altKey',\n    17: 'ctrlKey',\n    91: 'metaKey',\n    shiftKey: 16,\n    ctrlKey: 17,\n    altKey: 18,\n    metaKey: 91\n  };\n  var _mods = {\n    16: false,\n    18: false,\n    17: false,\n    91: false\n  };\n  var _handlers = {}; // F1~F12 special key\n\n  for (var k = 1; k < 20; k++) {\n    _keyMap[\"f\".concat(k)] = 111 + k;\n  }\n\n  var _downKeys = []; // 记录摁下的绑定键\n\n  var _scope = 'all'; // 默认热键范围\n\n  var elementHasBindEvent = []; // 已绑定事件的节点记录\n  // 返回键码\n\n  var code = function code(x) {\n    return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n  }; // 设置获取当前范围（默认为'所有'）\n\n\n  function setScope(scope) {\n    _scope = scope || 'all';\n  } // 获取当前范围\n\n\n  function getScope() {\n    return _scope || 'all';\n  } // 获取摁下绑定键的键值\n\n\n  function getPressedKeyCodes() {\n    return _downKeys.slice(0);\n  } // 表单控件控件判断 返回 Boolean\n  // hotkey is effective only when filter return true\n\n\n  function filter(event) {\n    var target = event.target || event.srcElement;\n    var tagName = target.tagName;\n    var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n    if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n      flag = false;\n    }\n\n    return flag;\n  } // 判断摁下的键是否为某个键，返回true或者false\n\n\n  function isPressed(keyCode) {\n    if (typeof keyCode === 'string') {\n      keyCode = code(keyCode); // 转换成键码\n    }\n\n    return _downKeys.indexOf(keyCode) !== -1;\n  } // 循环删除handlers中的所有 scope(范围)\n\n\n  function deleteScope(scope, newScope) {\n    var handlers;\n    var i; // 没有指定scope，获取scope\n\n    if (!scope) scope = getScope();\n\n    for (var key in _handlers) {\n      if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n        handlers = _handlers[key];\n\n        for (i = 0; i < handlers.length;) {\n          if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n        }\n      }\n    } // 如果scope被删除，将scope重置为all\n\n\n    if (getScope() === scope) setScope(newScope || 'all');\n  } // 清除修饰键\n\n\n  function clearModifier(event) {\n    var key = event.keyCode || event.which || event.charCode;\n\n    var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n    if (i >= 0) {\n      _downKeys.splice(i, 1);\n    } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n    if (event.key && event.key.toLowerCase() === 'meta') {\n      _downKeys.splice(0, _downKeys.length);\n    } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n    if (key === 93 || key === 224) key = 91;\n\n    if (key in _mods) {\n      _mods[key] = false; // 将修饰键重置为false\n\n      for (var k in _modifier) {\n        if (_modifier[k] === key) hotkeys[k] = false;\n      }\n    }\n  }\n\n  function unbind(keysInfo) {\n    // unbind(), unbind all keys\n    if (!keysInfo) {\n      Object.keys(_handlers).forEach(function (key) {\n        return delete _handlers[key];\n      });\n    } else if (Array.isArray(keysInfo)) {\n      // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n      keysInfo.forEach(function (info) {\n        if (info.key) eachUnbind(info);\n      });\n    } else if (typeof keysInfo === 'object') {\n      // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n      if (keysInfo.key) eachUnbind(keysInfo);\n    } else if (typeof keysInfo === 'string') {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      // support old method\n      // eslint-disable-line\n      var scope = args[0],\n          method = args[1];\n\n      if (typeof scope === 'function') {\n        method = scope;\n        scope = '';\n      }\n\n      eachUnbind({\n        key: keysInfo,\n        scope: scope,\n        method: method,\n        splitKey: '+'\n      });\n    }\n  } // 解除绑定某个范围的快捷键\n\n\n  var eachUnbind = function eachUnbind(_ref) {\n    var key = _ref.key,\n        scope = _ref.scope,\n        method = _ref.method,\n        _ref$splitKey = _ref.splitKey,\n        splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n    var multipleKeys = getKeys(key);\n    multipleKeys.forEach(function (originKey) {\n      var unbindKeys = originKey.split(splitKey);\n      var len = unbindKeys.length;\n      var lastKey = unbindKeys[len - 1];\n      var keyCode = lastKey === '*' ? '*' : code(lastKey);\n      if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n      if (!scope) scope = getScope();\n      var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n      _handlers[keyCode] = _handlers[keyCode].map(function (record) {\n        // 通过函数判断，是否解除绑定，函数相等直接返回\n        var isMatchingMethod = method ? record.method === method : true;\n\n        if (isMatchingMethod && record.scope === scope && compareArray(record.mods, mods)) {\n          return {};\n        }\n\n        return record;\n      });\n    });\n  }; // 对监听对应快捷键的回调函数进行处理\n\n\n  function eventHandler(event, handler, scope) {\n    var modifiersMatch; // 看它是否在当前范围\n\n    if (handler.scope === scope || handler.scope === 'all') {\n      // 检查是否匹配修饰符（如果有返回true）\n      modifiersMatch = handler.mods.length > 0;\n\n      for (var y in _mods) {\n        if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n          if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n            modifiersMatch = false;\n          }\n        }\n      } // 调用处理程序，如果是修饰键不做处理\n\n\n      if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n        if (handler.method(event, handler) === false) {\n          if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n          if (event.stopPropagation) event.stopPropagation();\n          if (event.cancelBubble) event.cancelBubble = true;\n        }\n      }\n    }\n  } // 处理keydown事件\n\n\n  function dispatch(event) {\n    var asterisk = _handlers['*'];\n    var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n    if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n    // Webkit左右 command 键值不一样\n\n    if (key === 93 || key === 224) key = 91;\n    /**\n     * Collect bound keys\n     * If an Input Method Editor is processing key input and the event is keydown, return 229.\n     * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n     * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n     */\n\n    if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n    /**\n     * Jest test cases are required.\n     * ===============================\n     */\n\n    ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n      var keyNum = modifierMap[keyName];\n\n      if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n        _downKeys.push(keyNum);\n      } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n        _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n      } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n        /**\n         * Fix if Command is pressed:\n         * ===============================\n         */\n        if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n          _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n        }\n      }\n    });\n    /**\n     * -------------------------------\n     */\n\n    if (key in _mods) {\n      _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n      for (var k in _modifier) {\n        if (_modifier[k] === key) hotkeys[k] = true;\n      }\n\n      if (!asterisk) return;\n    } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n    for (var e in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n        _mods[e] = event[modifierMap[e]];\n      }\n    }\n    /**\n     * https://github.com/jaywcjlove/hotkeys/pull/129\n     * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n     * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n     * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n     */\n\n\n    if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n      if (_downKeys.indexOf(17) === -1) {\n        _downKeys.push(17);\n      }\n\n      if (_downKeys.indexOf(18) === -1) {\n        _downKeys.push(18);\n      }\n\n      _mods[17] = true;\n      _mods[18] = true;\n    } // 获取范围 默认为 `all`\n\n\n    var scope = getScope(); // 对任何快捷键都需要做的处理\n\n    if (asterisk) {\n      for (var i = 0; i < asterisk.length; i++) {\n        if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n          eventHandler(event, asterisk[i], scope);\n        }\n      }\n    } // key 不在 _handlers 中返回\n\n\n    if (!(key in _handlers)) return;\n\n    for (var _i = 0; _i < _handlers[key].length; _i++) {\n      if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n        if (_handlers[key][_i].key) {\n          var record = _handlers[key][_i];\n          var splitKey = record.splitKey;\n          var keyShortcut = record.key.split(splitKey);\n          var _downKeysCurrent = []; // 记录当前按键键值\n\n          for (var a = 0; a < keyShortcut.length; a++) {\n            _downKeysCurrent.push(code(keyShortcut[a]));\n          }\n\n          if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n            // 找到处理内容\n            eventHandler(event, record, scope);\n          }\n        }\n      }\n    }\n  } // 判断 element 是否已经绑定事件\n\n\n  function isElementBind(element) {\n    return elementHasBindEvent.indexOf(element) > -1;\n  }\n\n  function hotkeys(key, option, method) {\n    _downKeys = [];\n    var keys = getKeys(key); // 需要处理的快捷键列表\n\n    var mods = [];\n    var scope = 'all'; // scope默认为all，所有范围都有效\n\n    var element = document; // 快捷键事件绑定节点\n\n    var i = 0;\n    var keyup = false;\n    var keydown = true;\n    var splitKey = '+'; // 对为设定范围的判断\n\n    if (method === undefined && typeof option === 'function') {\n      method = option;\n    }\n\n    if (Object.prototype.toString.call(option) === '[object Object]') {\n      if (option.scope) scope = option.scope; // eslint-disable-line\n\n      if (option.element) element = option.element; // eslint-disable-line\n\n      if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n      if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n      if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n    }\n\n    if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n    for (; i < keys.length; i++) {\n      key = keys[i].split(splitKey); // 按键列表\n\n      mods = []; // 如果是组合快捷键取得组合快捷键\n\n      if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n      key = key[key.length - 1];\n      key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n      // 判断key是否在_handlers中，不在就赋一个空数组\n\n      if (!(key in _handlers)) _handlers[key] = [];\n\n      _handlers[key].push({\n        keyup: keyup,\n        keydown: keydown,\n        scope: scope,\n        mods: mods,\n        shortcut: keys[i],\n        method: method,\n        key: keys[i],\n        splitKey: splitKey\n      });\n    } // 在全局document上设置快捷键\n\n\n    if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n      elementHasBindEvent.push(element);\n      addEvent(element, 'keydown', function (e) {\n        dispatch(e);\n      });\n      addEvent(window, 'focus', function () {\n        _downKeys = [];\n      });\n      addEvent(element, 'keyup', function (e) {\n        dispatch(e);\n        clearModifier(e);\n      });\n    }\n  }\n\n  var _api = {\n    setScope: setScope,\n    getScope: getScope,\n    deleteScope: deleteScope,\n    getPressedKeyCodes: getPressedKeyCodes,\n    isPressed: isPressed,\n    filter: filter,\n    unbind: unbind\n  };\n\n  for (var a in _api) {\n    if (Object.prototype.hasOwnProperty.call(_api, a)) {\n      hotkeys[a] = _api[a];\n    }\n  }\n\n  if (typeof window !== 'undefined') {\n    var _hotkeys = window.hotkeys;\n\n    hotkeys.noConflict = function (deep) {\n      if (deep && window.hotkeys === hotkeys) {\n        window.hotkeys = _hotkeys;\n      }\n\n      return hotkeys;\n    };\n\n    window.hotkeys = hotkeys;\n  }\n\n  return hotkeys;\n\n})));\n","// https://github.com/electron/electron/issues/2288\nfunction isElectron() {\n    // Renderer process\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n        return true;\n    }\n\n    // Main process\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\n        return true;\n    }\n\n    // Detect the user agent when the `nodeIntegration` option is set to false\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n\nmodule.exports = isElectron;\n","/*!***************************************************\n* mark.js v8.11.1\n* https://markjs.io/\n* Copyright (c) 2014–2018, Julian Kühnel\n* Released under the MIT license https://git.io/vwTVl\n*****************************************************/\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Mark = factory());\n}(this, (function () { 'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar DOMIterator = function () {\n  function DOMIterator(ctx) {\n    var iframes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    var iframesTimeout = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5000;\n    classCallCheck(this, DOMIterator);\n\n    this.ctx = ctx;\n    this.iframes = iframes;\n    this.exclude = exclude;\n    this.iframesTimeout = iframesTimeout;\n  }\n\n  createClass(DOMIterator, [{\n    key: 'getContexts',\n    value: function getContexts() {\n      var ctx = void 0,\n          filteredCtx = [];\n      if (typeof this.ctx === 'undefined' || !this.ctx) {\n        ctx = [];\n      } else if (NodeList.prototype.isPrototypeOf(this.ctx)) {\n        ctx = Array.prototype.slice.call(this.ctx);\n      } else if (Array.isArray(this.ctx)) {\n        ctx = this.ctx;\n      } else if (typeof this.ctx === 'string') {\n        ctx = Array.prototype.slice.call(document.querySelectorAll(this.ctx));\n      } else {\n        ctx = [this.ctx];\n      }\n      ctx.forEach(function (ctx) {\n        var isDescendant = filteredCtx.filter(function (contexts) {\n          return contexts.contains(ctx);\n        }).length > 0;\n        if (filteredCtx.indexOf(ctx) === -1 && !isDescendant) {\n          filteredCtx.push(ctx);\n        }\n      });\n      return filteredCtx;\n    }\n  }, {\n    key: 'getIframeContents',\n    value: function getIframeContents(ifr, successFn) {\n      var errorFn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n      var doc = void 0;\n      try {\n        var ifrWin = ifr.contentWindow;\n        doc = ifrWin.document;\n        if (!ifrWin || !doc) {\n          throw new Error('iframe inaccessible');\n        }\n      } catch (e) {\n        errorFn();\n      }\n      if (doc) {\n        successFn(doc);\n      }\n    }\n  }, {\n    key: 'isIframeBlank',\n    value: function isIframeBlank(ifr) {\n      var bl = 'about:blank',\n          src = ifr.getAttribute('src').trim(),\n          href = ifr.contentWindow.location.href;\n      return href === bl && src !== bl && src;\n    }\n  }, {\n    key: 'observeIframeLoad',\n    value: function observeIframeLoad(ifr, successFn, errorFn) {\n      var _this = this;\n\n      var called = false,\n          tout = null;\n      var listener = function listener() {\n        if (called) {\n          return;\n        }\n        called = true;\n        clearTimeout(tout);\n        try {\n          if (!_this.isIframeBlank(ifr)) {\n            ifr.removeEventListener('load', listener);\n            _this.getIframeContents(ifr, successFn, errorFn);\n          }\n        } catch (e) {\n          errorFn();\n        }\n      };\n      ifr.addEventListener('load', listener);\n      tout = setTimeout(listener, this.iframesTimeout);\n    }\n  }, {\n    key: 'onIframeReady',\n    value: function onIframeReady(ifr, successFn, errorFn) {\n      try {\n        if (ifr.contentWindow.document.readyState === 'complete') {\n          if (this.isIframeBlank(ifr)) {\n            this.observeIframeLoad(ifr, successFn, errorFn);\n          } else {\n            this.getIframeContents(ifr, successFn, errorFn);\n          }\n        } else {\n          this.observeIframeLoad(ifr, successFn, errorFn);\n        }\n      } catch (e) {\n        errorFn();\n      }\n    }\n  }, {\n    key: 'waitForIframes',\n    value: function waitForIframes(ctx, done) {\n      var _this2 = this;\n\n      var eachCalled = 0;\n      this.forEachIframe(ctx, function () {\n        return true;\n      }, function (ifr) {\n        eachCalled++;\n        _this2.waitForIframes(ifr.querySelector('html'), function () {\n          if (! --eachCalled) {\n            done();\n          }\n        });\n      }, function (handled) {\n        if (!handled) {\n          done();\n        }\n      });\n    }\n  }, {\n    key: 'forEachIframe',\n    value: function forEachIframe(ctx, filter, each) {\n      var _this3 = this;\n\n      var end = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n\n      var ifr = ctx.querySelectorAll('iframe'),\n          open = ifr.length,\n          handled = 0;\n      ifr = Array.prototype.slice.call(ifr);\n      var checkEnd = function checkEnd() {\n        if (--open <= 0) {\n          end(handled);\n        }\n      };\n      if (!open) {\n        checkEnd();\n      }\n      ifr.forEach(function (ifr) {\n        if (DOMIterator.matches(ifr, _this3.exclude)) {\n          checkEnd();\n        } else {\n          _this3.onIframeReady(ifr, function (con) {\n            if (filter(ifr)) {\n              handled++;\n              each(con);\n            }\n            checkEnd();\n          }, checkEnd);\n        }\n      });\n    }\n  }, {\n    key: 'createIterator',\n    value: function createIterator(ctx, whatToShow, filter) {\n      return document.createNodeIterator(ctx, whatToShow, filter, false);\n    }\n  }, {\n    key: 'createInstanceOnIframe',\n    value: function createInstanceOnIframe(contents) {\n      return new DOMIterator(contents.querySelector('html'), this.iframes);\n    }\n  }, {\n    key: 'compareNodeIframe',\n    value: function compareNodeIframe(node, prevNode, ifr) {\n      var compCurr = node.compareDocumentPosition(ifr),\n          prev = Node.DOCUMENT_POSITION_PRECEDING;\n      if (compCurr & prev) {\n        if (prevNode !== null) {\n          var compPrev = prevNode.compareDocumentPosition(ifr),\n              after = Node.DOCUMENT_POSITION_FOLLOWING;\n          if (compPrev & after) {\n            return true;\n          }\n        } else {\n          return true;\n        }\n      }\n      return false;\n    }\n  }, {\n    key: 'getIteratorNode',\n    value: function getIteratorNode(itr) {\n      var prevNode = itr.previousNode();\n      var node = void 0;\n      if (prevNode === null) {\n        node = itr.nextNode();\n      } else {\n        node = itr.nextNode() && itr.nextNode();\n      }\n      return {\n        prevNode: prevNode,\n        node: node\n      };\n    }\n  }, {\n    key: 'checkIframeFilter',\n    value: function checkIframeFilter(node, prevNode, currIfr, ifr) {\n      var key = false,\n          handled = false;\n      ifr.forEach(function (ifrDict, i) {\n        if (ifrDict.val === currIfr) {\n          key = i;\n          handled = ifrDict.handled;\n        }\n      });\n      if (this.compareNodeIframe(node, prevNode, currIfr)) {\n        if (key === false && !handled) {\n          ifr.push({\n            val: currIfr,\n            handled: true\n          });\n        } else if (key !== false && !handled) {\n          ifr[key].handled = true;\n        }\n        return true;\n      }\n      if (key === false) {\n        ifr.push({\n          val: currIfr,\n          handled: false\n        });\n      }\n      return false;\n    }\n  }, {\n    key: 'handleOpenIframes',\n    value: function handleOpenIframes(ifr, whatToShow, eCb, fCb) {\n      var _this4 = this;\n\n      ifr.forEach(function (ifrDict) {\n        if (!ifrDict.handled) {\n          _this4.getIframeContents(ifrDict.val, function (con) {\n            _this4.createInstanceOnIframe(con).forEachNode(whatToShow, eCb, fCb);\n          });\n        }\n      });\n    }\n  }, {\n    key: 'iterateThroughNodes',\n    value: function iterateThroughNodes(whatToShow, ctx, eachCb, filterCb, doneCb) {\n      var _this5 = this;\n\n      var itr = this.createIterator(ctx, whatToShow, filterCb);\n      var ifr = [],\n          elements = [],\n          node = void 0,\n          prevNode = void 0,\n          retrieveNodes = function retrieveNodes() {\n        var _getIteratorNode = _this5.getIteratorNode(itr);\n\n        prevNode = _getIteratorNode.prevNode;\n        node = _getIteratorNode.node;\n\n        return node;\n      };\n      while (retrieveNodes()) {\n        if (this.iframes) {\n          this.forEachIframe(ctx, function (currIfr) {\n            return _this5.checkIframeFilter(node, prevNode, currIfr, ifr);\n          }, function (con) {\n            _this5.createInstanceOnIframe(con).forEachNode(whatToShow, function (ifrNode) {\n              return elements.push(ifrNode);\n            }, filterCb);\n          });\n        }\n        elements.push(node);\n      }\n      elements.forEach(function (node) {\n        eachCb(node);\n      });\n      if (this.iframes) {\n        this.handleOpenIframes(ifr, whatToShow, eachCb, filterCb);\n      }\n      doneCb();\n    }\n  }, {\n    key: 'forEachNode',\n    value: function forEachNode(whatToShow, each, filter) {\n      var _this6 = this;\n\n      var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n\n      var contexts = this.getContexts();\n      var open = contexts.length;\n      if (!open) {\n        done();\n      }\n      contexts.forEach(function (ctx) {\n        var ready = function ready() {\n          _this6.iterateThroughNodes(whatToShow, ctx, each, filter, function () {\n            if (--open <= 0) {\n              done();\n            }\n          });\n        };\n        if (_this6.iframes) {\n          _this6.waitForIframes(ctx, ready);\n        } else {\n          ready();\n        }\n      });\n    }\n  }], [{\n    key: 'matches',\n    value: function matches(element, selector) {\n      var selectors = typeof selector === 'string' ? [selector] : selector,\n          fn = element.matches || element.matchesSelector || element.msMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.webkitMatchesSelector;\n      if (fn) {\n        var match = false;\n        selectors.every(function (sel) {\n          if (fn.call(element, sel)) {\n            match = true;\n            return false;\n          }\n          return true;\n        });\n        return match;\n      } else {\n        return false;\n      }\n    }\n  }]);\n  return DOMIterator;\n}();\n\nvar Mark$1 = function () {\n  function Mark(ctx) {\n    classCallCheck(this, Mark);\n\n    this.ctx = ctx;\n    this.ie = false;\n    var ua = window.navigator.userAgent;\n    if (ua.indexOf('MSIE') > -1 || ua.indexOf('Trident') > -1) {\n      this.ie = true;\n    }\n  }\n\n  createClass(Mark, [{\n    key: 'log',\n    value: function log(msg) {\n      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'debug';\n\n      var log = this.opt.log;\n      if (!this.opt.debug) {\n        return;\n      }\n      if ((typeof log === 'undefined' ? 'undefined' : _typeof(log)) === 'object' && typeof log[level] === 'function') {\n        log[level]('mark.js: ' + msg);\n      }\n    }\n  }, {\n    key: 'escapeStr',\n    value: function escapeStr(str) {\n      return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    }\n  }, {\n    key: 'createRegExp',\n    value: function createRegExp(str) {\n      if (this.opt.wildcards !== 'disabled') {\n        str = this.setupWildcardsRegExp(str);\n      }\n      str = this.escapeStr(str);\n      if (Object.keys(this.opt.synonyms).length) {\n        str = this.createSynonymsRegExp(str);\n      }\n      if (this.opt.ignoreJoiners || this.opt.ignorePunctuation.length) {\n        str = this.setupIgnoreJoinersRegExp(str);\n      }\n      if (this.opt.diacritics) {\n        str = this.createDiacriticsRegExp(str);\n      }\n      str = this.createMergedBlanksRegExp(str);\n      if (this.opt.ignoreJoiners || this.opt.ignorePunctuation.length) {\n        str = this.createJoinersRegExp(str);\n      }\n      if (this.opt.wildcards !== 'disabled') {\n        str = this.createWildcardsRegExp(str);\n      }\n      str = this.createAccuracyRegExp(str);\n      return str;\n    }\n  }, {\n    key: 'createSynonymsRegExp',\n    value: function createSynonymsRegExp(str) {\n      var syn = this.opt.synonyms,\n          sens = this.opt.caseSensitive ? '' : 'i',\n          joinerPlaceholder = this.opt.ignoreJoiners || this.opt.ignorePunctuation.length ? '\\0' : '';\n      for (var index in syn) {\n        if (syn.hasOwnProperty(index)) {\n          var value = syn[index],\n              k1 = this.opt.wildcards !== 'disabled' ? this.setupWildcardsRegExp(index) : this.escapeStr(index),\n              k2 = this.opt.wildcards !== 'disabled' ? this.setupWildcardsRegExp(value) : this.escapeStr(value);\n          if (k1 !== '' && k2 !== '') {\n            str = str.replace(new RegExp('(' + this.escapeStr(k1) + '|' + this.escapeStr(k2) + ')', 'gm' + sens), joinerPlaceholder + ('(' + this.processSynomyms(k1) + '|') + (this.processSynomyms(k2) + ')') + joinerPlaceholder);\n          }\n        }\n      }\n      return str;\n    }\n  }, {\n    key: 'processSynomyms',\n    value: function processSynomyms(str) {\n      if (this.opt.ignoreJoiners || this.opt.ignorePunctuation.length) {\n        str = this.setupIgnoreJoinersRegExp(str);\n      }\n      return str;\n    }\n  }, {\n    key: 'setupWildcardsRegExp',\n    value: function setupWildcardsRegExp(str) {\n      str = str.replace(/(?:\\\\)*\\?/g, function (val) {\n        return val.charAt(0) === '\\\\' ? '?' : '\\x01';\n      });\n      return str.replace(/(?:\\\\)*\\*/g, function (val) {\n        return val.charAt(0) === '\\\\' ? '*' : '\\x02';\n      });\n    }\n  }, {\n    key: 'createWildcardsRegExp',\n    value: function createWildcardsRegExp(str) {\n      var spaces = this.opt.wildcards === 'withSpaces';\n      return str.replace(/\\u0001/g, spaces ? '[\\\\S\\\\s]?' : '\\\\S?').replace(/\\u0002/g, spaces ? '[\\\\S\\\\s]*?' : '\\\\S*');\n    }\n  }, {\n    key: 'setupIgnoreJoinersRegExp',\n    value: function setupIgnoreJoinersRegExp(str) {\n      return str.replace(/[^(|)\\\\]/g, function (val, indx, original) {\n        var nextChar = original.charAt(indx + 1);\n        if (/[(|)\\\\]/.test(nextChar) || nextChar === '') {\n          return val;\n        } else {\n          return val + '\\0';\n        }\n      });\n    }\n  }, {\n    key: 'createJoinersRegExp',\n    value: function createJoinersRegExp(str) {\n      var joiner = [];\n      var ignorePunctuation = this.opt.ignorePunctuation;\n      if (Array.isArray(ignorePunctuation) && ignorePunctuation.length) {\n        joiner.push(this.escapeStr(ignorePunctuation.join('')));\n      }\n      if (this.opt.ignoreJoiners) {\n        joiner.push('\\\\u00ad\\\\u200b\\\\u200c\\\\u200d');\n      }\n      return joiner.length ? str.split(/\\u0000+/).join('[' + joiner.join('') + ']*') : str;\n    }\n  }, {\n    key: 'createDiacriticsRegExp',\n    value: function createDiacriticsRegExp(str) {\n      var sens = this.opt.caseSensitive ? '' : 'i',\n          dct = this.opt.caseSensitive ? ['aàáảãạăằắẳẵặâầấẩẫậäåāą', 'AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ', 'cçćč', 'CÇĆČ', 'dđď', 'DĐĎ', 'eèéẻẽẹêềếểễệëěēę', 'EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ', 'iìíỉĩịîïī', 'IÌÍỈĨỊÎÏĪ', 'lł', 'LŁ', 'nñňń', 'NÑŇŃ', 'oòóỏõọôồốổỗộơởỡớờợöøō', 'OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ', 'rř', 'RŘ', 'sšśșş', 'SŠŚȘŞ', 'tťțţ', 'TŤȚŢ', 'uùúủũụưừứửữựûüůū', 'UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ', 'yýỳỷỹỵÿ', 'YÝỲỶỸỴŸ', 'zžżź', 'ZŽŻŹ'] : ['aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ', 'cçćčCÇĆČ', 'dđďDĐĎ', 'eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ', 'iìíỉĩịîïīIÌÍỈĨỊÎÏĪ', 'lłLŁ', 'nñňńNÑŇŃ', 'oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ', 'rřRŘ', 'sšśșşSŠŚȘŞ', 'tťțţTŤȚŢ', 'uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ', 'yýỳỷỹỵÿYÝỲỶỸỴŸ', 'zžżźZŽŻŹ'];\n      var handled = [];\n      str.split('').forEach(function (ch) {\n        dct.every(function (dct) {\n          if (dct.indexOf(ch) !== -1) {\n            if (handled.indexOf(dct) > -1) {\n              return false;\n            }\n            str = str.replace(new RegExp('[' + dct + ']', 'gm' + sens), '[' + dct + ']');\n            handled.push(dct);\n          }\n          return true;\n        });\n      });\n      return str;\n    }\n  }, {\n    key: 'createMergedBlanksRegExp',\n    value: function createMergedBlanksRegExp(str) {\n      return str.replace(/[\\s]+/gmi, '[\\\\s]+');\n    }\n  }, {\n    key: 'createAccuracyRegExp',\n    value: function createAccuracyRegExp(str) {\n      var _this = this;\n\n      var chars = '!\"#$%&\\'()*+,-./:;<=>?@[\\\\]^_`{|}~¡¿';\n      var acc = this.opt.accuracy,\n          val = typeof acc === 'string' ? acc : acc.value,\n          ls = typeof acc === 'string' ? [] : acc.limiters,\n          lsJoin = '';\n      ls.forEach(function (limiter) {\n        lsJoin += '|' + _this.escapeStr(limiter);\n      });\n      switch (val) {\n        case 'partially':\n        default:\n          return '()(' + str + ')';\n        case 'complementary':\n          lsJoin = '\\\\s' + (lsJoin ? lsJoin : this.escapeStr(chars));\n          return '()([^' + lsJoin + ']*' + str + '[^' + lsJoin + ']*)';\n        case 'exactly':\n          return '(^|\\\\s' + lsJoin + ')(' + str + ')(?=$|\\\\s' + lsJoin + ')';\n      }\n    }\n  }, {\n    key: 'getSeparatedKeywords',\n    value: function getSeparatedKeywords(sv) {\n      var _this2 = this;\n\n      var stack = [];\n      sv.forEach(function (kw) {\n        if (!_this2.opt.separateWordSearch) {\n          if (kw.trim() && stack.indexOf(kw) === -1) {\n            stack.push(kw);\n          }\n        } else {\n          kw.split(' ').forEach(function (kwSplitted) {\n            if (kwSplitted.trim() && stack.indexOf(kwSplitted) === -1) {\n              stack.push(kwSplitted);\n            }\n          });\n        }\n      });\n      return {\n        'keywords': stack.sort(function (a, b) {\n          return b.length - a.length;\n        }),\n        'length': stack.length\n      };\n    }\n  }, {\n    key: 'isNumeric',\n    value: function isNumeric(value) {\n      return Number(parseFloat(value)) == value;\n    }\n  }, {\n    key: 'checkRanges',\n    value: function checkRanges(array) {\n      var _this3 = this;\n\n      if (!Array.isArray(array) || Object.prototype.toString.call(array[0]) !== '[object Object]') {\n        this.log('markRanges() will only accept an array of objects');\n        this.opt.noMatch(array);\n        return [];\n      }\n      var stack = [];\n      var last = 0;\n      array.sort(function (a, b) {\n        return a.start - b.start;\n      }).forEach(function (item) {\n        var _callNoMatchOnInvalid = _this3.callNoMatchOnInvalidRanges(item, last),\n            start = _callNoMatchOnInvalid.start,\n            end = _callNoMatchOnInvalid.end,\n            valid = _callNoMatchOnInvalid.valid;\n\n        if (valid) {\n          item.start = start;\n          item.length = end - start;\n          stack.push(item);\n          last = end;\n        }\n      });\n      return stack;\n    }\n  }, {\n    key: 'callNoMatchOnInvalidRanges',\n    value: function callNoMatchOnInvalidRanges(range, last) {\n      var start = void 0,\n          end = void 0,\n          valid = false;\n      if (range && typeof range.start !== 'undefined') {\n        start = parseInt(range.start, 10);\n        end = start + parseInt(range.length, 10);\n        if (this.isNumeric(range.start) && this.isNumeric(range.length) && end - last > 0 && end - start > 0) {\n          valid = true;\n        } else {\n          this.log('Ignoring invalid or overlapping range: ' + ('' + JSON.stringify(range)));\n          this.opt.noMatch(range);\n        }\n      } else {\n        this.log('Ignoring invalid range: ' + JSON.stringify(range));\n        this.opt.noMatch(range);\n      }\n      return {\n        start: start,\n        end: end,\n        valid: valid\n      };\n    }\n  }, {\n    key: 'checkWhitespaceRanges',\n    value: function checkWhitespaceRanges(range, originalLength, string) {\n      var end = void 0,\n          valid = true,\n          max = string.length,\n          offset = originalLength - max,\n          start = parseInt(range.start, 10) - offset;\n      start = start > max ? max : start;\n      end = start + parseInt(range.length, 10);\n      if (end > max) {\n        end = max;\n        this.log('End range automatically set to the max value of ' + max);\n      }\n      if (start < 0 || end - start < 0 || start > max || end > max) {\n        valid = false;\n        this.log('Invalid range: ' + JSON.stringify(range));\n        this.opt.noMatch(range);\n      } else if (string.substring(start, end).replace(/\\s+/g, '') === '') {\n        valid = false;\n        this.log('Skipping whitespace only range: ' + JSON.stringify(range));\n        this.opt.noMatch(range);\n      }\n      return {\n        start: start,\n        end: end,\n        valid: valid\n      };\n    }\n  }, {\n    key: 'getTextNodes',\n    value: function getTextNodes(cb) {\n      var _this4 = this;\n\n      var val = '',\n          nodes = [];\n      this.iterator.forEachNode(NodeFilter.SHOW_TEXT, function (node) {\n        nodes.push({\n          start: val.length,\n          end: (val += node.textContent).length,\n          node: node\n        });\n      }, function (node) {\n        if (_this4.matchesExclude(node.parentNode)) {\n          return NodeFilter.FILTER_REJECT;\n        } else {\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      }, function () {\n        cb({\n          value: val,\n          nodes: nodes\n        });\n      });\n    }\n  }, {\n    key: 'matchesExclude',\n    value: function matchesExclude(el) {\n      return DOMIterator.matches(el, this.opt.exclude.concat(['script', 'style', 'title', 'head', 'html']));\n    }\n  }, {\n    key: 'wrapRangeInTextNode',\n    value: function wrapRangeInTextNode(node, start, end) {\n      var hEl = !this.opt.element ? 'mark' : this.opt.element,\n          startNode = node.splitText(start),\n          ret = startNode.splitText(end - start);\n      var repl = document.createElement(hEl);\n      repl.setAttribute('data-markjs', 'true');\n      if (this.opt.className) {\n        repl.setAttribute('class', this.opt.className);\n      }\n      repl.textContent = startNode.textContent;\n      startNode.parentNode.replaceChild(repl, startNode);\n      return ret;\n    }\n  }, {\n    key: 'wrapRangeInMappedTextNode',\n    value: function wrapRangeInMappedTextNode(dict, start, end, filterCb, eachCb) {\n      var _this5 = this;\n\n      dict.nodes.every(function (n, i) {\n        var sibl = dict.nodes[i + 1];\n        if (typeof sibl === 'undefined' || sibl.start > start) {\n          if (!filterCb(n.node)) {\n            return false;\n          }\n          var s = start - n.start,\n              e = (end > n.end ? n.end : end) - n.start,\n              startStr = dict.value.substr(0, n.start),\n              endStr = dict.value.substr(e + n.start);\n          n.node = _this5.wrapRangeInTextNode(n.node, s, e);\n          dict.value = startStr + endStr;\n          dict.nodes.forEach(function (k, j) {\n            if (j >= i) {\n              if (dict.nodes[j].start > 0 && j !== i) {\n                dict.nodes[j].start -= e;\n              }\n              dict.nodes[j].end -= e;\n            }\n          });\n          end -= e;\n          eachCb(n.node.previousSibling, n.start);\n          if (end > n.end) {\n            start = n.end;\n          } else {\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n  }, {\n    key: 'wrapMatches',\n    value: function wrapMatches(regex, ignoreGroups, filterCb, eachCb, endCb) {\n      var _this6 = this;\n\n      var matchIdx = ignoreGroups === 0 ? 0 : ignoreGroups + 1;\n      this.getTextNodes(function (dict) {\n        dict.nodes.forEach(function (node) {\n          node = node.node;\n          var match = void 0;\n          while ((match = regex.exec(node.textContent)) !== null && match[matchIdx] !== '') {\n            if (!filterCb(match[matchIdx], node)) {\n              continue;\n            }\n            var pos = match.index;\n            if (matchIdx !== 0) {\n              for (var i = 1; i < matchIdx; i++) {\n                pos += match[i].length;\n              }\n            }\n            node = _this6.wrapRangeInTextNode(node, pos, pos + match[matchIdx].length);\n            eachCb(node.previousSibling);\n            regex.lastIndex = 0;\n          }\n        });\n        endCb();\n      });\n    }\n  }, {\n    key: 'wrapMatchesAcrossElements',\n    value: function wrapMatchesAcrossElements(regex, ignoreGroups, filterCb, eachCb, endCb) {\n      var _this7 = this;\n\n      var matchIdx = ignoreGroups === 0 ? 0 : ignoreGroups + 1;\n      this.getTextNodes(function (dict) {\n        var match = void 0;\n        while ((match = regex.exec(dict.value)) !== null && match[matchIdx] !== '') {\n          var start = match.index;\n          if (matchIdx !== 0) {\n            for (var i = 1; i < matchIdx; i++) {\n              start += match[i].length;\n            }\n          }\n          var end = start + match[matchIdx].length;\n          _this7.wrapRangeInMappedTextNode(dict, start, end, function (node) {\n            return filterCb(match[matchIdx], node);\n          }, function (node, lastIndex) {\n            regex.lastIndex = lastIndex;\n            eachCb(node);\n          });\n        }\n        endCb();\n      });\n    }\n  }, {\n    key: 'wrapRangeFromIndex',\n    value: function wrapRangeFromIndex(ranges, filterCb, eachCb, endCb) {\n      var _this8 = this;\n\n      this.getTextNodes(function (dict) {\n        var originalLength = dict.value.length;\n        ranges.forEach(function (range, counter) {\n          var _checkWhitespaceRange = _this8.checkWhitespaceRanges(range, originalLength, dict.value),\n              start = _checkWhitespaceRange.start,\n              end = _checkWhitespaceRange.end,\n              valid = _checkWhitespaceRange.valid;\n\n          if (valid) {\n            _this8.wrapRangeInMappedTextNode(dict, start, end, function (node) {\n              return filterCb(node, range, dict.value.substring(start, end), counter);\n            }, function (node) {\n              eachCb(node, range);\n            });\n          }\n        });\n        endCb();\n      });\n    }\n  }, {\n    key: 'unwrapMatches',\n    value: function unwrapMatches(node) {\n      var parent = node.parentNode;\n      var docFrag = document.createDocumentFragment();\n      while (node.firstChild) {\n        docFrag.appendChild(node.removeChild(node.firstChild));\n      }\n      parent.replaceChild(docFrag, node);\n      if (!this.ie) {\n        parent.normalize();\n      } else {\n        this.normalizeTextNode(parent);\n      }\n    }\n  }, {\n    key: 'normalizeTextNode',\n    value: function normalizeTextNode(node) {\n      if (!node) {\n        return;\n      }\n      if (node.nodeType === 3) {\n        while (node.nextSibling && node.nextSibling.nodeType === 3) {\n          node.nodeValue += node.nextSibling.nodeValue;\n          node.parentNode.removeChild(node.nextSibling);\n        }\n      } else {\n        this.normalizeTextNode(node.firstChild);\n      }\n      this.normalizeTextNode(node.nextSibling);\n    }\n  }, {\n    key: 'markRegExp',\n    value: function markRegExp(regexp, opt) {\n      var _this9 = this;\n\n      this.opt = opt;\n      this.log('Searching with expression \"' + regexp + '\"');\n      var totalMatches = 0,\n          fn = 'wrapMatches';\n      var eachCb = function eachCb(element) {\n        totalMatches++;\n        _this9.opt.each(element);\n      };\n      if (this.opt.acrossElements) {\n        fn = 'wrapMatchesAcrossElements';\n      }\n      this[fn](regexp, this.opt.ignoreGroups, function (match, node) {\n        return _this9.opt.filter(node, match, totalMatches);\n      }, eachCb, function () {\n        if (totalMatches === 0) {\n          _this9.opt.noMatch(regexp);\n        }\n        _this9.opt.done(totalMatches);\n      });\n    }\n  }, {\n    key: 'mark',\n    value: function mark(sv, opt) {\n      var _this10 = this;\n\n      this.opt = opt;\n      var totalMatches = 0,\n          fn = 'wrapMatches';\n\n      var _getSeparatedKeywords = this.getSeparatedKeywords(typeof sv === 'string' ? [sv] : sv),\n          kwArr = _getSeparatedKeywords.keywords,\n          kwArrLen = _getSeparatedKeywords.length,\n          sens = this.opt.caseSensitive ? '' : 'i',\n          handler = function handler(kw) {\n        var regex = new RegExp(_this10.createRegExp(kw), 'gm' + sens),\n            matches = 0;\n        _this10.log('Searching with expression \"' + regex + '\"');\n        _this10[fn](regex, 1, function (term, node) {\n          return _this10.opt.filter(node, kw, totalMatches, matches);\n        }, function (element) {\n          matches++;\n          totalMatches++;\n          _this10.opt.each(element);\n        }, function () {\n          if (matches === 0) {\n            _this10.opt.noMatch(kw);\n          }\n          if (kwArr[kwArrLen - 1] === kw) {\n            _this10.opt.done(totalMatches);\n          } else {\n            handler(kwArr[kwArr.indexOf(kw) + 1]);\n          }\n        });\n      };\n\n      if (this.opt.acrossElements) {\n        fn = 'wrapMatchesAcrossElements';\n      }\n      if (kwArrLen === 0) {\n        this.opt.done(totalMatches);\n      } else {\n        handler(kwArr[0]);\n      }\n    }\n  }, {\n    key: 'markRanges',\n    value: function markRanges(rawRanges, opt) {\n      var _this11 = this;\n\n      this.opt = opt;\n      var totalMatches = 0,\n          ranges = this.checkRanges(rawRanges);\n      if (ranges && ranges.length) {\n        this.log('Starting to mark with the following ranges: ' + JSON.stringify(ranges));\n        this.wrapRangeFromIndex(ranges, function (node, range, match, counter) {\n          return _this11.opt.filter(node, range, match, counter);\n        }, function (element, range) {\n          totalMatches++;\n          _this11.opt.each(element, range);\n        }, function () {\n          _this11.opt.done(totalMatches);\n        });\n      } else {\n        this.opt.done(totalMatches);\n      }\n    }\n  }, {\n    key: 'unmark',\n    value: function unmark(opt) {\n      var _this12 = this;\n\n      this.opt = opt;\n      var sel = this.opt.element ? this.opt.element : '*';\n      sel += '[data-markjs]';\n      if (this.opt.className) {\n        sel += '.' + this.opt.className;\n      }\n      this.log('Removal selector \"' + sel + '\"');\n      this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT, function (node) {\n        _this12.unwrapMatches(node);\n      }, function (node) {\n        var matchesSel = DOMIterator.matches(node, sel),\n            matchesExclude = _this12.matchesExclude(node);\n        if (!matchesSel || matchesExclude) {\n          return NodeFilter.FILTER_REJECT;\n        } else {\n          return NodeFilter.FILTER_ACCEPT;\n        }\n      }, this.opt.done);\n    }\n  }, {\n    key: 'opt',\n    set: function set$$1(val) {\n      this._opt = _extends({}, {\n        'element': '',\n        'className': '',\n        'exclude': [],\n        'iframes': false,\n        'iframesTimeout': 5000,\n        'separateWordSearch': true,\n        'diacritics': true,\n        'synonyms': {},\n        'accuracy': 'partially',\n        'acrossElements': false,\n        'caseSensitive': false,\n        'ignoreJoiners': false,\n        'ignoreGroups': 0,\n        'ignorePunctuation': [],\n        'wildcards': 'disabled',\n        'each': function each() {},\n        'noMatch': function noMatch() {},\n        'filter': function filter() {\n          return true;\n        },\n        'done': function done() {},\n        'debug': false,\n        'log': window.console\n      }, val);\n    },\n    get: function get$$1() {\n      return this._opt;\n    }\n  }, {\n    key: 'iterator',\n    get: function get$$1() {\n      return new DOMIterator(this.ctx, this.opt.iframes, this.opt.exclude, this.opt.iframesTimeout);\n    }\n  }]);\n  return Mark;\n}();\n\nfunction Mark(ctx) {\n  var _this = this;\n\n  var instance = new Mark$1(ctx);\n  this.mark = function (sv, opt) {\n    instance.mark(sv, opt);\n    return _this;\n  };\n  this.markRegExp = function (sv, opt) {\n    instance.markRegExp(sv, opt);\n    return _this;\n  };\n  this.markRanges = function (sv, opt) {\n    instance.markRanges(sv, opt);\n    return _this;\n  };\n  this.unmark = function (opt) {\n    instance.unmark(opt);\n    return _this;\n  };\n  return this;\n}\n\nreturn Mark;\n\n})));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('rangy2')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'rangy2'], factory) :\n    (global = global || self, factory(global.rangy = global.rangy || {}, global.rangy));\n}(this, function (exports, api) { 'use strict';\n\n    /**\n     * Class Applier module for Rangy.\n     * Adds, removes and toggles classes on Ranges and Selections\n     *\n     * Part of Rangy, a cross-browser JavaScript range and selection library\n     * https://github.com/timdown/rangy\n     *\n     * Depends on Rangy core.\n     *\n     * Copyright 2019, Tim Down\n     * Licensed under the MIT license.\n     * Version: 2.1.0\n     * Build date: 19 April 2019\n     */\n    var DomPosition = api.dom.DomPosition, isHostMethod = api.util.isHostMethod;\n\n    var module = new api.Module(\"ClassApplier\", [\"WrappedSelection\"]);\n\n    var defaultTagName = \"span\";\n    var createElementNSSupported = isHostMethod(document, \"createElementNS\");\n    function each(obj, func) {\n        for (var i in obj) {\n            if (obj.hasOwnProperty(i)) {\n                if (func(i, obj[i]) === false) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    function trim(str) {\n        return str.replace(/^\\s\\s*/, \"\").replace(/\\s\\s*$/, \"\");\n    }\n    function classNameContainsClass(fullClassName, className) {\n        return !!fullClassName && new RegExp(\"(?:^|\\\\s)\" + className + \"(?:\\\\s|$)\").test(fullClassName);\n    }\n    // Inefficient, inelegant nonsense for IE's svg element, which has no classList and non-HTML className implementation\n    function hasClass(el, className) {\n        if (typeof el.classList == \"object\") {\n            return el.classList.contains(className);\n        }\n        else {\n            var classNameSupported = (typeof el.className == \"string\");\n            var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n            return classNameContainsClass(elClass, className);\n        }\n    }\n    function addClass(el, className) {\n        if (typeof el.classList == \"object\") {\n            el.classList.add(className);\n        }\n        else {\n            var classNameSupported = (typeof el.className == \"string\");\n            var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n            if (elClass) {\n                if (!classNameContainsClass(elClass, className)) {\n                    elClass += \" \" + className;\n                }\n            }\n            else {\n                elClass = className;\n            }\n            if (classNameSupported) {\n                el.className = elClass;\n            }\n            else {\n                el.setAttribute(\"class\", elClass);\n            }\n        }\n    }\n    var removeClass = (function () {\n        function replacer(matched, whiteSpaceBefore, whiteSpaceAfter) {\n            return (whiteSpaceBefore && whiteSpaceAfter) ? \" \" : \"\";\n        }\n        return function (el, className) {\n            if (typeof el.classList == \"object\") {\n                el.classList.remove(className);\n            }\n            else {\n                var classNameSupported = (typeof el.className == \"string\");\n                var elClass = classNameSupported ? el.className : el.getAttribute(\"class\");\n                elClass = elClass.replace(new RegExp(\"(^|\\\\s)\" + className + \"(\\\\s|$)\"), replacer);\n                if (classNameSupported) {\n                    el.className = elClass;\n                }\n                else {\n                    el.setAttribute(\"class\", elClass);\n                }\n            }\n        };\n    })();\n    function getClass(el) {\n        var classNameSupported = (typeof el.className == \"string\");\n        return classNameSupported ? el.className : el.getAttribute(\"class\");\n    }\n    function sortClassName(className) {\n        return className && className.split(/\\s+/).sort().join(\" \");\n    }\n    function getSortedClassName(el) {\n        return sortClassName(getClass(el));\n    }\n    function haveSameClasses(el1, el2) {\n        return getSortedClassName(el1) == getSortedClassName(el2);\n    }\n    function hasAllClasses(el, className) {\n        var classes = className.split(/\\s+/);\n        for (var i = 0, len = classes.length; i < len; ++i) {\n            if (!hasClass(el, trim(classes[i]))) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function canTextBeStyled(textNode) {\n        var parent = textNode.parentNode;\n        return (parent && parent.nodeType == 1 && !/^(textarea|style|script|select|iframe)$/i.test(parent.nodeName));\n    }\n    function movePosition(position, oldParent, oldIndex, newParent, newIndex) {\n        var posNode = position.node, posOffset = position.offset;\n        var newNode = posNode, newOffset = posOffset;\n        if (posNode == newParent && posOffset > newIndex) {\n            ++newOffset;\n        }\n        if (posNode == oldParent && (posOffset == oldIndex || posOffset == oldIndex + 1)) {\n            newNode = newParent;\n            newOffset += newIndex - oldIndex;\n        }\n        if (posNode == oldParent && posOffset > oldIndex + 1) {\n            --newOffset;\n        }\n        position.node = newNode;\n        position.offset = newOffset;\n    }\n    function movePositionWhenRemovingNode(position, parentNode, index) {\n        if (position.node == parentNode && position.offset > index) {\n            --position.offset;\n        }\n    }\n    function movePreservingPositions(node, newParent, newIndex, positionsToPreserve) {\n        // For convenience, allow newIndex to be -1 to mean \"insert at the end\".\n        if (newIndex == -1) {\n            newIndex = newParent.childNodes.length;\n        }\n        var oldParent = node.parentNode;\n        var oldIndex = api.dom.getNodeIndex(node);\n        positionsToPreserve.forEach(function (position) {\n            movePosition(position, oldParent, oldIndex, newParent, newIndex);\n        });\n        // Now actually move the node.\n        if (newParent.childNodes.length == newIndex) {\n            newParent.appendChild(node);\n        }\n        else {\n            newParent.insertBefore(node, newParent.childNodes[newIndex]);\n        }\n    }\n    function removePreservingPositions(node, positionsToPreserve) {\n        var oldParent = node.parentNode;\n        var oldIndex = api.dom.getNodeIndex(node);\n        positionsToPreserve.forEach(function (position) {\n            movePositionWhenRemovingNode(position, oldParent, oldIndex);\n        });\n        api.dom.removeNode(node);\n    }\n    function moveChildrenPreservingPositions(node, newParent, newIndex, removeNode, positionsToPreserve) {\n        var child, children = [];\n        while ((child = node.firstChild)) {\n            movePreservingPositions(child, newParent, newIndex++, positionsToPreserve);\n            children.push(child);\n        }\n        if (removeNode) {\n            removePreservingPositions(node, positionsToPreserve);\n        }\n        return children;\n    }\n    function replaceWithOwnChildrenPreservingPositions(element, positionsToPreserve) {\n        return moveChildrenPreservingPositions(element, element.parentNode, api.dom.getNodeIndex(element), true, positionsToPreserve);\n    }\n    function rangeSelectsAnyText(range, textNode) {\n        var textNodeRange = range.cloneRange();\n        textNodeRange.selectNodeContents(textNode);\n        var intersectionRange = textNodeRange.intersection(range);\n        var text = intersectionRange ? intersectionRange.toString() : \"\";\n        return text != \"\";\n    }\n    function getEffectiveTextNodes(range) {\n        var nodes = range.getNodes([3]);\n        // Optimization as per issue 145\n        // Remove non-intersecting text nodes from the start of the range\n        var start = 0, node;\n        while ((node = nodes[start]) && !rangeSelectsAnyText(range, node)) {\n            ++start;\n        }\n        // Remove non-intersecting text nodes from the start of the range\n        var end = nodes.length - 1;\n        while ((node = nodes[end]) && !rangeSelectsAnyText(range, node)) {\n            --end;\n        }\n        return nodes.slice(start, end + 1);\n    }\n    function elementsHaveSameNonClassAttributes(el1, el2) {\n        if (el1.attributes.length != el2.attributes.length)\n            return false;\n        for (var i = 0, len = el1.attributes.length, attr1, attr2, name; i < len; ++i) {\n            attr1 = el1.attributes[i];\n            name = attr1.name;\n            if (name != \"class\") {\n                attr2 = el2.attributes.getNamedItem(name);\n                if ((attr1 === null) != (attr2 === null))\n                    return false;\n                if (attr1.specified != attr2.specified)\n                    return false;\n                if (attr1.specified && attr1.nodeValue !== attr2.nodeValue)\n                    return false;\n            }\n        }\n        return true;\n    }\n    function elementHasNonClassAttributes(el, exceptions) {\n        for (var i = 0, len = el.attributes.length, attrName; i < len; ++i) {\n            attrName = el.attributes[i].name;\n            if (!(exceptions && exceptions.includes(attrName)) && el.attributes[i].specified && attrName != \"class\") {\n                return true;\n            }\n        }\n        return false;\n    }\n    var getComputedStyleProperty = api.dom.getComputedStyleProperty;\n    var isEditableElement = (function () {\n        var testEl = document.createElement(\"div\");\n        return typeof testEl.isContentEditable == \"boolean\" ?\n            function (node) {\n                return node && node.nodeType == 1 && node.isContentEditable;\n            } :\n            function (node) {\n                if (!node || node.nodeType != 1 || node.contentEditable == \"false\") {\n                    return false;\n                }\n                return node.contentEditable == \"true\" || isEditableElement(node.parentNode);\n            };\n    })();\n    function isEditingHost(node) {\n        var parent;\n        return node && node.nodeType == 1 &&\n            (((parent = node.parentNode) && parent.nodeType == 9 && parent.designMode == \"on\") ||\n                (isEditableElement(node) && !isEditableElement(node.parentNode)));\n    }\n    function isEditable(node) {\n        return (isEditableElement(node) || (node.nodeType != 1 && isEditableElement(node.parentNode))) && !isEditingHost(node);\n    }\n    var inlineDisplayRegex = /^inline(-block|-table)?$/i;\n    function isNonInlineElement(node) {\n        return node && node.nodeType == 1 && !inlineDisplayRegex.test(getComputedStyleProperty(node, \"display\"));\n    }\n    // White space characters as defined by HTML 4 (http://www.w3.org/TR/html401/struct/text.html)\n    var htmlNonWhiteSpaceRegex = /[^\\r\\n\\t\\f \\u200B]/;\n    function isUnrenderedWhiteSpaceNode(node) {\n        if (node.data.length == 0) {\n            return true;\n        }\n        if (htmlNonWhiteSpaceRegex.test(node.data)) {\n            return false;\n        }\n        var cssWhiteSpace = getComputedStyleProperty(node.parentNode, \"whiteSpace\");\n        switch (cssWhiteSpace) {\n            case \"pre\":\n            case \"pre-wrap\":\n            case \"-moz-pre-wrap\":\n                return false;\n            case \"pre-line\":\n                if (/[\\r\\n]/.test(node.data)) {\n                    return false;\n                }\n        }\n        // We now have a whitespace-only text node that may be rendered depending on its context. If it is adjacent to a\n        // non-inline element, it will not be rendered. This seems to be a good enough definition.\n        return isNonInlineElement(node.previousSibling) || isNonInlineElement(node.nextSibling);\n    }\n    function getRangeBoundaries(ranges) {\n        var positions = [], i, range;\n        for (i = 0; range = ranges[i++];) {\n            positions.push(new DomPosition(range.startContainer, range.startOffset), new DomPosition(range.endContainer, range.endOffset));\n        }\n        return positions;\n    }\n    function updateRangesFromBoundaries(ranges, positions) {\n        for (var i = 0, range, start, end, len = ranges.length; i < len; ++i) {\n            range = ranges[i];\n            start = positions[i * 2];\n            end = positions[i * 2 + 1];\n            range.setStartAndEnd(start.node, start.offset, end.node, end.offset);\n        }\n    }\n    function isSplitPoint(node, offset) {\n        if (api.dom.isCharacterDataNode(node)) {\n            if (offset == 0) {\n                return !!node.previousSibling;\n            }\n            else if (offset == node.length) {\n                return !!node.nextSibling;\n            }\n            else {\n                return true;\n            }\n        }\n        return offset > 0 && offset < node.childNodes.length;\n    }\n    function splitNodeAt(node, descendantNode, descendantOffset, positionsToPreserve) {\n        var newNode, parentNode;\n        var splitAtStart = (descendantOffset == 0);\n        if (api.dom.isAncestorOf(descendantNode, node)) {\n            return node;\n        }\n        if (api.dom.isCharacterDataNode(descendantNode)) {\n            var descendantIndex = api.dom.getNodeIndex(descendantNode);\n            if (descendantOffset == 0) {\n                descendantOffset = descendantIndex;\n            }\n            else if (descendantOffset == descendantNode.length) {\n                descendantOffset = descendantIndex + 1;\n            }\n            else {\n                throw module.createError(\"splitNodeAt() should not be called with offset in the middle of a data node (\" +\n                    descendantOffset + \" in \" + descendantNode.data);\n            }\n            descendantNode = descendantNode.parentNode;\n        }\n        if (isSplitPoint(descendantNode, descendantOffset)) {\n            // descendantNode is now guaranteed not to be a text or other character node\n            newNode = descendantNode.cloneNode(false);\n            parentNode = descendantNode.parentNode;\n            if (newNode.id) {\n                newNode.removeAttribute(\"id\");\n            }\n            var child, newChildIndex = 0;\n            while ((child = descendantNode.childNodes[descendantOffset])) {\n                movePreservingPositions(child, newNode, newChildIndex++, positionsToPreserve);\n            }\n            movePreservingPositions(newNode, parentNode, api.dom.getNodeIndex(descendantNode) + 1, positionsToPreserve);\n            return (descendantNode == node) ? newNode : splitNodeAt(node, parentNode, api.dom.getNodeIndex(newNode), positionsToPreserve);\n        }\n        else if (node != descendantNode) {\n            newNode = descendantNode.parentNode;\n            // Work out a new split point in the parent node\n            var newNodeIndex = api.dom.getNodeIndex(descendantNode);\n            if (!splitAtStart) {\n                newNodeIndex++;\n            }\n            return splitNodeAt(node, newNode, newNodeIndex, positionsToPreserve);\n        }\n        return node;\n    }\n    function areElementsMergeable(el1, el2) {\n        return el1.namespaceURI == el2.namespaceURI &&\n            el1.tagName.toLowerCase() == el2.tagName.toLowerCase() &&\n            haveSameClasses(el1, el2) &&\n            elementsHaveSameNonClassAttributes(el1, el2) &&\n            getComputedStyleProperty(el1, \"display\") == \"inline\" &&\n            getComputedStyleProperty(el2, \"display\") == \"inline\";\n    }\n    function createAdjacentMergeableTextNodeGetter(forward) {\n        var siblingPropName = forward ? \"nextSibling\" : \"previousSibling\";\n        return function (textNode, checkParentElement) {\n            var el = textNode.parentNode;\n            var adjacentNode = textNode[siblingPropName];\n            if (adjacentNode) {\n                // Can merge if the node's previous/next sibling is a text node\n                if (adjacentNode && adjacentNode.nodeType == 3) {\n                    return adjacentNode;\n                }\n            }\n            else if (checkParentElement) {\n                // Compare text node parent element with its sibling\n                adjacentNode = el[siblingPropName];\n                if (adjacentNode && adjacentNode.nodeType == 1 && areElementsMergeable(el, adjacentNode)) {\n                    var adjacentNodeChild = adjacentNode[forward ? \"firstChild\" : \"lastChild\"];\n                    if (adjacentNodeChild && adjacentNodeChild.nodeType == 3) {\n                        return adjacentNodeChild;\n                    }\n                }\n            }\n            return null;\n        };\n    }\n    var getPreviousMergeableTextNode = createAdjacentMergeableTextNodeGetter(false), getNextMergeableTextNode = createAdjacentMergeableTextNodeGetter(true);\n    var Merge = /** @class */ (function () {\n        function Merge(firstNode) {\n            this.isElementMerge = (firstNode.nodeType == 1);\n            this.textNodes = [];\n            var firstTextNode = this.isElementMerge ? firstNode.lastChild : firstNode;\n            if (firstTextNode) {\n                this.textNodes.push(firstTextNode);\n            }\n        }\n        Merge.prototype.doMerge = function (positionsToPreserve) {\n            var textNodes = this.textNodes;\n            var firstTextNode = textNodes[0];\n            if (textNodes.length > 1) {\n                var firstTextNodeIndex = api.dom.getNodeIndex(firstTextNode);\n                var textParts = [], combinedTextLength = 0, parent;\n                var len_1 = textNodes.length;\n                textNodes.forEach(function (textNode, i) {\n                    parent = textNode.parentNode;\n                    if (i > 0) {\n                        parent.removeChild(textNode);\n                        if (!parent.hasChildNodes()) {\n                            api.dom.removeNode(parent);\n                        }\n                        if (positionsToPreserve) {\n                            positionsToPreserve.forEach(function (position) {\n                                // Handle case where position is inside the text node being merged into a preceding node\n                                if (position.node == textNode) {\n                                    position.node = firstTextNode;\n                                    position.offset += combinedTextLength;\n                                }\n                                // Handle case where both text nodes precede the position within the same parent node\n                                if (position.node == parent && position.offset > firstTextNodeIndex) {\n                                    --position.offset;\n                                    if (position.offset == firstTextNodeIndex + 1 && i < len_1 - 1) {\n                                        position.node = firstTextNode;\n                                        position.offset = combinedTextLength;\n                                    }\n                                }\n                            });\n                        }\n                    }\n                    textParts[i] = textNode.data;\n                    combinedTextLength += textNode.data.length;\n                });\n                firstTextNode.data = textParts.join(\"\");\n            }\n            return firstTextNode.data;\n        };\n        Merge.prototype.getLength = function () {\n            var i = this.textNodes.length, len = 0;\n            while (i--) {\n                len += this.textNodes[i].length;\n            }\n            return len;\n        };\n        Merge.prototype.toString = function () {\n            var textParts = [];\n            this.textNodes.forEach(function (textNode, i) {\n                textParts[i] = \"'\" + textNode.data + \"'\";\n            });\n            return \"[Merge(\" + textParts.join(\",\") + \")]\";\n        };\n        return Merge;\n    }());\n    var optionProperties = [\"elementTagName\", \"ignoreWhiteSpace\", \"applyToEditableOnly\", \"useExistingElements\",\n        \"removeEmptyElements\", \"onElementCreate\"];\n    // TODO: Populate this with every attribute name that corresponds to a property with a different name. Really??\n    var attrNamesForProperties = {};\n    var util = {\n        hasClass: hasClass,\n        addClass: addClass,\n        removeClass: removeClass,\n        getClass: getClass,\n        hasSameClasses: haveSameClasses,\n        hasAllClasses: hasAllClasses,\n        replaceWithOwnChildren: replaceWithOwnChildrenPreservingPositions,\n        elementsHaveSameNonClassAttributes: elementsHaveSameNonClassAttributes,\n        elementHasNonClassAttributes: elementHasNonClassAttributes,\n        splitNodeAt: splitNodeAt,\n        isEditableElement: isEditableElement,\n        isEditingHost: isEditingHost,\n        isEditable: isEditable\n    };\n    var ClassApplier = /** @class */ (function () {\n        function ClassApplier(className, options, tagNames) {\n            this.className = className;\n            this.elementTagName = defaultTagName;\n            this.ignoreWhiteSpace = true;\n            this.applyToEditableOnly = false;\n            this.useExistingElements = true;\n            this.removeEmptyElements = true;\n            var normalize, i, len, propName, applier = this;\n            applier.cssClass = className; // cssClass property is for backward compatibility\n            var elementPropertiesFromOptions = null, elementAttributes = {};\n            // Initialize from options object\n            if (typeof options == \"object\" && options !== null) {\n                if (typeof options.elementTagName !== \"undefined\") {\n                    options.elementTagName = options.elementTagName.toLowerCase();\n                }\n                tagNames = options.tagNames;\n                elementPropertiesFromOptions = options.elementProperties;\n                elementAttributes = options.elementAttributes;\n                for (i = 0; propName = optionProperties[i++];) {\n                    if (options.hasOwnProperty(propName)) {\n                        applier[propName] = options[propName];\n                    }\n                }\n                normalize = options.normalize;\n            }\n            else {\n                normalize = options;\n            }\n            // Backward compatibility: the second parameter can also be a Boolean indicating to normalize after unapplying\n            applier.normalize = (typeof normalize == \"undefined\") ? true : normalize;\n            // Initialize element properties and attribute exceptions\n            applier.attrExceptions = [];\n            var el = document.createElement(applier.elementTagName);\n            applier.elementProperties = applier.copyPropertiesToElement(elementPropertiesFromOptions, el, true);\n            each(elementAttributes, function (attrName, attrValue) {\n                applier.attrExceptions.push(attrName);\n                // Ensure each attribute value is a string\n                elementAttributes[attrName] = \"\" + attrValue;\n            });\n            applier.elementAttributes = elementAttributes;\n            applier.elementSortedClassName = applier.elementProperties.hasOwnProperty(\"className\") ?\n                sortClassName(applier.elementProperties.className + \" \" + className) : className;\n            // Initialize tag names\n            applier.applyToAnyTagName = false;\n            if (typeof tagNames === \"string\") {\n                if (tagNames == \"*\") {\n                    applier.applyToAnyTagName = true;\n                }\n                else {\n                    applier.tagNames = trim(tagNames.toLowerCase()).split(/\\s*,\\s*/);\n                }\n            }\n            else if (typeof tagNames == \"object\" && typeof tagNames.length == \"number\") {\n                applier.tagNames = [];\n                for (i = 0, len = tagNames.length; i < len; ++i) {\n                    if (tagNames[i] == \"*\") {\n                        applier.applyToAnyTagName = true;\n                    }\n                    else {\n                        applier.tagNames.push(tagNames[i].toLowerCase());\n                    }\n                }\n            }\n            else {\n                applier.tagNames = [applier.elementTagName];\n            }\n        }\n        ClassApplier.prototype.copyPropertiesToElement = function (props, el, createCopy) {\n            var s, elStyle, elProps = {}, elPropsStyle, propValue, elPropValue, attrName;\n            for (var p in props) {\n                if (props.hasOwnProperty(p)) {\n                    propValue = props[p];\n                    elPropValue = el[p];\n                    // Special case for class. The copied properties object has the applier's class as well as its own\n                    // to simplify checks when removing styling elements\n                    if (p == \"className\") {\n                        addClass(el, propValue);\n                        addClass(el, this.className);\n                        el[p] = sortClassName(el[p]);\n                        if (createCopy) {\n                            elProps[p] = propValue;\n                        }\n                    }\n                    // Special case for style\n                    else if (p == \"style\") {\n                        elStyle = elPropValue;\n                        if (createCopy) {\n                            elProps[p] = elPropsStyle = {};\n                        }\n                        for (s in props[p]) {\n                            if (props[p].hasOwnProperty(s)) {\n                                elStyle[s] = propValue[s];\n                                if (createCopy) {\n                                    elPropsStyle[s] = elStyle[s];\n                                }\n                            }\n                        }\n                        this.attrExceptions.push(p);\n                    }\n                    else {\n                        el[p] = propValue;\n                        // Copy the property back from the dummy element so that later comparisons to check whether\n                        // elements may be removed are checking against the right value. For example, the href property\n                        // of an element returns a fully qualified URL even if it was previously assigned a relative\n                        // URL.\n                        if (createCopy) {\n                            elProps[p] = el[p];\n                            // Not all properties map to identically-named attributes\n                            attrName = attrNamesForProperties.hasOwnProperty(p) ? attrNamesForProperties[p] : p;\n                            this.attrExceptions.push(attrName);\n                        }\n                    }\n                }\n            }\n            return createCopy ? elProps : \"\";\n        };\n        ClassApplier.prototype.copyAttributesToElement = function (attrs, el) {\n            for (var attrName in attrs) {\n                if (attrs.hasOwnProperty(attrName) && !/^class(?:Name)?$/i.test(attrName)) {\n                    el.setAttribute(attrName, attrs[attrName]);\n                }\n            }\n        };\n        ClassApplier.prototype.appliesToElement = function (el) {\n            return this.tagNames.includes(el.tagName.toLowerCase());\n        };\n        ClassApplier.prototype.getEmptyElements = function (range) {\n            var applier = this;\n            return range.getNodes([1], function (el) {\n                return applier.appliesToElement(el) && !el.hasChildNodes();\n            });\n        };\n        ClassApplier.prototype.hasClass = function (node) {\n            return node.nodeType == 1 &&\n                (this.applyToAnyTagName || this.appliesToElement(node)) &&\n                hasClass(node, this.className);\n        };\n        ClassApplier.prototype.getSelfOrAncestorWithClass = function (node) {\n            while (node) {\n                if (this.hasClass(node)) {\n                    return node;\n                }\n                node = node.parentNode;\n            }\n            return null;\n        };\n        ClassApplier.prototype.isModifiable = function (node) {\n            return !this.applyToEditableOnly || isEditable(node);\n        };\n        // White space adjacent to an unwrappable node can be ignored for wrapping\n        ClassApplier.prototype.isIgnorableWhiteSpaceNode = function (node) {\n            return this.ignoreWhiteSpace && node && node.nodeType == 3 && isUnrenderedWhiteSpaceNode(node);\n        };\n        // Normalizes nodes after applying a class to a Range.\n        ClassApplier.prototype.postApply = function (textNodes, range, positionsToPreserve, isUndo) {\n            var firstNode = textNodes[0], lastNode = textNodes[textNodes.length - 1];\n            var merges = [], currentMerge;\n            var rangeStartNode = firstNode, rangeEndNode = lastNode;\n            var rangeStartOffset = 0, rangeEndOffset = lastNode.length;\n            var precedingTextNode;\n            // Check for every required merge and create a Merge object for each\n            textNodes.forEach(function (textNode) {\n                precedingTextNode = getPreviousMergeableTextNode(textNode, !isUndo);\n                if (precedingTextNode) {\n                    if (!currentMerge) {\n                        currentMerge = new Merge(precedingTextNode);\n                        merges.push(currentMerge);\n                    }\n                    currentMerge.textNodes.push(textNode);\n                    if (textNode === firstNode) {\n                        rangeStartNode = currentMerge.textNodes[0];\n                        rangeStartOffset = rangeStartNode.length;\n                    }\n                    if (textNode === lastNode) {\n                        rangeEndNode = currentMerge.textNodes[0];\n                        rangeEndOffset = currentMerge.getLength();\n                    }\n                }\n                else {\n                    currentMerge = null;\n                }\n            });\n            // Test whether the first node after the range needs merging\n            var nextTextNode = getNextMergeableTextNode(lastNode, !isUndo);\n            if (nextTextNode) {\n                if (!currentMerge) {\n                    currentMerge = new Merge(lastNode);\n                    merges.push(currentMerge);\n                }\n                currentMerge.textNodes.push(nextTextNode);\n            }\n            // Apply the merges\n            if (merges.length) {\n                for (var i = 0, len = merges.length; i < len; ++i) {\n                    merges[i].doMerge(positionsToPreserve);\n                }\n                // Set the range boundaries\n                range.setStartAndEnd(rangeStartNode, rangeStartOffset, rangeEndNode, rangeEndOffset);\n            }\n        };\n        ClassApplier.prototype.createContainer = function (parentNode) {\n            var doc = api.dom.getDocument(parentNode);\n            var namespace;\n            var el = createElementNSSupported && !api.dom.isHtmlNamespace(parentNode) && (namespace = parentNode.namespaceURI) ?\n                doc.createElementNS(parentNode.namespaceURI, this.elementTagName) :\n                doc.createElement(this.elementTagName);\n            this.copyPropertiesToElement(this.elementProperties, el, false);\n            this.copyAttributesToElement(this.elementAttributes, el);\n            addClass(el, this.className);\n            if (this.onElementCreate) {\n                this.onElementCreate(el, this);\n            }\n            return el;\n        };\n        ClassApplier.prototype.elementHasProperties = function (el, props) {\n            var applier = this;\n            return each(props, function (p, propValue) {\n                if (p == \"className\") {\n                    // For checking whether we should reuse an existing element, we just want to check that the element\n                    // has all the classes specified in the className property. When deciding whether the element is\n                    // removable when unapplying a class, there is separate special handling to check whether the\n                    // element has extra classes so the same simple check will do.\n                    return hasAllClasses(el, propValue);\n                }\n                else if (typeof propValue == \"object\") {\n                    if (!applier.elementHasProperties(el[p], propValue)) {\n                        return false;\n                    }\n                }\n                else if (el[p] !== propValue) {\n                    return false;\n                }\n            });\n        };\n        ClassApplier.prototype.elementHasAttributes = function (el, attrs) {\n            return each(attrs, function (name, value) {\n                if (el.getAttribute(name) !== value) {\n                    return false;\n                }\n            });\n        };\n        ClassApplier.prototype.applyToTextNode = function (textNode, positionsToPreserve) {\n            // Check whether the text node can be styled. Text within a <style> or <script> element, for example,\n            // should not be styled. See issue 283.\n            if (canTextBeStyled(textNode)) {\n                var parent = textNode.parentNode;\n                if (parent.childNodes.length == 1 &&\n                    this.useExistingElements &&\n                    this.appliesToElement(parent) &&\n                    this.elementHasProperties(parent, this.elementProperties) &&\n                    this.elementHasAttributes(parent, this.elementAttributes)) {\n                    addClass(parent, this.className);\n                }\n                else {\n                    var textNodeParent = textNode.parentNode;\n                    var el = this.createContainer(textNodeParent);\n                    textNodeParent.insertBefore(el, textNode);\n                    el.appendChild(textNode);\n                }\n            }\n        };\n        ClassApplier.prototype.isRemovable = function (el) {\n            return el.tagName.toLowerCase() == this.elementTagName &&\n                getSortedClassName(el) == this.elementSortedClassName &&\n                this.elementHasProperties(el, this.elementProperties) &&\n                !elementHasNonClassAttributes(el, this.attrExceptions) &&\n                this.elementHasAttributes(el, this.elementAttributes) &&\n                this.isModifiable(el);\n        };\n        ClassApplier.prototype.isEmptyContainer = function (el) {\n            var childNodeCount = el.childNodes.length;\n            return el.nodeType == 1 &&\n                this.isRemovable(el) &&\n                (childNodeCount == 0 || (childNodeCount == 1 && this.isEmptyContainer(el.firstChild)));\n        };\n        ClassApplier.prototype.removeEmptyContainers = function (range) {\n            var applier = this;\n            var nodesToRemove = range.getNodes([1], function (el) {\n                return applier.isEmptyContainer(el);\n            });\n            var rangesToPreserve = [range];\n            var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n            nodesToRemove.forEach(function (node) {\n                removePreservingPositions(node, positionsToPreserve);\n            });\n            // Update the range from the preserved boundary positions\n            updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n        };\n        ClassApplier.prototype.undoToTextNode = function (textNode, range, ancestorWithClass, positionsToPreserve) {\n            if (!range.containsNode(ancestorWithClass)) {\n                // Split out the portion of the ancestor from which we can remove the class\n                //var parent = ancestorWithClass.parentNode, index = dom.getNodeIndex(ancestorWithClass);\n                var ancestorRange = range.cloneRange();\n                ancestorRange.selectNode(ancestorWithClass);\n                if (ancestorRange.isPointInRange(range.endContainer, range.endOffset)) {\n                    splitNodeAt(ancestorWithClass, range.endContainer, range.endOffset, positionsToPreserve);\n                    range.setEndAfter(ancestorWithClass);\n                }\n                if (ancestorRange.isPointInRange(range.startContainer, range.startOffset)) {\n                    ancestorWithClass = splitNodeAt(ancestorWithClass, range.startContainer, range.startOffset, positionsToPreserve);\n                }\n            }\n            if (this.isRemovable(ancestorWithClass)) {\n                replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n            }\n            else {\n                removeClass(ancestorWithClass, this.className);\n            }\n        };\n        ClassApplier.prototype.splitAncestorWithClass = function (container, offset, positionsToPreserve) {\n            var ancestorWithClass = this.getSelfOrAncestorWithClass(container);\n            if (ancestorWithClass) {\n                splitNodeAt(ancestorWithClass, container, offset, positionsToPreserve);\n            }\n        };\n        ClassApplier.prototype.undoToAncestor = function (ancestorWithClass, positionsToPreserve) {\n            if (this.isRemovable(ancestorWithClass)) {\n                replaceWithOwnChildrenPreservingPositions(ancestorWithClass, positionsToPreserve);\n            }\n            else {\n                removeClass(ancestorWithClass, this.className);\n            }\n        };\n        ClassApplier.prototype.applyToRange = function (range, rangesToPreserve) {\n            var applier = this;\n            rangesToPreserve = rangesToPreserve || [];\n            // Create an array of range boundaries to preserve\n            var positionsToPreserve = getRangeBoundaries(rangesToPreserve || []);\n            range.splitBoundariesPreservingPositions(positionsToPreserve);\n            // Tidy up the DOM by removing empty containers\n            if (applier.removeEmptyElements) {\n                applier.removeEmptyContainers(range);\n            }\n            var textNodes = getEffectiveTextNodes(range);\n            if (textNodes.length) {\n                textNodes.forEach(function (textNode) {\n                    if (!applier.isIgnorableWhiteSpaceNode(textNode) && !applier.getSelfOrAncestorWithClass(textNode) &&\n                        applier.isModifiable(textNode)) {\n                        applier.applyToTextNode(textNode, positionsToPreserve);\n                    }\n                });\n                var lastTextNode = textNodes[textNodes.length - 1];\n                range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n                if (applier.normalize) {\n                    applier.postApply(textNodes, range, positionsToPreserve, false);\n                }\n                // Update the ranges from the preserved boundary positions\n                updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n            }\n            // Apply classes to any appropriate empty elements\n            var emptyElements = applier.getEmptyElements(range);\n            emptyElements.forEach(function (el) {\n                addClass(el, applier.className);\n            });\n        };\n        ClassApplier.prototype.applyToRanges = function (ranges) {\n            var i = ranges.length;\n            while (i--) {\n                this.applyToRange(ranges[i], ranges);\n            }\n            return ranges;\n        };\n        ClassApplier.prototype.applyToSelection = function (win) {\n            var sel = api.getSelection(win);\n            sel.setRanges(this.applyToRanges(sel.getAllRanges()));\n        };\n        ClassApplier.prototype.undoToRange = function (range, rangesToPreserve) {\n            var applier = this;\n            // Create an array of range boundaries to preserve\n            rangesToPreserve = rangesToPreserve || [];\n            var positionsToPreserve = getRangeBoundaries(rangesToPreserve);\n            range.splitBoundariesPreservingPositions(positionsToPreserve);\n            // Tidy up the DOM by removing empty containers\n            if (applier.removeEmptyElements) {\n                applier.removeEmptyContainers(range); //, positionsToPreserve);\n            }\n            var textNodes = getEffectiveTextNodes(range);\n            var textNode, ancestorWithClass;\n            var lastTextNode = textNodes[textNodes.length - 1];\n            if (textNodes.length) {\n                applier.splitAncestorWithClass(range.endContainer, range.endOffset, positionsToPreserve);\n                applier.splitAncestorWithClass(range.startContainer, range.startOffset, positionsToPreserve);\n                for (var i = 0, len = textNodes.length; i < len; ++i) {\n                    textNode = textNodes[i];\n                    ancestorWithClass = applier.getSelfOrAncestorWithClass(textNode);\n                    if (ancestorWithClass && applier.isModifiable(textNode)) {\n                        applier.undoToAncestor(ancestorWithClass, positionsToPreserve);\n                    }\n                }\n                // Ensure the range is still valid\n                range.setStartAndEnd(textNodes[0], 0, lastTextNode, lastTextNode.length);\n                if (applier.normalize) {\n                    applier.postApply(textNodes, range, positionsToPreserve, true);\n                }\n                // Update the ranges from the preserved boundary positions\n                updateRangesFromBoundaries(rangesToPreserve, positionsToPreserve);\n            }\n            // Remove class from any appropriate empty elements\n            var emptyElements = applier.getEmptyElements(range);\n            emptyElements.forEach(function (el) {\n                removeClass(el, applier.className);\n            });\n        };\n        ClassApplier.prototype.undoToRanges = function (ranges) {\n            // Get ranges returned in document order\n            var i = ranges.length;\n            while (i--) {\n                this.undoToRange(ranges[i], ranges);\n            }\n            return ranges;\n        };\n        ClassApplier.prototype.undoToSelection = function (win) {\n            var sel = api.getSelection(win);\n            var ranges = api.getSelection(win).getAllRanges();\n            this.undoToRanges(ranges);\n            sel.setRanges(ranges);\n        };\n        ClassApplier.prototype.isAppliedToRange = function (range) {\n            if (range.collapsed || range.toString() == \"\") {\n                return !!this.getSelfOrAncestorWithClass(range.commonAncestorContainer);\n            }\n            else {\n                var textNodes = range.getNodes([3]);\n                if (textNodes.length)\n                    for (var i = 0, textNode; textNode = textNodes[i++];) {\n                        if (!this.isIgnorableWhiteSpaceNode(textNode) && rangeSelectsAnyText(range, textNode) &&\n                            this.isModifiable(textNode) && !this.getSelfOrAncestorWithClass(textNode)) {\n                            return false;\n                        }\n                    }\n                return true;\n            }\n        };\n        ClassApplier.prototype.isAppliedToRanges = function (ranges) {\n            var i = ranges.length;\n            if (i == 0) {\n                return false;\n            }\n            while (i--) {\n                if (!this.isAppliedToRange(ranges[i])) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        ClassApplier.prototype.isAppliedToSelection = function (win) {\n            var sel = api.getSelection(win);\n            return this.isAppliedToRanges(sel.getAllRanges());\n        };\n        ClassApplier.prototype.toggleRange = function (range) {\n            if (this.isAppliedToRange(range)) {\n                this.undoToRange(range);\n            }\n            else {\n                this.applyToRange(range);\n            }\n        };\n        ClassApplier.prototype.toggleSelection = function (win) {\n            if (this.isAppliedToSelection(win)) {\n                this.undoToSelection(win);\n            }\n            else {\n                this.applyToSelection(win);\n            }\n        };\n        ClassApplier.prototype.getElementsWithClassIntersectingRange = function (range) {\n            var elements = [];\n            var applier = this;\n            range.getNodes([3], function (textNode) {\n                var el = applier.getSelfOrAncestorWithClass(textNode);\n                if (el && !elements.includes(el)) {\n                    elements.push(el);\n                }\n            });\n            return elements;\n        };\n        ClassApplier.prototype.detach = function () { };\n        ClassApplier.util = util;\n        return ClassApplier;\n    }());\n    function createClassApplier(className, options, tagNames) {\n        return new ClassApplier(className, options, tagNames);\n    }\n\n    exports.ClassApplier = ClassApplier;\n    exports.CssClassApplier = ClassApplier;\n    exports.createClassApplier = createClassApplier;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=index.umd.js.map\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = global || self, factory(global.rangy = {}));\n}(this, function (exports) { 'use strict';\n\n  var fails = function (exec) {\n    try {\n      return !!exec();\n    } catch (error) {\n      return true;\n    }\n  };\n\n  var toString = {}.toString;\n\n  var classofRaw = function (it) {\n    return toString.call(it).slice(8, -1);\n  };\n\n  // fallback for non-array-like ES3 and non-enumerable old V8 strings\n\n\n  var split = ''.split;\n\n  var indexedObject = fails(function () {\n    // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n    // eslint-disable-next-line no-prototype-builtins\n    return !Object('z').propertyIsEnumerable(0);\n  }) ? function (it) {\n    return classofRaw(it) == 'String' ? split.call(it, '') : Object(it);\n  } : Object;\n\n  // `RequireObjectCoercible` abstract operation\n  // https://tc39.github.io/ecma262/#sec-requireobjectcoercible\n  var requireObjectCoercible = function (it) {\n    if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n    return it;\n  };\n\n  // toObject with fallback for non-array-like ES3 strings\n\n\n\n  var toIndexedObject = function (it) {\n    return indexedObject(requireObjectCoercible(it));\n  };\n\n  var ceil = Math.ceil;\n  var floor = Math.floor;\n\n  // `ToInteger` abstract operation\n  // https://tc39.github.io/ecma262/#sec-tointeger\n  var toInteger = function (argument) {\n    return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n  };\n\n  var min = Math.min;\n\n  // `ToLength` abstract operation\n  // https://tc39.github.io/ecma262/#sec-tolength\n  var toLength = function (argument) {\n    return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n  };\n\n  var max = Math.max;\n  var min$1 = Math.min;\n\n  // Helper for a popular repeating case of the spec:\n  // Let integer be ? ToInteger(index).\n  // If integer < 0, let result be max((length + integer), 0); else let result be min(length, length).\n  var toAbsoluteIndex = function (index, length) {\n    var integer = toInteger(index);\n    return integer < 0 ? max(integer + length, 0) : min$1(integer, length);\n  };\n\n  // `Array.prototype.{ indexOf, includes }` methods implementation\n  // false -> Array#indexOf\n  // https://tc39.github.io/ecma262/#sec-array.prototype.indexof\n  // true  -> Array#includes\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  var arrayIncludes = function (IS_INCLUDES) {\n    return function ($this, el, fromIndex) {\n      var O = toIndexedObject($this);\n      var length = toLength(O.length);\n      var index = toAbsoluteIndex(fromIndex, length);\n      var value;\n      // Array#includes uses SameValueZero equality algorithm\n      // eslint-disable-next-line no-self-compare\n      if (IS_INCLUDES && el != el) while (length > index) {\n        value = O[index++];\n        // eslint-disable-next-line no-self-compare\n        if (value != value) return true;\n      // Array#indexOf ignores holes, Array#includes - not\n      } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n        if (O[index] === el) return IS_INCLUDES || index || 0;\n      } return !IS_INCLUDES && -1;\n    };\n  };\n\n  // https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\n  var global = typeof window == 'object' && window && window.Math == Math ? window\n    : typeof self == 'object' && self && self.Math == Math ? self\n    // eslint-disable-next-line no-new-func\n    : Function('return this')();\n\n  // Thank's IE8 for his funny defineProperty\n  var descriptors = !fails(function () {\n    return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n  });\n\n  var nativePropertyIsEnumerable = {}.propertyIsEnumerable;\n  var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n  // Nashorn ~ JDK8 bug\n  var NASHORN_BUG = nativeGetOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n  var f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n    var descriptor = nativeGetOwnPropertyDescriptor(this, V);\n    return !!descriptor && descriptor.enumerable;\n  } : nativePropertyIsEnumerable;\n\n  var objectPropertyIsEnumerable = {\n  \tf: f\n  };\n\n  var createPropertyDescriptor = function (bitmap, value) {\n    return {\n      enumerable: !(bitmap & 1),\n      configurable: !(bitmap & 2),\n      writable: !(bitmap & 4),\n      value: value\n    };\n  };\n\n  var isObject = function (it) {\n    return typeof it === 'object' ? it !== null : typeof it === 'function';\n  };\n\n  // 7.1.1 ToPrimitive(input [, PreferredType])\n\n  // instead of the ES6 spec version, we didn't implement @@toPrimitive case\n  // and the second argument - flag - preferred type is a string\n  var toPrimitive = function (it, S) {\n    if (!isObject(it)) return it;\n    var fn, val;\n    if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n    if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n    if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n    throw TypeError(\"Can't convert object to primitive value\");\n  };\n\n  var hasOwnProperty = {}.hasOwnProperty;\n\n  var has = function (it, key) {\n    return hasOwnProperty.call(it, key);\n  };\n\n  var document$1 = global.document;\n  // typeof document.createElement is 'object' in old IE\n  var exist = isObject(document$1) && isObject(document$1.createElement);\n\n  var documentCreateElement = function (it) {\n    return exist ? document$1.createElement(it) : {};\n  };\n\n  // Thank's IE8 for his funny defineProperty\n  var ie8DomDefine = !descriptors && !fails(function () {\n    return Object.defineProperty(documentCreateElement('div'), 'a', {\n      get: function () { return 7; }\n    }).a != 7;\n  });\n\n  var nativeGetOwnPropertyDescriptor$1 = Object.getOwnPropertyDescriptor;\n\n  var f$1 = descriptors ? nativeGetOwnPropertyDescriptor$1 : function getOwnPropertyDescriptor(O, P) {\n    O = toIndexedObject(O);\n    P = toPrimitive(P, true);\n    if (ie8DomDefine) try {\n      return nativeGetOwnPropertyDescriptor$1(O, P);\n    } catch (error) { /* empty */ }\n    if (has(O, P)) return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O, P), O[P]);\n  };\n\n  var objectGetOwnPropertyDescriptor = {\n  \tf: f$1\n  };\n\n  var anObject = function (it) {\n    if (!isObject(it)) {\n      throw TypeError(String(it) + ' is not an object');\n    } return it;\n  };\n\n  var nativeDefineProperty = Object.defineProperty;\n\n  var f$2 = descriptors ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n    anObject(O);\n    P = toPrimitive(P, true);\n    anObject(Attributes);\n    if (ie8DomDefine) try {\n      return nativeDefineProperty(O, P, Attributes);\n    } catch (error) { /* empty */ }\n    if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n    if ('value' in Attributes) O[P] = Attributes.value;\n    return O;\n  };\n\n  var objectDefineProperty = {\n  \tf: f$2\n  };\n\n  var hide = descriptors ? function (object, key, value) {\n    return objectDefineProperty.f(object, key, createPropertyDescriptor(1, value));\n  } : function (object, key, value) {\n    object[key] = value;\n    return object;\n  };\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  var setGlobal = function (key, value) {\n    try {\n      hide(global, key, value);\n    } catch (error) {\n      global[key] = value;\n    } return value;\n  };\n\n  var shared = createCommonjsModule(function (module) {\n  var SHARED = '__core-js_shared__';\n  var store = global[SHARED] || setGlobal(SHARED, {});\n\n  (module.exports = function (key, value) {\n    return store[key] || (store[key] = value !== undefined ? value : {});\n  })('versions', []).push({\n    version: '3.0.1',\n    mode: 'global',\n    copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n  });\n  });\n\n  var functionToString = shared('native-function-to-string', Function.toString);\n\n  var WeakMap = global.WeakMap;\n\n  var nativeWeakMap = typeof WeakMap === 'function' && /native code/.test(functionToString.call(WeakMap));\n\n  var id = 0;\n  var postfix = Math.random();\n\n  var uid = function (key) {\n    return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + postfix).toString(36));\n  };\n\n  var shared$1 = shared('keys');\n\n\n  var sharedKey = function (key) {\n    return shared$1[key] || (shared$1[key] = uid(key));\n  };\n\n  var hiddenKeys = {};\n\n  var WeakMap$1 = global.WeakMap;\n  var set, get, has$1;\n\n  var enforce = function (it) {\n    return has$1(it) ? get(it) : set(it, {});\n  };\n\n  var getterFor = function (TYPE) {\n    return function (it) {\n      var state;\n      if (!isObject(it) || (state = get(it)).type !== TYPE) {\n        throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n      } return state;\n    };\n  };\n\n  if (nativeWeakMap) {\n    var store = new WeakMap$1();\n    var wmget = store.get;\n    var wmhas = store.has;\n    var wmset = store.set;\n    set = function (it, metadata) {\n      wmset.call(store, it, metadata);\n      return metadata;\n    };\n    get = function (it) {\n      return wmget.call(store, it) || {};\n    };\n    has$1 = function (it) {\n      return wmhas.call(store, it);\n    };\n  } else {\n    var STATE = sharedKey('state');\n    hiddenKeys[STATE] = true;\n    set = function (it, metadata) {\n      hide(it, STATE, metadata);\n      return metadata;\n    };\n    get = function (it) {\n      return has(it, STATE) ? it[STATE] : {};\n    };\n    has$1 = function (it) {\n      return has(it, STATE);\n    };\n  }\n\n  var internalState = {\n    set: set,\n    get: get,\n    has: has$1,\n    enforce: enforce,\n    getterFor: getterFor\n  };\n\n  var redefine = createCommonjsModule(function (module) {\n  var getInternalState = internalState.get;\n  var enforceInternalState = internalState.enforce;\n  var TEMPLATE = String(functionToString).split('toString');\n\n  shared('inspectSource', function (it) {\n    return functionToString.call(it);\n  });\n\n  (module.exports = function (O, key, value, options) {\n    var unsafe = options ? !!options.unsafe : false;\n    var simple = options ? !!options.enumerable : false;\n    var noTargetGet = options ? !!options.noTargetGet : false;\n    if (typeof value == 'function') {\n      if (typeof key == 'string' && !has(value, 'name')) hide(value, 'name', key);\n      enforceInternalState(value).source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n    if (O === global) {\n      if (simple) O[key] = value;\n      else setGlobal(key, value);\n      return;\n    } else if (!unsafe) {\n      delete O[key];\n    } else if (!noTargetGet && O[key]) {\n      simple = true;\n    }\n    if (simple) O[key] = value;\n    else hide(O, key, value);\n  // add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n  })(Function.prototype, 'toString', function toString() {\n    return typeof this == 'function' && getInternalState(this).source || functionToString.call(this);\n  });\n  });\n\n  var arrayIndexOf = arrayIncludes(false);\n\n\n  var objectKeysInternal = function (object, names) {\n    var O = toIndexedObject(object);\n    var i = 0;\n    var result = [];\n    var key;\n    for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n    // Don't enum bug & hidden keys\n    while (names.length > i) if (has(O, key = names[i++])) {\n      ~arrayIndexOf(result, key) || result.push(key);\n    }\n    return result;\n  };\n\n  // IE8- don't enum bug keys\n  var enumBugKeys = [\n    'constructor',\n    'hasOwnProperty',\n    'isPrototypeOf',\n    'propertyIsEnumerable',\n    'toLocaleString',\n    'toString',\n    'valueOf'\n  ];\n\n  // 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\n\n  var hiddenKeys$1 = enumBugKeys.concat('length', 'prototype');\n\n  var f$3 = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n    return objectKeysInternal(O, hiddenKeys$1);\n  };\n\n  var objectGetOwnPropertyNames = {\n  \tf: f$3\n  };\n\n  var f$4 = Object.getOwnPropertySymbols;\n\n  var objectGetOwnPropertySymbols = {\n  \tf: f$4\n  };\n\n  var Reflect = global.Reflect;\n\n  // all object keys, includes non-enumerable and symbols\n  var ownKeys = Reflect && Reflect.ownKeys || function ownKeys(it) {\n    var keys = objectGetOwnPropertyNames.f(anObject(it));\n    var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;\n    return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n  };\n\n  var copyConstructorProperties = function (target, source) {\n    var keys = ownKeys(source);\n    var defineProperty = objectDefineProperty.f;\n    var getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  };\n\n  var replacement = /#|\\.prototype\\./;\n\n  var isForced = function (feature, detection) {\n    var value = data[normalize(feature)];\n    return value == POLYFILL ? true\n      : value == NATIVE ? false\n      : typeof detection == 'function' ? fails(detection)\n      : !!detection;\n  };\n\n  var normalize = isForced.normalize = function (string) {\n    return String(string).replace(replacement, '.').toLowerCase();\n  };\n\n  var data = isForced.data = {};\n  var NATIVE = isForced.NATIVE = 'N';\n  var POLYFILL = isForced.POLYFILL = 'P';\n\n  var isForced_1 = isForced;\n\n  var getOwnPropertyDescriptor = objectGetOwnPropertyDescriptor.f;\n\n\n\n\n\n\n  /*\n    options.target      - name of the target object\n    options.global      - target is the global object\n    options.stat        - export as static methods of target\n    options.proto       - export as prototype methods of target\n    options.real        - real prototype method for the `pure` version\n    options.forced      - export even if the native feature is available\n    options.bind        - bind methods to the target, required for the `pure` version\n    options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n    options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n    options.sham        - add a flag to not completely full polyfills\n    options.enumerable  - export as enumerable property\n    options.noTargetGet - prevent calling a getter on target\n  */\n  var _export = function (options, source) {\n    var TARGET = options.target;\n    var GLOBAL = options.global;\n    var STATIC = options.stat;\n    var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n    if (GLOBAL) {\n      target = global;\n    } else if (STATIC) {\n      target = global[TARGET] || setGlobal(TARGET, {});\n    } else {\n      target = (global[TARGET] || {}).prototype;\n    }\n    if (target) for (key in source) {\n      sourceProperty = source[key];\n      if (options.noTargetGet) {\n        descriptor = getOwnPropertyDescriptor(target, key);\n        targetProperty = descriptor && descriptor.value;\n      } else targetProperty = target[key];\n      FORCED = isForced_1(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n      // contained in target\n      if (!FORCED && targetProperty !== undefined) {\n        if (typeof sourceProperty === typeof targetProperty) continue;\n        copyConstructorProperties(sourceProperty, targetProperty);\n      }\n      // add a flag to not completely full polyfills\n      if (options.sham || (targetProperty && targetProperty.sham)) {\n        hide(sourceProperty, 'sham', true);\n      }\n      // extend global\n      redefine(target, key, sourceProperty, options);\n    }\n  };\n\n  // Chrome 38 Symbol has incorrect toString conversion\n  var nativeSymbol = !fails(function () {\n    // eslint-disable-next-line no-undef\n    return !String(Symbol());\n  });\n\n  var store$1 = shared('wks');\n\n  var Symbol$1 = global.Symbol;\n\n\n  var wellKnownSymbol = function (name) {\n    return store$1[name] || (store$1[name] = nativeSymbol && Symbol$1[name]\n      || (nativeSymbol ? Symbol$1 : uid)('Symbol.' + name));\n  };\n\n  // 19.1.2.14 / 15.2.3.14 Object.keys(O)\n\n\n\n  var objectKeys = Object.keys || function keys(O) {\n    return objectKeysInternal(O, enumBugKeys);\n  };\n\n  var objectDefineProperties = descriptors ? Object.defineProperties : function defineProperties(O, Properties) {\n    anObject(O);\n    var keys = objectKeys(Properties);\n    var length = keys.length;\n    var i = 0;\n    var key;\n    while (length > i) objectDefineProperty.f(O, key = keys[i++], Properties[key]);\n    return O;\n  };\n\n  var document$2 = global.document;\n\n  var html = document$2 && document$2.documentElement;\n\n  // 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n\n\n\n\n\n  var IE_PROTO = sharedKey('IE_PROTO');\n  var PROTOTYPE = 'prototype';\n  var Empty = function () { /* empty */ };\n\n  // Create object with fake `null` prototype: use iframe Object with cleared prototype\n  var createDict = function () {\n    // Thrash, waste and sodomy: IE GC bug\n    var iframe = documentCreateElement('iframe');\n    var length = enumBugKeys.length;\n    var lt = '<';\n    var script = 'script';\n    var gt = '>';\n    var js = 'java' + script + ':';\n    var iframeDocument;\n    iframe.style.display = 'none';\n    html.appendChild(iframe);\n    iframe.src = String(js);\n    iframeDocument = iframe.contentWindow.document;\n    iframeDocument.open();\n    iframeDocument.write(lt + script + gt + 'document.F=Object' + lt + '/' + script + gt);\n    iframeDocument.close();\n    createDict = iframeDocument.F;\n    while (length--) delete createDict[PROTOTYPE][enumBugKeys[length]];\n    return createDict();\n  };\n\n  var objectCreate = Object.create || function create(O, Properties) {\n    var result;\n    if (O !== null) {\n      Empty[PROTOTYPE] = anObject(O);\n      result = new Empty();\n      Empty[PROTOTYPE] = null;\n      // add \"__proto__\" for Object.getPrototypeOf polyfill\n      result[IE_PROTO] = O;\n    } else result = createDict();\n    return Properties === undefined ? result : objectDefineProperties(result, Properties);\n  };\n\n  hiddenKeys[IE_PROTO] = true;\n\n  var UNSCOPABLES = wellKnownSymbol('unscopables');\n\n\n  var ArrayPrototype = Array.prototype;\n\n  // Array.prototype[@@unscopables]\n  // https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\n  if (ArrayPrototype[UNSCOPABLES] == undefined) {\n    hide(ArrayPrototype, UNSCOPABLES, objectCreate(null));\n  }\n\n  // add a key to Array.prototype[@@unscopables]\n  var addToUnscopables = function (key) {\n    ArrayPrototype[UNSCOPABLES][key] = true;\n  };\n\n  var internalIncludes = arrayIncludes(true);\n\n  // `Array.prototype.includes` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.includes\n  _export({ target: 'Array', proto: true }, {\n    includes: function includes(el /* , fromIndex = 0 */) {\n      return internalIncludes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n    }\n  });\n\n  // https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\n  addToUnscopables('includes');\n\n  var aFunction = function (it) {\n    if (typeof it != 'function') {\n      throw TypeError(String(it) + ' is not a function');\n    } return it;\n  };\n\n  // optional / simple context binding\n  var bindContext = function (fn, that, length) {\n    aFunction(fn);\n    if (that === undefined) return fn;\n    switch (length) {\n      case 0: return function () {\n        return fn.call(that);\n      };\n      case 1: return function (a) {\n        return fn.call(that, a);\n      };\n      case 2: return function (a, b) {\n        return fn.call(that, a, b);\n      };\n      case 3: return function (a, b, c) {\n        return fn.call(that, a, b, c);\n      };\n    }\n    return function (/* ...args */) {\n      return fn.apply(that, arguments);\n    };\n  };\n\n  var call = Function.call;\n\n  var entryUnbind = function (CONSTRUCTOR, METHOD, length) {\n    return bindContext(call, global[CONSTRUCTOR].prototype[METHOD], length);\n  };\n\n  var includes = entryUnbind('Array', 'includes');\n\n  // `ToObject` abstract operation\n  // https://tc39.github.io/ecma262/#sec-toobject\n  var toObject = function (argument) {\n    return Object(requireObjectCoercible(argument));\n  };\n\n  // 19.1.2.1 Object.assign(target, source, ...)\n\n\n\n\n\n  var nativeAssign = Object.assign;\n\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var objectAssign = !nativeAssign || fails(function () {\n    var A = {};\n    var B = {};\n    // eslint-disable-next-line no-undef\n    var symbol = Symbol();\n    var alphabet = 'abcdefghijklmnopqrst';\n    A[symbol] = 7;\n    alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n    return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;\n  }) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n    var T = toObject(target);\n    var argumentsLength = arguments.length;\n    var index = 1;\n    var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;\n    var propertyIsEnumerable = objectPropertyIsEnumerable.f;\n    while (argumentsLength > index) {\n      var S = indexedObject(arguments[index++]);\n      var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n      var length = keys.length;\n      var j = 0;\n      var key;\n      while (length > j) if (propertyIsEnumerable.call(S, key = keys[j++])) T[key] = S[key];\n    } return T;\n  } : nativeAssign;\n\n  // `Object.assign` method\n  // https://tc39.github.io/ecma262/#sec-object.assign\n  _export({ target: 'Object', stat: true, forced: Object.assign !== objectAssign }, { assign: objectAssign });\n\n  var path = global;\n\n  var assign = path.Object.assign;\n\n  var UNDEF = \"undefined\";\n  var version = \"2.1.0\";\n  var isBrowser = typeof window != UNDEF && typeof document != UNDEF;\n  if (!isBrowser) {\n      console.log(\"Rangy can only run in a browser\");\n  }\n  var features = {\n      implementsDomRange: true,\n      implementsTextRange: false,\n      htmlParsingConforms: true,\n      crashyTextNodes: false,\n      implementsWinGetSelection: true,\n      implementsDocSelection: false,\n      selectionSupportsMultipleRanges: false,\n      implementsControlRange: false,\n  };\n  /** @deprecated all configs is const! */\n  var config = {\n      preferTextRange: false,\n      checkSelectionRanges: true,\n  };\n  // RangePrototype,\n  // rangePrototype: new RangePrototype(),\n  // selectionPrototype: new SelectionPrototype(),\n  function onDocReady(listener) {\n      if (!isBrowser)\n          return;\n      if (document.readyState == \"complete\") {\n          listener();\n      }\n      else {\n          var onLoaded_1 = function () {\n              document.removeEventListener(\"DOMContentLoaded\", onLoaded_1, false);\n              listener();\n          };\n          document.addEventListener(\"DOMContentLoaded\", onLoaded_1, false);\n      }\n  }\n\n  // Trio of functions taken from Peter Michaux's article:\n  // http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\n  function isHostMethod(o, p) {\n      var t = typeof o[p];\n      return t == \"function\" || (!!(t == \"object\" && o[p])) || t == \"unknown\";\n  }\n  function isHostObject(o, p) {\n      return !!(typeof o[p] == \"object\" && o[p]);\n  }\n  function isHostProperty(o, p) {\n      return typeof o[p] != \"undefined\";\n  }\n  // Creates a convenience function to save verbose repeated calls to tests functions\n  function createMultiplePropertyTest(testFunc) {\n      return function (o, props) {\n          var i = props.length;\n          while (i--) {\n              if (!testFunc(o, props[i])) {\n                  return false;\n              }\n          }\n          return true;\n      };\n  }\n  // Next trio of functions are a convenience to save verbose repeated calls to previous two functions\n  var areHostMethods = createMultiplePropertyTest(isHostMethod);\n  var areHostObjects = createMultiplePropertyTest(isHostObject);\n  var areHostProperties = createMultiplePropertyTest(isHostProperty);\n  function getBody(doc) {\n      return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\n  }\n\n  var util = /*#__PURE__*/Object.freeze({\n    isHostMethod: isHostMethod,\n    isHostObject: isHostObject,\n    isHostProperty: isHostProperty,\n    areHostMethods: areHostMethods,\n    areHostObjects: areHostObjects,\n    areHostProperties: areHostProperties,\n    getBody: getBody\n  });\n\n  var Module = /** @class */ (function () {\n      function Module(name, dependencies) {\n          this.name = name;\n          this.dependencies = dependencies;\n      }\n      Module.prototype.fail = function (reason) {\n          console.log(\"Module '\" + this.name + \"' failed to load: \" + reason);\n          throw new Error(reason);\n      };\n      Module.prototype.warn = function (msg) {\n          console.log(\"Module \" + this.name + \": \" + msg);\n      };\n      Module.prototype.createError = function (msg) {\n          return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\n      };\n      return Module;\n  }());\n\n  function DOMException(codeName) {\n      this.code = this[codeName];\n      this.codeName = codeName;\n      this.message = \"DOMException: \" + this.codeName;\n  }\n  DOMException.prototype = {\n      INDEX_SIZE_ERR: 1,\n      HIERARCHY_REQUEST_ERR: 3,\n      WRONG_DOCUMENT_ERR: 4,\n      NO_MODIFICATION_ALLOWED_ERR: 7,\n      NOT_FOUND_ERR: 8,\n      NOT_SUPPORTED_ERR: 9,\n      INVALID_STATE_ERR: 11,\n      INVALID_NODE_TYPE_ERR: 24,\n  };\n  //Object.assign(DOMException, DOMException.prototype);\n  DOMException.prototype.toString = function () {\n      return this.message;\n  };\n\n  var module = new Module(\"DomUtil\", []);\n  // DOM utility methods used by Rangy\n  // /* build:replaceWith(api) */rangy/* build:replaceEnd */.createCoreModule(\"DomUtil\", [], function(api, module) {\n\n  var UNDEF$1 = \"undefined\";\n  // Perform feature tests\n  if (!areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n      module.fail(\"document missing a Node creation method\");\n  }\n  if (!isHostMethod(document, \"getElementsByTagName\")) {\n      module.fail(\"document missing getElementsByTagName method\");\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  // Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\n  function isHtmlNamespace(node) {\n      var ns;\n      return typeof node.namespaceURI == UNDEF$1 || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n  }\n  function parentElement(node) {\n      var parent = node.parentNode;\n      return (parent.nodeType == 1) ? parent : null;\n  }\n  function getNodeIndex(node) {\n      var i = 0;\n      while ((node = node.previousSibling)) {\n          ++i;\n      }\n      return i;\n  }\n  function getNodeLength(node) {\n      switch (node.nodeType) {\n          case 7:\n          case 10:\n              return 0;\n          case 3:\n          case 8:\n              return node.length;\n          default:\n              return node.childNodes.length;\n      }\n  }\n  function getCommonAncestor(node1, node2) {\n      var ancestors = [], n;\n      for (n = node1; n; n = n.parentNode) {\n          ancestors.push(n);\n      }\n      for (n = node2; n; n = n.parentNode) {\n          if (ancestors.includes(n)) {\n              return n;\n          }\n      }\n      return null;\n  }\n  function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n      var n = selfIsAncestor ? descendant : descendant.parentNode;\n      while (n) {\n          if (n === ancestor) {\n              return true;\n          }\n          else {\n              n = n.parentNode;\n          }\n      }\n      return false;\n  }\n  function isOrIsAncestorOf(ancestor, descendant) {\n      return isAncestorOf(ancestor, descendant, true);\n  }\n  function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n      var p, n = selfIsAncestor ? node : node.parentNode;\n      while (n) {\n          p = n.parentNode;\n          if (p === ancestor) {\n              return n;\n          }\n          n = p;\n      }\n      return null;\n  }\n  // https://basarat.gitbooks.io/typescript/docs/types/typeGuard.html#user-defined-type-guards\n  function isCharacterDataNode(node) {\n      var t = node.nodeType;\n      return t == 3 || t == 4 || t == 8; // Text, CDataSection or Comment\n  }\n  function isTextOrCommentNode(node) {\n      if (!node) {\n          return false;\n      }\n      var t = node.nodeType;\n      return t == 3 || t == 8; // Text or Comment\n  }\n  function insertAfter(node, precedingNode) {\n      var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n      if (nextNode) {\n          parent.insertBefore(node, nextNode);\n      }\n      else {\n          parent.appendChild(node);\n      }\n      return node;\n  }\n  // Note that we cannot use splitText() because it is bugridden in IE 9.\n  function splitDataNode(node, index, positionsToPreserve) {\n      var newNode = node.cloneNode(false);\n      newNode.deleteData(0, index);\n      node.deleteData(index, node.length - index);\n      insertAfter(newNode, node);\n      // Preserve positions\n      if (positionsToPreserve) {\n          for (var i = 0, position; position = positionsToPreserve[i++];) {\n              // Handle case where position was inside the portion of node after the split point\n              if (position.node == node && position.offset > index) {\n                  position.node = newNode;\n                  position.offset -= index;\n              }\n              // Handle the case where the position is a node offset within node's parent\n              else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                  ++position.offset;\n              }\n          }\n      }\n      return newNode;\n  }\n  function getDocument(node) {\n      if (node.nodeType == 9) {\n          return node;\n      }\n      else if (typeof node.ownerDocument != UNDEF$1) {\n          return node.ownerDocument;\n      }\n      else if (typeof node.document != UNDEF$1) {\n          return node.document;\n      }\n      else if (node.parentNode) {\n          return getDocument(node.parentNode);\n      }\n      else {\n          throw module.createError(\"getDocument: no document found for node\");\n      }\n  }\n  function getWindow(node) {\n      var doc = getDocument(node);\n      if (typeof doc.defaultView != UNDEF$1) {\n          return doc.defaultView;\n      }\n      else if (typeof doc.parentWindow != UNDEF$1) {\n          return doc.parentWindow;\n      }\n      else {\n          throw module.createError(\"Cannot get a window object for node\");\n      }\n  }\n  function getIframeDocument(iframeEl) {\n      if (typeof iframeEl.contentDocument != UNDEF$1) {\n          return iframeEl.contentDocument;\n      }\n      else if (typeof iframeEl.contentWindow != UNDEF$1) {\n          return iframeEl.contentWindow.document;\n      }\n      else {\n          throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n      }\n  }\n  function getIframeWindow(iframeEl) {\n      if (typeof iframeEl.contentWindow != UNDEF$1) {\n          return iframeEl.contentWindow;\n      }\n      else if (typeof iframeEl.contentDocument != UNDEF$1) {\n          return iframeEl.contentDocument.defaultView;\n      }\n      else {\n          throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n      }\n  }\n  // This looks bad. Is it worth it?\n  function isWindow(obj) {\n      return obj && isHostMethod(obj, \"setTimeout\") && isHostObject(obj, \"document\");\n  }\n  function isIframe(o) {\n      return o.nodeType == 1 && o.tagName.toLowerCase() == \"iframe\";\n  }\n  function getContentDocument(obj, module, methodName) {\n      var doc;\n      if (!obj) {\n          doc = document;\n      }\n      // Test if a DOM node has been passed and obtain a document object for it if so\n      else if (isHostProperty(obj, \"nodeType\")) {\n          doc = isIframe(obj) ? getIframeDocument(obj) : getDocument(obj);\n      }\n      // Test if the doc parameter appears to be a Window object\n      else if (isWindow(obj)) {\n          doc = obj.document;\n      }\n      if (!doc) {\n          throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n      }\n      return doc;\n  }\n  function getRootContainer(node) {\n      var parent;\n      while ((parent = node.parentNode)) {\n          node = parent;\n      }\n      return node;\n  }\n  function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n      // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n      var nodeC, root, childA, childB, n;\n      if (nodeA == nodeB) {\n          // Case 1: nodes are the same\n          return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n      }\n      else if ((nodeC = getClosestAncestorIn(nodeB, nodeA, true))) {\n          // Case 2: node C (container B or an ancestor) is a child node of A\n          return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n      }\n      else if ((nodeC = getClosestAncestorIn(nodeA, nodeB, true))) {\n          // Case 3: node C (container A or an ancestor) is a child node of B\n          return getNodeIndex(nodeC) < offsetB ? -1 : 1;\n      }\n      else {\n          root = getCommonAncestor(nodeA, nodeB);\n          if (!root) {\n              throw new Error(\"comparePoints error: nodes have no common ancestor\");\n          }\n          // Case 4: containers are siblings or descendants of siblings\n          childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n          childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n          if (childA === childB) {\n              // This shouldn't be possible\n              throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n          }\n          else {\n              n = root.firstChild;\n              while (n) {\n                  if (n === childA) {\n                      return -1;\n                  }\n                  else if (n === childB) {\n                      return 1;\n                  }\n                  n = n.nextSibling;\n              }\n          }\n      }\n  }\n  function inspectNode(node) {\n      if (!node) {\n          return \"[No node]\";\n      }\n      if (isCharacterDataNode(node)) {\n          return '\"' + node.data + '\"';\n      }\n      if (node.nodeType == 1) {\n          var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n          return \"<\" + node.nodeName + idAttr +\n              \">[index:\" + getNodeIndex(node) +\n              \",length:\" + node.childNodes.length + \"][\" +\n              (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n      }\n      return node.nodeName;\n  }\n  function fragmentFromNodeChildren(node) {\n      var fragment = getDocument(node).createDocumentFragment(), child;\n      while ((child = node.firstChild)) {\n          fragment.appendChild(child);\n      }\n      return fragment;\n  }\n  var _getComputedStyleProperty;\n  if (typeof window.getComputedStyle != UNDEF$1) {\n      _getComputedStyleProperty = function (el, propName) {\n          return getWindow(el).getComputedStyle(el, null)[propName];\n      };\n  }\n  else if (typeof document.documentElement.currentStyle != UNDEF$1) {\n      _getComputedStyleProperty = function (el, propName) {\n          return el.currentStyle ? el.currentStyle[propName] : \"\";\n      };\n  }\n  else {\n      module.fail(\"No means of obtaining computed style properties found\");\n  }\n  var getComputedStyleProperty = _getComputedStyleProperty;\n  function createTestElement(doc, html, contentEditable) {\n      var body = getBody(doc);\n      var el = doc.createElement(\"div\");\n      el.contentEditable = \"\" + !!contentEditable;\n      if (html) {\n          el.innerHTML = html;\n      }\n      // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)\n      var bodyFirstChild = body.firstChild;\n      if (bodyFirstChild) {\n          body.insertBefore(el, bodyFirstChild);\n      }\n      else {\n          body.appendChild(el);\n      }\n      return el;\n  }\n  function removeNode(node) {\n      return node.parentNode.removeChild(node);\n  }\n  var NodeIterator = /** @class */ (function () {\n      function NodeIterator(root) {\n          this.root = root;\n          this._next = root;\n      }\n      NodeIterator.prototype.hasNext = function () {\n          return !!this._next;\n      };\n      NodeIterator.prototype.next = function () {\n          var n = NodeIterator._current = this._next;\n          var child, next;\n          if (NodeIterator._current) {\n              child = n.firstChild;\n              if (child) {\n                  this._next = child;\n              }\n              else {\n                  next = null;\n                  while ((n !== this.root) && !(next = n.nextSibling)) {\n                      n = n.parentNode;\n                  }\n                  this._next = next;\n              }\n          }\n          return NodeIterator._current;\n      };\n      NodeIterator.prototype.detach = function () {\n          NodeIterator._current = this._next = this.root = null;\n      };\n      NodeIterator._current = null;\n      return NodeIterator;\n  }());\n  function createIterator(root) {\n      return new NodeIterator(root);\n  }\n  var DomPosition = /** @class */ (function () {\n      function DomPosition(node, offset) {\n          this.node = node;\n          this.offset = offset;\n      }\n      DomPosition.prototype.equals = function (pos) {\n          return !!pos && this.node === pos.node && this.offset == pos.offset;\n      };\n      DomPosition.prototype.inspect = function () {\n          return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n      };\n      DomPosition.prototype.toString = function () {\n          return this.inspect();\n      };\n      return DomPosition;\n  }());\n\n  var dom = /*#__PURE__*/Object.freeze({\n    getBody: getBody,\n    isHtmlNamespace: isHtmlNamespace,\n    parentElement: parentElement,\n    getNodeIndex: getNodeIndex,\n    getNodeLength: getNodeLength,\n    getCommonAncestor: getCommonAncestor,\n    isAncestorOf: isAncestorOf,\n    isOrIsAncestorOf: isOrIsAncestorOf,\n    getClosestAncestorIn: getClosestAncestorIn,\n    isCharacterDataNode: isCharacterDataNode,\n    isTextOrCommentNode: isTextOrCommentNode,\n    insertAfter: insertAfter,\n    splitDataNode: splitDataNode,\n    getDocument: getDocument,\n    getWindow: getWindow,\n    getIframeDocument: getIframeDocument,\n    getIframeWindow: getIframeWindow,\n    isWindow: isWindow,\n    getContentDocument: getContentDocument,\n    getRootContainer: getRootContainer,\n    comparePoints: comparePoints,\n    inspectNode: inspectNode,\n    fragmentFromNodeChildren: fragmentFromNodeChildren,\n    getComputedStyleProperty: getComputedStyleProperty,\n    createTestElement: createTestElement,\n    removeNode: removeNode,\n    NodeIterator: NodeIterator,\n    createIterator: createIterator,\n    DomPosition: DomPosition\n  });\n\n  /*! *****************************************************************************\r\n  Copyright (c) Microsoft Corporation. All rights reserved.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n  this file except in compliance with the License. You may obtain a copy of the\r\n  License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n  MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n  See the Apache Version 2.0 License for specific language governing permissions\r\n  and limitations under the License.\r\n  ***************************************************************************** */\r\n  /* global Reflect, Promise */\r\n\r\n  var extendStatics = function(d, b) {\r\n      extendStatics = Object.setPrototypeOf ||\r\n          ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n          function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n      return extendStatics(d, b);\r\n  };\r\n\r\n  function __extends(d, b) {\r\n      extendStatics(d, b);\r\n      function __() { this.constructor = d; }\r\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n  }\n\n  function isNonTextPartiallySelected(node, range) {\n      return (node.nodeType != 3) &&\n          (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\n  var rootContainerNodeTypes = [2, 9, 11];\n  var readonlyNodeTypes = [5, 6, 10, 12];\n  var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\n  var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\n  function createAncestorFinder(nodeTypes) {\n      return function (node, selfIsAncestor) {\n          var t, n = selfIsAncestor ? node : node.parentNode;\n          while (n) {\n              t = n.nodeType;\n              if (nodeTypes.includes(t)) {\n                  return n;\n              }\n              n = n.parentNode;\n          }\n          return null;\n      };\n  }\n  var getDocumentOrFragmentContainer = createAncestorFinder([9, 11]);\n  var getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\n  var getDocTypeNotationEntityAncestor = createAncestorFinder([6, 10, 12]);\n  var getElementAncestor = createAncestorFinder([1]);\n  function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n      if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n          throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n      }\n  }\n  function assertValidNodeType(node, invalidTypes) {\n      if (!invalidTypes.includes(node.nodeType)) {\n          throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n      }\n  }\n  function assertValidOffset(node, offset) {\n      if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n          throw new DOMException(\"INDEX_SIZE_ERR\");\n      }\n  }\n  function assertSameDocumentOrFragment(node1, node2) {\n      if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n          throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n      }\n  }\n  function assertNodeNotReadOnly(node) {\n      if (getReadonlyAncestor(node, true)) {\n          throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n      }\n  }\n  function assertNode(node, codeName) {\n      if (!node) {\n          throw new DOMException(codeName);\n      }\n  }\n  function isValidOffset(node, offset) {\n      return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n  }\n  function isRangeValid(range) {\n      return (!!range.startContainer && !!range.endContainer &&\n          getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&\n          isValidOffset(range.startContainer, range.startOffset) &&\n          isValidOffset(range.endContainer, range.endOffset));\n  }\n  function assertRangeValid(range) {\n      if (!isRangeValid(range)) {\n          throw new Error(\"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + range.inspect() + \")\");\n      }\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  function getRangeDocument(range) {\n      return range.document || getDocument(range.startContainer);\n  }\n  // Updates commonAncestorContainer and collapsed after boundary change\n  function updateCollapsedAndCommonAncestor(range) {\n      range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n      range.commonAncestorContainer = range.collapsed ?\n          range.startContainer : getCommonAncestor(range.startContainer, range.endContainer);\n  }\n  function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n      range.startContainer = startContainer;\n      range.startOffset = startOffset;\n      range.endContainer = endContainer;\n      range.endOffset = endOffset;\n      range.document = getDocument(startContainer);\n      updateCollapsedAndCommonAncestor(range);\n  }\n  var rangeProperties = [\n      \"startContainer\",\n      \"startOffset\",\n      \"endContainer\",\n      \"endOffset\",\n      \"collapsed\",\n      \"commonAncestorContainer\"\n  ];\n  // note RangeBase's method list == const rangeProperties above\n  var RangeBase = /** @class */ (function () {\n      function RangeBase() {\n      }\n      return RangeBase;\n  }());\n  var DomRangeBase = /** @class */ (function (_super) {\n      __extends(DomRangeBase, _super);\n      function DomRangeBase(doc) {\n          var _this = _super.call(this) || this;\n          updateBoundaries(_this, doc, 0, doc, 0);\n          return _this;\n      }\n      return DomRangeBase;\n  }(RangeBase));\n\n  // RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\n\n\n  var RangeIterator = /** @class */ (function () {\n      function RangeIterator(range, clonePartiallySelectedTextNodes) {\n          this.range = range;\n          this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n          // TODO the following properties are migrated from RangeIterator.prototype\n          // now, those are in RangeIterator's instance\n          // so we can remove `detach` method\n          this._current = null;\n          this._next = null;\n          this._first = null;\n          this._last = null;\n          this.isSingleCharacterDataNode = false;\n          if (!range.collapsed) {\n              this.sc = range.startContainer;\n              this.so = range.startOffset;\n              this.ec = range.endContainer;\n              this.eo = range.endOffset;\n              var root = range.commonAncestorContainer;\n              if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                  this.isSingleCharacterDataNode = true;\n                  this._first = this._last = this._next = this.sc;\n              }\n              else {\n                  this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                      this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                  this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                      this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n              }\n          }\n      }\n      RangeIterator.prototype.reset = function () {\n          this._current = null;\n          this._next = this._first;\n      };\n      RangeIterator.prototype.hasNext = function () {\n          return !!this._next;\n      };\n      RangeIterator.prototype.detach = function () {\n          this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n      };\n      RangeIterator.prototype.next = function () {\n          // Move to next node\n          var current = this._current = this._next;\n          if (current) {\n              this._next = (current !== this._last) ? current.nextSibling : null;\n              // Check for partially selected text nodes\n              if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                  if (current === this.ec) {\n                      current = current.cloneNode(true);\n                      current.deleteData(this.eo, current.length - this.eo);\n                  }\n                  if (this._current === this.sc) {\n                      current = current.cloneNode(true);\n                      current.deleteData(0, this.so);\n                  }\n              }\n          }\n          return current;\n      };\n      RangeIterator.prototype.remove = function () {\n          var current = this._current, start, end;\n          if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n              start = (current === this.sc) ? this.so : 0;\n              end = (current === this.ec) ? this.eo : current.length;\n              if (start != end) {\n                  current.deleteData(start, end - start);\n              }\n          }\n          else {\n              if (current.parentNode) {\n                  removeNode(current);\n              }\n          }\n      };\n      // Checks if the current node is partially selected\n      RangeIterator.prototype.isPartiallySelectedSubtree = function () {\n          var current = this._current;\n          return isNonTextPartiallySelected(current, this.range);\n      };\n      RangeIterator.prototype.getSubtreeIterator = function () {\n          var subRange;\n          if (this.isSingleCharacterDataNode) {\n              subRange = this.range.cloneRange();\n              subRange.collapse(false);\n          }\n          else {\n              subRange = new DomRange(getRangeDocument(this.range));\n              var current = this._current;\n              var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n              if (isOrIsAncestorOf(current, this.sc)) {\n                  startContainer = this.sc;\n                  startOffset = this.so;\n              }\n              if (isOrIsAncestorOf(current, this.ec)) {\n                  endContainer = this.ec;\n                  endOffset = this.eo;\n              }\n              updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n          }\n          return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n      };\n      return RangeIterator;\n  }()); // RangeIterator\n  function cloneSubtree(iterator) {\n      var partiallySelected;\n      for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next();) {\n          partiallySelected = iterator.isPartiallySelectedSubtree();\n          node = node.cloneNode(!partiallySelected);\n          if (partiallySelected) {\n              subIterator = iterator.getSubtreeIterator();\n              node.appendChild(cloneSubtree(subIterator));\n              subIterator.detach();\n          }\n          if (node.nodeType == 10) { // DocumentType\n              throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n          }\n          frag.appendChild(node);\n      }\n      return frag;\n  }\n  function iterateSubtree(iterator, func, iteratorState) {\n      if (iteratorState === void 0) { iteratorState = { stop: false }; }\n      var it, n;\n      for (var node, subIterator; node = iterator.next();) {\n          if (iterator.isPartiallySelectedSubtree()) {\n              if (func(node) === false) {\n                  iteratorState.stop = true;\n                  return;\n              }\n              else {\n                  // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                  // the node selected by the Range.\n                  subIterator = iterator.getSubtreeIterator();\n                  iterateSubtree(subIterator, func, iteratorState);\n                  subIterator.detach();\n                  if (iteratorState.stop) {\n                      return;\n                  }\n              }\n          }\n          else {\n              // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n              // descendants\n              it = createIterator(node);\n              while ((n = it.next())) {\n                  if (func(n) === false) {\n                      iteratorState.stop = true;\n                      return;\n                  }\n              }\n          }\n      }\n  }\n  function deleteSubtree(iterator) {\n      var subIterator;\n      while (iterator.next()) {\n          if (iterator.isPartiallySelectedSubtree()) {\n              subIterator = iterator.getSubtreeIterator();\n              deleteSubtree(subIterator);\n              subIterator.detach();\n          }\n          else {\n              iterator.remove();\n          }\n      }\n  }\n  function extractSubtree(iterator) {\n      for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next();) {\n          if (iterator.isPartiallySelectedSubtree()) {\n              node = node.cloneNode(false);\n              subIterator = iterator.getSubtreeIterator();\n              node.appendChild(extractSubtree(subIterator));\n              subIterator.detach();\n          }\n          else {\n              iterator.remove();\n          }\n          if (node.nodeType == 10) { // DocumentType\n              throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n          }\n          frag.appendChild(node);\n      }\n      return frag;\n  }\n\n  function getRangeRoot(range) {\n      return getRootContainer(range.startContainer);\n  }\n  function insertNodeAtPosition(node, n, o) {\n      var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n      if (isCharacterDataNode(n)) {\n          if (o == n.length) {\n              insertAfter(node, n);\n          }\n          else {\n              n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n          }\n      }\n      else if (o >= n.childNodes.length) {\n          n.appendChild(node);\n      }\n      else {\n          n.insertBefore(node, n.childNodes[o]);\n      }\n      return firstNodeInserted;\n  }\n  function rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n      assertRangeValid(rangeA);\n      assertRangeValid(rangeB);\n      if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n          throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n      }\n      var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset), endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n      return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n  }\n  function getNodesInRange(range, nodeTypes, filter) {\n      var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n      var filterExists = !!filter;\n      if (filterNodeTypes) {\n          regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n      }\n      var nodes = [];\n      iterateSubtree(new RangeIterator(range, false), function (node) {\n          if (filterNodeTypes && !regex.test(node.nodeType.toString())) {\n              return;\n          }\n          if (filterExists && !filter(node)) {\n              return;\n          }\n          // Don't include a boundary container if it is a character data node and the range does not contain any\n          // of its character data. See issue 190.\n          var sc = range.startContainer;\n          if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n              return;\n          }\n          var ec = range.endContainer;\n          if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n              return;\n          }\n          nodes.push(node);\n      });\n      return nodes;\n  }\n  function rangeInspect(range) {\n      var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n      return \"[\" + name + \"(\" + inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n          inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n  }\n  function rangeToHtml(range) {\n      assertRangeValid(range);\n      var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n      container.appendChild(range.cloneContents());\n      return container.innerHTML;\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  var s2s = 0, s2e = 1, e2e = 2, e2s = 3;\n  var n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\n  var comparisonConstants = {\n      START_TO_START: s2s,\n      START_TO_END: s2e,\n      END_TO_END: e2e,\n      END_TO_START: e2s,\n      NODE_BEFORE: n_b,\n      NODE_AFTER: n_a,\n      NODE_BEFORE_AND_AFTER: n_b_a,\n      NODE_INSIDE: n_i,\n  };\n  /**\n   * @deprecated please replace by: `class C extends createPrototypeRange(..){..} Object.assign(C, comparisonConstants)`\n   * @param C constructor (a class)\n   */\n  function copyComparisonConstants(C) {\n      Object.assign(C, comparisonConstants);\n      Object.assign(C.prototype, comparisonConstants);\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  function createDomRangeP1(Base) {\n      return /** @class */ (function (_super) {\n          __extends(class_1, _super);\n          function class_1() {\n              return _super !== null && _super.apply(this, arguments) || this;\n          }\n          class_1.prototype.compareBoundaryPoints = function (how, range) {\n              assertRangeValid(this);\n              assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n              var nodeA, offsetA, nodeB, offsetB;\n              var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n              var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n              nodeA = this[prefixA + \"Container\"];\n              offsetA = this[prefixA + \"Offset\"];\n              nodeB = range[prefixB + \"Container\"];\n              offsetB = range[prefixB + \"Offset\"];\n              return comparePoints(nodeA, offsetA, nodeB, offsetB);\n          };\n          class_1.prototype.insertNode = function (node) {\n              assertRangeValid(this);\n              assertValidNodeType(node, insertableNodeTypes);\n              assertNodeNotReadOnly(this.startContainer);\n              if (isOrIsAncestorOf(node, this.startContainer)) {\n                  throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n              }\n              // No check for whether the container of the start of the Range is of a type that does not allow\n              // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n              // to add the node\n              var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n              this.setStartBefore(firstNodeInserted);\n          };\n          class_1.prototype.cloneContents = function () {\n              assertRangeValid(this);\n              var clone, frag;\n              if (this.collapsed) {\n                  return getRangeDocument(this).createDocumentFragment();\n              }\n              else {\n                  if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                      clone = this.startContainer.cloneNode(true);\n                      clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                      frag = getRangeDocument(this).createDocumentFragment();\n                      frag.appendChild(clone);\n                      return frag;\n                  }\n                  else {\n                      var iterator = new RangeIterator(this, true);\n                      clone = cloneSubtree(iterator);\n                      iterator.detach();\n                  }\n                  return clone;\n              }\n          };\n          class_1.prototype.canSurroundContents = function () {\n              assertRangeValid(this);\n              assertNodeNotReadOnly(this.startContainer);\n              assertNodeNotReadOnly(this.endContainer);\n              // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n              // no non-text nodes.\n              // see https://developer.mozilla.org/en-US/docs/Web/API/Range/surroundContents\n              var iterator = new RangeIterator(this, true);\n              var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                  (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n              iterator.detach();\n              return !boundariesInvalid;\n          };\n          class_1.prototype.surroundContents = function (newParent) {\n              assertValidNodeType(newParent, surroundNodeTypes);\n              if (!this.canSurroundContents()) {\n                  throw new DOMException(\"INVALID_STATE_ERR\");\n              }\n              // Extract the contents\n              var content = this.extractContents();\n              // Clear the children of the node\n              if (newParent.hasChildNodes()) {\n                  while (newParent.lastChild) {\n                      newParent.removeChild(newParent.lastChild);\n                  }\n              }\n              // Insert the new node and add the extracted contents\n              insertNodeAtPosition(newParent, this.startContainer, this.startOffset);\n              newParent.appendChild(content);\n              this.selectNode(newParent);\n          };\n          class_1.prototype.cloneRange = function () {\n              assertRangeValid(this);\n              var range = new DomRange(getRangeDocument(this));\n              for (var _i = 0, rangeProperties_1 = rangeProperties; _i < rangeProperties_1.length; _i++) {\n                  var prop = rangeProperties_1[_i];\n                  range[prop] = this[prop];\n              }\n              return range;\n          };\n          class_1.prototype.toString = function () {\n              assertRangeValid(this);\n              var sc = this.startContainer;\n              if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                  return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n              }\n              else {\n                  var textParts = [], iterator = new RangeIterator(this, true);\n                  iterateSubtree(iterator, function (node) {\n                      // Accept only text or CDATA nodes, not comments\n                      if (node.nodeType == 3 || node.nodeType == 4) {\n                          textParts.push(node.data);\n                      }\n                  });\n                  iterator.detach();\n                  return textParts.join(\"\");\n              }\n          };\n          // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n          // been removed from Mozilla.\n          class_1.prototype.compareNode = function (node) {\n              assertRangeValid(this);\n              var parent = node.parentNode;\n              var nodeIndex = getNodeIndex(node);\n              if (!parent) {\n                  throw new DOMException(\"NOT_FOUND_ERR\");\n              }\n              var startComparison = this.comparePoint(parent, nodeIndex), endComparison = this.comparePoint(parent, nodeIndex + 1);\n              if (startComparison < 0) { // Node starts before\n                  return (endComparison > 0) ? n_b_a : n_b;\n              }\n              else {\n                  return (endComparison > 0) ? n_a : n_i;\n              }\n          };\n          /**\n           * Returns −1 if the point is before the range, 0 if the point is\n           * in the range, and 1 if the point is after the range.\n           */\n          class_1.prototype.comparePoint = function (node, offset) {\n              assertRangeValid(this);\n              assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n              assertSameDocumentOrFragment(node, this.startContainer);\n              if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                  return -1;\n              }\n              else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                  return 1;\n              }\n              return 0;\n          };\n          // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n          // discussion and base code for this implementation at issue 67.\n          // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n          // Thanks to Aleks Williams.\n          class_1.prototype.createContextualFragment = function (fragment) {\n              // \"Let node the context object's start's node.\"\n              var node = this.startContainer;\n              var doc = getDocument(node);\n              // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n              // exception and abort these steps.\"\n              if (!node) {\n                  throw new DOMException(\"INVALID_STATE_ERR\");\n              }\n              // \"Let element be as follows, depending on node's interface:\"\n              // Document, Document Fragment: null\n              var el = null;\n              // \"Element: node\"\n              if (node.nodeType == 1) {\n                  el = node;\n                  // \"Text, Comment: node's parentElement\"\n              }\n              else if (isCharacterDataNode(node)) {\n                  el = parentElement(node);\n              }\n              // \"If either element is null or element's ownerDocument is an HTML document\n              // and element's local name is \"html\" and element's namespace is the HTML\n              // namespace\"\n              if (el === null || (el.nodeName == \"HTML\" &&\n                  isHtmlNamespace(getDocument(el).documentElement) &&\n                  isHtmlNamespace(el))) {\n                  // \"let element be a new Element with \"body\" as its local name and the HTML\n                  // namespace as its namespace.\"\"\n                  el = doc.createElement(\"body\");\n              }\n              else {\n                  el = el.cloneNode(false);\n              }\n              // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n              // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n              // \"In either case, the algorithm must be invoked with fragment as the input\n              // and element as the context element.\"\n              el.innerHTML = fragment;\n              // \"If this raises an exception, then abort these steps. Otherwise, let new\n              // children be the nodes returned.\"\n              // \"Let fragment be a new DocumentFragment.\"\n              // \"Append all new children to fragment.\"\n              // \"Return fragment.\"\n              return fragmentFromNodeChildren(el);\n          };\n          class_1.prototype.toHtml = function () {\n              return rangeToHtml(this);\n          };\n          // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n          // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n          class_1.prototype.intersectsNode = function (node, touchingIsIntersecting) {\n              assertRangeValid(this);\n              if (getRootContainer(node) != getRangeRoot(this)) {\n                  return false;\n              }\n              var parent = node.parentNode, offset = getNodeIndex(node);\n              if (!parent) {\n                  return true;\n              }\n              var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset), endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n              return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n          };\n          class_1.prototype.isPointInRange = function (node, offset) {\n              assertRangeValid(this);\n              assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n              assertSameDocumentOrFragment(node, this.startContainer);\n              return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                  (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n          };\n          // The methods below are non-standard and invented by me.\n          class_1.prototype.intersectsRange = function (range) {\n              return rangesIntersect(this, range, false);\n          };\n          class_1.prototype.intersectsOrTouchesRange = function (range) {\n              return rangesIntersect(this, range, true);\n          };\n          class_1.prototype.intersection = function (range) {\n              if (this.intersectsRange(range)) {\n                  var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset), endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n                  var intersectionRange = this.cloneRange();\n                  if (startComparison == -1) {\n                      intersectionRange.setStart(range.startContainer, range.startOffset);\n                  }\n                  if (endComparison == 1) {\n                      intersectionRange.setEnd(range.endContainer, range.endOffset);\n                  }\n                  return intersectionRange;\n              }\n              return null;\n          };\n          class_1.prototype.union = function (range) {\n              if (this.intersectsOrTouchesRange(range)) {\n                  var unionRange = this.cloneRange();\n                  if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                      unionRange.setStart(range.startContainer, range.startOffset);\n                  }\n                  if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                      unionRange.setEnd(range.endContainer, range.endOffset);\n                  }\n                  return unionRange;\n              }\n              else {\n                  throw new DOMException(\"Ranges do not intersect\");\n              }\n          };\n          class_1.prototype.containsNode = function (node, allowPartial) {\n              if (allowPartial) {\n                  return this.intersectsNode(node, false);\n              }\n              else {\n                  return this.compareNode(node) == n_i;\n              }\n          };\n          class_1.prototype.containsNodeContents = function (node) {\n              return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n          };\n          class_1.prototype.containsRange = function (range) {\n              var intersection = this.intersection(range);\n              return intersection !== null && range.equals(intersection);\n          };\n          class_1.prototype.containsNodeText = function (node) {\n              var nodeRange = this.cloneRange();\n              nodeRange.selectNode(node);\n              var textNodes = nodeRange.getNodes([3]);\n              if (textNodes.length > 0) {\n                  nodeRange.setStart(textNodes[0], 0);\n                  var lastTextNode = textNodes.pop();\n                  nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                  return this.containsRange(nodeRange);\n              }\n              else {\n                  return this.containsNodeContents(node);\n              }\n          };\n          class_1.prototype.getNodes = function (nodeTypes, filter) {\n              assertRangeValid(this);\n              return getNodesInRange(this, nodeTypes, filter);\n          };\n          class_1.prototype.getDocument = function () {\n              return getRangeDocument(this);\n          };\n          class_1.prototype.collapseBefore = function (node) {\n              this.setEndBefore(node);\n              this.collapse(false);\n          };\n          class_1.prototype.collapseAfter = function (node) {\n              this.setStartAfter(node);\n              this.collapse(true);\n          };\n          class_1.prototype.getBookmark = function (containerNode) {\n              var doc = getRangeDocument(this);\n              var preSelectionRange = createRange(doc);\n              containerNode = containerNode || getBody(doc);\n              preSelectionRange.selectNodeContents(containerNode);\n              var range = this.intersection(preSelectionRange);\n              var start = 0, end = 0;\n              if (range) {\n                  preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                  start = preSelectionRange.toString().length;\n                  end = start + range.toString().length;\n              }\n              return {\n                  start: start,\n                  end: end,\n                  containerNode: containerNode\n              };\n          };\n          class_1.prototype.moveToBookmark = function (bookmark) {\n              var containerNode = bookmark.containerNode;\n              var charIndex = 0;\n              this.setStart(containerNode, 0);\n              this.collapse(true);\n              var nodeStack = [containerNode], node, foundStart = false, stop = false;\n              var nextCharIndex, i, childNodes;\n              while (!stop && (node = nodeStack.pop())) {\n                  if (node.nodeType == 3) {\n                      nextCharIndex = charIndex + node.length;\n                      if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                          this.setStart(node, bookmark.start - charIndex);\n                          foundStart = true;\n                      }\n                      if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                          this.setEnd(node, bookmark.end - charIndex);\n                          stop = true;\n                      }\n                      charIndex = nextCharIndex;\n                  }\n                  else {\n                      childNodes = node.childNodes;\n                      i = childNodes.length;\n                      while (i--) {\n                          nodeStack.push(childNodes[i]);\n                      }\n                  }\n              }\n          };\n          class_1.prototype.getName = function () {\n              return \"DomRange\";\n          };\n          class_1.prototype.equals = function (range) {\n              return rangesEqual(this, range);\n          };\n          class_1.prototype.isValid = function () {\n              return isRangeValid(this);\n          };\n          class_1.prototype.inspect = function () {\n              return rangeInspect(this);\n          };\n          class_1.prototype.detach = function () {\n              // In DOM4, detach() is now a no-op.\n          };\n          // in rangy1, this method is implement in wrappedselection.js\n          // TODO declare in RangeP1Ex\n          class_1.prototype.select = function (direction) {\n              getSelection(this.getDocument()).setSingleRange(this, direction);\n          };\n          return class_1;\n      }(Base));\n  } // createDomRangeP1\n  function rangesEqual(r1, r2) {\n      return r1.startContainer === r2.startContainer &&\n          r1.startOffset === r2.startOffset &&\n          r1.endContainer === r2.endContainer &&\n          r1.endOffset === r2.endOffset;\n  }\n\n  // Pure JavaScript implementation of DOM Range\n  var module$1 = new Module(\"DomRange\", [\"DomUtil\"]);\n  /*----------------------------------------------------------------------------------------------------------------*/\n  // Utility functions\n  function getBoundaryBeforeNode(node) {\n      return new DomPosition(node.parentNode, getNodeIndex(node));\n  }\n  function getBoundaryAfterNode(node) {\n      return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n  }\n  function splitRangeBoundaries(range, positionsToPreserve) {\n      assertRangeValid(range);\n      var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n      var startEndSame = (sc === ec);\n      if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n          splitDataNode(ec, eo, positionsToPreserve);\n      }\n      if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n          sc = splitDataNode(sc, so, positionsToPreserve);\n          if (startEndSame) {\n              eo -= so;\n              ec = sc;\n          }\n          else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n              eo++;\n          }\n          so = 0;\n      }\n      range.setStartAndEnd(sc, so, ec, eo);\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  function createRangeContentRemover(remover, boundaryUpdater) {\n      return function () {\n          assertRangeValid(this);\n          var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n          var iterator = new RangeIterator(this, true);\n          // Work out where to position the range after content removal\n          var node, boundary;\n          if (sc !== root) {\n              node = getClosestAncestorIn(sc, root, true);\n              boundary = getBoundaryAfterNode(node);\n              sc = boundary.node;\n              so = boundary.offset;\n          }\n          // Check none of the range is read-only\n          iterateSubtree(iterator, assertNodeNotReadOnly);\n          iterator.reset();\n          // Remove the content\n          var returnValue = remover(iterator);\n          iterator.detach();\n          // Move to the new position\n          boundaryUpdater(this, sc, so, sc, so);\n          return returnValue;\n      };\n  }\n  // https://mariusschulz.com/blog/typescript-2-2-mixin-classes\n  function createDomRangeP2(Base, boundaryUpdater) {\n      function createBeforeAfterNodeSetter(isBefore, isStart) {\n          return function (node) {\n              assertValidNodeType(node, beforeAfterNodeTypes);\n              assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n              var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n              (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n          };\n      }\n      function setRangeStart(range, node, offset) {\n          var ec = range.endContainer, eo = range.endOffset;\n          if (node !== range.startContainer || offset !== range.startOffset) {\n              // Check the root containers of the range and the new boundary, and also check whether the new boundary\n              // is after the current end. In either case, collapse the range to the new position\n              if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                  ec = node;\n                  eo = offset;\n              }\n              boundaryUpdater(range, node, offset, ec, eo);\n          }\n      }\n      function setRangeEnd(range, node, offset) {\n          var sc = range.startContainer, so = range.startOffset;\n          if (node !== range.endContainer || offset !== range.endOffset) {\n              // Check the root containers of the range and the new boundary, and also check whether the new boundary\n              // is after the current end. In either case, collapse the range to the new position\n              if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                  sc = node;\n                  so = offset;\n              }\n              boundaryUpdater(range, sc, so, node, offset);\n          }\n      }\n      /*\n              // Set up inheritance\n              var F = function() {};\n              F.prototype = api.rangePrototype;\n              Base.prototype = new F();\n      \n              util.extend(Base.prototype, {\n                 ...\n              });\n      */\n      return /** @class */ (function (_super) {\n          __extends(class_1, _super);\n          function class_1() {\n              var _this = _super !== null && _super.apply(this, arguments) || this;\n              _this.setStartBefore = createBeforeAfterNodeSetter(true, true);\n              _this.setStartAfter = createBeforeAfterNodeSetter(false, true);\n              _this.setEndBefore = createBeforeAfterNodeSetter(true, false);\n              _this.setEndAfter = createBeforeAfterNodeSetter(false, false);\n              _this.extractContents = createRangeContentRemover(extractSubtree, boundaryUpdater);\n              _this.deleteContents = createRangeContentRemover(deleteSubtree, boundaryUpdater);\n              return _this;\n          }\n          class_1.prototype.setStart = function (node, offset) {\n              assertNoDocTypeNotationEntityAncestor(node, true);\n              assertValidOffset(node, offset);\n              setRangeStart(this, node, offset);\n          };\n          class_1.prototype.setEnd = function (node, offset) {\n              assertNoDocTypeNotationEntityAncestor(node, true);\n              assertValidOffset(node, offset);\n              setRangeEnd(this, node, offset);\n          };\n          class_1.prototype.setStartAndEnd = function () {\n              var args = [];\n              for (var _i = 0; _i < arguments.length; _i++) {\n                  args[_i] = arguments[_i];\n              }\n              var sc = args[0], so = args[1], ec = sc, eo = so;\n              switch (args.length) {\n                  case 3:\n                      eo = args[2];\n                      break;\n                  case 4:\n                      ec = args[2];\n                      eo = args[3];\n                      break;\n              }\n              assertNoDocTypeNotationEntityAncestor(sc, true);\n              assertValidOffset(sc, so);\n              assertNoDocTypeNotationEntityAncestor(ec, true);\n              assertValidOffset(ec, eo);\n              boundaryUpdater(this, sc, so, ec, eo);\n          };\n          class_1.prototype.setBoundary = function (node, offset, isStart) {\n              this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n          };\n          class_1.prototype.collapse = function (toStart) {\n              assertRangeValid(this);\n              if (toStart) {\n                  boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n              }\n              else {\n                  boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n              }\n          };\n          class_1.prototype.selectNodeContents = function (node) {\n              assertNoDocTypeNotationEntityAncestor(node, true);\n              boundaryUpdater(this, node, 0, node, getNodeLength(node));\n          };\n          class_1.prototype.selectNode = function (node) {\n              assertNoDocTypeNotationEntityAncestor(node, false);\n              assertValidNodeType(node, beforeAfterNodeTypes);\n              var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n              boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n          };\n          class_1.prototype.splitBoundaries = function () {\n              splitRangeBoundaries(this);\n          };\n          class_1.prototype.splitBoundariesPreservingPositions = function (positionsToPreserve) {\n              splitRangeBoundaries(this, positionsToPreserve);\n          };\n          class_1.prototype.normalizeBoundaries = function () {\n              assertRangeValid(this);\n              var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n              var mergeForward = function (node) {\n                  var sibling = node.nextSibling;\n                  if (sibling && sibling.nodeType == node.nodeType) {\n                      ec = node;\n                      eo = node.length;\n                      node.appendData(sibling.data);\n                      removeNode(sibling);\n                  }\n              };\n              var mergeBackward = function (node) {\n                  var sibling = node.previousSibling;\n                  if (sibling && sibling.nodeType == node.nodeType) {\n                      sc = node;\n                      var nodeLength = node.length;\n                      so = sibling.length;\n                      node.insertData(0, sibling.data);\n                      removeNode(sibling);\n                      if (sc == ec) {\n                          eo += so;\n                          ec = sc;\n                      }\n                      else if (ec == node.parentNode) {\n                          var nodeIndex = getNodeIndex(node);\n                          if (eo == nodeIndex) {\n                              ec = node;\n                              eo = nodeLength;\n                          }\n                          else if (eo > nodeIndex) {\n                              eo--;\n                          }\n                      }\n                  }\n              };\n              var normalizeStart = true;\n              var sibling;\n              if (isCharacterDataNode(ec)) {\n                  if (eo == ec.length) {\n                      mergeForward(ec);\n                  }\n                  else if (eo == 0) {\n                      sibling = ec.previousSibling;\n                      if (sibling && sibling.nodeType == ec.nodeType) {\n                          eo = sibling.length;\n                          if (sc == ec) {\n                              normalizeStart = false;\n                          }\n                          sibling.appendData(ec.data);\n                          removeNode(ec);\n                          ec = sibling;\n                      }\n                  }\n              }\n              else {\n                  if (eo > 0) {\n                      var endNode = ec.childNodes[eo - 1];\n                      if (endNode && isCharacterDataNode(endNode)) {\n                          mergeForward(endNode);\n                      }\n                  }\n                  normalizeStart = !this.collapsed;\n              }\n              if (normalizeStart) {\n                  if (isCharacterDataNode(sc)) {\n                      if (so == 0) {\n                          mergeBackward(sc);\n                      }\n                      else if (so == sc.length) {\n                          sibling = sc.nextSibling;\n                          if (sibling && sibling.nodeType == sc.nodeType) {\n                              if (ec == sibling) {\n                                  ec = sc;\n                                  eo += sc.length;\n                              }\n                              sc.appendData(sibling.data);\n                              removeNode(sibling);\n                          }\n                      }\n                  }\n                  else {\n                      if (so < sc.childNodes.length) {\n                          var startNode = sc.childNodes[so];\n                          if (startNode && isCharacterDataNode(startNode)) {\n                              mergeBackward(startNode);\n                          }\n                      }\n                  }\n              }\n              else {\n                  sc = ec;\n                  so = eo;\n              }\n              boundaryUpdater(this, sc, so, ec, eo);\n          };\n          class_1.prototype.collapseToPoint = function (node, offset) {\n              assertNoDocTypeNotationEntityAncestor(node, true);\n              assertValidOffset(node, offset);\n              this.setStartAndEnd(node, offset);\n          };\n          class_1.prototype.parentElement = function () {\n              assertRangeValid(this);\n              return getElementAncestor(this.commonAncestorContainer, true);\n          };\n          return class_1;\n      }(Base));\n  }\n  /*----------------------------------------------------------------------------------------------------------------*/\n  /** TODO remove comment\n   * @requires call `Object.assign(R, comparisonConstants)` after call this function:\n   *      `class R extends createPrototypeRange(..`\n   * or\n   *      `const R = createPrototypeRange(..`\n   */\n  function createPrototypeRange(Base, boundaryUpdater) {\n      // R1 is a not completed class because createDomRangeP1 only implement RangeP1\n      // the missing members in RangeP2 will be provided at createDomRangeP2\n      // and the missing members in ComparisonConstants will be provided here in `createPrototypeRange`\n      // so result `R12` will be a completed class that implement `Range`\n      var MixinBase = Base;\n      var R1 = createDomRangeP1(MixinBase);\n      //after this, instances of R1 will have consts like: START_TO_START,..\n      Object.assign(R1.prototype, comparisonConstants);\n      var R12 = createDomRangeP2(R1, boundaryUpdater);\n      // this is similar to add `static START_TO_START = ..` into R12\n      // note that, we can ass static members in subclasses: class A{static s = ..} class B extends A{} B.s\n      return Object.assign(R12, comparisonConstants);\n  }\n  // TODO remove comment\n  // we need this const to bypass TS2506: 'DomRange' is referenced directly or indirectly in it own base expression\n  // export const _DomRange = createPrototypeRange(RangeBase, updateBoundaries);\n  // export type DomRange = InstanceType<typeof DomRange>;\n  var DomRange = /** @class */ (function (_super) {\n      __extends(DomRange, _super);\n      function DomRange() {\n          return _super !== null && _super.apply(this, arguments) || this;\n      }\n      DomRange.inspect = rangeInspect;\n      DomRange.toHtml = rangeToHtml;\n      DomRange.getRangeDocument = getRangeDocument;\n      DomRange.rangesEqual = rangesEqual;\n      return DomRange;\n  }(createPrototypeRange(DomRangeBase, updateBoundaries)));\n  // @deprecated pls directly import & use the exported member of this module\n  Object.assign(DomRange, {\n      rangeProperties: rangeProperties,\n      RangeIterator: RangeIterator,\n      copyComparisonConstants: copyComparisonConstants,\n      createPrototypeRange: createPrototypeRange,\n  });\n  function createRangyRange(doc) {\n      doc = getContentDocument(doc, module$1, \"createRangyRange\");\n      return new DomRange(doc);\n  }\n\n  // https://medium.com/visual-development/how-to-fix-nasty-circular-dependency-issues-once-and-for-all-in-javascript-typescript-a04c987cf0de\n\n  var module$2 = new Module(\"WrappedRange\", [\"DomRange\"]);\n  // Wrappers for the browser's native DOM Range implementation\n  // /* build:replaceWith(api) */rangy/* build:replaceEnd */.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n\n  /*----------------------------------------------------------------------------------------------------------------*/\n  // if (api.features.implementsDomRange) {\n  // This is a wrapper around the browser's native DOM Range. It has two aims:\n  // - Provide workarounds for specific browser bugs\n  // - provide convenient extensions, which are inherited from Rangy's DomRange\n  function updateRangeProperties(range) {\n      for (var _i = 0, rangeProperties_1 = rangeProperties; _i < rangeProperties_1.length; _i++) {\n          var prop = rangeProperties_1[_i];\n          range[prop] = range.nativeRange[prop];\n      }\n      // Fix for broken collapsed property in IE 9.\n      range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n  }\n  function updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n      var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n      var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n      var nativeRangeDifferent = !range.equals(range.nativeRange);\n      // Always set both boundaries for the benefit of IE9 (see issue 35)\n      if (startMoved || endMoved || nativeRangeDifferent) {\n          range.setEnd(endContainer, endOffset);\n          range.setStart(startContainer, startOffset);\n      }\n  }\n  var WrappedRange = /** @class */ (function (_super) {\n      __extends(WrappedRange, _super); /*implements WrappedRangeBase*/\n      function WrappedRange(nativeRange) {\n          var _this = _super.call(this) || this;\n          _this.nativeRange = nativeRange;\n          _this.setStartBefore = WrappedRange.createBeforeAfterNodeSetter(\"setStartBefore\");\n          _this.setStartAfter = WrappedRange.createBeforeAfterNodeSetter(\"setStartAfter\");\n          _this.setEndBefore = WrappedRange.createBeforeAfterNodeSetter(\"setEndBefore\");\n          _this.setEndAfter = WrappedRange.createBeforeAfterNodeSetter(\"setEndAfter\");\n          if (!nativeRange) {\n              throw module$2.createError(\"WrappedRange: Range must be specified\");\n          }\n          updateRangeProperties(_this);\n          return _this;\n      }\n      // nativeRange: Range; //declare here\n      WrappedRange.prototype.selectNode = function (node) {\n          this.nativeRange.selectNode(node);\n          updateRangeProperties(this);\n      };\n      WrappedRange.prototype.cloneContents = function () {\n          return this.nativeRange.cloneContents();\n      };\n      // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n      // insertNode() is never delegated to the native range.\n      WrappedRange.prototype.surroundContents = function (node) {\n          this.nativeRange.surroundContents(node);\n          updateRangeProperties(this);\n      };\n      WrappedRange.prototype.collapse = function (isStart) {\n          this.nativeRange.collapse(isStart);\n          updateRangeProperties(this);\n      };\n      WrappedRange.prototype.cloneRange = function () {\n          return new WrappedRange(this.nativeRange.cloneRange());\n      };\n      WrappedRange.prototype.refresh = function () {\n          updateRangeProperties(this);\n      };\n      WrappedRange.prototype.toString = function () {\n          return this.nativeRange.toString();\n      };\n      /*--------------------------------------------------------------------------------------------------------*/\n      // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n      // correct for it\n      // note: rangy2 don't support Firefox <= 2\n      WrappedRange.prototype.setStart = function (node, offset) {\n          this.nativeRange.setStart(node, offset);\n          updateRangeProperties(this);\n      };\n      WrappedRange.prototype.setEnd = function (node, offset) {\n          this.nativeRange.setEnd(node, offset);\n          updateRangeProperties(this);\n      };\n      WrappedRange.createBeforeAfterNodeSetter = function (name) {\n          return function (node) {\n              this.nativeRange[name](node);\n              updateRangeProperties(this);\n          };\n      };\n      /*--------------------------------------------------------------------------------------------------------*/\n      // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n      // whether the native implementation can be trusted\n      WrappedRange.prototype.selectNodeContents = function (node) {\n          //implement in domrange\n          this.setStartAndEnd(node, 0, getNodeLength(node));\n      };\n      /*--------------------------------------------------------------------------------------------------------*/\n      // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n      // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n      // note: this bug is fixed in 2008, so rangy2 don't test this\n      WrappedRange.prototype.compareBoundaryPoints = function (how, sourceRange) {\n          return this.nativeRange.compareBoundaryPoints(how, sourceRange.nativeRange || sourceRange);\n      };\n      /*--------------------------------------------------------------------------------------------------------*/\n      WrappedRange.prototype.getName = function () {\n          return \"WrappedRange\";\n      };\n      return WrappedRange;\n  }(createPrototypeRange(RangeBase, updateNativeRange) /*implements WrappedRangeBase*/));\n  // Object.assign(WrappedRange, comparisonConstants);\n  // change WrappedRange.{deleteContents, extractContents, createContextualFragment} if need\n  function docReadyHandler() {\n      // Create test range and node for feature detection\n      var testTextNode = document.createTextNode(\"test\");\n      getBody(document).appendChild(testTextNode);\n      var range = document.createRange();\n      /*--------------------------------------------------------------------------------------------------------*/\n      // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.\n      var el = document.createElement(\"div\");\n      el.innerHTML = \"123\";\n      var textNode = el.firstChild;\n      var body = getBody(document);\n      body.appendChild(el);\n      range.setStart(textNode, 1);\n      range.setEnd(textNode, 2);\n      range.deleteContents();\n      var rangeProto = WrappedRange.prototype;\n      if (textNode.data == \"13\") {\n          // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n          // extractContents()\n          rangeProto.deleteContents = function () {\n              this.nativeRange.deleteContents();\n              updateRangeProperties(this);\n          };\n          rangeProto.extractContents = function () {\n              var frag = this.nativeRange.extractContents();\n              updateRangeProperties(this);\n              return frag;\n          };\n      }\n      body.removeChild(el);\n      /*--------------------------------------------------------------------------------------------------------*/\n      // Test for existence of createContextualFragment and delegate to it if it exists\n      if (isHostMethod(range, \"createContextualFragment\")) {\n          rangeProto.createContextualFragment = function (fragmentStr) {\n              return this.nativeRange.createContextualFragment(fragmentStr);\n          };\n      }\n      /*--------------------------------------------------------------------------------------------------------*/\n      // Clean up\n      body.removeChild(testTextNode);\n      body = null;\n  }\n  onDocReady(docReadyHandler);\n  function createNativeRange(doc) {\n      doc = getContentDocument(doc, module$2, \"createNativeRange\");\n      return doc.createRange();\n  }\n  function createRange(doc) {\n      doc = getContentDocument(doc, module$2, \"createRange\");\n      return new WrappedRange(createNativeRange(doc));\n  }\n  function shimCreateRange(win) {\n      if (!win)\n          win = window;\n      var doc = win.document;\n      if (typeof doc.createRange == \"undefined\") {\n          doc.createRange = function () {\n              return createRange(doc);\n          };\n      }\n  }\n\n  var module$3 = new Module(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"]);\n  // This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n  // in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)\n  // /* build:replaceWith(api) */rangy/* build:replaceEnd */.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\n  var BOOLEAN = \"boolean\";\n  var NUMBER = \"number\";\n\n  // Utility function to support direction parameters in the API that may be a string (\"backward\", \"backwards\",\n  // \"forward\" or \"forwards\") or a Boolean (true for backwards).\n  function isDirectionBackward(dir) {\n      return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n  }\n  function getWindow$1(win, methodName) {\n      if (!win) {\n          return window;\n      }\n      else if (isWindow(win)) {\n          return win;\n      }\n      else if (win instanceof WrappedSelection) {\n          return win.win;\n      }\n      else {\n          var doc = getContentDocument(win, module$3, methodName);\n          return getWindow(doc);\n      }\n  }\n  function getNativeSelection(winParam) {\n      return getWindow$1(winParam, \"getWinSelection\").getSelection();\n  }\n  function winSelectionIsBackward(sel) {\n      var backward = false;\n      if (sel.anchorNode) {\n          backward = (comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n      }\n      return backward;\n  }\n  var selectionIsBackward = winSelectionIsBackward;\n  /** @deprecated always return true because we don't support TextRange / document.selection in old IE */\n  function isSelectionValid() {\n      return true;\n  }\n  var testSelection = getNativeSelection();\n  // In Firefox, the selection is null in an iframe with display: none. See issue #138.\n  if (!testSelection) {\n      module$3.fail(\"Native selection was null (possibly issue 138?)\");\n      // return false;\n  }\n  var testRange = createNativeRange(document);\n  // Obtaining a range from a selection\n  var selectionHasAnchorAndFocus = features.selectionHasAnchorAndFocus =\n      areHostProperties(testSelection, [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n  // Test for existence of native selection extend() method\n  var selectionHasExtend = features.selectionHasExtend =\n      isHostMethod(testSelection, \"extend\");\n  // Test if rangeCount exists\n  var selectionHasRangeCount = features.selectionHasRangeCount =\n      (typeof testSelection.rangeCount == NUMBER);\n  var addRangeBackwardToNative = selectionHasExtend\n      ? function (nativeSelection, range) {\n          var doc = DomRange.getRangeDocument(range);\n          var endRange = createRange(doc);\n          endRange.collapseToPoint(range.endContainer, range.endOffset);\n          nativeSelection.addRange(getNativeRange(endRange));\n          nativeSelection.extend(range.startContainer, range.startOffset);\n      }\n      : null;\n  // Selection collapsedness\n  var selectionIsCollapsed = selectionHasAnchorAndFocus\n      ? function (sel) {\n          return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n      }\n      : function (sel) {\n          return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n      };\n  function updateAnchorAndFocusFromRange(sel, range, backward) {\n      var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n      sel.anchorNode = range[anchorPrefix + \"Container\"];\n      sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n      sel.focusNode = range[focusPrefix + \"Container\"];\n      sel.focusOffset = range[focusPrefix + \"Offset\"];\n  }\n  function updateAnchorAndFocusFromNativeSelection(sel) {\n      var nativeSel = sel.nativeSelection;\n      sel.anchorNode = nativeSel.anchorNode;\n      sel.anchorOffset = nativeSel.anchorOffset;\n      sel.focusNode = nativeSel.focusNode;\n      sel.focusOffset = nativeSel.focusOffset;\n  }\n  function updateEmptySelection(sel) {\n      sel.anchorNode = sel.focusNode = null;\n      sel.anchorOffset = sel.focusOffset = 0;\n      sel.rangeCount = 0;\n      sel.isCollapsed = true;\n      sel._ranges.length = 0;\n  }\n  function getNativeRange(range) {\n      var nativeRange;\n      if (range instanceof DomRange) {\n          nativeRange = createNativeRange(range.getDocument());\n          nativeRange.setEnd(range.endContainer, range.endOffset);\n          nativeRange.setStart(range.startContainer, range.startOffset);\n      }\n      else if (range instanceof WrappedRange) {\n          nativeRange = range.nativeRange;\n          // } else if (features.implementsDomRange && ((range as any) instanceof dom.getWindow(range.startContainer).Range)) {\n      }\n      else if (range instanceof Range) {\n          nativeRange = range;\n      }\n      return nativeRange;\n  }\n  var getSelectionRangeAt;\n  if (isHostMethod(testSelection, \"getRangeAt\")) {\n      // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n      // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n      // lesson to us all, especially me.\n      getSelectionRangeAt = function (sel, index) {\n          try {\n              return sel.getRangeAt(index);\n          }\n          catch (ex) {\n              return null;\n          }\n      };\n  }\n  else if (selectionHasAnchorAndFocus) {\n      getSelectionRangeAt = function (sel) {\n          var doc = getDocument(sel.anchorNode);\n          var range = createRange(doc);\n          range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n          // Handle the case when the selection was selected backwards (from the end to the start in the\n          // document)\n          if (range.collapsed !== this.isCollapsed) {\n              range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n          }\n          return range;\n      };\n  }\n  function deleteProperties(sel) {\n      sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n      sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n      sel.detached = true;\n  }\n  var cachedRangySelections = [];\n  function actOnCachedSelection(win, action) {\n      var i = cachedRangySelections.length, cached, sel;\n      while (i--) {\n          cached = cachedRangySelections[i];\n          sel = cached.selection;\n          if (action == \"deleteAll\") {\n              deleteProperties(sel);\n          }\n          else if (cached.win == win) {\n              if (action == \"delete\") {\n                  cachedRangySelections.splice(i, 1);\n                  return true;\n              }\n              else {\n                  return sel;\n              }\n          }\n      }\n      if (action == \"deleteAll\") {\n          cachedRangySelections.length = 0;\n      }\n      return null;\n  }\n  function getSelection(win) {\n      // Check if the parameter is a Rangy Selection object\n      if (win && win instanceof WrappedSelection) {\n          win.refresh();\n          return win;\n      }\n      win = getWindow$1(win, \"getNativeSelection\");\n      var sel = actOnCachedSelection(win);\n      var nativeSel = getNativeSelection(win);\n      if (sel) {\n          sel.nativeSelection = nativeSel;\n          sel.refresh();\n      }\n      else {\n          sel = new WrappedSelection(nativeSel, win);\n          cachedRangySelections.push({ win: win, selection: sel });\n      }\n      return sel;\n  }\n  var refreshSelection;\n  if (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n      refreshSelection = function (sel) {\n          sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n          if (sel.rangeCount) {\n              for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                  sel._ranges[i] = new WrappedRange(sel.nativeSelection.getRangeAt(i));\n              }\n              updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n              sel.isCollapsed = selectionIsCollapsed(sel);\n          }\n          else {\n              updateEmptySelection(sel);\n          }\n      };\n  }\n  else if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n      refreshSelection = function (sel) {\n          var range, nativeSel = sel.nativeSelection;\n          if (nativeSel.anchorNode) {\n              range = getSelectionRangeAt(nativeSel, 0);\n              sel._ranges = [range];\n              sel.rangeCount = 1;\n              updateAnchorAndFocusFromNativeSelection(sel);\n              sel.isCollapsed = selectionIsCollapsed(sel);\n          }\n          else {\n              updateEmptySelection(sel);\n          }\n      };\n  }\n  else {\n      module$3.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n      //return false;\n  }\n  // WrappedSelection.prototype = api.selectionPrototype;\n  var WrappedSelBase = /** @class */ (function () {\n      function WrappedSelBase(nativeSelection, win) {\n          this.nativeSelection = nativeSelection;\n          this.win = win;\n          this._ranges = [];\n          //@deprecated the old rangy2 constructor form: (nativeSelection, docSelection: null, win)\n          if (arguments.length == 3) {\n              this.win = arguments[2];\n          }\n          this.refresh();\n      }\n      return WrappedSelBase;\n  }());\n  // TODO\n  function createWrappedSelection(Base) {\n      var _a;\n      function addRangeBackward(sel, range) {\n          addRangeBackwardToNative(sel.nativeSelection, range);\n          sel.refresh();\n      }\n      var addRange = selectionHasRangeCount\n          ? function (range, direction) {\n              if (isDirectionBackward(direction) && selectionHasExtend) {\n                  addRangeBackward(this, range);\n              }\n              else {\n                  var previousRangeCount;\n                  if (features.selectionSupportsMultipleRanges) {\n                      previousRangeCount = this.rangeCount;\n                  }\n                  else {\n                      this.removeAllRanges();\n                      previousRangeCount = 0;\n                  }\n                  // Clone the native range so that changing the selected range does not affect the selection.\n                  // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                  // issue 80.\n                  var clonedNativeRange = getNativeRange(range).cloneRange();\n                  try {\n                      this.nativeSelection.addRange(clonedNativeRange);\n                  }\n                  catch (ex) {\n                  }\n                  // Check whether adding the range was successful\n                  this.rangeCount = this.nativeSelection.rangeCount;\n                  if (this.rangeCount == previousRangeCount + 1) {\n                      // The range was added successfully\n                      // Check whether the range that we added to the selection is reflected in the last range extracted from\n                      // the selection\n                      if (config.checkSelectionRanges) {\n                          var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                          if (nativeRange && !rangesEqual(nativeRange, range)) {\n                              // Happens in WebKit with, for example, a selection placed at the start of a text node\n                              range = new WrappedRange(nativeRange);\n                          }\n                      }\n                      this._ranges[this.rangeCount - 1] = range;\n                      updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                      this.isCollapsed = selectionIsCollapsed(this);\n                  }\n                  else {\n                      // The range was not added successfully. The simplest thing is to refresh\n                      this.refresh();\n                  }\n              }\n          }\n          : function (range, direction) {\n              if (isDirectionBackward(direction) && selectionHasExtend) {\n                  addRangeBackward(this, range);\n              }\n              else {\n                  this.nativeSelection.addRange(getNativeRange(range));\n                  this.refresh();\n              }\n          };\n      // Removal of a single range\n      function removeRangeManually(sel, range) {\n          var ranges = sel.getAllRanges();\n          sel.removeAllRanges();\n          for (var i = 0, len = ranges.length; i < len; ++i) {\n              if (!rangesEqual(range, ranges[i])) {\n                  sel.addRange(ranges[i]);\n              }\n          }\n          if (!sel.rangeCount) {\n              updateEmptySelection(sel);\n          }\n      }\n      function assertNodeInSameDocument(sel, node) {\n          if (sel.win.document != getDocument(node)) {\n              throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n          }\n      }\n      function createStartOrEndSetter(isStart) {\n          return function (node, offset) {\n              var range;\n              if (this.rangeCount) {\n                  range = this.getRangeAt(0);\n                  range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n              }\n              else {\n                  range = createRange(this.win.document);\n                  range.setStartAndEnd(node, offset);\n              }\n              this.setSingleRange(range, this.isBackward());\n          };\n      }\n      return _a = /** @class */ (function (_super) {\n              __extends(S, _super);\n              function S() {\n                  var _this = _super !== null && _super.apply(this, arguments) || this;\n                  //if (selectionHasRangeCount) {\n                  _this.addRange = addRange;\n                  // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n                  _this.isBackwards = _this.isBackward;\n                  _this.setStart = createStartOrEndSetter(true);\n                  _this.setEnd = createStartOrEndSetter(false);\n                  return _this;\n              }\n              S.prototype.removeAllRanges = function () {\n                  this.nativeSelection.removeAllRanges();\n                  updateEmptySelection(this);\n              };\n              S.prototype.setRanges = function (ranges) {\n                  this.removeAllRanges();\n                  for (var i = 0, len = ranges.length; i < len; ++i) {\n                      this.addRange(ranges[i]);\n                  }\n              };\n              S.prototype.getRangeAt = function (index) {\n                  if (index < 0 || index >= this.rangeCount) {\n                      throw new DOMException(\"INDEX_SIZE_ERR\");\n                  }\n                  else {\n                      // Clone the range to preserve selection-range independence. See issue 80.\n                      return this._ranges[index].cloneRange();\n                  }\n              };\n              S.prototype.refresh = function (checkForChanges) {\n                  var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n                  var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n                  refreshSelection(this);\n                  if (checkForChanges) {\n                      // Check the range count first\n                      var i = oldRanges.length;\n                      if (i != this._ranges.length) {\n                          return true;\n                      }\n                      // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                      // ranges after this\n                      if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                          return true;\n                      }\n                      // Finally, compare each range in turn\n                      while (i--) {\n                          if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                              return true;\n                          }\n                      }\n                      return false;\n                  }\n              };\n              S.prototype.removeRange = function (range) {\n                  removeRangeManually(this, range);\n              };\n              S.prototype.isBackward = function () {\n                  return selectionIsBackward(this);\n              };\n              // Selection stringifier\n              // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n              // The current spec does not yet define this method.\n              S.prototype.toString = function () {\n                  var rangeTexts = [];\n                  for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                      rangeTexts[i] = \"\" + this._ranges[i];\n                  }\n                  return rangeTexts.join(\"\");\n              };\n              // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n              S.prototype.collapse = function (node, offset) {\n                  assertNodeInSameDocument(this, node);\n                  var range = createRange(node);\n                  range.collapseToPoint(node, offset);\n                  this.setSingleRange(range);\n                  this.isCollapsed = true;\n              };\n              S.prototype.collapseToStart = function () {\n                  if (this.rangeCount) {\n                      var range = this._ranges[0];\n                      this.collapse(range.startContainer, range.startOffset);\n                  }\n                  else {\n                      throw new DOMException(\"INVALID_STATE_ERR\");\n                  }\n              };\n              S.prototype.collapseToEnd = function () {\n                  if (this.rangeCount) {\n                      var range = this._ranges[this.rangeCount - 1];\n                      this.collapse(range.endContainer, range.endOffset);\n                  }\n                  else {\n                      throw new DOMException(\"INVALID_STATE_ERR\");\n                  }\n              };\n              // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as\n              // specified so the native implementation is never used by Rangy.\n              S.prototype.selectAllChildren = function (node) {\n                  assertNodeInSameDocument(this, node);\n                  var range = createRange(node);\n                  range.selectNodeContents(node);\n                  this.setSingleRange(range);\n              };\n              S.prototype.deleteFromDocument = function () {\n                  if (this.rangeCount) {\n                      var ranges = this.getAllRanges();\n                      if (ranges.length) {\n                          this.removeAllRanges();\n                          for (var i = 0, len = ranges.length; i < len; ++i) {\n                              ranges[i].deleteContents();\n                          }\n                          // The spec says nothing about what the selection should contain after calling deleteContents on each\n                          // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                          this.addRange(ranges[len - 1]);\n                      }\n                  }\n              };\n              // The following are non-standard extensions\n              S.prototype.eachRange = function (func, returnValue) {\n                  for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                      if (func(this.getRangeAt(i))) {\n                          return returnValue;\n                      }\n                  }\n              };\n              S.prototype.getAllRanges = function () {\n                  var ranges = [];\n                  this.eachRange(function (range) {\n                      ranges.push(range);\n                  });\n                  return ranges;\n              };\n              S.prototype.setSingleRange = function (range, direction) {\n                  this.removeAllRanges();\n                  this.addRange(range, direction);\n              };\n              S.prototype.callMethodOnEachRange = function (methodName, params) {\n                  var results = [];\n                  this.eachRange(function (range) {\n                      results.push(range[methodName].apply(range, params || []));\n                  });\n                  return results;\n              };\n              S.prototype.changeEachRange = function (func) {\n                  var ranges = [];\n                  var backward = this.isBackward();\n                  this.eachRange(function (range) {\n                      func(range);\n                      ranges.push(range);\n                  });\n                  this.removeAllRanges();\n                  if (backward && ranges.length == 1) {\n                      this.addRange(ranges[0], \"backward\");\n                  }\n                  else {\n                      this.setRanges(ranges);\n                  }\n              };\n              S.prototype.containsNode = function (node, allowPartial) {\n                  return this.eachRange(function (range) {\n                      return range.containsNode(node, allowPartial);\n                  }, true) || false;\n              };\n              S.prototype.getBookmark = function (containerNode) {\n                  return {\n                      backward: this.isBackward(),\n                      rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n                  };\n              };\n              S.prototype.moveToBookmark = function (bookmark) {\n                  var selRanges = [];\n                  for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++];) {\n                      range = createRange(this.win);\n                      range.moveToBookmark(rangeBookmark);\n                      selRanges.push(range);\n                  }\n                  if (bookmark.backward) {\n                      this.setSingleRange(selRanges[0], \"backward\");\n                  }\n                  else {\n                      this.setRanges(selRanges);\n                  }\n              };\n              S.prototype.saveRanges = function () {\n                  return {\n                      backward: this.isBackward(),\n                      ranges: this.callMethodOnEachRange(\"cloneRange\")\n                  };\n              };\n              S.prototype.restoreRanges = function (selRanges) {\n                  this.removeAllRanges();\n                  for (var i = 0, range; range = selRanges.ranges[i]; ++i) {\n                      this.addRange(range, (selRanges.backward && i == 0));\n                  }\n              };\n              S.prototype.toHtml = function () {\n                  var rangeHtmls = [];\n                  this.eachRange(function (range) {\n                      rangeHtmls.push(DomRange.toHtml(range));\n                  });\n                  return rangeHtmls.join(\"\");\n              };\n              S.inspect = function (sel) {\n                  var rangeInspects = [];\n                  var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n                  var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n                  var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n                  if (typeof sel.rangeCount != \"undefined\") {\n                      for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                          rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                      }\n                  }\n                  return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                      \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n              };\n              S.prototype.getName = function () {\n                  return \"WrappedSelection\";\n              };\n              S.prototype.inspect = function () {\n                  return S.inspect(this);\n              };\n              S.prototype.detach = function () {\n                  actOnCachedSelection(this.win, \"delete\");\n                  deleteProperties(this);\n              };\n              S.detachAll = function () {\n                  actOnCachedSelection(null, \"deleteAll\");\n              };\n              return S;\n          }(Base)),\n          _a.isDirectionBackward = isDirectionBackward,\n          _a;\n  }\n  var WrappedSelection = createWrappedSelection(WrappedSelBase);\n  //alias\n  var Selection = WrappedSelection;\n  function shimGetSelection(win) {\n      if (!win)\n          win = window;\n      if (typeof win.getSelection == \"undefined\") {\n          win.getSelection = function () {\n              return getSelection(win);\n          };\n      }\n  }\n\n  // https://medium.com/visual-development/how-to-fix-nasty-circular-dependency-issues-once-and-for-all-in-javascript-typescript-a04c987cf0de\n\n  /**\n   * Rangy, a cross-browser JavaScript range and selection library\n   * https://github.com/timdown/rangy\n   *\n   * Copyright 2019, Tim Down\n   * Licensed under the MIT license.\n   * Version: 2.1.0\n   * Build date: 19 April 2019\n   */\n  function shim(win) {\n      win = win || window;\n      shimCreateRange(win);\n      shimGetSelection(win);\n  }\n\n  exports.DOMException = DOMException;\n  exports.DomRange = DomRange;\n  exports.Module = Module;\n  exports.RangeBase = RangeBase;\n  exports.Selection = Selection;\n  exports.WrappedRange = WrappedRange;\n  exports.WrappedSelection = WrappedSelection;\n  exports.config = config;\n  exports.createNativeRange = createNativeRange;\n  exports.createPrototypeRange = createPrototypeRange;\n  exports.createRange = createRange;\n  exports.createRangyRange = createRangyRange;\n  exports.dom = dom;\n  exports.features = features;\n  exports.getNativeSelection = getNativeSelection;\n  exports.getRangeDocument = getRangeDocument;\n  exports.getSelection = getSelection;\n  exports.isBrowser = isBrowser;\n  exports.isSelectionValid = isSelectionValid;\n  exports.onDocReady = onDocReady;\n  exports.rangesEqual = rangesEqual;\n  exports.shim = shim;\n  exports.shimCreateRange = shimCreateRange;\n  exports.shimGetSelection = shimGetSelection;\n  exports.util = util;\n  exports.version = version;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n//# sourceMappingURL=index.umd.js.map\n","export function DOMException(codeName) {\n    this.code = this[codeName];\n    this.codeName = codeName;\n    this.message = \"DOMException: \" + this.codeName;\n}\nDOMException.prototype = {\n    INDEX_SIZE_ERR: 1,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INVALID_STATE_ERR: 11,\n    INVALID_NODE_TYPE_ERR: 24,\n};\n//Object.assign(DOMException, DOMException.prototype);\nDOMException.prototype.toString = function () {\n    return this.message;\n};\n//# sourceMappingURL=DOMException.js.map","var UNDEF = \"undefined\";\nexport var version = \"%%build:version%%\";\nexport var isBrowser = typeof window != UNDEF && typeof document != UNDEF;\nif (!isBrowser) {\n    console.log(\"Rangy can only run in a browser\");\n}\nexport var features = {\n    implementsDomRange: true,\n    implementsTextRange: false,\n    htmlParsingConforms: true,\n    crashyTextNodes: false,\n    implementsWinGetSelection: true,\n    implementsDocSelection: false,\n    selectionSupportsMultipleRanges: false,\n    implementsControlRange: false,\n};\n/** @deprecated all configs is const! */\nexport var config = {\n    preferTextRange: false,\n    checkSelectionRanges: true,\n};\n// RangePrototype,\n// rangePrototype: new RangePrototype(),\n// selectionPrototype: new SelectionPrototype(),\nexport function onDocReady(listener) {\n    if (!isBrowser)\n        return;\n    if (document.readyState == \"complete\") {\n        listener();\n    }\n    else {\n        var onLoaded_1 = function () {\n            document.removeEventListener(\"DOMContentLoaded\", onLoaded_1, false);\n            listener();\n        };\n        document.addEventListener(\"DOMContentLoaded\", onLoaded_1, false);\n    }\n}\n//# sourceMappingURL=api.js.map","import { Module } from \"./module\";\nimport * as util from \"./util\";\nimport { getBody } from './util';\n// import * as log4javascript from \"log4javascript\";\nexport { getBody };\nvar module = new Module(\"DomUtil\", []);\n// DOM utility methods used by Rangy\n// /* build:replaceWith(api) */rangy/* build:replaceEnd */.createCoreModule(\"DomUtil\", [], function(api, module) {\n// var log = log4javascript.getLogger(\"rangy.dom\");\nvar UNDEF = \"undefined\";\n// Perform feature tests\nif (!util.areHostMethods(document, [\"createDocumentFragment\", \"createElement\", \"createTextNode\"])) {\n    module.fail(\"document missing a Node creation method\");\n}\nif (!util.isHostMethod(document, \"getElementsByTagName\")) {\n    module.fail(\"document missing getElementsByTagName method\");\n}\n/*----------------------------------------------------------------------------------------------------------------*/\n// Opera 11 puts HTML elements in the null namespace, it seems, and IE 7 has undefined namespaceURI\nexport function isHtmlNamespace(node) {\n    var ns;\n    return typeof node.namespaceURI == UNDEF || ((ns = node.namespaceURI) === null || ns == \"http://www.w3.org/1999/xhtml\");\n}\nexport function parentElement(node) {\n    var parent = node.parentNode;\n    return (parent.nodeType == 1) ? parent : null;\n}\nexport function getNodeIndex(node) {\n    var i = 0;\n    while ((node = node.previousSibling)) {\n        ++i;\n    }\n    return i;\n}\nexport function getNodeLength(node) {\n    switch (node.nodeType) {\n        case 7:\n        case 10:\n            return 0;\n        case 3:\n        case 8:\n            return node.length;\n        default:\n            return node.childNodes.length;\n    }\n}\nexport function getCommonAncestor(node1, node2) {\n    var ancestors = [], n;\n    for (n = node1; n; n = n.parentNode) {\n        ancestors.push(n);\n    }\n    for (n = node2; n; n = n.parentNode) {\n        if (ancestors.includes(n)) {\n            return n;\n        }\n    }\n    return null;\n}\nexport function isAncestorOf(ancestor, descendant, selfIsAncestor) {\n    var n = selfIsAncestor ? descendant : descendant.parentNode;\n    while (n) {\n        if (n === ancestor) {\n            return true;\n        }\n        else {\n            n = n.parentNode;\n        }\n    }\n    return false;\n}\nexport function isOrIsAncestorOf(ancestor, descendant) {\n    return isAncestorOf(ancestor, descendant, true);\n}\nexport function getClosestAncestorIn(node, ancestor, selfIsAncestor) {\n    var p, n = selfIsAncestor ? node : node.parentNode;\n    while (n) {\n        p = n.parentNode;\n        if (p === ancestor) {\n            return n;\n        }\n        n = p;\n    }\n    return null;\n}\n// https://basarat.gitbooks.io/typescript/docs/types/typeGuard.html#user-defined-type-guards\nexport function isCharacterDataNode(node) {\n    var t = node.nodeType;\n    return t == 3 || t == 4 || t == 8; // Text, CDataSection or Comment\n}\nexport function isTextOrCommentNode(node) {\n    if (!node) {\n        return false;\n    }\n    var t = node.nodeType;\n    return t == 3 || t == 8; // Text or Comment\n}\nexport function insertAfter(node, precedingNode) {\n    var nextNode = precedingNode.nextSibling, parent = precedingNode.parentNode;\n    if (nextNode) {\n        parent.insertBefore(node, nextNode);\n    }\n    else {\n        parent.appendChild(node);\n    }\n    return node;\n}\n// Note that we cannot use splitText() because it is bugridden in IE 9.\nexport function splitDataNode(node, index, positionsToPreserve) {\n    // log.debug(\"splitDataNode called at index \" + index + \" in node \" + inspectNode(node));\n    var newNode = node.cloneNode(false);\n    newNode.deleteData(0, index);\n    node.deleteData(index, node.length - index);\n    insertAfter(newNode, node);\n    // Preserve positions\n    if (positionsToPreserve) {\n        for (var i = 0, position; position = positionsToPreserve[i++];) {\n            // Handle case where position was inside the portion of node after the split point\n            if (position.node == node && position.offset > index) {\n                position.node = newNode;\n                position.offset -= index;\n            }\n            // Handle the case where the position is a node offset within node's parent\n            else if (position.node == node.parentNode && position.offset > getNodeIndex(node)) {\n                ++position.offset;\n            }\n        }\n    }\n    return newNode;\n}\nexport function getDocument(node) {\n    if (node.nodeType == 9) {\n        return node;\n    }\n    else if (typeof node.ownerDocument != UNDEF) {\n        return node.ownerDocument;\n    }\n    else if (typeof node.document != UNDEF) {\n        return node.document;\n    }\n    else if (node.parentNode) {\n        return getDocument(node.parentNode);\n    }\n    else {\n        throw module.createError(\"getDocument: no document found for node\");\n    }\n}\nexport function getWindow(node) {\n    var doc = getDocument(node);\n    if (typeof doc.defaultView != UNDEF) {\n        return doc.defaultView;\n    }\n    else if (typeof doc.parentWindow != UNDEF) {\n        return doc.parentWindow;\n    }\n    else {\n        throw module.createError(\"Cannot get a window object for node\");\n    }\n}\nexport function getIframeDocument(iframeEl) {\n    if (typeof iframeEl.contentDocument != UNDEF) {\n        return iframeEl.contentDocument;\n    }\n    else if (typeof iframeEl.contentWindow != UNDEF) {\n        return iframeEl.contentWindow.document;\n    }\n    else {\n        throw module.createError(\"getIframeDocument: No Document object found for iframe element\");\n    }\n}\nexport function getIframeWindow(iframeEl) {\n    if (typeof iframeEl.contentWindow != UNDEF) {\n        return iframeEl.contentWindow;\n    }\n    else if (typeof iframeEl.contentDocument != UNDEF) {\n        return iframeEl.contentDocument.defaultView;\n    }\n    else {\n        throw module.createError(\"getIframeWindow: No Window object found for iframe element\");\n    }\n}\n// This looks bad. Is it worth it?\nexport function isWindow(obj) {\n    return obj && util.isHostMethod(obj, \"setTimeout\") && util.isHostObject(obj, \"document\");\n}\nfunction isIframe(o) {\n    return o.nodeType == 1 && o.tagName.toLowerCase() == \"iframe\";\n}\nexport function getContentDocument(obj, module, methodName) {\n    var doc;\n    if (!obj) {\n        doc = document;\n    }\n    // Test if a DOM node has been passed and obtain a document object for it if so\n    else if (util.isHostProperty(obj, \"nodeType\")) {\n        doc = isIframe(obj) ? getIframeDocument(obj) : getDocument(obj);\n    }\n    // Test if the doc parameter appears to be a Window object\n    else if (isWindow(obj)) {\n        doc = obj.document;\n    }\n    if (!doc) {\n        throw module.createError(methodName + \"(): Parameter must be a Window object or DOM node\");\n    }\n    return doc;\n}\nexport function getRootContainer(node) {\n    var parent;\n    while ((parent = node.parentNode)) {\n        node = parent;\n    }\n    return node;\n}\nexport function comparePoints(nodeA, offsetA, nodeB, offsetB) {\n    // See http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Comparing\n    var nodeC, root, childA, childB, n;\n    if (nodeA == nodeB) {\n        // log.debug(\"case 1\");\n        // Case 1: nodes are the same\n        return offsetA === offsetB ? 0 : (offsetA < offsetB) ? -1 : 1;\n    }\n    else if ((nodeC = getClosestAncestorIn(nodeB, nodeA, true))) {\n        // log.debug(\"case 2\", inspectNode(nodeC), getNodeIndex(nodeC));\n        // Case 2: node C (container B or an ancestor) is a child node of A\n        return offsetA <= getNodeIndex(nodeC) ? -1 : 1;\n    }\n    else if ((nodeC = getClosestAncestorIn(nodeA, nodeB, true))) {\n        // log.debug(\"case 3\");\n        // Case 3: node C (container A or an ancestor) is a child node of B\n        return getNodeIndex(nodeC) < offsetB ? -1 : 1;\n    }\n    else {\n        root = getCommonAncestor(nodeA, nodeB);\n        if (!root) {\n            throw new Error(\"comparePoints error: nodes have no common ancestor\");\n        }\n        // Case 4: containers are siblings or descendants of siblings\n        // log.debug(\"case 4\");\n        childA = (nodeA === root) ? root : getClosestAncestorIn(nodeA, root, true);\n        childB = (nodeB === root) ? root : getClosestAncestorIn(nodeB, root, true);\n        if (childA === childB) {\n            // This shouldn't be possible\n            // log.warn(\"comparePoints got to case 4 and childA and childB are the same!\", nodeA, offsetA, nodeB, offsetB);\n            throw module.createError(\"comparePoints got to case 4 and childA and childB are the same!\");\n        }\n        else {\n            n = root.firstChild;\n            while (n) {\n                if (n === childA) {\n                    return -1;\n                }\n                else if (n === childB) {\n                    return 1;\n                }\n                n = n.nextSibling;\n            }\n        }\n    }\n}\nexport function inspectNode(node) {\n    if (!node) {\n        return \"[No node]\";\n    }\n    if (isCharacterDataNode(node)) {\n        return '\"' + node.data + '\"';\n    }\n    if (node.nodeType == 1) {\n        var idAttr = node.id ? ' id=\"' + node.id + '\"' : \"\";\n        return \"<\" + node.nodeName + idAttr +\n            \">[index:\" + getNodeIndex(node) +\n            \",length:\" + node.childNodes.length + \"][\" +\n            (node.innerHTML || \"[innerHTML not supported]\").slice(0, 25) + \"]\";\n    }\n    return node.nodeName;\n}\nexport function fragmentFromNodeChildren(node) {\n    var fragment = getDocument(node).createDocumentFragment(), child;\n    while ((child = node.firstChild)) {\n        fragment.appendChild(child);\n    }\n    return fragment;\n}\nvar _getComputedStyleProperty;\nif (typeof window.getComputedStyle != UNDEF) {\n    _getComputedStyleProperty = function (el, propName) {\n        return getWindow(el).getComputedStyle(el, null)[propName];\n    };\n}\nelse if (typeof document.documentElement.currentStyle != UNDEF) {\n    _getComputedStyleProperty = function (el, propName) {\n        return el.currentStyle ? el.currentStyle[propName] : \"\";\n    };\n}\nelse {\n    module.fail(\"No means of obtaining computed style properties found\");\n}\nexport var getComputedStyleProperty = _getComputedStyleProperty;\nexport function createTestElement(doc, html, contentEditable) {\n    var body = getBody(doc);\n    var el = doc.createElement(\"div\");\n    el.contentEditable = \"\" + !!contentEditable;\n    if (html) {\n        el.innerHTML = html;\n    }\n    // Insert the test element at the start of the body to prevent scrolling to the bottom in iOS (issue #292)\n    var bodyFirstChild = body.firstChild;\n    if (bodyFirstChild) {\n        body.insertBefore(el, bodyFirstChild);\n    }\n    else {\n        body.appendChild(el);\n    }\n    return el;\n}\nexport function removeNode(node) {\n    return node.parentNode.removeChild(node);\n}\nvar NodeIterator = /** @class */ (function () {\n    function NodeIterator(root) {\n        this.root = root;\n        this._next = root;\n    }\n    NodeIterator.prototype.hasNext = function () {\n        return !!this._next;\n    };\n    NodeIterator.prototype.next = function () {\n        var n = NodeIterator._current = this._next;\n        var child, next;\n        if (NodeIterator._current) {\n            child = n.firstChild;\n            if (child) {\n                this._next = child;\n            }\n            else {\n                next = null;\n                while ((n !== this.root) && !(next = n.nextSibling)) {\n                    n = n.parentNode;\n                }\n                this._next = next;\n            }\n        }\n        return NodeIterator._current;\n    };\n    NodeIterator.prototype.detach = function () {\n        NodeIterator._current = this._next = this.root = null;\n    };\n    NodeIterator._current = null;\n    return NodeIterator;\n}());\nexport { NodeIterator };\nexport function createIterator(root) {\n    return new NodeIterator(root);\n}\nvar DomPosition = /** @class */ (function () {\n    function DomPosition(node, offset) {\n        this.node = node;\n        this.offset = offset;\n    }\n    DomPosition.prototype.equals = function (pos) {\n        return !!pos && this.node === pos.node && this.offset == pos.offset;\n    };\n    DomPosition.prototype.inspect = function () {\n        return \"[DomPosition(\" + inspectNode(this.node) + \":\" + this.offset + \")]\";\n    };\n    DomPosition.prototype.toString = function () {\n        return this.inspect();\n    };\n    return DomPosition;\n}());\nexport { DomPosition };\n//# sourceMappingURL=dom.js.map","/**\n * Rangy, a cross-browser JavaScript range and selection library\n * https://github.com/timdown/rangy\n *\n * Copyright %%build:year%%, Tim Down\n * Licensed under the MIT license.\n * Version: %%build:version%%\n * Build date: %%build:date%%\n */\nimport \"core-js/features/array/includes\";\nimport \"core-js/features/object/assign\";\nexport * from \"./api\";\nimport * as util from \"./util\";\nexport { util };\nexport * from \"./module\";\nexport * from \"./DOMException\";\nimport * as dom from \"./dom\";\nexport { dom };\nexport * from \"./internal\";\nimport { shimCreateRange, shimGetSelection } from \"./internal\";\nexport function shim(win) {\n    win = win || window;\n    shimCreateRange(win);\n    shimGetSelection(win);\n}\n//# sourceMappingURL=index.js.map","// RangeIterator code partially borrows from IERange by Tim Ryan (http://github.com/timcameronryan/IERange)\nimport { DOMException } from \"../../DOMException\";\nimport * as dom from \"../../dom\";\nimport { isCharacterDataNode, getClosestAncestorIn, removeNode, getNodeLength, isOrIsAncestorOf } from \"../../dom\";\nimport { \n// from ./util\nisNonTextPartiallySelected, updateBoundaries, getRangeDocument, \n// from ./part2\nDomRange } from \"./_\";\n// import * as log4javascript from \"log4javascript\";\n// var log = log4javascript.getLogger(\"RangeIterator\");\nvar RangeIterator = /** @class */ (function () {\n    function RangeIterator(range, clonePartiallySelectedTextNodes) {\n        this.range = range;\n        this.clonePartiallySelectedTextNodes = clonePartiallySelectedTextNodes;\n        // TODO the following properties are migrated from RangeIterator.prototype\n        // now, those are in RangeIterator's instance\n        // so we can remove `detach` method\n        this._current = null;\n        this._next = null;\n        this._first = null;\n        this._last = null;\n        this.isSingleCharacterDataNode = false;\n        // log.info(\"New RangeIterator \", dom.inspectNode(range.startContainer), range.startOffset, dom.inspectNode(range.endContainer), range.endOffset);\n        if (!range.collapsed) {\n            this.sc = range.startContainer;\n            this.so = range.startOffset;\n            this.ec = range.endContainer;\n            this.eo = range.endOffset;\n            var root = range.commonAncestorContainer;\n            if (this.sc === this.ec && isCharacterDataNode(this.sc)) {\n                this.isSingleCharacterDataNode = true;\n                this._first = this._last = this._next = this.sc;\n            }\n            else {\n                this._first = this._next = (this.sc === root && !isCharacterDataNode(this.sc)) ?\n                    this.sc.childNodes[this.so] : getClosestAncestorIn(this.sc, root, true);\n                this._last = (this.ec === root && !isCharacterDataNode(this.ec)) ?\n                    this.ec.childNodes[this.eo - 1] : getClosestAncestorIn(this.ec, root, true);\n            }\n            // log.info(\"RangeIterator first and last\", dom.inspectNode(this._first), dom.inspectNode(this._last));\n        }\n    }\n    RangeIterator.prototype.reset = function () {\n        this._current = null;\n        this._next = this._first;\n    };\n    RangeIterator.prototype.hasNext = function () {\n        return !!this._next;\n    };\n    RangeIterator.prototype.detach = function () {\n        this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null;\n    };\n    RangeIterator.prototype.next = function () {\n        // Move to next node\n        var current = this._current = this._next;\n        if (current) {\n            this._next = (current !== this._last) ? current.nextSibling : null;\n            // Check for partially selected text nodes\n            if (isCharacterDataNode(current) && this.clonePartiallySelectedTextNodes) {\n                if (current === this.ec) {\n                    current = current.cloneNode(true);\n                    current.deleteData(this.eo, current.length - this.eo);\n                }\n                if (this._current === this.sc) {\n                    current = current.cloneNode(true);\n                    current.deleteData(0, this.so);\n                }\n            }\n        }\n        return current;\n    };\n    RangeIterator.prototype.remove = function () {\n        var current = this._current, start, end;\n        if (isCharacterDataNode(current) && (current === this.sc || current === this.ec)) {\n            start = (current === this.sc) ? this.so : 0;\n            end = (current === this.ec) ? this.eo : current.length;\n            if (start != end) {\n                current.deleteData(start, end - start);\n            }\n        }\n        else {\n            if (current.parentNode) {\n                removeNode(current);\n            }\n            else {\n                // log.warn(\"Node to be removed has no parent node. Is this the child of an attribute node in Firefox 2?\");\n            }\n        }\n    };\n    // Checks if the current node is partially selected\n    RangeIterator.prototype.isPartiallySelectedSubtree = function () {\n        var current = this._current;\n        return isNonTextPartiallySelected(current, this.range);\n    };\n    RangeIterator.prototype.getSubtreeIterator = function () {\n        var subRange;\n        if (this.isSingleCharacterDataNode) {\n            subRange = this.range.cloneRange();\n            subRange.collapse(false);\n        }\n        else {\n            subRange = new DomRange(getRangeDocument(this.range));\n            var current = this._current;\n            var startContainer = current, startOffset = 0, endContainer = current, endOffset = getNodeLength(current);\n            if (isOrIsAncestorOf(current, this.sc)) {\n                startContainer = this.sc;\n                startOffset = this.so;\n            }\n            if (isOrIsAncestorOf(current, this.ec)) {\n                endContainer = this.ec;\n                endOffset = this.eo;\n            }\n            updateBoundaries(subRange, startContainer, startOffset, endContainer, endOffset);\n        }\n        return new RangeIterator(subRange, this.clonePartiallySelectedTextNodes);\n    };\n    return RangeIterator;\n}()); // RangeIterator\nexport { RangeIterator };\nexport function cloneSubtree(iterator) {\n    var partiallySelected;\n    for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next();) {\n        partiallySelected = iterator.isPartiallySelectedSubtree();\n        // log.debug(\"cloneSubtree got node \" + dom.inspectNode(node) + \" from iterator. partiallySelected: \" + partiallySelected);\n        node = node.cloneNode(!partiallySelected);\n        if (partiallySelected) {\n            subIterator = iterator.getSubtreeIterator();\n            node.appendChild(cloneSubtree(subIterator));\n            subIterator.detach();\n        }\n        if (node.nodeType == 10) { // DocumentType\n            throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n        }\n        frag.appendChild(node);\n    }\n    return frag;\n}\nexport function iterateSubtree(iterator, func, iteratorState) {\n    if (iteratorState === void 0) { iteratorState = { stop: false }; }\n    var it, n;\n    for (var node, subIterator; node = iterator.next();) {\n        if (iterator.isPartiallySelectedSubtree()) {\n            if (func(node) === false) {\n                iteratorState.stop = true;\n                return;\n            }\n            else {\n                // The node is partially selected by the Range, so we can use a new RangeIterator on the portion of\n                // the node selected by the Range.\n                subIterator = iterator.getSubtreeIterator();\n                iterateSubtree(subIterator, func, iteratorState);\n                subIterator.detach();\n                if (iteratorState.stop) {\n                    return;\n                }\n            }\n        }\n        else {\n            // The whole node is selected, so we can use efficient DOM iteration to iterate over the node and its\n            // descendants\n            it = dom.createIterator(node);\n            while ((n = it.next())) {\n                if (func(n) === false) {\n                    iteratorState.stop = true;\n                    return;\n                }\n            }\n        }\n    }\n}\nexport function deleteSubtree(iterator) {\n    var subIterator;\n    while (iterator.next()) {\n        if (iterator.isPartiallySelectedSubtree()) {\n            subIterator = iterator.getSubtreeIterator();\n            deleteSubtree(subIterator);\n            subIterator.detach();\n        }\n        else {\n            iterator.remove();\n        }\n    }\n}\nexport function extractSubtree(iterator) {\n    // log.debug(\"extract on iterator\", iterator);\n    for (var node, frag = getRangeDocument(iterator.range).createDocumentFragment(), subIterator; node = iterator.next();) {\n        // log.debug(\"extractSubtree got node \" + dom.inspectNode(node) + \" from iterator. partiallySelected: \" + iterator.isPartiallySelectedSubtree());\n        if (iterator.isPartiallySelectedSubtree()) {\n            node = node.cloneNode(false);\n            subIterator = iterator.getSubtreeIterator();\n            node.appendChild(extractSubtree(subIterator));\n            subIterator.detach();\n        }\n        else {\n            iterator.remove();\n        }\n        if (node.nodeType == 10) { // DocumentType\n            throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n        }\n        frag.appendChild(node);\n    }\n    return frag;\n}\n//# sourceMappingURL=RangeIterator.js.map","import * as tslib_1 from \"tslib\";\nimport { DOMException } from \"../../DOMException\";\nimport * as dom from '../../dom';\nimport { comparePoints, getDocument, getNodeIndex, getNodeLength, getRootContainer, isCharacterDataNode, isOrIsAncestorOf, splitDataNode } from \"../../dom\";\nimport { \n// from ./util\nassertNode, assertNodeNotReadOnly, assertRangeValid, assertSameDocumentOrFragment, assertValidNodeType, getRangeDocument, insertableNodeTypes, isNonTextPartiallySelected, isRangeValid, rangeProperties, surroundNodeTypes, \n// from ./RangeIterator\ncloneSubtree, iterateSubtree, RangeIterator, \n// from ./part2\nDomRange } from \"./_\";\nimport { createRange, getSelection } from \"../_\";\n// import * as log4javascript from \"log4javascript\";\n// var log = log4javascript.getLogger(\"DomRangeBase\");\nfunction getRangeRoot(range) {\n    return getRootContainer(range.startContainer);\n}\nfunction insertNodeAtPosition(node, n, o) {\n    var firstNodeInserted = node.nodeType == 11 ? node.firstChild : node;\n    if (isCharacterDataNode(n)) {\n        if (o == n.length) {\n            dom.insertAfter(node, n);\n        }\n        else {\n            n.parentNode.insertBefore(node, o == 0 ? n : splitDataNode(n, o));\n        }\n    }\n    else if (o >= n.childNodes.length) {\n        n.appendChild(node);\n    }\n    else {\n        n.insertBefore(node, n.childNodes[o]);\n    }\n    return firstNodeInserted;\n}\nfunction rangesIntersect(rangeA, rangeB, touchingIsIntersecting) {\n    assertRangeValid(rangeA);\n    assertRangeValid(rangeB);\n    if (getRangeDocument(rangeB) != getRangeDocument(rangeA)) {\n        throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n    }\n    var startComparison = comparePoints(rangeA.startContainer, rangeA.startOffset, rangeB.endContainer, rangeB.endOffset), endComparison = comparePoints(rangeA.endContainer, rangeA.endOffset, rangeB.startContainer, rangeB.startOffset);\n    return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n}\nfunction getNodesInRange(range, nodeTypes, filter) {\n    var filterNodeTypes = !!(nodeTypes && nodeTypes.length), regex;\n    var filterExists = !!filter;\n    if (filterNodeTypes) {\n        regex = new RegExp(\"^(\" + nodeTypes.join(\"|\") + \")$\");\n    }\n    var nodes = [];\n    iterateSubtree(new RangeIterator(range, false), function (node) {\n        if (filterNodeTypes && !regex.test(node.nodeType.toString())) {\n            return;\n        }\n        if (filterExists && !filter(node)) {\n            return;\n        }\n        // Don't include a boundary container if it is a character data node and the range does not contain any\n        // of its character data. See issue 190.\n        var sc = range.startContainer;\n        if (node == sc && isCharacterDataNode(sc) && range.startOffset == sc.length) {\n            return;\n        }\n        var ec = range.endContainer;\n        if (node == ec && isCharacterDataNode(ec) && range.endOffset == 0) {\n            return;\n        }\n        nodes.push(node);\n    });\n    return nodes;\n}\nexport function rangeInspect(range) {\n    var name = (typeof range.getName == \"undefined\") ? \"Range\" : range.getName();\n    return \"[\" + name + \"(\" + dom.inspectNode(range.startContainer) + \":\" + range.startOffset + \", \" +\n        dom.inspectNode(range.endContainer) + \":\" + range.endOffset + \")]\";\n}\nexport function rangeToHtml(range) {\n    assertRangeValid(range);\n    var container = range.commonAncestorContainer.parentNode.cloneNode(false);\n    container.appendChild(range.cloneContents());\n    return container.innerHTML;\n}\n/*----------------------------------------------------------------------------------------------------------------*/\nvar s2s = 0, s2e = 1, e2e = 2, e2s = 3;\nvar n_b = 0, n_a = 1, n_b_a = 2, n_i = 3;\nexport var comparisonConstants = {\n    START_TO_START: s2s,\n    START_TO_END: s2e,\n    END_TO_END: e2e,\n    END_TO_START: e2s,\n    NODE_BEFORE: n_b,\n    NODE_AFTER: n_a,\n    NODE_BEFORE_AND_AFTER: n_b_a,\n    NODE_INSIDE: n_i,\n};\n/**\n * @deprecated please replace by: `class C extends createPrototypeRange(..){..} Object.assign(C, comparisonConstants)`\n * @param C constructor (a class)\n */\nexport function copyComparisonConstants(C) {\n    Object.assign(C, comparisonConstants);\n    Object.assign(C.prototype, comparisonConstants);\n}\n/*----------------------------------------------------------------------------------------------------------------*/\nexport function createDomRangeP1(Base) {\n    return /** @class */ (function (_super) {\n        tslib_1.__extends(class_1, _super);\n        function class_1() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.compareBoundaryPoints = function (how, range) {\n            assertRangeValid(this);\n            assertSameDocumentOrFragment(this.startContainer, range.startContainer);\n            var nodeA, offsetA, nodeB, offsetB;\n            var prefixA = (how == e2s || how == s2s) ? \"start\" : \"end\";\n            var prefixB = (how == s2e || how == s2s) ? \"start\" : \"end\";\n            nodeA = this[prefixA + \"Container\"];\n            offsetA = this[prefixA + \"Offset\"];\n            nodeB = range[prefixB + \"Container\"];\n            offsetB = range[prefixB + \"Offset\"];\n            return comparePoints(nodeA, offsetA, nodeB, offsetB);\n        };\n        class_1.prototype.insertNode = function (node) {\n            assertRangeValid(this);\n            assertValidNodeType(node, insertableNodeTypes);\n            assertNodeNotReadOnly(this.startContainer);\n            if (isOrIsAncestorOf(node, this.startContainer)) {\n                throw new DOMException(\"HIERARCHY_REQUEST_ERR\");\n            }\n            // No check for whether the container of the start of the Range is of a type that does not allow\n            // children of the type of node: the browser's DOM implementation should do this for us when we attempt\n            // to add the node\n            var firstNodeInserted = insertNodeAtPosition(node, this.startContainer, this.startOffset);\n            this.setStartBefore(firstNodeInserted);\n        };\n        class_1.prototype.cloneContents = function () {\n            assertRangeValid(this);\n            var clone, frag;\n            if (this.collapsed) {\n                return getRangeDocument(this).createDocumentFragment();\n            }\n            else {\n                if (this.startContainer === this.endContainer && isCharacterDataNode(this.startContainer)) {\n                    clone = this.startContainer.cloneNode(true);\n                    clone.data = clone.data.slice(this.startOffset, this.endOffset);\n                    frag = getRangeDocument(this).createDocumentFragment();\n                    frag.appendChild(clone);\n                    return frag;\n                }\n                else {\n                    var iterator = new RangeIterator(this, true);\n                    clone = cloneSubtree(iterator);\n                    iterator.detach();\n                }\n                return clone;\n            }\n        };\n        class_1.prototype.canSurroundContents = function () {\n            assertRangeValid(this);\n            assertNodeNotReadOnly(this.startContainer);\n            assertNodeNotReadOnly(this.endContainer);\n            // Check if the contents can be surrounded. Specifically, this means whether the range partially selects\n            // no non-text nodes.\n            // see https://developer.mozilla.org/en-US/docs/Web/API/Range/surroundContents\n            var iterator = new RangeIterator(this, true);\n            var boundariesInvalid = (iterator._first && isNonTextPartiallySelected(iterator._first, this) ||\n                (iterator._last && isNonTextPartiallySelected(iterator._last, this)));\n            iterator.detach();\n            return !boundariesInvalid;\n        };\n        class_1.prototype.surroundContents = function (newParent) {\n            assertValidNodeType(newParent, surroundNodeTypes);\n            if (!this.canSurroundContents()) {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n            // Extract the contents\n            var content = this.extractContents();\n            // Clear the children of the node\n            if (newParent.hasChildNodes()) {\n                while (newParent.lastChild) {\n                    newParent.removeChild(newParent.lastChild);\n                }\n            }\n            // Insert the new node and add the extracted contents\n            insertNodeAtPosition(newParent, this.startContainer, this.startOffset);\n            newParent.appendChild(content);\n            this.selectNode(newParent);\n        };\n        class_1.prototype.cloneRange = function () {\n            assertRangeValid(this);\n            var range = new DomRange(getRangeDocument(this));\n            for (var _i = 0, rangeProperties_1 = rangeProperties; _i < rangeProperties_1.length; _i++) {\n                var prop = rangeProperties_1[_i];\n                range[prop] = this[prop];\n            }\n            return range;\n        };\n        class_1.prototype.toString = function () {\n            assertRangeValid(this);\n            var sc = this.startContainer;\n            if (sc === this.endContainer && isCharacterDataNode(sc)) {\n                return (sc.nodeType == 3 || sc.nodeType == 4) ? sc.data.slice(this.startOffset, this.endOffset) : \"\";\n            }\n            else {\n                var textParts = [], iterator = new RangeIterator(this, true);\n                // log.info(\"toString iterator: \" + dom.inspectNode(iterator._first) + \", \" + dom.inspectNode(iterator._last));\n                iterateSubtree(iterator, function (node) {\n                    // Accept only text or CDATA nodes, not comments\n                    if (node.nodeType == 3 || node.nodeType == 4) {\n                        textParts.push(node.data);\n                    }\n                });\n                iterator.detach();\n                return textParts.join(\"\");\n            }\n        };\n        // The methods below are all non-standard. The following batch were introduced by Mozilla but have since\n        // been removed from Mozilla.\n        class_1.prototype.compareNode = function (node) {\n            assertRangeValid(this);\n            var parent = node.parentNode;\n            var nodeIndex = getNodeIndex(node);\n            if (!parent) {\n                throw new DOMException(\"NOT_FOUND_ERR\");\n            }\n            var startComparison = this.comparePoint(parent, nodeIndex), endComparison = this.comparePoint(parent, nodeIndex + 1);\n            if (startComparison < 0) { // Node starts before\n                return (endComparison > 0) ? n_b_a : n_b;\n            }\n            else {\n                return (endComparison > 0) ? n_a : n_i;\n            }\n        };\n        /**\n         * Returns −1 if the point is before the range, 0 if the point is\n         * in the range, and 1 if the point is after the range.\n         */\n        class_1.prototype.comparePoint = function (node, offset) {\n            assertRangeValid(this);\n            assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n            assertSameDocumentOrFragment(node, this.startContainer);\n            if (comparePoints(node, offset, this.startContainer, this.startOffset) < 0) {\n                return -1;\n            }\n            else if (comparePoints(node, offset, this.endContainer, this.endOffset) > 0) {\n                return 1;\n            }\n            return 0;\n        };\n        // Implementation as per HTML parsing spec, trusting in the browser's implementation of innerHTML. See\n        // discussion and base code for this implementation at issue 67.\n        // Spec: http://html5.org/specs/dom-parsing.html#extensions-to-the-range-interface\n        // Thanks to Aleks Williams.\n        class_1.prototype.createContextualFragment = function (fragment) {\n            // \"Let node the context object's start's node.\"\n            var node = this.startContainer;\n            var doc = getDocument(node);\n            // \"If the context object's start's node is null, raise an INVALID_STATE_ERR\n            // exception and abort these steps.\"\n            if (!node) {\n                throw new DOMException(\"INVALID_STATE_ERR\");\n            }\n            // \"Let element be as follows, depending on node's interface:\"\n            // Document, Document Fragment: null\n            var el = null;\n            // \"Element: node\"\n            if (node.nodeType == 1) {\n                el = node;\n                // \"Text, Comment: node's parentElement\"\n            }\n            else if (isCharacterDataNode(node)) {\n                el = dom.parentElement(node);\n            }\n            // \"If either element is null or element's ownerDocument is an HTML document\n            // and element's local name is \"html\" and element's namespace is the HTML\n            // namespace\"\n            if (el === null || (el.nodeName == \"HTML\" &&\n                dom.isHtmlNamespace(getDocument(el).documentElement) &&\n                dom.isHtmlNamespace(el))) {\n                // \"let element be a new Element with \"body\" as its local name and the HTML\n                // namespace as its namespace.\"\"\n                el = doc.createElement(\"body\");\n            }\n            else {\n                el = el.cloneNode(false);\n            }\n            // \"If the node's document is an HTML document: Invoke the HTML fragment parsing algorithm.\"\n            // \"If the node's document is an XML document: Invoke the XML fragment parsing algorithm.\"\n            // \"In either case, the algorithm must be invoked with fragment as the input\n            // and element as the context element.\"\n            el.innerHTML = fragment;\n            // \"If this raises an exception, then abort these steps. Otherwise, let new\n            // children be the nodes returned.\"\n            // \"Let fragment be a new DocumentFragment.\"\n            // \"Append all new children to fragment.\"\n            // \"Return fragment.\"\n            return dom.fragmentFromNodeChildren(el);\n        };\n        class_1.prototype.toHtml = function () {\n            return rangeToHtml(this);\n        };\n        // touchingIsIntersecting determines whether this method considers a node that borders a range intersects\n        // with it (as in WebKit) or not (as in Gecko pre-1.9, and the default)\n        class_1.prototype.intersectsNode = function (node, touchingIsIntersecting) {\n            assertRangeValid(this);\n            if (getRootContainer(node) != getRangeRoot(this)) {\n                return false;\n            }\n            var parent = node.parentNode, offset = getNodeIndex(node);\n            if (!parent) {\n                return true;\n            }\n            var startComparison = comparePoints(parent, offset, this.endContainer, this.endOffset), endComparison = comparePoints(parent, offset + 1, this.startContainer, this.startOffset);\n            return touchingIsIntersecting ? startComparison <= 0 && endComparison >= 0 : startComparison < 0 && endComparison > 0;\n        };\n        class_1.prototype.isPointInRange = function (node, offset) {\n            assertRangeValid(this);\n            assertNode(node, \"HIERARCHY_REQUEST_ERR\");\n            assertSameDocumentOrFragment(node, this.startContainer);\n            return (comparePoints(node, offset, this.startContainer, this.startOffset) >= 0) &&\n                (comparePoints(node, offset, this.endContainer, this.endOffset) <= 0);\n        };\n        // The methods below are non-standard and invented by me.\n        class_1.prototype.intersectsRange = function (range) {\n            return rangesIntersect(this, range, false);\n        };\n        class_1.prototype.intersectsOrTouchesRange = function (range) {\n            return rangesIntersect(this, range, true);\n        };\n        class_1.prototype.intersection = function (range) {\n            if (this.intersectsRange(range)) {\n                var startComparison = comparePoints(this.startContainer, this.startOffset, range.startContainer, range.startOffset), endComparison = comparePoints(this.endContainer, this.endOffset, range.endContainer, range.endOffset);\n                var intersectionRange = this.cloneRange();\n                // log.info(\"intersection\", this.inspect(), range.inspect(), startComparison, endComparison);\n                if (startComparison == -1) {\n                    intersectionRange.setStart(range.startContainer, range.startOffset);\n                }\n                if (endComparison == 1) {\n                    intersectionRange.setEnd(range.endContainer, range.endOffset);\n                }\n                return intersectionRange;\n            }\n            return null;\n        };\n        class_1.prototype.union = function (range) {\n            if (this.intersectsOrTouchesRange(range)) {\n                var unionRange = this.cloneRange();\n                if (comparePoints(range.startContainer, range.startOffset, this.startContainer, this.startOffset) == -1) {\n                    unionRange.setStart(range.startContainer, range.startOffset);\n                }\n                if (comparePoints(range.endContainer, range.endOffset, this.endContainer, this.endOffset) == 1) {\n                    unionRange.setEnd(range.endContainer, range.endOffset);\n                }\n                return unionRange;\n            }\n            else {\n                throw new DOMException(\"Ranges do not intersect\");\n            }\n        };\n        class_1.prototype.containsNode = function (node, allowPartial) {\n            if (allowPartial) {\n                return this.intersectsNode(node, false);\n            }\n            else {\n                return this.compareNode(node) == n_i;\n            }\n        };\n        class_1.prototype.containsNodeContents = function (node) {\n            return this.comparePoint(node, 0) >= 0 && this.comparePoint(node, getNodeLength(node)) <= 0;\n        };\n        class_1.prototype.containsRange = function (range) {\n            var intersection = this.intersection(range);\n            return intersection !== null && range.equals(intersection);\n        };\n        class_1.prototype.containsNodeText = function (node) {\n            var nodeRange = this.cloneRange();\n            nodeRange.selectNode(node);\n            var textNodes = nodeRange.getNodes([3]);\n            if (textNodes.length > 0) {\n                nodeRange.setStart(textNodes[0], 0);\n                var lastTextNode = textNodes.pop();\n                nodeRange.setEnd(lastTextNode, lastTextNode.length);\n                return this.containsRange(nodeRange);\n            }\n            else {\n                return this.containsNodeContents(node);\n            }\n        };\n        class_1.prototype.getNodes = function (nodeTypes, filter) {\n            assertRangeValid(this);\n            return getNodesInRange(this, nodeTypes, filter);\n        };\n        class_1.prototype.getDocument = function () {\n            return getRangeDocument(this);\n        };\n        class_1.prototype.collapseBefore = function (node) {\n            this.setEndBefore(node);\n            this.collapse(false);\n        };\n        class_1.prototype.collapseAfter = function (node) {\n            this.setStartAfter(node);\n            this.collapse(true);\n        };\n        class_1.prototype.getBookmark = function (containerNode) {\n            var doc = getRangeDocument(this);\n            var preSelectionRange = createRange(doc);\n            containerNode = containerNode || dom.getBody(doc);\n            preSelectionRange.selectNodeContents(containerNode);\n            var range = this.intersection(preSelectionRange);\n            var start = 0, end = 0;\n            if (range) {\n                preSelectionRange.setEnd(range.startContainer, range.startOffset);\n                start = preSelectionRange.toString().length;\n                end = start + range.toString().length;\n            }\n            return {\n                start: start,\n                end: end,\n                containerNode: containerNode\n            };\n        };\n        class_1.prototype.moveToBookmark = function (bookmark) {\n            var containerNode = bookmark.containerNode;\n            var charIndex = 0;\n            this.setStart(containerNode, 0);\n            this.collapse(true);\n            var nodeStack = [containerNode], node, foundStart = false, stop = false;\n            var nextCharIndex, i, childNodes;\n            while (!stop && (node = nodeStack.pop())) {\n                if (node.nodeType == 3) {\n                    nextCharIndex = charIndex + node.length;\n                    if (!foundStart && bookmark.start >= charIndex && bookmark.start <= nextCharIndex) {\n                        this.setStart(node, bookmark.start - charIndex);\n                        foundStart = true;\n                    }\n                    if (foundStart && bookmark.end >= charIndex && bookmark.end <= nextCharIndex) {\n                        this.setEnd(node, bookmark.end - charIndex);\n                        stop = true;\n                    }\n                    charIndex = nextCharIndex;\n                }\n                else {\n                    childNodes = node.childNodes;\n                    i = childNodes.length;\n                    while (i--) {\n                        nodeStack.push(childNodes[i]);\n                    }\n                }\n            }\n        };\n        class_1.prototype.getName = function () {\n            return \"DomRange\";\n        };\n        class_1.prototype.equals = function (range) {\n            return rangesEqual(this, range);\n        };\n        class_1.prototype.isValid = function () {\n            return isRangeValid(this);\n        };\n        class_1.prototype.inspect = function () {\n            return rangeInspect(this);\n        };\n        class_1.prototype.detach = function () {\n            // In DOM4, detach() is now a no-op.\n        };\n        // in rangy1, this method is implement in wrappedselection.js\n        // TODO declare in RangeP1Ex\n        class_1.prototype.select = function (direction) {\n            getSelection(this.getDocument()).setSingleRange(this, direction);\n        };\n        return class_1;\n    }(Base));\n} // createDomRangeP1\nexport function rangesEqual(r1, r2) {\n    return r1.startContainer === r2.startContainer &&\n        r1.startOffset === r2.startOffset &&\n        r1.endContainer === r2.endContainer &&\n        r1.endOffset === r2.endOffset;\n}\n//# sourceMappingURL=part1.js.map","import * as tslib_1 from \"tslib\";\nimport { Module } from \"../../module\";\nimport * as dom from '../../dom';\nimport { comparePoints, DomPosition, getClosestAncestorIn, getContentDocument, getNodeIndex, getNodeLength, getRootContainer, isCharacterDataNode, removeNode, splitDataNode } from '../../dom';\nimport { \n// from ./util\nassertNodeNotReadOnly, assertNoDocTypeNotationEntityAncestor, assertRangeValid, assertValidNodeType, assertValidOffset, beforeAfterNodeTypes, DomRangeBase, getElementAncestor, getRangeDocument, rangeProperties, rootContainerNodeTypes, updateBoundaries, \n// from ./RangeIterator\ndeleteSubtree, extractSubtree, iterateSubtree, RangeIterator, \n// from ./part1\ncomparisonConstants, copyComparisonConstants, createDomRangeP1, rangeInspect, rangesEqual, rangeToHtml } from \"./_\";\n// import * as log4javascript from \"log4javascript\";\n// var log = log4javascript.getLogger(\"rangy.DomRange\");\n// Pure JavaScript implementation of DOM Range\nvar module = new Module(\"DomRange\", [\"DomUtil\"]);\n/*----------------------------------------------------------------------------------------------------------------*/\n// Utility functions\nfunction getBoundaryBeforeNode(node) {\n    return new DomPosition(node.parentNode, getNodeIndex(node));\n}\nfunction getBoundaryAfterNode(node) {\n    return new DomPosition(node.parentNode, getNodeIndex(node) + 1);\n}\nfunction splitRangeBoundaries(range, positionsToPreserve) {\n    assertRangeValid(range);\n    // log.debug(\"splitBoundaries called \" + range.inspect(), positionsToPreserve);\n    var sc = range.startContainer, so = range.startOffset, ec = range.endContainer, eo = range.endOffset;\n    var startEndSame = (sc === ec);\n    if (isCharacterDataNode(ec) && eo > 0 && eo < ec.length) {\n        splitDataNode(ec, eo, positionsToPreserve);\n        // log.debug(\"Split end\", dom.inspectNode(ec), eo);\n    }\n    if (isCharacterDataNode(sc) && so > 0 && so < sc.length) {\n        // log.debug(\"Splitting start\", dom.inspectNode(sc), so);\n        sc = splitDataNode(sc, so, positionsToPreserve);\n        if (startEndSame) {\n            eo -= so;\n            ec = sc;\n        }\n        else if (ec == sc.parentNode && eo >= getNodeIndex(sc)) {\n            eo++;\n        }\n        so = 0;\n        // log.debug(\"Split start\", dom.inspectNode(sc), so);\n    }\n    range.setStartAndEnd(sc, so, ec, eo);\n    // log.debug(\"splitBoundaries done\");\n}\n/*----------------------------------------------------------------------------------------------------------------*/\nfunction createRangeContentRemover(remover, boundaryUpdater) {\n    return function () {\n        assertRangeValid(this);\n        var sc = this.startContainer, so = this.startOffset, root = this.commonAncestorContainer;\n        var iterator = new RangeIterator(this, true);\n        // Work out where to position the range after content removal\n        var node, boundary;\n        if (sc !== root) {\n            node = getClosestAncestorIn(sc, root, true);\n            boundary = getBoundaryAfterNode(node);\n            sc = boundary.node;\n            so = boundary.offset;\n        }\n        // Check none of the range is read-only\n        iterateSubtree(iterator, assertNodeNotReadOnly);\n        iterator.reset();\n        // Remove the content\n        var returnValue = remover(iterator);\n        iterator.detach();\n        // Move to the new position\n        boundaryUpdater(this, sc, so, sc, so);\n        return returnValue;\n    };\n}\n// https://mariusschulz.com/blog/typescript-2-2-mixin-classes\nfunction createDomRangeP2(Base, boundaryUpdater) {\n    function createBeforeAfterNodeSetter(isBefore, isStart) {\n        return function (node) {\n            assertValidNodeType(node, beforeAfterNodeTypes);\n            assertValidNodeType(getRootContainer(node), rootContainerNodeTypes);\n            var boundary = (isBefore ? getBoundaryBeforeNode : getBoundaryAfterNode)(node);\n            (isStart ? setRangeStart : setRangeEnd)(this, boundary.node, boundary.offset);\n        };\n    }\n    function setRangeStart(range, node, offset) {\n        var ec = range.endContainer, eo = range.endOffset;\n        if (node !== range.startContainer || offset !== range.startOffset) {\n            // Check the root containers of the range and the new boundary, and also check whether the new boundary\n            // is after the current end. In either case, collapse the range to the new position\n            if (getRootContainer(node) != getRootContainer(ec) || comparePoints(node, offset, ec, eo) == 1) {\n                ec = node;\n                eo = offset;\n            }\n            boundaryUpdater(range, node, offset, ec, eo);\n        }\n    }\n    function setRangeEnd(range, node, offset) {\n        var sc = range.startContainer, so = range.startOffset;\n        if (node !== range.endContainer || offset !== range.endOffset) {\n            // Check the root containers of the range and the new boundary, and also check whether the new boundary\n            // is after the current end. In either case, collapse the range to the new position\n            if (getRootContainer(node) != getRootContainer(sc) || comparePoints(node, offset, sc, so) == -1) {\n                sc = node;\n                so = offset;\n            }\n            boundaryUpdater(range, sc, so, node, offset);\n        }\n    }\n    /*\n            // Set up inheritance\n            var F = function() {};\n            F.prototype = api.rangePrototype;\n            Base.prototype = new F();\n    \n            util.extend(Base.prototype, {\n               ...\n            });\n    */\n    return /** @class */ (function (_super) {\n        tslib_1.__extends(class_1, _super);\n        function class_1() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.setStartBefore = createBeforeAfterNodeSetter(true, true);\n            _this.setStartAfter = createBeforeAfterNodeSetter(false, true);\n            _this.setEndBefore = createBeforeAfterNodeSetter(true, false);\n            _this.setEndAfter = createBeforeAfterNodeSetter(false, false);\n            _this.extractContents = createRangeContentRemover(extractSubtree, boundaryUpdater);\n            _this.deleteContents = createRangeContentRemover(deleteSubtree, boundaryUpdater);\n            return _this;\n        }\n        class_1.prototype.setStart = function (node, offset) {\n            assertNoDocTypeNotationEntityAncestor(node, true);\n            assertValidOffset(node, offset);\n            setRangeStart(this, node, offset);\n        };\n        class_1.prototype.setEnd = function (node, offset) {\n            assertNoDocTypeNotationEntityAncestor(node, true);\n            assertValidOffset(node, offset);\n            setRangeEnd(this, node, offset);\n        };\n        class_1.prototype.setStartAndEnd = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            var sc = args[0], so = args[1], ec = sc, eo = so;\n            switch (args.length) {\n                case 3:\n                    eo = args[2];\n                    break;\n                case 4:\n                    ec = args[2];\n                    eo = args[3];\n                    break;\n            }\n            assertNoDocTypeNotationEntityAncestor(sc, true);\n            assertValidOffset(sc, so);\n            assertNoDocTypeNotationEntityAncestor(ec, true);\n            assertValidOffset(ec, eo);\n            boundaryUpdater(this, sc, so, ec, eo);\n        };\n        class_1.prototype.setBoundary = function (node, offset, isStart) {\n            this[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n        };\n        class_1.prototype.collapse = function (toStart) {\n            assertRangeValid(this);\n            if (toStart) {\n                boundaryUpdater(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset);\n            }\n            else {\n                boundaryUpdater(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset);\n            }\n        };\n        class_1.prototype.selectNodeContents = function (node) {\n            assertNoDocTypeNotationEntityAncestor(node, true);\n            boundaryUpdater(this, node, 0, node, getNodeLength(node));\n        };\n        class_1.prototype.selectNode = function (node) {\n            assertNoDocTypeNotationEntityAncestor(node, false);\n            assertValidNodeType(node, beforeAfterNodeTypes);\n            var start = getBoundaryBeforeNode(node), end = getBoundaryAfterNode(node);\n            boundaryUpdater(this, start.node, start.offset, end.node, end.offset);\n        };\n        class_1.prototype.splitBoundaries = function () {\n            splitRangeBoundaries(this);\n        };\n        class_1.prototype.splitBoundariesPreservingPositions = function (positionsToPreserve) {\n            splitRangeBoundaries(this, positionsToPreserve);\n        };\n        class_1.prototype.normalizeBoundaries = function () {\n            assertRangeValid(this);\n            var sc = this.startContainer, so = this.startOffset, ec = this.endContainer, eo = this.endOffset;\n            var mergeForward = function (node) {\n                var sibling = node.nextSibling;\n                if (sibling && sibling.nodeType == node.nodeType) {\n                    ec = node;\n                    eo = node.length;\n                    node.appendData(sibling.data);\n                    removeNode(sibling);\n                }\n            };\n            var mergeBackward = function (node) {\n                var sibling = node.previousSibling;\n                if (sibling && sibling.nodeType == node.nodeType) {\n                    sc = node;\n                    var nodeLength = node.length;\n                    so = sibling.length;\n                    node.insertData(0, sibling.data);\n                    removeNode(sibling);\n                    if (sc == ec) {\n                        eo += so;\n                        ec = sc;\n                    }\n                    else if (ec == node.parentNode) {\n                        var nodeIndex = getNodeIndex(node);\n                        if (eo == nodeIndex) {\n                            ec = node;\n                            eo = nodeLength;\n                        }\n                        else if (eo > nodeIndex) {\n                            eo--;\n                        }\n                    }\n                }\n            };\n            var normalizeStart = true;\n            var sibling;\n            if (isCharacterDataNode(ec)) {\n                if (eo == ec.length) {\n                    mergeForward(ec);\n                }\n                else if (eo == 0) {\n                    sibling = ec.previousSibling;\n                    if (sibling && sibling.nodeType == ec.nodeType) {\n                        eo = sibling.length;\n                        if (sc == ec) {\n                            normalizeStart = false;\n                        }\n                        sibling.appendData(ec.data);\n                        removeNode(ec);\n                        ec = sibling;\n                    }\n                }\n            }\n            else {\n                if (eo > 0) {\n                    var endNode = ec.childNodes[eo - 1];\n                    if (endNode && isCharacterDataNode(endNode)) {\n                        mergeForward(endNode);\n                    }\n                }\n                normalizeStart = !this.collapsed;\n            }\n            if (normalizeStart) {\n                if (isCharacterDataNode(sc)) {\n                    if (so == 0) {\n                        mergeBackward(sc);\n                    }\n                    else if (so == sc.length) {\n                        sibling = sc.nextSibling;\n                        if (sibling && sibling.nodeType == sc.nodeType) {\n                            if (ec == sibling) {\n                                ec = sc;\n                                eo += sc.length;\n                            }\n                            sc.appendData(sibling.data);\n                            removeNode(sibling);\n                        }\n                    }\n                }\n                else {\n                    if (so < sc.childNodes.length) {\n                        var startNode = sc.childNodes[so];\n                        if (startNode && isCharacterDataNode(startNode)) {\n                            mergeBackward(startNode);\n                        }\n                    }\n                }\n            }\n            else {\n                sc = ec;\n                so = eo;\n            }\n            boundaryUpdater(this, sc, so, ec, eo);\n        };\n        class_1.prototype.collapseToPoint = function (node, offset) {\n            assertNoDocTypeNotationEntityAncestor(node, true);\n            assertValidOffset(node, offset);\n            this.setStartAndEnd(node, offset);\n        };\n        class_1.prototype.parentElement = function () {\n            assertRangeValid(this);\n            return getElementAncestor(this.commonAncestorContainer, true);\n        };\n        return class_1;\n    }(Base));\n}\n/*----------------------------------------------------------------------------------------------------------------*/\n/** TODO remove comment\n * @requires call `Object.assign(R, comparisonConstants)` after call this function:\n *      `class R extends createPrototypeRange(..`\n * or\n *      `const R = createPrototypeRange(..`\n */\nexport function createPrototypeRange(Base, boundaryUpdater) {\n    // R1 is a not completed class because createDomRangeP1 only implement RangeP1\n    // the missing members in RangeP2 will be provided at createDomRangeP2\n    // and the missing members in ComparisonConstants will be provided here in `createPrototypeRange`\n    // so result `R12` will be a completed class that implement `Range`\n    var MixinBase = Base;\n    var R1 = createDomRangeP1(MixinBase);\n    //after this, instances of R1 will have consts like: START_TO_START,..\n    Object.assign(R1.prototype, comparisonConstants);\n    var R12 = createDomRangeP2(R1, boundaryUpdater);\n    // this is similar to add `static START_TO_START = ..` into R12\n    // note that, we can ass static members in subclasses: class A{static s = ..} class B extends A{} B.s\n    return Object.assign(R12, comparisonConstants);\n}\n// TODO remove comment\n// we need this const to bypass TS2506: 'DomRange' is referenced directly or indirectly in it own base expression\n// export const _DomRange = createPrototypeRange(RangeBase, updateBoundaries);\n// export type DomRange = InstanceType<typeof DomRange>;\nvar DomRange = /** @class */ (function (_super) {\n    tslib_1.__extends(DomRange, _super);\n    function DomRange() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DomRange.inspect = rangeInspect;\n    DomRange.toHtml = rangeToHtml;\n    DomRange.getRangeDocument = getRangeDocument;\n    DomRange.rangesEqual = rangesEqual;\n    return DomRange;\n}(createPrototypeRange(DomRangeBase, updateBoundaries)));\nexport { DomRange };\n// @deprecated pls directly import & use the exported member of this module\nObject.assign(DomRange, {\n    rangeProperties: rangeProperties,\n    RangeIterator: RangeIterator,\n    copyComparisonConstants: copyComparisonConstants,\n    createPrototypeRange: createPrototypeRange,\n});\nexport function createRangyRange(doc) {\n    doc = getContentDocument(doc, module, \"createRangyRange\");\n    return new DomRange(doc);\n}\n//# sourceMappingURL=part2.js.map","import * as tslib_1 from \"tslib\";\nimport { DOMException } from \"../../DOMException\";\nimport * as dom from \"../../dom\";\nimport { getDocument, getRootContainer, isCharacterDataNode, isOrIsAncestorOf } from \"../../dom\";\nexport function isNonTextPartiallySelected(node, range) {\n    return (node.nodeType != 3) &&\n        (isOrIsAncestorOf(node, range.startContainer) || isOrIsAncestorOf(node, range.endContainer));\n}\n/*----------------------------------------------------------------------------------------------------------------*/\nexport var beforeAfterNodeTypes = [1, 3, 4, 5, 7, 8, 10];\nexport var rootContainerNodeTypes = [2, 9, 11];\nvar readonlyNodeTypes = [5, 6, 10, 12];\nexport var insertableNodeTypes = [1, 3, 4, 5, 7, 8, 10, 11];\nexport var surroundNodeTypes = [1, 3, 4, 5, 7, 8];\nfunction createAncestorFinder(nodeTypes) {\n    return function (node, selfIsAncestor) {\n        var t, n = selfIsAncestor ? node : node.parentNode;\n        while (n) {\n            t = n.nodeType;\n            if (nodeTypes.includes(t)) {\n                return n;\n            }\n            n = n.parentNode;\n        }\n        return null;\n    };\n}\nvar getDocumentOrFragmentContainer = createAncestorFinder([9, 11]);\nvar getReadonlyAncestor = createAncestorFinder(readonlyNodeTypes);\nvar getDocTypeNotationEntityAncestor = createAncestorFinder([6, 10, 12]);\nexport var getElementAncestor = createAncestorFinder([1]);\nexport function assertNoDocTypeNotationEntityAncestor(node, allowSelf) {\n    if (getDocTypeNotationEntityAncestor(node, allowSelf)) {\n        throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n    }\n}\nexport function assertValidNodeType(node, invalidTypes) {\n    if (!invalidTypes.includes(node.nodeType)) {\n        throw new DOMException(\"INVALID_NODE_TYPE_ERR\");\n    }\n}\nexport function assertValidOffset(node, offset) {\n    if (offset < 0 || offset > (isCharacterDataNode(node) ? node.length : node.childNodes.length)) {\n        throw new DOMException(\"INDEX_SIZE_ERR\");\n    }\n}\nexport function assertSameDocumentOrFragment(node1, node2) {\n    if (getDocumentOrFragmentContainer(node1, true) !== getDocumentOrFragmentContainer(node2, true)) {\n        throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n    }\n}\nexport function assertNodeNotReadOnly(node) {\n    if (getReadonlyAncestor(node, true)) {\n        throw new DOMException(\"NO_MODIFICATION_ALLOWED_ERR\");\n    }\n}\nexport function assertNode(node, codeName) {\n    if (!node) {\n        throw new DOMException(codeName);\n    }\n}\nfunction isValidOffset(node, offset) {\n    return offset <= (isCharacterDataNode(node) ? node.length : node.childNodes.length);\n}\nexport function isRangeValid(range) {\n    return (!!range.startContainer && !!range.endContainer &&\n        getRootContainer(range.startContainer) == getRootContainer(range.endContainer) &&\n        isValidOffset(range.startContainer, range.startOffset) &&\n        isValidOffset(range.endContainer, range.endOffset));\n}\nexport function assertRangeValid(range) {\n    if (!isRangeValid(range)) {\n        throw new Error(\"Range error: Range is not valid. This usually happens after DOM mutation. Range: (\" + range.inspect() + \")\");\n    }\n}\n/*----------------------------------------------------------------------------------------------------------------*/\nexport function getRangeDocument(range) {\n    return range.document || getDocument(range.startContainer);\n}\n// Updates commonAncestorContainer and collapsed after boundary change\nfunction updateCollapsedAndCommonAncestor(range) {\n    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n    range.commonAncestorContainer = range.collapsed ?\n        range.startContainer : dom.getCommonAncestor(range.startContainer, range.endContainer);\n}\nexport function updateBoundaries(range, startContainer, startOffset, endContainer, endOffset) {\n    range.startContainer = startContainer;\n    range.startOffset = startOffset;\n    range.endContainer = endContainer;\n    range.endOffset = endOffset;\n    range.document = dom.getDocument(startContainer);\n    updateCollapsedAndCommonAncestor(range);\n}\nexport var rangeProperties = [\n    \"startContainer\",\n    \"startOffset\",\n    \"endContainer\",\n    \"endOffset\",\n    \"collapsed\",\n    \"commonAncestorContainer\"\n];\n// note RangeBase's method list == const rangeProperties above\nvar RangeBase = /** @class */ (function () {\n    function RangeBase() {\n    }\n    return RangeBase;\n}());\nexport { RangeBase };\nvar DomRangeBase = /** @class */ (function (_super) {\n    tslib_1.__extends(DomRangeBase, _super);\n    function DomRangeBase(doc) {\n        var _this = _super.call(this) || this;\n        updateBoundaries(_this, doc, 0, doc, 0);\n        return _this;\n    }\n    return DomRangeBase;\n}(RangeBase));\nexport { DomRangeBase };\n//# sourceMappingURL=util.js.map","import * as tslib_1 from \"tslib\";\nimport { isHostMethod } from \"../util\";\nimport { onDocReady } from '../api';\nimport { Module } from \"../module\";\nimport { getBody, getContentDocument, getNodeLength } from '../dom';\nimport { createPrototypeRange, rangeProperties, RangeBase } from \"./_\";\n// import * as log4javascript from \"log4javascript\";\nvar module = new Module(\"WrappedRange\", [\"DomRange\"]);\n// Wrappers for the browser's native DOM Range implementation\n// /* build:replaceWith(api) */rangy/* build:replaceEnd */.createCoreModule(\"WrappedRange\", [\"DomRange\"], function(api, module) {\n// var log = log4javascript.getLogger(\"rangy.WrappedRange\");\n/*----------------------------------------------------------------------------------------------------------------*/\n// if (api.features.implementsDomRange) {\n// This is a wrapper around the browser's native DOM Range. It has two aims:\n// - Provide workarounds for specific browser bugs\n// - provide convenient extensions, which are inherited from Rangy's DomRange\nfunction updateRangeProperties(range) {\n    for (var _i = 0, rangeProperties_1 = rangeProperties; _i < rangeProperties_1.length; _i++) {\n        var prop = rangeProperties_1[_i];\n        range[prop] = range.nativeRange[prop];\n    }\n    // Fix for broken collapsed property in IE 9.\n    range.collapsed = (range.startContainer === range.endContainer && range.startOffset === range.endOffset);\n}\nfunction updateNativeRange(range, startContainer, startOffset, endContainer, endOffset) {\n    var startMoved = (range.startContainer !== startContainer || range.startOffset != startOffset);\n    var endMoved = (range.endContainer !== endContainer || range.endOffset != endOffset);\n    var nativeRangeDifferent = !range.equals(range.nativeRange);\n    // Always set both boundaries for the benefit of IE9 (see issue 35)\n    if (startMoved || endMoved || nativeRangeDifferent) {\n        range.setEnd(endContainer, endOffset);\n        range.setStart(startContainer, startOffset);\n    }\n}\nvar WrappedRange = /** @class */ (function (_super) {\n    tslib_1.__extends(WrappedRange, _super); /*implements WrappedRangeBase*/\n    function WrappedRange(nativeRange) {\n        var _this = _super.call(this) || this;\n        _this.nativeRange = nativeRange;\n        _this.setStartBefore = WrappedRange.createBeforeAfterNodeSetter(\"setStartBefore\");\n        _this.setStartAfter = WrappedRange.createBeforeAfterNodeSetter(\"setStartAfter\");\n        _this.setEndBefore = WrappedRange.createBeforeAfterNodeSetter(\"setEndBefore\");\n        _this.setEndAfter = WrappedRange.createBeforeAfterNodeSetter(\"setEndAfter\");\n        if (!nativeRange) {\n            throw module.createError(\"WrappedRange: Range must be specified\");\n        }\n        updateRangeProperties(_this);\n        return _this;\n    }\n    // nativeRange: Range; //declare here\n    WrappedRange.prototype.selectNode = function (node) {\n        this.nativeRange.selectNode(node);\n        updateRangeProperties(this);\n    };\n    ;\n    WrappedRange.prototype.cloneContents = function () {\n        return this.nativeRange.cloneContents();\n    };\n    ;\n    // Due to a long-standing Firefox bug that I have not been able to find a reliable way to detect,\n    // insertNode() is never delegated to the native range.\n    WrappedRange.prototype.surroundContents = function (node) {\n        this.nativeRange.surroundContents(node);\n        updateRangeProperties(this);\n    };\n    ;\n    WrappedRange.prototype.collapse = function (isStart) {\n        this.nativeRange.collapse(isStart);\n        updateRangeProperties(this);\n    };\n    ;\n    WrappedRange.prototype.cloneRange = function () {\n        return new WrappedRange(this.nativeRange.cloneRange());\n    };\n    ;\n    WrappedRange.prototype.refresh = function () {\n        updateRangeProperties(this);\n    };\n    ;\n    WrappedRange.prototype.toString = function () {\n        return this.nativeRange.toString();\n    };\n    ;\n    /*--------------------------------------------------------------------------------------------------------*/\n    // Test for Firefox 2 bug that prevents moving the start of a Range to a point after its current end and\n    // correct for it\n    // note: rangy2 don't support Firefox <= 2\n    WrappedRange.prototype.setStart = function (node, offset) {\n        this.nativeRange.setStart(node, offset);\n        updateRangeProperties(this);\n    };\n    ;\n    WrappedRange.prototype.setEnd = function (node, offset) {\n        this.nativeRange.setEnd(node, offset);\n        updateRangeProperties(this);\n    };\n    ;\n    WrappedRange.createBeforeAfterNodeSetter = function (name) {\n        return function (node) {\n            this.nativeRange[name](node);\n            updateRangeProperties(this);\n        };\n    };\n    /*--------------------------------------------------------------------------------------------------------*/\n    // Always use DOM4-compliant selectNodeContents implementation: it's simpler and less code than testing\n    // whether the native implementation can be trusted\n    WrappedRange.prototype.selectNodeContents = function (node) {\n        //implement in domrange\n        this.setStartAndEnd(node, 0, getNodeLength(node));\n    };\n    ;\n    /*--------------------------------------------------------------------------------------------------------*/\n    // Test for and correct WebKit bug that has the behaviour of compareBoundaryPoints round the wrong way for\n    // constants START_TO_END and END_TO_START: https://bugs.webkit.org/show_bug.cgi?id=20738\n    // note: this bug is fixed in 2008, so rangy2 don't test this\n    WrappedRange.prototype.compareBoundaryPoints = function (how, sourceRange) {\n        return this.nativeRange.compareBoundaryPoints(how, sourceRange.nativeRange || sourceRange);\n    };\n    /*--------------------------------------------------------------------------------------------------------*/\n    WrappedRange.prototype.getName = function () {\n        return \"WrappedRange\";\n    };\n    ;\n    return WrappedRange;\n}(createPrototypeRange(RangeBase, updateNativeRange) /*implements WrappedRangeBase*/));\nexport { WrappedRange };\n// Object.assign(WrappedRange, comparisonConstants);\n// change WrappedRange.{deleteContents, extractContents, createContextualFragment} if need\nfunction docReadyHandler() {\n    // Create test range and node for feature detection\n    var testTextNode = document.createTextNode(\"test\");\n    getBody(document).appendChild(testTextNode);\n    var range = document.createRange();\n    /*--------------------------------------------------------------------------------------------------------*/\n    // Test for IE deleteContents() and extractContents() bug and correct it. See issue 107.\n    var el = document.createElement(\"div\");\n    el.innerHTML = \"123\";\n    var textNode = el.firstChild;\n    var body = getBody(document);\n    body.appendChild(el);\n    range.setStart(textNode, 1);\n    range.setEnd(textNode, 2);\n    range.deleteContents();\n    var rangeProto = WrappedRange.prototype;\n    if (textNode.data == \"13\") {\n        // Behaviour is correct per DOM4 Range so wrap the browser's implementation of deleteContents() and\n        // extractContents()\n        rangeProto.deleteContents = function () {\n            this.nativeRange.deleteContents();\n            updateRangeProperties(this);\n        };\n        rangeProto.extractContents = function () {\n            var frag = this.nativeRange.extractContents();\n            updateRangeProperties(this);\n            return frag;\n        };\n    }\n    else {\n        // log.info(\"Incorrect native Range deleteContents() implementation. Using Rangy's own.\");\n    }\n    body.removeChild(el);\n    /*--------------------------------------------------------------------------------------------------------*/\n    // Test for existence of createContextualFragment and delegate to it if it exists\n    if (isHostMethod(range, \"createContextualFragment\")) {\n        rangeProto.createContextualFragment = function (fragmentStr) {\n            return this.nativeRange.createContextualFragment(fragmentStr);\n        };\n    }\n    /*--------------------------------------------------------------------------------------------------------*/\n    // Clean up\n    body.removeChild(testTextNode);\n    body = null;\n}\nonDocReady(docReadyHandler);\nexport function createNativeRange(doc) {\n    doc = getContentDocument(doc, module, \"createNativeRange\");\n    return doc.createRange();\n}\n;\nexport function createRange(doc) {\n    doc = getContentDocument(doc, module, \"createRange\");\n    return new WrappedRange(createNativeRange(doc));\n}\n;\nexport function shimCreateRange(win) {\n    if (!win)\n        win = window;\n    var doc = win.document;\n    if (typeof doc.createRange == \"undefined\") {\n        doc.createRange = function () {\n            return createRange(doc);\n        };\n    }\n}\n//# sourceMappingURL=wrappedrange.js.map","import * as tslib_1 from \"tslib\";\nimport { Module } from \"../module\";\nimport { config, features } from \"../api\";\nimport { DOMException } from \"../DOMException\";\nimport * as util from \"../util\";\nimport { isHostMethod } from \"../util\";\nimport * as dom from \"../dom\";\nimport { DomPosition, getDocument } from \"../dom\";\nimport { DomRange, rangesEqual, createNativeRange, createRange, WrappedRange } from \"./_\";\n// import * as log4javascript from \"log4javascript\";\nvar module = new Module(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"]);\n// This module creates a selection object wrapper that conforms as closely as possible to the Selection specification\n// in the HTML Editing spec (http://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#selections)\n// /* build:replaceWith(api) */rangy/* build:replaceEnd */.createCoreModule(\"WrappedSelection\", [\"DomRange\", \"WrappedRange\"], function(api, module) {\nvar BOOLEAN = \"boolean\";\nvar NUMBER = \"number\";\n// var log = log4javascript.getLogger(\"rangy.WrappedSelection\");\n// Utility function to support direction parameters in the API that may be a string (\"backward\", \"backwards\",\n// \"forward\" or \"forwards\") or a Boolean (true for backwards).\nfunction isDirectionBackward(dir) {\n    return (typeof dir == \"string\") ? /^backward(s)?$/i.test(dir) : !!dir;\n}\nfunction getWindow(win, methodName) {\n    if (!win) {\n        return window;\n    }\n    else if (dom.isWindow(win)) {\n        return win;\n    }\n    else if (win instanceof WrappedSelection) {\n        return win.win;\n    }\n    else {\n        var doc = dom.getContentDocument(win, module, methodName);\n        return dom.getWindow(doc);\n    }\n}\nexport function getNativeSelection(winParam) {\n    return getWindow(winParam, \"getWinSelection\").getSelection();\n}\nfunction winSelectionIsBackward(sel) {\n    var backward = false;\n    if (sel.anchorNode) {\n        backward = (dom.comparePoints(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset) == 1);\n    }\n    return backward;\n}\nvar selectionIsBackward = winSelectionIsBackward;\n/** @deprecated always return true because we don't support TextRange / document.selection in old IE */\nexport function isSelectionValid() {\n    return true;\n}\nvar testSelection = getNativeSelection();\n// In Firefox, the selection is null in an iframe with display: none. See issue #138.\nif (!testSelection) {\n    module.fail(\"Native selection was null (possibly issue 138?)\");\n    // return false;\n}\nvar testRange = createNativeRange(document);\n// Obtaining a range from a selection\nvar selectionHasAnchorAndFocus = features.selectionHasAnchorAndFocus =\n    util.areHostProperties(testSelection, [\"anchorNode\", \"focusNode\", \"anchorOffset\", \"focusOffset\"]);\n// Test for existence of native selection extend() method\nvar selectionHasExtend = features.selectionHasExtend =\n    isHostMethod(testSelection, \"extend\");\n// Test if rangeCount exists\nvar selectionHasRangeCount = features.selectionHasRangeCount =\n    (typeof testSelection.rangeCount == NUMBER);\nvar addRangeBackwardToNative = selectionHasExtend\n    ? function (nativeSelection, range) {\n        var doc = DomRange.getRangeDocument(range);\n        var endRange = createRange(doc);\n        endRange.collapseToPoint(range.endContainer, range.endOffset);\n        nativeSelection.addRange(getNativeRange(endRange));\n        nativeSelection.extend(range.startContainer, range.startOffset);\n    }\n    : null;\n// Selection collapsedness\nvar selectionIsCollapsed = selectionHasAnchorAndFocus\n    ? function (sel) {\n        return sel.anchorNode === sel.focusNode && sel.anchorOffset === sel.focusOffset;\n    }\n    : function (sel) {\n        return sel.rangeCount ? sel.getRangeAt(sel.rangeCount - 1).collapsed : false;\n    };\nfunction updateAnchorAndFocusFromRange(sel, range, backward) {\n    var anchorPrefix = backward ? \"end\" : \"start\", focusPrefix = backward ? \"start\" : \"end\";\n    sel.anchorNode = range[anchorPrefix + \"Container\"];\n    sel.anchorOffset = range[anchorPrefix + \"Offset\"];\n    sel.focusNode = range[focusPrefix + \"Container\"];\n    sel.focusOffset = range[focusPrefix + \"Offset\"];\n}\nfunction updateAnchorAndFocusFromNativeSelection(sel) {\n    var nativeSel = sel.nativeSelection;\n    sel.anchorNode = nativeSel.anchorNode;\n    sel.anchorOffset = nativeSel.anchorOffset;\n    sel.focusNode = nativeSel.focusNode;\n    sel.focusOffset = nativeSel.focusOffset;\n}\nfunction updateEmptySelection(sel) {\n    sel.anchorNode = sel.focusNode = null;\n    sel.anchorOffset = sel.focusOffset = 0;\n    sel.rangeCount = 0;\n    sel.isCollapsed = true;\n    sel._ranges.length = 0;\n}\nfunction getNativeRange(range) {\n    var nativeRange;\n    if (range instanceof DomRange) {\n        nativeRange = createNativeRange(range.getDocument());\n        nativeRange.setEnd(range.endContainer, range.endOffset);\n        nativeRange.setStart(range.startContainer, range.startOffset);\n    }\n    else if (range instanceof WrappedRange) {\n        nativeRange = range.nativeRange;\n        // } else if (features.implementsDomRange && ((range as any) instanceof dom.getWindow(range.startContainer).Range)) {\n    }\n    else if (range instanceof Range) {\n        nativeRange = range;\n    }\n    return nativeRange;\n}\nvar getSelectionRangeAt;\nif (isHostMethod(testSelection, \"getRangeAt\")) {\n    // try/catch is present because getRangeAt() must have thrown an error in some browser and some situation.\n    // Unfortunately, I didn't write a comment about the specifics and am now scared to take it out. Let that be a\n    // lesson to us all, especially me.\n    getSelectionRangeAt = function (sel, index) {\n        try {\n            return sel.getRangeAt(index);\n        }\n        catch (ex) {\n            return null;\n        }\n    };\n}\nelse if (selectionHasAnchorAndFocus) {\n    getSelectionRangeAt = function (sel) {\n        var doc = getDocument(sel.anchorNode);\n        var range = createRange(doc);\n        range.setStartAndEnd(sel.anchorNode, sel.anchorOffset, sel.focusNode, sel.focusOffset);\n        // Handle the case when the selection was selected backwards (from the end to the start in the\n        // document)\n        if (range.collapsed !== this.isCollapsed) {\n            range.setStartAndEnd(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset);\n        }\n        return range;\n    };\n}\nfunction deleteProperties(sel) {\n    sel.win = sel.anchorNode = sel.focusNode = sel._ranges = null;\n    sel.rangeCount = sel.anchorOffset = sel.focusOffset = 0;\n    sel.detached = true;\n}\nvar cachedRangySelections = [];\nfunction actOnCachedSelection(win, action) {\n    var i = cachedRangySelections.length, cached, sel;\n    while (i--) {\n        cached = cachedRangySelections[i];\n        sel = cached.selection;\n        if (action == \"deleteAll\") {\n            deleteProperties(sel);\n        }\n        else if (cached.win == win) {\n            if (action == \"delete\") {\n                cachedRangySelections.splice(i, 1);\n                return true;\n            }\n            else {\n                return sel;\n            }\n        }\n    }\n    if (action == \"deleteAll\") {\n        cachedRangySelections.length = 0;\n    }\n    return null;\n}\nexport function getSelection(win) {\n    // Check if the parameter is a Rangy Selection object\n    if (win && win instanceof WrappedSelection) {\n        win.refresh();\n        return win;\n    }\n    win = getWindow(win, \"getNativeSelection\");\n    var sel = actOnCachedSelection(win);\n    var nativeSel = getNativeSelection(win);\n    if (sel) {\n        sel.nativeSelection = nativeSel;\n        sel.refresh();\n    }\n    else {\n        sel = new WrappedSelection(nativeSel, win);\n        cachedRangySelections.push({ win: win, selection: sel });\n    }\n    return sel;\n}\n;\nvar refreshSelection;\nif (isHostMethod(testSelection, \"getRangeAt\") && typeof testSelection.rangeCount == NUMBER) {\n    refreshSelection = function (sel) {\n        sel._ranges.length = sel.rangeCount = sel.nativeSelection.rangeCount;\n        if (sel.rangeCount) {\n            for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                sel._ranges[i] = new WrappedRange(sel.nativeSelection.getRangeAt(i));\n            }\n            updateAnchorAndFocusFromRange(sel, sel._ranges[sel.rangeCount - 1], selectionIsBackward(sel.nativeSelection));\n            sel.isCollapsed = selectionIsCollapsed(sel);\n        }\n        else {\n            updateEmptySelection(sel);\n        }\n    };\n}\nelse if (selectionHasAnchorAndFocus && typeof testSelection.isCollapsed == BOOLEAN && typeof testRange.collapsed == BOOLEAN && features.implementsDomRange) {\n    refreshSelection = function (sel) {\n        var range, nativeSel = sel.nativeSelection;\n        if (nativeSel.anchorNode) {\n            range = getSelectionRangeAt(nativeSel, 0);\n            sel._ranges = [range];\n            sel.rangeCount = 1;\n            updateAnchorAndFocusFromNativeSelection(sel);\n            sel.isCollapsed = selectionIsCollapsed(sel);\n        }\n        else {\n            updateEmptySelection(sel);\n        }\n    };\n}\nelse {\n    module.fail(\"No means of obtaining a Range or TextRange from the user's selection was found\");\n    //return false;\n}\n// WrappedSelection.prototype = api.selectionPrototype;\nvar WrappedSelBase = /** @class */ (function () {\n    function WrappedSelBase(nativeSelection, win) {\n        this.nativeSelection = nativeSelection;\n        this.win = win;\n        this._ranges = [];\n        //@deprecated the old rangy2 constructor form: (nativeSelection, docSelection: null, win)\n        if (arguments.length == 3) {\n            this.win = arguments[2];\n        }\n        this.refresh();\n    }\n    return WrappedSelBase;\n}());\nexport { WrappedSelBase };\n// TODO\nfunction createWrappedSelection(Base) {\n    var _a;\n    function addRangeBackward(sel, range) {\n        addRangeBackwardToNative(sel.nativeSelection, range);\n        sel.refresh();\n    }\n    ;\n    var addRange = selectionHasRangeCount\n        ? function (range, direction) {\n            if (isDirectionBackward(direction) && selectionHasExtend) {\n                addRangeBackward(this, range);\n            }\n            else {\n                var previousRangeCount;\n                if (features.selectionSupportsMultipleRanges) {\n                    previousRangeCount = this.rangeCount;\n                }\n                else {\n                    this.removeAllRanges();\n                    previousRangeCount = 0;\n                }\n                // Clone the native range so that changing the selected range does not affect the selection.\n                // This is contrary to the spec but is the only way to achieve consistency between browsers. See\n                // issue 80.\n                var clonedNativeRange = getNativeRange(range).cloneRange();\n                try {\n                    this.nativeSelection.addRange(clonedNativeRange);\n                }\n                catch (ex) {\n                    // log.error(\"Native addRange threw error '\" + ex + \"' with range \" + DomRange.inspect(clonedNativeRange), ex);\n                }\n                // Check whether adding the range was successful\n                this.rangeCount = this.nativeSelection.rangeCount;\n                if (this.rangeCount == previousRangeCount + 1) {\n                    // The range was added successfully\n                    // Check whether the range that we added to the selection is reflected in the last range extracted from\n                    // the selection\n                    if (config.checkSelectionRanges) {\n                        var nativeRange = getSelectionRangeAt(this.nativeSelection, this.rangeCount - 1);\n                        if (nativeRange && !rangesEqual(nativeRange, range)) {\n                            // Happens in WebKit with, for example, a selection placed at the start of a text node\n                            range = new WrappedRange(nativeRange);\n                        }\n                    }\n                    this._ranges[this.rangeCount - 1] = range;\n                    updateAnchorAndFocusFromRange(this, range, selectionIsBackward(this.nativeSelection));\n                    this.isCollapsed = selectionIsCollapsed(this);\n                }\n                else {\n                    // The range was not added successfully. The simplest thing is to refresh\n                    this.refresh();\n                }\n            }\n        }\n        : function (range, direction) {\n            if (isDirectionBackward(direction) && selectionHasExtend) {\n                addRangeBackward(this, range);\n            }\n            else {\n                this.nativeSelection.addRange(getNativeRange(range));\n                this.refresh();\n            }\n        };\n    // Removal of a single range\n    function removeRangeManually(sel, range) {\n        var ranges = sel.getAllRanges();\n        sel.removeAllRanges();\n        for (var i = 0, len = ranges.length; i < len; ++i) {\n            if (!rangesEqual(range, ranges[i])) {\n                sel.addRange(ranges[i]);\n            }\n        }\n        if (!sel.rangeCount) {\n            updateEmptySelection(sel);\n        }\n    }\n    ;\n    function assertNodeInSameDocument(sel, node) {\n        if (sel.win.document != getDocument(node)) {\n            throw new DOMException(\"WRONG_DOCUMENT_ERR\");\n        }\n    }\n    function createStartOrEndSetter(isStart) {\n        return function (node, offset) {\n            var range;\n            if (this.rangeCount) {\n                range = this.getRangeAt(0);\n                range[\"set\" + (isStart ? \"Start\" : \"End\")](node, offset);\n            }\n            else {\n                range = createRange(this.win.document);\n                range.setStartAndEnd(node, offset);\n            }\n            this.setSingleRange(range, this.isBackward());\n        };\n    }\n    return _a = /** @class */ (function (_super) {\n            tslib_1.__extends(S, _super);\n            function S() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                //if (selectionHasRangeCount) {\n                _this.addRange = addRange;\n                // Create an alias for backwards compatibility. From 1.3, everything is \"backward\" rather than \"backwards\"\n                _this.isBackwards = _this.isBackward;\n                _this.setStart = createStartOrEndSetter(true);\n                _this.setEnd = createStartOrEndSetter(false);\n                return _this;\n            }\n            S.prototype.removeAllRanges = function () {\n                this.nativeSelection.removeAllRanges();\n                updateEmptySelection(this);\n            };\n            ;\n            S.prototype.setRanges = function (ranges) {\n                this.removeAllRanges();\n                for (var i = 0, len = ranges.length; i < len; ++i) {\n                    this.addRange(ranges[i]);\n                }\n            };\n            ;\n            S.prototype.getRangeAt = function (index) {\n                if (index < 0 || index >= this.rangeCount) {\n                    throw new DOMException(\"INDEX_SIZE_ERR\");\n                }\n                else {\n                    // Clone the range to preserve selection-range independence. See issue 80.\n                    return this._ranges[index].cloneRange();\n                }\n            };\n            ;\n            S.prototype.refresh = function (checkForChanges) {\n                var oldRanges = checkForChanges ? this._ranges.slice(0) : null;\n                var oldAnchorNode = this.anchorNode, oldAnchorOffset = this.anchorOffset;\n                refreshSelection(this);\n                if (checkForChanges) {\n                    // Check the range count first\n                    var i = oldRanges.length;\n                    if (i != this._ranges.length) {\n                        // log.debug(\"Selection.refresh: Range count has changed: was \" + i + \", is now \" + this._ranges.length);\n                        return true;\n                    }\n                    // Now check the direction. Checking the anchor position is the same is enough since we're checking all the\n                    // ranges after this\n                    if (this.anchorNode != oldAnchorNode || this.anchorOffset != oldAnchorOffset) {\n                        // log.debug(\"Selection.refresh: anchor different, so selection has changed\");\n                        return true;\n                    }\n                    // Finally, compare each range in turn\n                    while (i--) {\n                        if (!rangesEqual(oldRanges[i], this._ranges[i])) {\n                            // log.debug(\"Selection.refresh: Range at index \" + i + \" has changed: was \" + oldRanges[i].inspect() + \", is now \" + this._ranges[i].inspect());\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n            };\n            ;\n            S.prototype.removeRange = function (range) {\n                removeRangeManually(this, range);\n            };\n            ;\n            S.prototype.isBackward = function () {\n                return selectionIsBackward(this);\n            };\n            ;\n            // Selection stringifier\n            // This is conformant to the old HTML5 selections draft spec but differs from WebKit and Mozilla's implementation.\n            // The current spec does not yet define this method.\n            S.prototype.toString = function () {\n                // log.debug(\"selection toString called\");\n                var rangeTexts = [];\n                for (var i = 0, len = this.rangeCount; i < len; ++i) {\n                    rangeTexts[i] = \"\" + this._ranges[i];\n                }\n                return rangeTexts.join(\"\");\n            };\n            ;\n            // No current browser conforms fully to the spec for this method, so Rangy's own method is always used\n            S.prototype.collapse = function (node, offset) {\n                assertNodeInSameDocument(this, node);\n                var range = createRange(node);\n                range.collapseToPoint(node, offset);\n                this.setSingleRange(range);\n                this.isCollapsed = true;\n            };\n            ;\n            S.prototype.collapseToStart = function () {\n                if (this.rangeCount) {\n                    var range = this._ranges[0];\n                    this.collapse(range.startContainer, range.startOffset);\n                }\n                else {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n            };\n            ;\n            S.prototype.collapseToEnd = function () {\n                if (this.rangeCount) {\n                    var range = this._ranges[this.rangeCount - 1];\n                    this.collapse(range.endContainer, range.endOffset);\n                }\n                else {\n                    throw new DOMException(\"INVALID_STATE_ERR\");\n                }\n            };\n            ;\n            // The spec is very specific on how selectAllChildren should be implemented and not all browsers implement it as\n            // specified so the native implementation is never used by Rangy.\n            S.prototype.selectAllChildren = function (node) {\n                assertNodeInSameDocument(this, node);\n                var range = createRange(node);\n                range.selectNodeContents(node);\n                this.setSingleRange(range);\n            };\n            ;\n            S.prototype.deleteFromDocument = function () {\n                if (this.rangeCount) {\n                    var ranges = this.getAllRanges();\n                    if (ranges.length) {\n                        this.removeAllRanges();\n                        for (var i = 0, len = ranges.length; i < len; ++i) {\n                            ranges[i].deleteContents();\n                        }\n                        // The spec says nothing about what the selection should contain after calling deleteContents on each\n                        // range. Firefox moves the selection to where the final selected range was, so we emulate that\n                        this.addRange(ranges[len - 1]);\n                    }\n                }\n            };\n            ;\n            // The following are non-standard extensions\n            S.prototype.eachRange = function (func, returnValue) {\n                for (var i = 0, len = this._ranges.length; i < len; ++i) {\n                    if (func(this.getRangeAt(i))) {\n                        return returnValue;\n                    }\n                }\n            };\n            ;\n            S.prototype.getAllRanges = function () {\n                var ranges = [];\n                this.eachRange(function (range) {\n                    ranges.push(range);\n                });\n                return ranges;\n            };\n            ;\n            S.prototype.setSingleRange = function (range, direction) {\n                this.removeAllRanges();\n                this.addRange(range, direction);\n            };\n            ;\n            S.prototype.callMethodOnEachRange = function (methodName, params) {\n                var results = [];\n                this.eachRange(function (range) {\n                    results.push(range[methodName].apply(range, params || []));\n                });\n                return results;\n            };\n            ;\n            S.prototype.changeEachRange = function (func) {\n                var ranges = [];\n                var backward = this.isBackward();\n                this.eachRange(function (range) {\n                    func(range);\n                    ranges.push(range);\n                });\n                this.removeAllRanges();\n                if (backward && ranges.length == 1) {\n                    this.addRange(ranges[0], \"backward\");\n                }\n                else {\n                    this.setRanges(ranges);\n                }\n            };\n            ;\n            S.prototype.containsNode = function (node, allowPartial) {\n                return this.eachRange(function (range) {\n                    return range.containsNode(node, allowPartial);\n                }, true) || false;\n            };\n            ;\n            S.prototype.getBookmark = function (containerNode) {\n                return {\n                    backward: this.isBackward(),\n                    rangeBookmarks: this.callMethodOnEachRange(\"getBookmark\", [containerNode])\n                };\n            };\n            ;\n            S.prototype.moveToBookmark = function (bookmark) {\n                var selRanges = [];\n                for (var i = 0, rangeBookmark, range; rangeBookmark = bookmark.rangeBookmarks[i++];) {\n                    range = createRange(this.win);\n                    range.moveToBookmark(rangeBookmark);\n                    selRanges.push(range);\n                }\n                if (bookmark.backward) {\n                    this.setSingleRange(selRanges[0], \"backward\");\n                }\n                else {\n                    this.setRanges(selRanges);\n                }\n            };\n            ;\n            S.prototype.saveRanges = function () {\n                return {\n                    backward: this.isBackward(),\n                    ranges: this.callMethodOnEachRange(\"cloneRange\")\n                };\n            };\n            ;\n            S.prototype.restoreRanges = function (selRanges) {\n                this.removeAllRanges();\n                for (var i = 0, range; range = selRanges.ranges[i]; ++i) {\n                    this.addRange(range, (selRanges.backward && i == 0));\n                }\n            };\n            ;\n            S.prototype.toHtml = function () {\n                var rangeHtmls = [];\n                this.eachRange(function (range) {\n                    rangeHtmls.push(DomRange.toHtml(range));\n                });\n                return rangeHtmls.join(\"\");\n            };\n            ;\n            S.inspect = function (sel) {\n                var rangeInspects = [];\n                var anchor = new DomPosition(sel.anchorNode, sel.anchorOffset);\n                var focus = new DomPosition(sel.focusNode, sel.focusOffset);\n                var name = (typeof sel.getName == \"function\") ? sel.getName() : \"Selection\";\n                if (typeof sel.rangeCount != \"undefined\") {\n                    for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                        rangeInspects[i] = DomRange.inspect(sel.getRangeAt(i));\n                    }\n                }\n                return \"[\" + name + \"(Ranges: \" + rangeInspects.join(\", \") +\n                    \")(anchor: \" + anchor.inspect() + \", focus: \" + focus.inspect() + \"]\";\n            };\n            S.prototype.getName = function () {\n                return \"WrappedSelection\";\n            };\n            ;\n            S.prototype.inspect = function () {\n                return S.inspect(this);\n            };\n            ;\n            S.prototype.detach = function () {\n                actOnCachedSelection(this.win, \"delete\");\n                deleteProperties(this);\n            };\n            ;\n            S.detachAll = function () {\n                actOnCachedSelection(null, \"deleteAll\");\n            };\n            ;\n            return S;\n        }(Base)),\n        _a.isDirectionBackward = isDirectionBackward,\n        _a;\n}\nexport var WrappedSelection = createWrappedSelection(WrappedSelBase);\n//alias\nexport var Selection = WrappedSelection;\nexport function shimGetSelection(win) {\n    if (!win)\n        win = window;\n    if (typeof win.getSelection == \"undefined\") {\n        win.getSelection = function () {\n            return getSelection(win);\n        };\n    }\n}\n;\n//# sourceMappingURL=wrappedselection.js.map","var Module = /** @class */ (function () {\n    function Module(name, dependencies) {\n        this.name = name;\n        this.dependencies = dependencies;\n    }\n    Module.prototype.fail = function (reason) {\n        console.log(\"Module '\" + this.name + \"' failed to load: \" + reason);\n        throw new Error(reason);\n    };\n    Module.prototype.warn = function (msg) {\n        console.log(\"Module \" + this.name + \": \" + msg);\n    };\n    Module.prototype.createError = function (msg) {\n        return new Error(\"Error in Rangy \" + this.name + \" module: \" + msg);\n    };\n    return Module;\n}());\nexport { Module };\n//# sourceMappingURL=module.js.map","// Trio of functions taken from Peter Michaux's article:\n// http://peter.michaux.ca/articles/feature-detection-state-of-the-art-browser-scripting\nexport function isHostMethod(o, p) {\n    var t = typeof o[p];\n    return t == \"function\" || (!!(t == \"object\" && o[p])) || t == \"unknown\";\n}\nexport function isHostObject(o, p) {\n    return !!(typeof o[p] == \"object\" && o[p]);\n}\nexport function isHostProperty(o, p) {\n    return typeof o[p] != \"undefined\";\n}\n// Creates a convenience function to save verbose repeated calls to tests functions\nfunction createMultiplePropertyTest(testFunc) {\n    return function (o, props) {\n        var i = props.length;\n        while (i--) {\n            if (!testFunc(o, props[i])) {\n                return false;\n            }\n        }\n        return true;\n    };\n}\n// Next trio of functions are a convenience to save verbose repeated calls to previous two functions\nexport var areHostMethods = createMultiplePropertyTest(isHostMethod);\nexport var areHostObjects = createMultiplePropertyTest(isHostObject);\nexport var areHostProperties = createMultiplePropertyTest(isHostProperty);\nexport function getBody(doc) {\n    return isHostObject(doc, \"body\") ? doc.body : doc.getElementsByTagName(\"body\")[0];\n}\n//# sourceMappingURL=util.js.map","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","// Copyright 2014 Simon Lydell\r\n// X11 (“MIT”) Licensed. (See LICENSE.)\r\n\r\nvoid (function(root, factory) {\r\n  if (typeof define === \"function\" && define.amd) {\r\n    define(factory)\r\n  } else if (typeof exports === \"object\") {\r\n    module.exports = factory()\r\n  } else {\r\n    root.resolveUrl = factory()\r\n  }\r\n}(this, function() {\r\n\r\n  function resolveUrl(/* ...urls */) {\r\n    var numUrls = arguments.length\r\n\r\n    if (numUrls === 0) {\r\n      throw new Error(\"resolveUrl requires at least one argument; got none.\")\r\n    }\r\n\r\n    var base = document.createElement(\"base\")\r\n    base.href = arguments[0]\r\n\r\n    if (numUrls === 1) {\r\n      return base.href\r\n    }\r\n\r\n    var head = document.getElementsByTagName(\"head\")[0]\r\n    head.insertBefore(base, head.firstChild)\r\n\r\n    var a = document.createElement(\"a\")\r\n    var resolved\r\n\r\n    for (var index = 1; index < numUrls; index++) {\r\n      a.href = arguments[index]\r\n      resolved = a.href\r\n      base.href = resolved\r\n    }\r\n\r\n    head.removeChild(base)\r\n\r\n    return resolved\r\n  }\r\n\r\n  return resolveUrl\r\n\r\n}));\r\n","/*! Split.js - v1.6.4 */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Split = factory());\n}(this, (function () { 'use strict';\n\n    // The programming goals of Split.js are to deliver readable, understandable and\n    // maintainable code, while at the same time manually optimizing for tiny minified file size,\n    // browser compatibility without additional requirements\n    // and very few assumptions about the user's page layout.\n    var global = typeof window !== 'undefined' ? window : null;\n    var ssr = global === null;\n    var document = !ssr ? global.document : undefined;\n\n    // Save a couple long function names that are used frequently.\n    // This optimization saves around 400 bytes.\n    var addEventListener = 'addEventListener';\n    var removeEventListener = 'removeEventListener';\n    var getBoundingClientRect = 'getBoundingClientRect';\n    var gutterStartDragging = '_a';\n    var aGutterSize = '_b';\n    var bGutterSize = '_c';\n    var HORIZONTAL = 'horizontal';\n    var NOOP = function () { return false; };\n\n    // Helper function determines which prefixes of CSS calc we need.\n    // We only need to do this once on startup, when this anonymous function is called.\n    //\n    // Tests -webkit, -moz and -o prefixes. Modified from StackOverflow:\n    // http://stackoverflow.com/questions/16625140/js-feature-detection-to-detect-the-usage-of-webkit-calc-over-calc/16625167#16625167\n    var calc = ssr\n        ? 'calc'\n        : ((['', '-webkit-', '-moz-', '-o-']\n              .filter(function (prefix) {\n                  var el = document.createElement('div');\n                  el.style.cssText = \"width:\" + prefix + \"calc(9px)\";\n\n                  return !!el.style.length\n              })\n              .shift()) + \"calc\");\n\n    // Helper function checks if its argument is a string-like type\n    var isString = function (v) { return typeof v === 'string' || v instanceof String; };\n\n    // Helper function allows elements and string selectors to be used\n    // interchangeably. In either case an element is returned. This allows us to\n    // do `Split([elem1, elem2])` as well as `Split(['#id1', '#id2'])`.\n    var elementOrSelector = function (el) {\n        if (isString(el)) {\n            var ele = document.querySelector(el);\n            if (!ele) {\n                throw new Error((\"Selector \" + el + \" did not match a DOM element\"))\n            }\n            return ele\n        }\n\n        return el\n    };\n\n    // Helper function gets a property from the properties object, with a default fallback\n    var getOption = function (options, propName, def) {\n        var value = options[propName];\n        if (value !== undefined) {\n            return value\n        }\n        return def\n    };\n\n    var getGutterSize = function (gutterSize, isFirst, isLast, gutterAlign) {\n        if (isFirst) {\n            if (gutterAlign === 'end') {\n                return 0\n            }\n            if (gutterAlign === 'center') {\n                return gutterSize / 2\n            }\n        } else if (isLast) {\n            if (gutterAlign === 'start') {\n                return 0\n            }\n            if (gutterAlign === 'center') {\n                return gutterSize / 2\n            }\n        }\n\n        return gutterSize\n    };\n\n    // Default options\n    var defaultGutterFn = function (i, gutterDirection) {\n        var gut = document.createElement('div');\n        gut.className = \"gutter gutter-\" + gutterDirection;\n        return gut\n    };\n\n    var defaultElementStyleFn = function (dim, size, gutSize) {\n        var style = {};\n\n        if (!isString(size)) {\n            style[dim] = calc + \"(\" + size + \"% - \" + gutSize + \"px)\";\n        } else {\n            style[dim] = size;\n        }\n\n        return style\n    };\n\n    var defaultGutterStyleFn = function (dim, gutSize) {\n        var obj;\n\n        return (( obj = {}, obj[dim] = (gutSize + \"px\"), obj ));\n    };\n\n    // The main function to initialize a split. Split.js thinks about each pair\n    // of elements as an independant pair. Dragging the gutter between two elements\n    // only changes the dimensions of elements in that pair. This is key to understanding\n    // how the following functions operate, since each function is bound to a pair.\n    //\n    // A pair object is shaped like this:\n    //\n    // {\n    //     a: DOM element,\n    //     b: DOM element,\n    //     aMin: Number,\n    //     bMin: Number,\n    //     dragging: Boolean,\n    //     parent: DOM element,\n    //     direction: 'horizontal' | 'vertical'\n    // }\n    //\n    // The basic sequence:\n    //\n    // 1. Set defaults to something sane. `options` doesn't have to be passed at all.\n    // 2. Initialize a bunch of strings based on the direction we're splitting.\n    //    A lot of the behavior in the rest of the library is paramatized down to\n    //    rely on CSS strings and classes.\n    // 3. Define the dragging helper functions, and a few helpers to go with them.\n    // 4. Loop through the elements while pairing them off. Every pair gets an\n    //    `pair` object and a gutter.\n    // 5. Actually size the pair elements, insert gutters and attach event listeners.\n    var Split = function (idsOption, options) {\n        if ( options === void 0 ) options = {};\n\n        if (ssr) { return {} }\n\n        var ids = idsOption;\n        var dimension;\n        var clientAxis;\n        var position;\n        var positionEnd;\n        var clientSize;\n        var elements;\n\n        // Allow HTMLCollection to be used as an argument when supported\n        if (Array.from) {\n            ids = Array.from(ids);\n        }\n\n        // All DOM elements in the split should have a common parent. We can grab\n        // the first elements parent and hope users read the docs because the\n        // behavior will be whacky otherwise.\n        var firstElement = elementOrSelector(ids[0]);\n        var parent = firstElement.parentNode;\n        var parentStyle = getComputedStyle ? getComputedStyle(parent) : null;\n        var parentFlexDirection = parentStyle ? parentStyle.flexDirection : null;\n\n        // Set default options.sizes to equal percentages of the parent element.\n        var sizes = getOption(options, 'sizes') || ids.map(function () { return 100 / ids.length; });\n\n        // Standardize minSize and maxSize to an array if it isn't already.\n        // This allows minSize and maxSize to be passed as a number.\n        var minSize = getOption(options, 'minSize', 100);\n        var minSizes = Array.isArray(minSize) ? minSize : ids.map(function () { return minSize; });\n        var maxSize = getOption(options, 'maxSize', Infinity);\n        var maxSizes = Array.isArray(maxSize) ? maxSize : ids.map(function () { return maxSize; });\n\n        // Get other options\n        var expandToMin = getOption(options, 'expandToMin', false);\n        var gutterSize = getOption(options, 'gutterSize', 10);\n        var gutterAlign = getOption(options, 'gutterAlign', 'center');\n        var snapOffset = getOption(options, 'snapOffset', 30);\n        var dragInterval = getOption(options, 'dragInterval', 1);\n        var direction = getOption(options, 'direction', HORIZONTAL);\n        var cursor = getOption(\n            options,\n            'cursor',\n            direction === HORIZONTAL ? 'col-resize' : 'row-resize'\n        );\n        var gutter = getOption(options, 'gutter', defaultGutterFn);\n        var elementStyle = getOption(\n            options,\n            'elementStyle',\n            defaultElementStyleFn\n        );\n        var gutterStyle = getOption(options, 'gutterStyle', defaultGutterStyleFn);\n\n        // 2. Initialize a bunch of strings based on the direction we're splitting.\n        // A lot of the behavior in the rest of the library is paramatized down to\n        // rely on CSS strings and classes.\n        if (direction === HORIZONTAL) {\n            dimension = 'width';\n            clientAxis = 'clientX';\n            position = 'left';\n            positionEnd = 'right';\n            clientSize = 'clientWidth';\n        } else if (direction === 'vertical') {\n            dimension = 'height';\n            clientAxis = 'clientY';\n            position = 'top';\n            positionEnd = 'bottom';\n            clientSize = 'clientHeight';\n        }\n\n        // 3. Define the dragging helper functions, and a few helpers to go with them.\n        // Each helper is bound to a pair object that contains its metadata. This\n        // also makes it easy to store references to listeners that that will be\n        // added and removed.\n        //\n        // Even though there are no other functions contained in them, aliasing\n        // this to self saves 50 bytes or so since it's used so frequently.\n        //\n        // The pair object saves metadata like dragging state, position and\n        // event listener references.\n\n        function setElementSize(el, size, gutSize, i) {\n            // Split.js allows setting sizes via numbers (ideally), or if you must,\n            // by string, like '300px'. This is less than ideal, because it breaks\n            // the fluid layout that `calc(% - px)` provides. You're on your own if you do that,\n            // make sure you calculate the gutter size by hand.\n            var style = elementStyle(dimension, size, gutSize, i);\n\n            Object.keys(style).forEach(function (prop) {\n                // eslint-disable-next-line no-param-reassign\n                el.style[prop] = style[prop];\n            });\n        }\n\n        function setGutterSize(gutterElement, gutSize, i) {\n            var style = gutterStyle(dimension, gutSize, i);\n\n            Object.keys(style).forEach(function (prop) {\n                // eslint-disable-next-line no-param-reassign\n                gutterElement.style[prop] = style[prop];\n            });\n        }\n\n        function getSizes() {\n            return elements.map(function (element) { return element.size; })\n        }\n\n        // Supports touch events, but not multitouch, so only the first\n        // finger `touches[0]` is counted.\n        function getMousePosition(e) {\n            if ('touches' in e) { return e.touches[0][clientAxis] }\n            return e[clientAxis]\n        }\n\n        // Actually adjust the size of elements `a` and `b` to `offset` while dragging.\n        // calc is used to allow calc(percentage + gutterpx) on the whole split instance,\n        // which allows the viewport to be resized without additional logic.\n        // Element a's size is the same as offset. b's size is total size - a size.\n        // Both sizes are calculated from the initial parent percentage,\n        // then the gutter size is subtracted.\n        function adjust(offset) {\n            var a = elements[this.a];\n            var b = elements[this.b];\n            var percentage = a.size + b.size;\n\n            a.size = (offset / this.size) * percentage;\n            b.size = percentage - (offset / this.size) * percentage;\n\n            setElementSize(a.element, a.size, this[aGutterSize], a.i);\n            setElementSize(b.element, b.size, this[bGutterSize], b.i);\n        }\n\n        // drag, where all the magic happens. The logic is really quite simple:\n        //\n        // 1. Ignore if the pair is not dragging.\n        // 2. Get the offset of the event.\n        // 3. Snap offset to min if within snappable range (within min + snapOffset).\n        // 4. Actually adjust each element in the pair to offset.\n        //\n        // ---------------------------------------------------------------------\n        // |    | <- a.minSize               ||              b.minSize -> |    |\n        // |    |  | <- this.snapOffset      ||     this.snapOffset -> |  |    |\n        // |    |  |                         ||                        |  |    |\n        // |    |  |                         ||                        |  |    |\n        // ---------------------------------------------------------------------\n        // | <- this.start                                        this.size -> |\n        function drag(e) {\n            var offset;\n            var a = elements[this.a];\n            var b = elements[this.b];\n\n            if (!this.dragging) { return }\n\n            // Get the offset of the event from the first side of the\n            // pair `this.start`. Then offset by the initial position of the\n            // mouse compared to the gutter size.\n            offset =\n                getMousePosition(e) -\n                this.start +\n                (this[aGutterSize] - this.dragOffset);\n\n            if (dragInterval > 1) {\n                offset = Math.round(offset / dragInterval) * dragInterval;\n            }\n\n            // If within snapOffset of min or max, set offset to min or max.\n            // snapOffset buffers a.minSize and b.minSize, so logic is opposite for both.\n            // Include the appropriate gutter sizes to prevent overflows.\n            if (offset <= a.minSize + snapOffset + this[aGutterSize]) {\n                offset = a.minSize + this[aGutterSize];\n            } else if (\n                offset >=\n                this.size - (b.minSize + snapOffset + this[bGutterSize])\n            ) {\n                offset = this.size - (b.minSize + this[bGutterSize]);\n            }\n\n            if (offset >= a.maxSize - snapOffset + this[aGutterSize]) {\n                offset = a.maxSize + this[aGutterSize];\n            } else if (\n                offset <=\n                this.size - (b.maxSize - snapOffset + this[bGutterSize])\n            ) {\n                offset = this.size - (b.maxSize + this[bGutterSize]);\n            }\n\n            // Actually adjust the size.\n            adjust.call(this, offset);\n\n            // Call the drag callback continously. Don't do anything too intensive\n            // in this callback.\n            getOption(options, 'onDrag', NOOP)(getSizes());\n        }\n\n        // Cache some important sizes when drag starts, so we don't have to do that\n        // continously:\n        //\n        // `size`: The total size of the pair. First + second + first gutter + second gutter.\n        // `start`: The leading side of the first element.\n        //\n        // ------------------------------------------------\n        // |      aGutterSize -> |||                      |\n        // |                     |||                      |\n        // |                     |||                      |\n        // |                     ||| <- bGutterSize       |\n        // ------------------------------------------------\n        // | <- start                             size -> |\n        function calculateSizes() {\n            // Figure out the parent size minus padding.\n            var a = elements[this.a].element;\n            var b = elements[this.b].element;\n\n            var aBounds = a[getBoundingClientRect]();\n            var bBounds = b[getBoundingClientRect]();\n\n            this.size =\n                aBounds[dimension] +\n                bBounds[dimension] +\n                this[aGutterSize] +\n                this[bGutterSize];\n            this.start = aBounds[position];\n            this.end = aBounds[positionEnd];\n        }\n\n        function innerSize(element) {\n            // Return nothing if getComputedStyle is not supported (< IE9)\n            // Or if parent element has no layout yet\n            if (!getComputedStyle) { return null }\n\n            var computedStyle = getComputedStyle(element);\n\n            if (!computedStyle) { return null }\n\n            var size = element[clientSize];\n\n            if (size === 0) { return null }\n\n            if (direction === HORIZONTAL) {\n                size -=\n                    parseFloat(computedStyle.paddingLeft) +\n                    parseFloat(computedStyle.paddingRight);\n            } else {\n                size -=\n                    parseFloat(computedStyle.paddingTop) +\n                    parseFloat(computedStyle.paddingBottom);\n            }\n\n            return size\n        }\n\n        // When specifying percentage sizes that are less than the computed\n        // size of the element minus the gutter, the lesser percentages must be increased\n        // (and decreased from the other elements) to make space for the pixels\n        // subtracted by the gutters.\n        function trimToMin(sizesToTrim) {\n            // Try to get inner size of parent element.\n            // If it's no supported, return original sizes.\n            var parentSize = innerSize(parent);\n            if (parentSize === null) {\n                return sizesToTrim\n            }\n\n            if (minSizes.reduce(function (a, b) { return a + b; }, 0) > parentSize) {\n                return sizesToTrim\n            }\n\n            // Keep track of the excess pixels, the amount of pixels over the desired percentage\n            // Also keep track of the elements with pixels to spare, to decrease after if needed\n            var excessPixels = 0;\n            var toSpare = [];\n\n            var pixelSizes = sizesToTrim.map(function (size, i) {\n                // Convert requested percentages to pixel sizes\n                var pixelSize = (parentSize * size) / 100;\n                var elementGutterSize = getGutterSize(\n                    gutterSize,\n                    i === 0,\n                    i === sizesToTrim.length - 1,\n                    gutterAlign\n                );\n                var elementMinSize = minSizes[i] + elementGutterSize;\n\n                // If element is too smal, increase excess pixels by the difference\n                // and mark that it has no pixels to spare\n                if (pixelSize < elementMinSize) {\n                    excessPixels += elementMinSize - pixelSize;\n                    toSpare.push(0);\n                    return elementMinSize\n                }\n\n                // Otherwise, mark the pixels it has to spare and return it's original size\n                toSpare.push(pixelSize - elementMinSize);\n                return pixelSize\n            });\n\n            // If nothing was adjusted, return the original sizes\n            if (excessPixels === 0) {\n                return sizesToTrim\n            }\n\n            return pixelSizes.map(function (pixelSize, i) {\n                var newPixelSize = pixelSize;\n\n                // While there's still pixels to take, and there's enough pixels to spare,\n                // take as many as possible up to the total excess pixels\n                if (excessPixels > 0 && toSpare[i] - excessPixels > 0) {\n                    var takenPixels = Math.min(\n                        excessPixels,\n                        toSpare[i] - excessPixels\n                    );\n\n                    // Subtract the amount taken for the next iteration\n                    excessPixels -= takenPixels;\n                    newPixelSize = pixelSize - takenPixels;\n                }\n\n                // Return the pixel size adjusted as a percentage\n                return (newPixelSize / parentSize) * 100\n            })\n        }\n\n        // stopDragging is very similar to startDragging in reverse.\n        function stopDragging() {\n            var self = this;\n            var a = elements[self.a].element;\n            var b = elements[self.b].element;\n\n            if (self.dragging) {\n                getOption(options, 'onDragEnd', NOOP)(getSizes());\n            }\n\n            self.dragging = false;\n\n            // Remove the stored event listeners. This is why we store them.\n            global[removeEventListener]('mouseup', self.stop);\n            global[removeEventListener]('touchend', self.stop);\n            global[removeEventListener]('touchcancel', self.stop);\n            global[removeEventListener]('mousemove', self.move);\n            global[removeEventListener]('touchmove', self.move);\n\n            // Clear bound function references\n            self.stop = null;\n            self.move = null;\n\n            a[removeEventListener]('selectstart', NOOP);\n            a[removeEventListener]('dragstart', NOOP);\n            b[removeEventListener]('selectstart', NOOP);\n            b[removeEventListener]('dragstart', NOOP);\n\n            a.style.userSelect = '';\n            a.style.webkitUserSelect = '';\n            a.style.MozUserSelect = '';\n            a.style.pointerEvents = '';\n\n            b.style.userSelect = '';\n            b.style.webkitUserSelect = '';\n            b.style.MozUserSelect = '';\n            b.style.pointerEvents = '';\n\n            self.gutter.style.cursor = '';\n            self.parent.style.cursor = '';\n            document.body.style.cursor = '';\n        }\n\n        // startDragging calls `calculateSizes` to store the inital size in the pair object.\n        // It also adds event listeners for mouse/touch events,\n        // and prevents selection while dragging so avoid the selecting text.\n        function startDragging(e) {\n            // Right-clicking can't start dragging.\n            if ('button' in e && e.button !== 0) {\n                return\n            }\n\n            // Alias frequently used variables to save space. 200 bytes.\n            var self = this;\n            var a = elements[self.a].element;\n            var b = elements[self.b].element;\n\n            // Call the onDragStart callback.\n            if (!self.dragging) {\n                getOption(options, 'onDragStart', NOOP)(getSizes());\n            }\n\n            // Don't actually drag the element. We emulate that in the drag function.\n            e.preventDefault();\n\n            // Set the dragging property of the pair object.\n            self.dragging = true;\n\n            // Create two event listeners bound to the same pair object and store\n            // them in the pair object.\n            self.move = drag.bind(self);\n            self.stop = stopDragging.bind(self);\n\n            // All the binding. `window` gets the stop events in case we drag out of the elements.\n            global[addEventListener]('mouseup', self.stop);\n            global[addEventListener]('touchend', self.stop);\n            global[addEventListener]('touchcancel', self.stop);\n            global[addEventListener]('mousemove', self.move);\n            global[addEventListener]('touchmove', self.move);\n\n            // Disable selection. Disable!\n            a[addEventListener]('selectstart', NOOP);\n            a[addEventListener]('dragstart', NOOP);\n            b[addEventListener]('selectstart', NOOP);\n            b[addEventListener]('dragstart', NOOP);\n\n            a.style.userSelect = 'none';\n            a.style.webkitUserSelect = 'none';\n            a.style.MozUserSelect = 'none';\n            a.style.pointerEvents = 'none';\n\n            b.style.userSelect = 'none';\n            b.style.webkitUserSelect = 'none';\n            b.style.MozUserSelect = 'none';\n            b.style.pointerEvents = 'none';\n\n            // Set the cursor at multiple levels\n            self.gutter.style.cursor = cursor;\n            self.parent.style.cursor = cursor;\n            document.body.style.cursor = cursor;\n\n            // Cache the initial sizes of the pair.\n            calculateSizes.call(self);\n\n            // Determine the position of the mouse compared to the gutter\n            self.dragOffset = getMousePosition(e) - self.end;\n        }\n\n        // adjust sizes to ensure percentage is within min size and gutter.\n        sizes = trimToMin(sizes);\n\n        // 5. Create pair and element objects. Each pair has an index reference to\n        // elements `a` and `b` of the pair (first and second elements).\n        // Loop through the elements while pairing them off. Every pair gets a\n        // `pair` object and a gutter.\n        //\n        // Basic logic:\n        //\n        // - Starting with the second element `i > 0`, create `pair` objects with\n        //   `a = i - 1` and `b = i`\n        // - Set gutter sizes based on the _pair_ being first/last. The first and last\n        //   pair have gutterSize / 2, since they only have one half gutter, and not two.\n        // - Create gutter elements and add event listeners.\n        // - Set the size of the elements, minus the gutter sizes.\n        //\n        // -----------------------------------------------------------------------\n        // |     i=0     |         i=1         |        i=2       |      i=3     |\n        // |             |                     |                  |              |\n        // |           pair 0                pair 1             pair 2           |\n        // |             |                     |                  |              |\n        // -----------------------------------------------------------------------\n        var pairs = [];\n        elements = ids.map(function (id, i) {\n            // Create the element object.\n            var element = {\n                element: elementOrSelector(id),\n                size: sizes[i],\n                minSize: minSizes[i],\n                maxSize: maxSizes[i],\n                i: i,\n            };\n\n            var pair;\n\n            if (i > 0) {\n                // Create the pair object with its metadata.\n                pair = {\n                    a: i - 1,\n                    b: i,\n                    dragging: false,\n                    direction: direction,\n                    parent: parent,\n                };\n\n                pair[aGutterSize] = getGutterSize(\n                    gutterSize,\n                    i - 1 === 0,\n                    false,\n                    gutterAlign\n                );\n                pair[bGutterSize] = getGutterSize(\n                    gutterSize,\n                    false,\n                    i === ids.length - 1,\n                    gutterAlign\n                );\n\n                // if the parent has a reverse flex-direction, switch the pair elements.\n                if (\n                    parentFlexDirection === 'row-reverse' ||\n                    parentFlexDirection === 'column-reverse'\n                ) {\n                    var temp = pair.a;\n                    pair.a = pair.b;\n                    pair.b = temp;\n                }\n            }\n\n            // Determine the size of the current element. IE8 is supported by\n            // staticly assigning sizes without draggable gutters. Assigns a string\n            // to `size`.\n            //\n            // Create gutter elements for each pair.\n            if (i > 0) {\n                var gutterElement = gutter(i, direction, element.element);\n                setGutterSize(gutterElement, gutterSize, i);\n\n                // Save bound event listener for removal later\n                pair[gutterStartDragging] = startDragging.bind(pair);\n\n                // Attach bound event listener\n                gutterElement[addEventListener](\n                    'mousedown',\n                    pair[gutterStartDragging]\n                );\n                gutterElement[addEventListener](\n                    'touchstart',\n                    pair[gutterStartDragging]\n                );\n\n                parent.insertBefore(gutterElement, element.element);\n\n                pair.gutter = gutterElement;\n            }\n\n            setElementSize(\n                element.element,\n                element.size,\n                getGutterSize(\n                    gutterSize,\n                    i === 0,\n                    i === ids.length - 1,\n                    gutterAlign\n                ),\n                i\n            );\n\n            // After the first iteration, and we have a pair object, append it to the\n            // list of pairs.\n            if (i > 0) {\n                pairs.push(pair);\n            }\n\n            return element\n        });\n\n        function adjustToMin(element) {\n            var isLast = element.i === pairs.length;\n            var pair = isLast ? pairs[element.i - 1] : pairs[element.i];\n\n            calculateSizes.call(pair);\n\n            var size = isLast\n                ? pair.size - element.minSize - pair[bGutterSize]\n                : element.minSize + pair[aGutterSize];\n\n            adjust.call(pair, size);\n        }\n\n        elements.forEach(function (element) {\n            var computedSize = element.element[getBoundingClientRect]()[dimension];\n\n            if (computedSize < element.minSize) {\n                if (expandToMin) {\n                    adjustToMin(element);\n                } else {\n                    // eslint-disable-next-line no-param-reassign\n                    element.minSize = computedSize;\n                }\n            }\n        });\n\n        function setSizes(newSizes) {\n            var trimmed = trimToMin(newSizes);\n            trimmed.forEach(function (newSize, i) {\n                if (i > 0) {\n                    var pair = pairs[i - 1];\n\n                    var a = elements[pair.a];\n                    var b = elements[pair.b];\n\n                    a.size = trimmed[i - 1];\n                    b.size = newSize;\n\n                    setElementSize(a.element, a.size, pair[aGutterSize], a.i);\n                    setElementSize(b.element, b.size, pair[bGutterSize], b.i);\n                }\n            });\n        }\n\n        function destroy(preserveStyles, preserveGutter) {\n            pairs.forEach(function (pair) {\n                if (preserveGutter !== true) {\n                    pair.parent.removeChild(pair.gutter);\n                } else {\n                    pair.gutter[removeEventListener](\n                        'mousedown',\n                        pair[gutterStartDragging]\n                    );\n                    pair.gutter[removeEventListener](\n                        'touchstart',\n                        pair[gutterStartDragging]\n                    );\n                }\n\n                if (preserveStyles !== true) {\n                    var style = elementStyle(\n                        dimension,\n                        pair.a.size,\n                        pair[aGutterSize]\n                    );\n\n                    Object.keys(style).forEach(function (prop) {\n                        elements[pair.a].element.style[prop] = '';\n                        elements[pair.b].element.style[prop] = '';\n                    });\n                }\n            });\n        }\n\n        return {\n            setSizes: setSizes,\n            getSizes: getSizes,\n            collapse: function collapse(i) {\n                adjustToMin(elements[i]);\n            },\n            destroy: destroy,\n            parent: parent,\n            pairs: pairs,\n        }\n    };\n\n    return Split;\n\n})));\n","const createWorker = require('./createWorker');\n\nconst recognize = async (image, langs, options) => {\n  const worker = createWorker(options);\n  await worker.load();\n  await worker.loadLanguage(langs);\n  await worker.initialize(langs);\n  return worker.recognize(image)\n    .finally(async () => {\n      await worker.terminate();\n    });\n};\n\nconst detect = async (image, options) => {\n  const worker = createWorker(options);\n  await worker.load();\n  await worker.loadLanguage('osd');\n  await worker.initialize('osd');\n  return worker.detect(image)\n    .finally(async () => {\n      await worker.terminate();\n    });\n};\n\nmodule.exports = {\n  recognize,\n  detect,\n};\n","/*\n * OEM = OCR Engine Mode, and there are 4 possible modes.\n *\n * By default tesseract.js uses LSTM_ONLY mode.\n *\n */\nmodule.exports = {\n  TESSERACT_ONLY: 0,\n  LSTM_ONLY: 1,\n  TESSERACT_LSTM_COMBINED: 2,\n  DEFAULT: 3,\n};\n","/*\n * PSM = Page Segmentation Mode\n */\nmodule.exports = {\n  OSD_ONLY: '0',\n  AUTO_OSD: '1',\n  AUTO_ONLY: '2',\n  AUTO: '3',\n  SINGLE_COLUMN: '4',\n  SINGLE_BLOCK_VERT_TEXT: '5',\n  SINGLE_BLOCK: '6',\n  SINGLE_LINE: '7',\n  SINGLE_WORD: '8',\n  CIRCLE_WORD: '9',\n  SINGLE_CHAR: '10',\n  SPARSE_TEXT: '11',\n  SPARSE_TEXT_OSD: '12',\n};\n","const OEM = require('./OEM');\n\nmodule.exports = {\n  defaultOEM: OEM.DEFAULT,\n};\n","module.exports = {\n  /*\n   * default path for downloading *.traineddata\n   */\n  langPath: 'https://tessdata.projectnaptha.com/4.0.0',\n  /*\n   * Use BlobURL for worker script by default\n   * TODO: remove this option\n   *\n   */\n  workerBlobURL: true,\n  logger: () => {},\n};\n","const getId = require('./utils/getId');\n\nlet jobCounter = 0;\n\nmodule.exports = ({\n  id: _id,\n  action,\n  payload = {},\n}) => {\n  let id = _id;\n  if (typeof id === 'undefined') {\n    id = getId('Job', jobCounter);\n    jobCounter += 1;\n  }\n\n  return {\n    id,\n    action,\n    payload,\n  };\n};\n","const createJob = require('./createJob');\nconst { log } = require('./utils/log');\nconst getId = require('./utils/getId');\n\nlet schedulerCounter = 0;\n\nmodule.exports = () => {\n  const id = getId('Scheduler', schedulerCounter);\n  const workers = {};\n  const runningWorkers = {};\n  let jobQueue = [];\n\n  schedulerCounter += 1;\n\n  const getQueueLen = () => jobQueue.length;\n  const getNumWorkers = () => Object.keys(workers).length;\n\n  const dequeue = () => {\n    if (jobQueue.length !== 0) {\n      const wIds = Object.keys(workers);\n      for (let i = 0; i < wIds.length; i += 1) {\n        if (typeof runningWorkers[wIds[i]] === 'undefined') {\n          jobQueue[0](workers[wIds[i]]);\n          break;\n        }\n      }\n    }\n  };\n\n  const queue = (action, payload) => (\n    new Promise((resolve, reject) => {\n      const job = createJob({ action, payload });\n      jobQueue.push(async (w) => {\n        jobQueue.shift();\n        runningWorkers[w.id] = job;\n        try {\n          resolve(await w[action].apply(this, [...payload, job.id]));\n        } catch (err) {\n          reject(err);\n        } finally {\n          delete runningWorkers[w.id];\n          dequeue();\n        }\n      });\n      log(`[${id}]: Add ${job.id} to JobQueue`);\n      log(`[${id}]: JobQueue length=${jobQueue.length}`);\n      dequeue();\n    })\n  );\n\n  const addWorker = (w) => {\n    workers[w.id] = w;\n    log(`[${id}]: Add ${w.id}`);\n    log(`[${id}]: Number of workers=${getNumWorkers()}`);\n    dequeue();\n    return w.id;\n  };\n\n  const addJob = async (action, ...payload) => {\n    if (getNumWorkers() === 0) {\n      throw Error(`[${id}]: You need to have at least one worker before adding jobs`);\n    }\n    return queue(action, payload);\n  };\n\n  const terminate = async () => {\n    Object.keys(workers).forEach(async (wid) => {\n      await workers[wid].terminate();\n    });\n    jobQueue = [];\n  };\n\n  return {\n    addWorker,\n    addJob,\n    terminate,\n    getQueueLen,\n    getNumWorkers,\n  };\n};\n","const resolvePaths = require('./utils/resolvePaths');\nconst circularize = require('./utils/circularize');\nconst createJob = require('./createJob');\nconst { log } = require('./utils/log');\nconst getId = require('./utils/getId');\nconst { defaultOEM } = require('./constants/config');\nconst {\n  defaultOptions,\n  spawnWorker,\n  terminateWorker,\n  onMessage,\n  loadImage,\n  send,\n} = require('./worker/node');\n\nlet workerCounter = 0;\n\nmodule.exports = (_options = {}) => {\n  const id = getId('Worker', workerCounter);\n  const {\n    logger,\n    errorHandler,\n    ...options\n  } = resolvePaths({\n    ...defaultOptions,\n    ..._options,\n  });\n  const resolves = {};\n  const rejects = {};\n  let worker = spawnWorker(options);\n\n  workerCounter += 1;\n\n  const setResolve = (action, res) => {\n    resolves[action] = res;\n  };\n\n  const setReject = (action, rej) => {\n    rejects[action] = rej;\n  };\n\n  const startJob = ({ id: jobId, action, payload }) => (\n    new Promise((resolve, reject) => {\n      log(`[${id}]: Start ${jobId}, action=${action}`);\n      setResolve(action, resolve);\n      setReject(action, reject);\n      send(worker, {\n        workerId: id,\n        jobId,\n        action,\n        payload,\n      });\n    })\n  );\n\n  const load = jobId => (\n    startJob(createJob({\n      id: jobId, action: 'load', payload: { options },\n    }))\n  );\n\n  const writeText = (path, text, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'FS',\n      payload: { method: 'writeFile', args: [path, text] },\n    }))\n  );\n\n  const readText = (path, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'FS',\n      payload: { method: 'readFile', args: [path, { encoding: 'utf8' }] },\n    }))\n  );\n\n  const removeFile = (path, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'FS',\n      payload: { method: 'unlink', args: [path] },\n    }))\n  );\n\n  const FS = (method, args, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'FS',\n      payload: { method, args },\n    }))\n  );\n\n  const loadLanguage = (langs = 'eng', jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'loadLanguage',\n      payload: { langs, options },\n    }))\n  );\n\n  const initialize = (langs = 'eng', oem = defaultOEM, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'initialize',\n      payload: { langs, oem },\n    }))\n  );\n\n  const setParameters = (params = {}, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'setParameters',\n      payload: { params },\n    }))\n  );\n\n  const recognize = async (image, opts = {}, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'recognize',\n      payload: { image: await loadImage(image), options: opts },\n    }))\n  );\n\n  const getPDF = (title = 'Tesseract OCR Result', textonly = false, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'getPDF',\n      payload: { title, textonly },\n    }))\n  );\n\n  const detect = async (image, jobId) => (\n    startJob(createJob({\n      id: jobId,\n      action: 'detect',\n      payload: { image: await loadImage(image) },\n    }))\n  );\n\n  const terminate = async () => {\n    if (worker !== null) {\n      /*\n      await startJob(createJob({\n        id: jobId,\n        action: 'terminate',\n      }));\n      */\n      terminateWorker(worker);\n      worker = null;\n    }\n    return Promise.resolve();\n  };\n\n  onMessage(worker, ({\n    workerId, jobId, status, action, data,\n  }) => {\n    if (status === 'resolve') {\n      log(`[${workerId}]: Complete ${jobId}`);\n      let d = data;\n      if (action === 'recognize') {\n        d = circularize(data);\n      } else if (action === 'getPDF') {\n        d = Array.from({ ...data, length: Object.keys(data).length });\n      }\n      resolves[action]({ jobId, data: d });\n    } else if (status === 'reject') {\n      rejects[action](data);\n      if (errorHandler) {\n        errorHandler(data);\n      } else {\n        throw Error(data);\n      }\n    } else if (status === 'progress') {\n      logger(data);\n    }\n  });\n\n  return {\n    id,\n    worker,\n    setResolve,\n    setReject,\n    load,\n    writeText,\n    readText,\n    removeFile,\n    FS,\n    loadLanguage,\n    initialize,\n    setParameters,\n    recognize,\n    getPDF,\n    detect,\n    terminate,\n  };\n};\n","/**\n *\n * Entry point for tesseract.js, should be the entry when bundling.\n *\n * @fileoverview entry point for tesseract.js\n * @author Kevin Kwok <antimatter15@gmail.com>\n * @author Guillermo Webster <gui@mit.edu>\n * @author Jerome Wu <jeromewus@gmail.com>\n */\nrequire('regenerator-runtime/runtime');\nconst createScheduler = require('./createScheduler');\nconst createWorker = require('./createWorker');\nconst Tesseract = require('./Tesseract');\nconst OEM = require('./constants/OEM');\nconst PSM = require('./constants/PSM');\nconst { setLogging } = require('./utils/log');\n\nmodule.exports = {\n  OEM,\n  PSM,\n  createScheduler,\n  createWorker,\n  setLogging,\n  ...Tesseract,\n};\n","/**\n * In the recognition result of tesseract, there\n * is a deep JSON object for details, it has around\n *\n * The result of dump.js is a big JSON tree\n * which can be easily serialized (for instance\n * to be sent from a webworker to the main app\n * or through Node's IPC), but we want\n * a (circular) DOM-like interface for walking\n * through the data.\n *\n * @fileoverview DOM-like interface for walking through data\n * @author Kevin Kwok <antimatter15@gmail.com>\n * @author Guillermo Webster <gui@mit.edu>\n * @author Jerome Wu <jeromewus@gmail.com>\n */\n\nmodule.exports = (page) => {\n  const blocks = [];\n  const paragraphs = [];\n  const lines = [];\n  const words = [];\n  const symbols = [];\n\n  page.blocks.forEach((block) => {\n    block.paragraphs.forEach((paragraph) => {\n      paragraph.lines.forEach((line) => {\n        line.words.forEach((word) => {\n          word.symbols.forEach((sym) => {\n            symbols.push({\n              ...sym, page, block, paragraph, line, word,\n            });\n          });\n          words.push({\n            ...word, page, block, paragraph, line,\n          });\n        });\n        lines.push({\n          ...line, page, block, paragraph,\n        });\n      });\n      paragraphs.push({\n        ...paragraph, page, block,\n      });\n    });\n    blocks.push({\n      ...block, page,\n    });\n  });\n\n  return {\n    ...page, blocks, paragraphs, lines, words, symbols,\n  };\n};\n","const isElectron = require('is-electron');\n\nmodule.exports = (key) => {\n  const env = {};\n\n  if (isElectron()) {\n    env.type = 'electron';\n  } else if (typeof window === 'object') {\n    env.type = 'browser';\n  } else if (typeof importScripts === 'function') {\n    env.type = 'webworker';\n  } else if (typeof process === 'object' && typeof require === 'function') {\n    env.type = 'node';\n  }\n\n  if (typeof key === 'undefined') {\n    return env;\n  }\n\n  return env[key];\n};\n","module.exports = (prefix, cnt) => (\n  `${prefix}-${cnt}-${Math.random().toString(16).slice(3, 8)}`\n);\n","let logging = false;\n\nexports.logging = logging;\n\nexports.setLogging = (_logging) => {\n  logging = _logging;\n};\n\nexports.log = (...args) => (logging ? console.log.apply(this, args) : null);\n","const isBrowser = require('./getEnvironment')('type') === 'browser';\nconst resolveURL = isBrowser ? require('resolve-url') : s => s; // eslint-disable-line\n\nmodule.exports = (options) => {\n  const opts = { ...options };\n  ['corePath', 'workerPath', 'langPath'].forEach((key) => {\n    if (typeof options[key] !== 'undefined') {\n      opts[key] = resolveURL(opts[key]);\n    }\n  });\n  return opts;\n};\n","const resolveURL = require('resolve-url');\nconst { version, dependencies } = require('../../../package.json');\nconst defaultOptions = require('../../constants/defaultOptions');\n\n/*\n * Default options for browser worker\n */\nmodule.exports = {\n  ...defaultOptions,\n  workerPath: (typeof process !== 'undefined' && process.env.TESS_ENV === 'development')\n    ? resolveURL(`/dist/worker.dev.js?nocache=${Math.random().toString(36).slice(3)}`)\n    : `https://unpkg.com/tesseract.js@v${version}/dist/worker.min.js`,\n  /*\n   * If browser doesn't support WebAssembly,\n   * load ASM version instead\n   */\n  corePath: `https://unpkg.com/tesseract.js-core@v${dependencies['tesseract.js-core'].substring(1)}/tesseract-core.${typeof WebAssembly === 'object' ? 'wasm' : 'asm'}.js`,\n};\n","/**\n *\n * Tesseract Worker adapter for browser\n *\n * @fileoverview Tesseract Worker adapter for browser\n * @author Kevin Kwok <antimatter15@gmail.com>\n * @author Guillermo Webster <gui@mit.edu>\n * @author Jerome Wu <jeromewus@gmail.com>\n */\nconst defaultOptions = require('./defaultOptions');\nconst spawnWorker = require('./spawnWorker');\nconst terminateWorker = require('./terminateWorker');\nconst onMessage = require('./onMessage');\nconst send = require('./send');\nconst loadImage = require('./loadImage');\n\nmodule.exports = {\n  defaultOptions,\n  spawnWorker,\n  terminateWorker,\n  onMessage,\n  send,\n  loadImage,\n};\n","const resolveURL = require('resolve-url');\n\n/**\n * readFromBlobOrFile\n *\n * @name readFromBlobOrFile\n * @function\n * @access private\n */\nconst readFromBlobOrFile = blob => (\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n      resolve(fileReader.result);\n    };\n    fileReader.onerror = ({ target: { error: { code } } }) => {\n      reject(Error(`File could not be read! Code=${code}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n  })\n);\n\n/**\n * loadImage\n *\n * @name loadImage\n * @function load image from different source\n * @access private\n */\nconst loadImage = async (image) => {\n  let data = image;\n  if (typeof image === 'undefined') {\n    return 'undefined';\n  }\n\n  if (typeof image === 'string') {\n    // Base64 Image\n    if (/data:image\\/([a-zA-Z]*);base64,([^\"]*)/.test(image)) {\n      data = atob(image.split(',')[1])\n        .split('')\n        .map(c => c.charCodeAt(0));\n    } else {\n      const resp = await fetch(resolveURL(image));\n      data = await resp.arrayBuffer();\n    }\n  } else if (image instanceof HTMLElement) {\n    if (image.tagName === 'IMG') {\n      data = await loadImage(image.src);\n    }\n    if (image.tagName === 'VIDEO') {\n      data = await loadImage(image.poster);\n    }\n    if (image.tagName === 'CANVAS') {\n      await new Promise((resolve) => {\n        image.toBlob(async (blob) => {\n          data = await readFromBlobOrFile(blob);\n          resolve();\n        });\n      });\n    }\n  } else if (image instanceof File || image instanceof Blob) {\n    data = await readFromBlobOrFile(image);\n  }\n\n  return new Uint8Array(data);\n};\n\nmodule.exports = loadImage;\n","module.exports = (worker, handler) => {\n  worker.onmessage = ({ data }) => { // eslint-disable-line\n    handler(data);\n  };\n};\n","/**\n * send\n *\n * @name send\n * @function send packet to worker and create a job\n * @access public\n */\nmodule.exports = async (worker, packet) => {\n  worker.postMessage(packet);\n};\n","/**\n * spawnWorker\n *\n * @name spawnWorker\n * @function create a new Worker in browser\n * @access public\n */\nmodule.exports = ({ workerPath, workerBlobURL }) => {\n  let worker;\n  if (Blob && URL && workerBlobURL) {\n    const blob = new Blob([`importScripts(\"${workerPath}\");`], {\n      type: 'application/javascript',\n    });\n    worker = new Worker(URL.createObjectURL(blob));\n  } else {\n    worker = new Worker(workerPath);\n  }\n\n  return worker;\n};\n","/**\n * terminateWorker\n *\n * @name terminateWorker\n * @function terminate worker\n * @access public\n */\nmodule.exports = (worker) => {\n  worker.terminate();\n};\n","import { getSelection } from \"../node_modules/rangy2/bundles/index.umd\";\r\nimport { createClassApplier } from \"../node_modules/rangy-classapplier/bundles/index.umd\";\r\nimport Mark from \"../node_modules/mark.js/dist/mark\";\r\n\r\nexport type toolType = \"free_text\" | \"tazumen\" | \"pdf\" | \"web\";\r\nexport type WordOption = {\r\n  words: string[];\r\n  color: string;\r\n};\r\n\r\nexport class Sat {\r\n  tool_type: toolType; // フリーテキスト版、PDF版などを指定\r\n  content_root: HTMLElement; // コンテンツを含む要素を指定\r\n  content_window: Window; // コンテンツを含むウィンドウを指定（PDF版はiframeのwindowになる）\r\n  dark_mode: boolean;\r\n  updated: boolean = false; // 内容が更新されているかのフラグ（ページ遷移に対して警告を出す用）\r\n\r\n  word: SatWord; // ワード反転を扱うオブジェクト\r\n  cv: SatCanvas; // スペクトルバーの描画を扱うオブジェクト\r\n  decoration: SatDecoration; // マーカー、太字、下線の装飾を扱うオブジェクト\r\n  comment: SatComment; // コメントを扱うオブジェクト\r\n  tazumen: SatTazumen;\r\n  // pdf: SatPDF; // PDF版の特別な処理を扱うオブジェクト\r\n\r\n  constructor(\r\n    tool_type: toolType,\r\n    content_root: HTMLElement,\r\n    content_window: Window,\r\n    cv: HTMLCanvasElement,\r\n    selected_color: { [key: string]: string },\r\n    dark_mode: boolean,\r\n    block_mode: boolean\r\n  ) {\r\n    this.tool_type = tool_type;\r\n    this.content_root = content_root;\r\n    this.content_window = content_window;\r\n    this.dark_mode = dark_mode;\r\n\r\n    this.word = new SatWord(this, selected_color, block_mode);\r\n    this.cv = new SatCanvas(this, cv);\r\n    this.comment = new SatComment(this);\r\n    this.decoration = new SatDecoration(this);\r\n    this.tazumen = new SatTazumen(this);\r\n    // this.pdf = new SatPDF(this);\r\n  }\r\n\r\n  /**\r\n   * 対応するspan要素を削除。ただし、複数のクラスや属性があった場合は、指定したクラスや属性だけ削除してspanを残す\r\n   * @param {span_element} el 削除したいspan\r\n   * @param {class_name_arr} array 削除したいクラス名の配列\r\n   * @param {attribute_name_arr} array 削除したい属性名の配列\r\n   */\r\n  removeSpan = (\r\n    span: HTMLSpanElement,\r\n    class_name_arr: string[],\r\n    attribute_name_arr: string[]\r\n  ): void => {\r\n    class_name_arr.forEach((class_name): void => {\r\n      span.classList.remove(class_name);\r\n    });\r\n\r\n    attribute_name_arr.forEach((attribute_name): void => {\r\n      span.removeAttribute(attribute_name);\r\n    });\r\n\r\n    // if (span.classList.length === 0 && span.getAttribute(\"style\") === null) {\r\n    if (span.classList.length === 0) {\r\n      const parent = span.parentElement!;\r\n      span.replaceWith(...Array.from(span.childNodes));\r\n      parent.normalize();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * container要素におけるelement要素のxy座標を取得\r\n   * @return { offset_top: x座標, offset_left: y座標 }\r\n   */\r\n  getOffset = (\r\n    element: HTMLElement,\r\n    container: HTMLElement\r\n  ): { offset_top: number; offset_left: number } => {\r\n    let offset_top = element.offsetTop;\r\n    let offset_left = element.offsetLeft;\r\n    let offset_parent = element.offsetParent as HTMLElement;\r\n    while (offset_parent !== container && offset_parent !== null) {\r\n      offset_top +=\r\n        offset_parent.offsetTop +\r\n        Number(\r\n          this.content_window\r\n            .getComputedStyle(offset_parent)\r\n            .borderWidth.slice(0, -2)\r\n        ) *\r\n          2; // TODO ここは怪しいかも\r\n      offset_left += offset_parent.offsetLeft;\r\n      offset_parent = offset_parent.offsetParent as HTMLElement;\r\n    }\r\n    return { offset_top: offset_top, offset_left: offset_left };\r\n  };\r\n\r\n  /**\r\n   * RGBをカラーコードに変換\r\n   * https://decks.hatenadiary.org/entry/20100907/1283843862\r\n   * @param col \"rgb(R, G, B)\"の形式の文字列\r\n   * @return \"#000000\"形式のカラーコード\r\n   */\r\n  rgbTo16 = (col: string): string => {\r\n    return (\r\n      \"#\" +\r\n      col\r\n        .match(/\\d+/g)\r\n        ?.map((a: string) => {\r\n          return (\"0\" + parseInt(a).toString(16)).slice(-2);\r\n        })\r\n        .join(\"\")\r\n    );\r\n  };\r\n\r\n  /**\r\n   * HSLをRGBのカラーコードに変換\r\n   * @param _h\r\n   * @param s\r\n   * @param l\r\n   * @returns \"#000000\"形式のカラーコード\r\n   */\r\n  hslToRgb = (_h: number, s: number, l: number): string => {\r\n    const h = Math.min(_h, 359) / 60;\r\n\r\n    const c = (1 - Math.abs(2 * l - 1)) * s;\r\n    const x = c * (1 - Math.abs((h % 2) - 1));\r\n    const m = l - 0.5 * c;\r\n\r\n    let r = m,\r\n      g = m,\r\n      b = m;\r\n\r\n    if (h < 1) {\r\n      (r += c), (g = +x), (b += 0);\r\n    } else if (h < 2) {\r\n      (r += x), (g += c), (b += 0);\r\n    } else if (h < 3) {\r\n      (r += 0), (g += c), (b += x);\r\n    } else if (h < 4) {\r\n      (r += 0), (g += x), (b += c);\r\n    } else if (h < 5) {\r\n      (r += x), (g += 0), (b += c);\r\n    } else if (h < 6) {\r\n      (r += c), (g += 0), (b += x);\r\n    } else {\r\n      (r = 0), (g = 0), (b = 0);\r\n    }\r\n\r\n    return (\r\n      \"#\" +\r\n      `0${Math.floor(r * 255).toString(16)}`.slice(-2) +\r\n      `0${Math.floor(g * 255).toString(16)}`.slice(-2) +\r\n      `0${Math.floor(b * 255).toString(16)}`.slice(-2)\r\n    );\r\n  };\r\n\r\n  /**\r\n   * 要素のセレクタを取得（参考：https://akabeko.me/blog/2015/06/get-element-selector/）\r\n   * @param {object} el セレクタを取得したいエレメント\r\n   * @returns {string} セレクタ\r\n   */\r\n  getSelectorFromElement = (el: any): string[] => {\r\n    const names = [];\r\n\r\n    while (el) {\r\n      let name = el.nodeName.toLowerCase();\r\n      if (el.id) {\r\n        name += \"#\" + el.id;\r\n        names.unshift(name);\r\n        break;\r\n      }\r\n\r\n      const index = this.getSiblingElementsIndex(el, name);\r\n      name += \":nth-of-type(\" + index + \")\";\r\n\r\n      names.unshift(name);\r\n      el = el.parentNode;\r\n    }\r\n\r\n    return names;\r\n  };\r\n\r\n  /**\r\n   * 親要素に対して何番目の子要素かを取得\r\n   * https://github.com/akabekobeko/examples-web-app/tree/get-element-selector/get-element-selector\r\n   * @param el 調べたい子要素\r\n   * @return index 何番目かを表す数値\r\n   */\r\n\r\n  getSiblingElementsIndex = (el: Element, name: string): number => {\r\n    let index = 1;\r\n    let sib = el;\r\n\r\n    while ((sib = sib.previousElementSibling!)) {\r\n      if (sib.nodeName.toLowerCase() === name) {\r\n        ++index;\r\n      }\r\n    }\r\n\r\n    return index;\r\n  };\r\n}\r\n\r\nclass SatWord {\r\n  sat: Sat;\r\n  option: { [key: string]: WordOption } = {};\r\n  selected_color: { [key: string]: string } = {};\r\n  block_mode: boolean = false;\r\n\r\n  constructor(\r\n    sat: Sat,\r\n    selected_color: { [key: string]: string },\r\n    block_mode: boolean\r\n  ) {\r\n    this.sat = sat;\r\n    this.selected_color = selected_color;\r\n    this.block_mode = block_mode;\r\n  }\r\n\r\n  setOption = (option: { [key: string]: WordOption }): void => {\r\n    this.option = option;\r\n\r\n    // 手動で選択した色があればそれをセットする\r\n    Object.keys(this.option).forEach((color_id) => {\r\n      if (this.option[color_id] && this.selected_color[color_id]) {\r\n        this.option[color_id]!.color = this.selected_color[color_id]!;\r\n      }\r\n    });\r\n  };\r\n\r\n  setColor = (color_id: number, color: string): void => {\r\n    this.selected_color[color_id] = color;\r\n    if (this.option[color_id]) this.option[color_id]!.color = color;\r\n  };\r\n  invert(root: HTMLElement): void {\r\n    // ワード反転解除\r\n    this.clear(root);\r\n\r\n    const mark_instance = new Mark(root);\r\n    const mark_options = {\r\n      element: \"span\",\r\n      accuracy: \"partially\",\r\n      separateWordSearch: false,\r\n      acrossElements: true,\r\n      ignoreJoiners: true,\r\n      ignorePunctuation: \":;.,-–—‒_(){}[]!'\\\"+=\".split(\"\"),\r\n      each: (elem: HTMLElement) => {\r\n        elem.classList.add(\"word_inversion\");\r\n      },\r\n      className: \"\",\r\n    };\r\n\r\n    if (this.sat.tool_type === \"web\") {\r\n      mark_options.accuracy = \"complementary\";\r\n    }\r\n    const colorStyle = document.createElement(\"style\");\r\n    colorStyle.type = \"text/css\";\r\n    colorStyle.id = \"SAT_word_inversion\";\r\n    const colorStyle_pdf_parent = document.createElement(\"style\");\r\n    colorStyle_pdf_parent.type = \"text/css\";\r\n    colorStyle_pdf_parent.id = \"SAT_word_inversion\";\r\n\r\n    this.sat.content_window.document.head.prepend(colorStyle);\r\n    if (this.sat.tool_type === \"pdf\") {\r\n      document.head.prepend(colorStyle_pdf_parent);\r\n    }\r\n\r\n    for (const color_id in this.option) {\r\n      mark_options.className = `word_inversion_class${Number(color_id)}`;\r\n      const color_code = this.option[color_id]!.color;\r\n\r\n      colorStyle.sheet!.insertRule(\r\n        `span.word_inversion_class${color_id} {background-color: ${color_code} !important; color: ${\r\n          this.sat.tool_type === \"pdf\"\r\n            ? color_code\r\n            : this.calcWordColor(color_code)\r\n        }}`,\r\n        0\r\n      );\r\n      if (this.sat.tool_type === \"pdf\") {\r\n        colorStyle_pdf_parent.sheet!.insertRule(\r\n          `span.word_inversion_class${color_id} {background-color: ${color_code} ! important; color: ${this.calcWordColor(\r\n            color_code\r\n          )}}`,\r\n          0\r\n        );\r\n      }\r\n\r\n      this.option[color_id]!.words.forEach((word: string) => {\r\n        if (/^\\/.*\\/[dgimsuy]*$/.test(word)) {\r\n          // 元々正規表現の場合\r\n          let re_option = \"\";\r\n          if (word.match(/([dgimsuy]+)$/)) {\r\n            re_option = word.match(/([dgimsuy]+)$/)![0]!;\r\n            word = word.slice(0, -re_option.length);\r\n          }\r\n          let reg_ex: RegExp;\r\n          if (this.block_mode) {\r\n            reg_ex = new RegExp(\r\n              `[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*${word.slice(\r\n                1,\r\n                -1\r\n              )}[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*`,\r\n              re_option\r\n            );\r\n          } else {\r\n            reg_ex = new RegExp(word.slice(1, -1), re_option);\r\n          }\r\n          mark_instance.markRegExp(reg_ex, mark_options);\r\n        } else {\r\n          // 正規表現でない場合\r\n          if (this.block_mode) {\r\n            const reg_ex = new RegExp(\r\n              `[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*${word}[ァ-ヶｦ-ﾟー一-龥0-9０-９a-zA-Zａ-ｚＡ-Ｚ.．]*`,\r\n              \"i\"\r\n            );\r\n            mark_instance.markRegExp(reg_ex, mark_options);\r\n          } else {\r\n            mark_instance.mark(word, mark_options);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n  clear = (root: HTMLElement): void => {\r\n    Array.from(\r\n      root.querySelectorAll<HTMLSpanElement>(\"span.word_inversion\")\r\n    ).forEach((span) => {\r\n      Array.from(span.classList).forEach((class_name) => {\r\n        if (class_name.indexOf(\"word_inversion\") !== -1) {\r\n          span.classList.remove(class_name);\r\n        }\r\n      });\r\n      span.removeAttribute(\"data-markjs\");\r\n      if (span.classList.length === 0 && span.attributes.length === 1) {\r\n        // spanを削除\r\n        const parent = span.parentNode;\r\n        while (span.firstChild) parent!.insertBefore(span.firstChild, span);\r\n        parent!.removeChild(span);\r\n        parent!.normalize(); // 反転されていたテキストノードを周囲のテキストノードと結合\r\n      }\r\n    });\r\n\r\n    let preexisting_style = this.sat.content_window.document.head.querySelector(\r\n      \"style#SAT_word_inversion\"\r\n    );\r\n    if (preexisting_style !== null) {\r\n      preexisting_style.remove();\r\n    }\r\n\r\n    if (this.sat.tool_type === \"pdf\") {\r\n      preexisting_style = document.head.querySelector(\r\n        \"style#SAT_word_inversion\"\r\n      );\r\n      if (preexisting_style !== null) {\r\n        preexisting_style.remove();\r\n      }\r\n    }\r\n  };\r\n  getWordColors = (length: number): string[] => {\r\n    // https://gist.github.com/ibrechin/2489005 から拝借して一部改変\r\n\r\n    const colors: string[] = [];\r\n    const step = 360 / length;\r\n    const l = this.sat.dark_mode ? 0.35 : 0.7;\r\n    for (let i = 0; i < length; i++) {\r\n      // 適当に設定\r\n      colors.push(this.sat.hslToRgb((0 + i * step) % 360, 1.0, l));\r\n    }\r\n\r\n    return colors;\r\n  };\r\n  calcWordColor = (bg_color: string): string => {\r\n    const brightness =\r\n      parseInt(bg_color.substr(1, 2), 16) * 0.299 + // Red\r\n      parseInt(bg_color.substr(3, 2), 16) * 0.587 + // Green\r\n      parseInt(bg_color.substr(5, 2), 16) * 0.114; // Blue\r\n\r\n    return brightness >= 140 ? \"#111\" : \"#eed\";\r\n  };\r\n}\r\n\r\ntype Rect = [string, number, number, number, number, number];\r\nclass SatCanvas {\r\n  sat: Sat;\r\n  element: HTMLCanvasElement;\r\n  word_rect: Rect[] = [];\r\n  comment_circle: { y: number; color: string }[] = [];\r\n  highlight_rect: { y: number; color: string }[] = [];\r\n  constructor(sat: Sat, element: HTMLCanvasElement) {\r\n    this.sat = sat;\r\n    this.element = element;\r\n  }\r\n\r\n  updateData = () => {\r\n    // ワード反転のバーの色や位置を更新\r\n    this.word_rect = [];\r\n    const color_dic: { [key: string]: number } = {};\r\n    Array.from(\r\n      new Set(\r\n        Object.keys(this.sat.word.option).map((color_id: string) => {\r\n          return this.sat.word.option[color_id]!.color;\r\n        })\r\n      )\r\n    )\r\n      .filter((color: string) => {\r\n        return color !== \"\";\r\n      })\r\n      .forEach((color: string, i: number) => {\r\n        color_dic[color] = i;\r\n      });\r\n    const color_num = Object.keys(color_dic).length;\r\n\r\n    const span_parent_height =\r\n      this.sat.content_root.parentElement!.scrollHeight;\r\n\r\n    Array.from(\r\n      this.sat.content_root.querySelectorAll<HTMLSpanElement>(\r\n        \"span.word_inversion\"\r\n      )\r\n    ).forEach((span) => {\r\n      const fill_color = this.sat.rgbTo16(\r\n        window.getComputedStyle(span).backgroundColor\r\n      );\r\n      const left_offset =\r\n        this.sat.tool_type === \"web\" || this.sat.tool_type === \"pdf\" ? 0 : 35;\r\n      const rect_x =\r\n        left_offset +\r\n        (this.element.width - left_offset) *\r\n          (color_dic[fill_color]! / color_num);\r\n\r\n      const offset = this.sat.getOffset(\r\n        span,\r\n        this.sat.content_root.offsetParent as HTMLElement\r\n      );\r\n      const rect_y =\r\n        this.element.height * (offset.offset_top / span_parent_height);\r\n      const rect_height =\r\n        3 * Math.max(span.offsetHeight / this.element.height, 2);\r\n      this.word_rect.push([\r\n        fill_color,\r\n        Math.round(rect_x) - 0.5,\r\n        Math.round(rect_y - rect_height / 2.0) - 0.5,\r\n        Math.round((this.element.width - left_offset) / color_num) + 0,\r\n        5,\r\n        Math.round(rect_height / 2.0),\r\n      ]);\r\n    });\r\n\r\n    // コメント部分の●の位置を更新\r\n    this.comment_circle = [];\r\n\r\n    // comment_idごとにグループ化したspan要素の配列を作成する\r\n    const span_element_dic: { [comment_id: string]: HTMLSpanElement[] } =\r\n      Array.from(\r\n        this.sat.content_root.querySelectorAll<HTMLSpanElement>(\r\n          \"span.commented\"\r\n        )\r\n      )\r\n        .map((span: HTMLSpanElement) => {\r\n          // それぞれのspanの位置（ページ最初からのoffsetTop, offsetLeft）を計算しておく\r\n          const offset = this.sat.getOffset(\r\n            span,\r\n            this.sat.content_root.offsetParent as HTMLElement\r\n          );\r\n          span.setAttribute(\"offset_top\", offset.offset_top.toString());\r\n          span.setAttribute(\"offset_left\", offset.offset_left.toString());\r\n          return span;\r\n        })\r\n        .reduce(\r\n          (\r\n            r: { [comment_id: string]: HTMLSpanElement[] },\r\n            a: HTMLSpanElement\r\n          ) => {\r\n            r[a.getAttribute(\"comment_id\")!] = [\r\n              ...(r[a.getAttribute(\"comment_id\")!] || []),\r\n              a,\r\n            ];\r\n            return r;\r\n          },\r\n          {}\r\n        ); // ひとまずcommment_idごとにグループ化した連想配列を作成\r\n    const span_element_arr: HTMLSpanElement[][] = Object.keys(span_element_dic)\r\n      .map((key: string) => {\r\n        // ここで連想配列を配列に変更\r\n        return span_element_dic[key]!.sort(\r\n          (a: HTMLSpanElement, b: HTMLSpanElement) => {\r\n            // グループ内ではoffsetTop、offsetLeftの順にソートしておく\r\n            if (a.getAttribute(\"offset_top\") !== b.getAttribute(\"offset_top\")) {\r\n              return a.getAttribute(\"offset_top\")! <\r\n                b.getAttribute(\"offset_top\")!\r\n                ? -1\r\n                : 1;\r\n            } else {\r\n              return a.getAttribute(\"offset_left\")! <\r\n                b.getAttribute(\"offset_left\")!\r\n                ? -1\r\n                : 1;\r\n            }\r\n          }\r\n        );\r\n      })\r\n      .sort((a: HTMLSpanElement[], b: HTMLSpanElement[]) => {\r\n        // グループ間では、最初のspanのoffsetTop、offsetLeftの順にソートしておく\r\n        if (\r\n          a[0]!.getAttribute(\"offset_top\") !== b[0]!.getAttribute(\"offset_top\")\r\n        ) {\r\n          return a[0]!.getAttribute(\"offset_top\")! <\r\n            b[0]!.getAttribute(\"offset_top\")!\r\n            ? -1\r\n            : 1;\r\n        } else {\r\n          return a[0]!.getAttribute(\"offset_left\")! <\r\n            b[0]!.getAttribute(\"offset_left\")!\r\n            ? -1\r\n            : 1;\r\n        }\r\n      });\r\n    span_element_arr.forEach((span: HTMLSpanElement[]) => {\r\n      this.comment_circle.push({\r\n        y:\r\n          this.element.height *\r\n          (this.sat.getOffset(\r\n            span[0]!,\r\n            this.sat.content_root.offsetParent as HTMLElement\r\n          ).offset_top /\r\n            span_parent_height),\r\n        color: span[0]!.style.backgroundColor,\r\n      });\r\n    });\r\n\r\n    // ハイライト部分の●の位置を更新\r\n    this.highlight_rect = [];\r\n    Array.from(\r\n      document.querySelectorAll<HTMLSpanElement>(\"span.highlighted\")\r\n    ).forEach((span) => {\r\n      this.highlight_rect.push({\r\n        y:\r\n          this.element.height *\r\n          ((this.sat.getOffset(\r\n            span,\r\n            this.sat.content_root.offsetParent as HTMLElement\r\n          ).offset_top -\r\n            3) /\r\n            span_parent_height),\r\n        color: span.style.backgroundColor,\r\n      });\r\n    });\r\n  };\r\n\r\n  draw = () => {\r\n    const ctx = this.element.getContext(\"2d\")!;\r\n    ctx.clearRect(0, 0, this.element.width, this.element.height);\r\n    if (this.sat.tool_type === \"web\" || this.sat.tool_type === \"pdf\") {\r\n      ctx.fillStyle = \"black\";\r\n      ctx.fillRect(0, 0, 200, window.innerHeight);\r\n    } else {\r\n      ctx.fillStyle = \"#333333\";\r\n      ctx.fillRect(0, 0, 30, window.innerHeight);\r\n    }\r\n\r\n    this.word_rect.forEach((rect_arr): void => {\r\n      ctx.fillStyle = rect_arr[0];\r\n      ctx.fillRect(rect_arr[1], rect_arr[2], rect_arr[3], rect_arr[4]);\r\n    });\r\n\r\n    // ctx.fillStyle = \"red\";\r\n    this.comment_circle.forEach(\r\n      (comment_circle: { y: number; color: string }): void => {\r\n        ctx.fillStyle = comment_circle.color;\r\n        ctx.beginPath();\r\n        ctx.arc(10, comment_circle.y, 5, 0, 2 * Math.PI, false);\r\n        ctx.fill();\r\n      }\r\n    );\r\n    this.highlight_rect.forEach(\r\n      (highlight_rect: { y: number; color: string }): void => {\r\n        ctx.fillStyle = highlight_rect.color;\r\n        ctx.fillRect(20, highlight_rect.y - 5, 10, 10);\r\n      }\r\n    );\r\n\r\n    ctx.strokeStyle = \"white\";\r\n    ctx.lineWidth = 5;\r\n    let scroll_div: HTMLElement;\r\n    if (this.sat.tool_type === \"pdf\") {\r\n      scroll_div = this.sat.content_root.parentElement as HTMLElement;\r\n    } else if (this.sat.tool_type === \"web\") {\r\n      // @ts-ignore\r\n      scroll_div = document.scrollingElement;\r\n    } else {\r\n      scroll_div = document.getElementById(\"main\") as HTMLElement;\r\n    }\r\n    const scrollTop = scroll_div.scrollTop;\r\n    const span_parent_height = scroll_div.scrollHeight;\r\n\r\n    const top_height = document.querySelector<HTMLDivElement>(\"div.top\")\r\n      ? document.querySelector<HTMLDivElement>(\"div.top\")!.offsetHeight\r\n      : 0;\r\n    ctx.strokeRect(\r\n      2.5,\r\n      scrollTop * (this.element.height / span_parent_height),\r\n      this.element.width - 2.5,\r\n      (window.innerHeight - top_height) *\r\n        (this.element.height / span_parent_height)\r\n    );\r\n  };\r\n}\r\n\r\nclass SatDecoration {\r\n  sat: Sat;\r\n  // element_info: {\r\n  //   selector: string;\r\n  //   page_number: number;\r\n  //   class_name: string;\r\n  //   start: number;\r\n  //   length: number;\r\n  // }[] = [];\r\n  constructor(sat: Sat) {\r\n    this.sat = sat;\r\n  }\r\n\r\n  add = (class_name: string): void => {\r\n    createClassApplier(class_name, {\r\n      elementTagName: \"span\",\r\n      normalize: true,\r\n    }).toggleSelection(this.sat.content_window);\r\n  };\r\n\r\n  highlight = (color_code: string): void => {\r\n    createClassApplier(\"highlighted_tmp\", {\r\n      elementTagName: \"span\",\r\n      normalize: false,\r\n    }).toggleSelection(this.sat.content_window);\r\n    const sel = getSelection(this.sat.content_window);\r\n    sel\r\n      .getRangeAt(0)\r\n      .getNodes([], (node: Node) => {\r\n        return (\r\n          node instanceof HTMLSpanElement &&\r\n          node.classList.contains(\"highlighted_tmp\")\r\n        );\r\n      })\r\n      .forEach((span: HTMLSpanElement) => {\r\n        span.style.backgroundColor = color_code;\r\n        span.style.borderBottomColor = color_code;\r\n        span.classList.remove(\"highlighted_tmp\");\r\n        span.classList.add(\"highlighted\");\r\n      });\r\n    let parent_highlighted_span = sel\r\n      .getRangeAt(0)\r\n      .commonAncestorContainer.parentElement.closest(\"span.commented\");\r\n    if (parent_highlighted_span) {\r\n      parent_highlighted_span.style.backgroundColor = color_code;\r\n      parent_highlighted_span.classList.remove(\"highlighted_tmp\");\r\n      parent_highlighted_span.classList.add(\"highlighted\");\r\n    }\r\n\r\n    this.sat.cv.updateData();\r\n    this.sat.cv.draw();\r\n  };\r\n\r\n  dehighlight = (): void => {\r\n    const sel = getSelection(this.sat.content_window);\r\n\r\n    // 選択領域に包含されるspanのハイライトを削除\r\n    if (sel.rangeCount) {\r\n      sel\r\n        .getRangeAt(0)\r\n        .getNodes([1])\r\n        .forEach((node: Node) => {\r\n          if (!(node instanceof HTMLSpanElement)) return;\r\n          if (node.classList.length > 0) {\r\n            Array.from(node.classList).forEach((class_name) => {\r\n              if (class_name === \"highlighted\") {\r\n                node.style.backgroundColor = \"\";\r\n                node.style.borderBottomColor = \"\";\r\n                this.sat.removeSpan(node, [class_name], []);\r\n              }\r\n            });\r\n          } else {\r\n            node.style.backgroundColor = \"\";\r\n          }\r\n        });\r\n\r\n      // 選択領域を包含するspanのハイライトを削除\r\n      [\r\n        getSelection(this.sat.content_window).getRangeAt(0).startContainer,\r\n        getSelection(this.sat.content_window).getRangeAt(0).endContainer,\r\n      ].forEach((container) => {\r\n        while (container && container !== this.sat.content_root) {\r\n          const parent_element = container.parentElement;\r\n          if (container instanceof HTMLSpanElement) {\r\n            if (container.classList.length > 0) {\r\n              Array.from(container.classList).forEach((class_name) => {\r\n                if (class_name === \"highlighted\") {\r\n                  container.style.backgroundColor = \"\";\r\n                  container.style.borderBottomColor = \"\";\r\n                  this.sat.removeSpan(container, [class_name], []);\r\n                }\r\n              });\r\n            } else {\r\n              container.style.backgroundColor = \"\";\r\n            }\r\n          }\r\n          container = parent_element;\r\n        }\r\n      });\r\n    }\r\n    this.sat.cv.updateData();\r\n    this.sat.cv.draw();\r\n  };\r\n}\r\n\r\nclass SatComment {\r\n  sat: Sat;\r\n  comment_index: number = 0;\r\n  span_info: {\r\n    [comment_id: string]: {\r\n      selector: string;\r\n      page_number: number;\r\n      class_name: string;\r\n      start: number;\r\n      length: number;\r\n    }[]; // （PDF版用）コメントされたspanの情報とページ番号を保持\r\n  } = {};\r\n  box_info: { [comment_id: string]: { content: string; page_number: number } } =\r\n    {}; // （PDF版用）コメント内容とページ番号を保持\r\n  box_sorted_info: {\r\n    comment_id: string;\r\n    first_span: HTMLSpanElement;\r\n    div: HTMLDivElement;\r\n    polygon: SVGPolygonElement;\r\n  }[] = [];\r\n\r\n  constructor(sat: Sat) {\r\n    this.sat = sat;\r\n  }\r\n  addComment = (color_code: string): void => {\r\n    const comment_id = this.addSpan(color_code);\r\n    this.addBox(comment_id, color_code);\r\n    this.sort();\r\n    this.arrange();\r\n\r\n    // コメントボックスにカーソルを移動\r\n    const range = window.document.createRange();\r\n    const el = window.document.querySelector<HTMLDivElement>(\r\n      `div.comment[comment_id=\"${comment_id}\"] > p`\r\n    )!;\r\n    range.setStart(el, 0);\r\n    range.setEnd(el, 0);\r\n\r\n    window.focus();\r\n    window.getSelection()!.removeAllRanges();\r\n    window.getSelection()!.addRange(range);\r\n\r\n    this.sat.cv.updateData();\r\n    this.sat.cv.draw();\r\n  };\r\n\r\n  remove = (comment_id: string): void => {\r\n    this.sat.content_root\r\n      .querySelectorAll<HTMLSpanElement>(\r\n        `span.commented[comment_id=\"${comment_id}\"]`\r\n      )\r\n      .forEach((element, i) => {\r\n        this.sat.removeSpan(\r\n          element,\r\n          [\"commented\", \"span_onmouse\"],\r\n          [\"comment_id\"]\r\n        );\r\n      });\r\n\r\n    // コメントに対応するdiv、polygonを削除\r\n    document\r\n      .getElementById(\"comment_div\")!\r\n      .querySelector(`div.comment[comment_id=\"${comment_id}\"]`)\r\n      ?.remove();\r\n    Array.from(\r\n      document\r\n        .getElementById(\"comment_svg\")!\r\n        .querySelectorAll(`polygon[comment_id=\"${comment_id}\"]`)\r\n    ).forEach((polygon) => {\r\n      polygon.remove();\r\n    });\r\n\r\n    // 記憶情報の対応部分を削除\r\n    delete this.span_info[comment_id];\r\n    delete this.box_info[comment_id];\r\n  };\r\n\r\n  addSpan = (color_code: string): string => {\r\n    createClassApplier(\"commented\", {\r\n      elementTagName: \"span\",\r\n      normalize: true,\r\n    }).toggleSelection(this.sat.content_window);\r\n\r\n    // comment_idを決定\r\n    const comment_id_arr: { [comment_id: string]: string } = {};\r\n    const added_span_elements: HTMLSpanElement[] = [];\r\n    Array.from(\r\n      this.sat.content_root.querySelectorAll<HTMLSpanElement>(`span.commented`)\r\n    ).forEach((span) => {\r\n      if (span.getAttribute(\"comment_id\") !== null) {\r\n        comment_id_arr[span.getAttribute(\"comment_id\")!] = \"commented\";\r\n      } else {\r\n        added_span_elements.push(span);\r\n      }\r\n    });\r\n    while (comment_id_arr[this.comment_index]) {\r\n      this.comment_index++;\r\n    }\r\n    const comment_id = this.comment_index;\r\n    this.comment_index++;\r\n\r\n    // comment_id等の属性の付与\r\n    added_span_elements.forEach((span) => {\r\n      span.setAttribute(\"comment_id\", comment_id.toString());\r\n      // if (!span.classList.contains(\"highlighted\")) {\r\n      span.style.backgroundColor = color_code;\r\n      span.style.borderColor = color_code;\r\n      // }\r\n\r\n      const offset = this.sat.getOffset(\r\n        span,\r\n        this.sat.content_root.offsetParent as HTMLElement\r\n      );\r\n      span.setAttribute(\"offset_top\", offset.offset_top.toString());\r\n      span.setAttribute(\"offset_left\", offset.offset_left.toString());\r\n    });\r\n\r\n    // イベントハンドラ追加（span）\r\n    added_span_elements.forEach((span) => {\r\n      span.addEventListener(\"mouseover\", (e) => {\r\n        this.onMouseOver(span.getAttribute(\"comment_id\")!);\r\n      });\r\n    });\r\n\r\n    added_span_elements.forEach((span) => {\r\n      span.addEventListener(\"mouseout\", (e) => {\r\n        // 子要素への移動であれば無視\r\n        if (\r\n          e.relatedTarget instanceof HTMLElement &&\r\n          e.relatedTarget.parentElement !== null &&\r\n          e.relatedTarget.parentElement.closest(\r\n            `span.commented[comment_id=\"${span.getAttribute(\"comment_id\")}\"]`\r\n          ) !== null\r\n        ) {\r\n          return;\r\n        }\r\n        this.onMouseOut(span.getAttribute(\"comment_id\")!);\r\n      });\r\n    });\r\n\r\n    // if (this.sat.tool_type === \"pdf\") {\r\n    //   this.sat.pdf.memorize(\"commented\");\r\n    // }\r\n\r\n    return comment_id.toString();\r\n  };\r\n\r\n  addBox = (comment_id: string, color_code: string): void => {\r\n    const p_element = document.createElement(\"p\");\r\n    if (this.sat.tool_type === \"pdf\") {\r\n      if (this.box_info[comment_id]) {\r\n        p_element.innerText = this.box_info[comment_id]!.content;\r\n      } else {\r\n        this.box_info[comment_id] = {\r\n          content: \"\",\r\n          page_number: this.span_info[comment_id]\r\n            ?.map((info) => {\r\n              return Number(info.page_number);\r\n            })\r\n            .reduce((a: number, b: number) => {\r\n              return Math.min(a, b);\r\n            })!,\r\n        };\r\n      }\r\n    }\r\n\r\n    const comment_div_element = document.createElement(\"div\");\r\n    comment_div_element.classList.add(\"comment\");\r\n    comment_div_element.contentEditable = \"true\";\r\n    comment_div_element.id = comment_id;\r\n    comment_div_element.setAttribute(\"comment_id\", comment_id);\r\n    comment_div_element.style.backgroundColor = color_code;\r\n    comment_div_element.style.borderColor = color_code;\r\n    comment_div_element.appendChild(p_element);\r\n    document.getElementById(\"comment_div\")!.appendChild(comment_div_element);\r\n\r\n    // 吹き出しのsvg（三角形）追加\r\n    const polygon = document.createElementNS(\r\n      \"http://www.w3.org/2000/svg\",\r\n      \"polygon\"\r\n    );\r\n    polygon.setAttribute(\"comment_id\", comment_id);\r\n    polygon.style.fill = color_code;\r\n    polygon.style.stroke = color_code;\r\n    document\r\n      .getElementById(\"comment_svg\")!\r\n      .querySelector(\"svg\")!\r\n      .appendChild(polygon);\r\n\r\n    // イベントハンドラ追加\r\n    comment_div_element.addEventListener(\"mouseover\", (e) => {\r\n      this.onMouseOver(comment_div_element.getAttribute(\"comment_id\")!);\r\n    });\r\n\r\n    comment_div_element.addEventListener(\"mouseout\", (e) => {\r\n      // 子要素への移動であれば無視\r\n      if (\r\n        e.relatedTarget instanceof HTMLElement &&\r\n        e.relatedTarget.parentElement !== null &&\r\n        e.relatedTarget.parentElement.closest(\r\n          `div.comment[comment_id=\"${comment_div_element.getAttribute(\r\n            \"comment_id\"\r\n          )}\"]`\r\n        ) !== null\r\n      ) {\r\n        return;\r\n      }\r\n      this.onMouseOut(comment_div_element.getAttribute(\"comment_id\")!);\r\n    });\r\n\r\n    comment_div_element.addEventListener(\"input\", this.onInput);\r\n\r\n    polygon.addEventListener(\"click\", (e) => {\r\n      this.onPolygonClick(comment_div_element.getAttribute(\"comment_id\")!);\r\n    });\r\n  };\r\n\r\n  onMouseOver = (comment_id: string): void => {\r\n    document\r\n      .getElementById(\"comment_div\")!\r\n      .querySelector(`div.comment[comment_id=\"${comment_id}\"]`)\r\n      ?.classList.add(\"div_onmouse\");\r\n\r\n    Array.from(\r\n      this.sat.content_root.querySelectorAll(\r\n        `span.commented[comment_id=\"${comment_id}\"]`\r\n      )\r\n    ).forEach((span) => {\r\n      span.classList.add(\"span_onmouse\");\r\n    });\r\n  };\r\n  onMouseOut = (comment_id: string): void => {\r\n    document\r\n      .getElementById(\"comment_div\")!\r\n      .querySelector(`div.comment[comment_id=\"${comment_id}\"]`)\r\n      ?.classList.remove(\"div_onmouse\");\r\n    Array.from(\r\n      this.sat.content_root.querySelectorAll(\r\n        `span.commented[comment_id=\"${comment_id}\"]`\r\n      )\r\n    ).forEach((span) => {\r\n      span.classList.remove(\"span_onmouse\");\r\n    });\r\n  };\r\n  onInput = () => {\r\n    this.sat.updated = true;\r\n  };\r\n  onPolygonClick = (comment_id: string): void => {\r\n    const comment_div = document\r\n      .getElementById(\"comment_div\")!\r\n      .querySelector<HTMLDivElement>(\r\n        `div.comment[comment_id=\"${comment_id}\"]`\r\n      )!;\r\n    const color_picker = document.getElementById(\"color_picker\")!;\r\n    const color_picker_comment = document.getElementById(\r\n      \"color_picker_comment\"\r\n    )!;\r\n    color_picker_comment.setAttribute(\"color_id\", \"comment_color\");\r\n    color_picker_comment.style.display = \"block\";\r\n    const offsets = this.sat.getOffset(comment_div, this.sat.content_root);\r\n    color_picker_comment.style.top = `${Math.max(\r\n      offsets.offset_top - color_picker_comment.offsetHeight / 2 + 10,\r\n      40\r\n    )}px`;\r\n    const zumen_div = document.getElementById(\"zumen\");\r\n    if (zumen_div) {\r\n      color_picker_comment.style.left = `${\r\n        offsets.offset_left -\r\n        color_picker_comment.offsetWidth -\r\n        zumen_div.offsetWidth -\r\n        15\r\n      }px`;\r\n    } else {\r\n      color_picker_comment.style.left = `${\r\n        offsets.offset_left - color_picker_comment.offsetWidth - 15\r\n      }px`;\r\n    }\r\n\r\n    color_picker.setAttribute(\"mode\", \"comment\");\r\n    color_picker.setAttribute(\"comment_id\", comment_id);\r\n    color_picker.setAttribute(\r\n      \"comment_color\",\r\n      comment_div.style.backgroundColor\r\n    );\r\n  };\r\n\r\n  // comment_boxの高さ順を判定し、this.box_sorted_infoを設定\r\n  sort = () => {\r\n    // comment_idごとにグループ化したspan要素の配列を作成する\r\n    const span_element_dic: { [comment_id: string]: HTMLSpanElement[] } =\r\n      Array.from(\r\n        this.sat.content_root.querySelectorAll<HTMLSpanElement>(\r\n          \"span.commented\"\r\n        )\r\n      ).reduce(\r\n        (\r\n          r: { [comment_id: string]: HTMLSpanElement[] },\r\n          a: HTMLSpanElement\r\n        ) => {\r\n          r[a.getAttribute(\"comment_id\")!] = [\r\n            ...(r[a.getAttribute(\"comment_id\")!] || []),\r\n            a,\r\n          ];\r\n          return r;\r\n        },\r\n        {}\r\n      ); // ひとまずcommment_idごとにグループ化した連想配列を作成\r\n\r\n    const span_element_arr: HTMLSpanElement[][] = Object.keys(span_element_dic)\r\n      .map((key) => {\r\n        // ここで連想配列を配列に変更\r\n        return span_element_dic[key]!.sort((a, b) => {\r\n          // グループ内ではoffsetTop、offsetLeftの順にソートしておく\r\n          if (\r\n            Number(a.getAttribute(\"offset_top\")) !==\r\n            Number(b.getAttribute(\"offset_top\"))\r\n          ) {\r\n            return Number(a.getAttribute(\"offset_top\")) <\r\n              Number(b.getAttribute(\"offset_top\"))\r\n              ? -1\r\n              : 1;\r\n          } else {\r\n            return Number(a.getAttribute(\"offset_left\")) <\r\n              Number(b.getAttribute(\"offset_left\"))\r\n              ? -1\r\n              : 1;\r\n          }\r\n        });\r\n      })\r\n      .sort((a: HTMLSpanElement[], b: HTMLSpanElement[]) => {\r\n        // グループ間では、最初のspanのoffsetTop、offsetLeftの順にソートしておく\r\n        if (\r\n          Number(a[0]!.getAttribute(\"offset_top\")) !==\r\n          Number(b[0]!.getAttribute(\"offset_top\"))\r\n        ) {\r\n          return Number(a[0]!.getAttribute(\"offset_top\")) <\r\n            Number(b[0]!.getAttribute(\"offset_top\"))\r\n            ? -1\r\n            : 1;\r\n        } else {\r\n          return Number(a[0]!.getAttribute(\"offset_left\")) <\r\n            Number(b[0]!.getAttribute(\"offset_left\"))\r\n            ? -1\r\n            : 1;\r\n        }\r\n      });\r\n\r\n    const div_elements = Array.from(\r\n      document\r\n        .getElementById(\"comment_div\")!\r\n        .querySelectorAll<HTMLDivElement>(\"div.comment\")\r\n    ).reduce(\r\n      (\r\n        result: { [comment_id: string]: HTMLDivElement },\r\n        current: HTMLDivElement\r\n      ) => {\r\n        result[current.getAttribute(\"comment_id\")!] = current;\r\n        return result;\r\n      },\r\n      {}\r\n    );\r\n\r\n    const polygon_elements = Array.from(\r\n      document\r\n        .getElementById(\"comment_svg\")!\r\n        .querySelectorAll<SVGPolygonElement>(\"polygon\")\r\n    ).reduce(\r\n      (\r\n        result: { [comment_id: string]: SVGPolygonElement },\r\n        current: SVGPolygonElement\r\n      ) => {\r\n        result[current.getAttribute(\"comment_id\")!] = current;\r\n        return result;\r\n      },\r\n      {}\r\n    );\r\n\r\n    this.box_sorted_info = span_element_arr\r\n      .filter((span: HTMLSpanElement[]) => {\r\n        return span.length > 0;\r\n      })\r\n      .map((span: HTMLSpanElement[]) => {\r\n        return {\r\n          comment_id: span[0]!.getAttribute(\"comment_id\")!,\r\n          first_span: span[0]!,\r\n          div: div_elements[span[0]!.getAttribute(\"comment_id\")!]!,\r\n          polygon: polygon_elements[span[0]!.getAttribute(\"comment_id\")!]!,\r\n        };\r\n      });\r\n  };\r\n\r\n  // sort関数で生成されたthis.box_sorted_infoに従って、comment_boxのy方向の位置を調整\r\n  // （comment_boxのinputイベントなどではsortの必要がないため、arrange部分だけ別関数として作成）\r\n  arrange = (start_comment_id?: string) => {\r\n    for (let i = 0; i < this.box_sorted_info.length; i++) {\r\n      let pos_prev = 0;\r\n      if (i > 0) {\r\n        pos_prev =\r\n          this.box_sorted_info[i - 1]!.div.offsetTop +\r\n          this.box_sorted_info[i - 1]!.div.offsetHeight;\r\n      }\r\n\r\n      this.box_sorted_info[i]!.div.style.top = `${Math.max(\r\n        pos_prev + 10,\r\n        parseInt(\r\n          this.box_sorted_info[i]!.first_span.getAttribute(\"offset_top\")!\r\n        )\r\n      )}px`;\r\n      this.box_sorted_info[i]!.polygon.setAttribute(\r\n        \"points\",\r\n        `0 ${\r\n          Number(\r\n            this.box_sorted_info[i]!.first_span.getAttribute(\"offset_top\")\r\n          ) + 8\r\n        }, 15 ${this.box_sorted_info[i]!.div.offsetTop + 5}, 15 ${\r\n          this.box_sorted_info[i]!.div.offsetTop + 30\r\n        }`\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nclass SatTazumen {\r\n  sat: Sat;\r\n  fugo_dic: { [fugo: string]: string } = {};\r\n\r\n  constructor(sat: Sat) {\r\n    this.sat = sat;\r\n  }\r\n\r\n  extractFugo_ja = (text: String): void => {\r\n    // let sentence = document.getElementById(\"content\").innerText;\r\n\r\n    // 段落０００１以降の文章に（可能であれば）限定\r\n    let mt = text.match(/[【［\\[](0001|０００１)[】］\\]]/);\r\n    if (mt) {\r\n      text = text.substring(mt.index!);\r\n    }\r\n\r\n    //取得するパターンを定義。文字種別で雑にたくさん拾ってくる\r\n    let re_jp =\r\n      /([一-龠ア-ンァ-ヶＡ-Ｚー]{2,20})([0-9０-９]{1,4})([a-zａ-ｚA-ZＡ-Ｚ]{0,3})/gi;\r\n    //除外するパターンを定義。縦棒は半角なので、全角が入らないように注意\r\n    let re_anti_jp =\r\n      /([実施|実施例|比較例|従来例|形態|請求項|特開|平成|昭和|変形例|手続補正|第|該|当該|変形例|前記|上記|特許|国際公開|図|乃至|特許文献|丁目|ＪＰ|ＵＳ|ＷＯ|ＤＥ]{1,20})([0-9０-９]{0,4})([a-zａ-ｚA-ZＡ-Ｚ]{0,3})/gi;\r\n\r\n    let result = text.match(re_jp);\r\n    let u_result = this.removeRep(result);\r\n    let result_sort = u_result.sort(this.CompareForSort);\r\n\r\n    let anti_result = text.match(re_anti_jp);\r\n    let u_anti_result = this.removeRep(anti_result);\r\n    let anti_sort_result = u_anti_result.sort(this.CompareForSort);\r\n\r\n    let diff_result = this.diffArray(result_sort, anti_sort_result);\r\n\r\n    let words = diff_result;\r\n\r\n    this.fugo_dic = {};\r\n    words.forEach((word) => {\r\n      let mt = word.match(/([0-9０-９]{1,4})([a-zａ-ｚA-ZＡ-Ｚ]{0,3})/);\r\n      let name = word.substring(0, mt.index);\r\n      let num = this.zen2Han(word.substring(mt.index));\r\n      this.fugo_dic[num] = name;\r\n    });\r\n  };\r\n\r\n  removeRep = (ary: any) => {\r\n    //unique配列にする\r\n    var temp = {},\r\n      res = [];\r\n    // @ts-ignore\r\n    for (var i = 0; i < ary.length; i++) temp[ary[i]] = i;\r\n    // @ts-ignore\r\n    for (key in temp) res.push(key);\r\n    return res;\r\n  };\r\n\r\n  diffArray = (arr1: any, arr2: any) => {\r\n    //配列の差分\r\n    var newArr = [];\r\n    for (var a = 0; a < arr1.length; a++) {\r\n      if (arr2.indexOf(arr1[a]) === -1) {\r\n        newArr.push(arr1[a]);\r\n      }\r\n    }\r\n    return newArr;\r\n  };\r\n\r\n  CompareForSort = (first: any, second: any) => {\r\n    //昇順\r\n    if (first == second) return 0;\r\n    if (first < second) return -1;\r\n    else return 1;\r\n  };\r\n\r\n  zen2Han = (strVal: String) => {\r\n    //文字列を全角から半角にする\r\n    var halfVal = strVal.replace(/[！-～]/g, function (tmpStr) {\r\n      // 文字コードをシフト\r\n      return String.fromCharCode(tmpStr.charCodeAt(0) - 0xfee0);\r\n    });\r\n\r\n    // 文字コードシフトで対応できない文字の変換\r\n    return halfVal\r\n      .replace(/”/g, '\"')\r\n      .replace(/’/g, \"'\")\r\n      .replace(/‘/g, \"`\")\r\n      .replace(/￥/g, \"\\\\\")\r\n      .replace(/　/g, \" \");\r\n  };\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\r\nimport * as sat_modules from \"./sat\";\r\nimport { getSelection } from \"../node_modules/rangy2/bundles/index.umd\";\r\nimport Split from \"../node_modules/split.js/dist/split\";\r\nimport hotkeys from \"../node_modules/hotkeys-js/dist/hotkeys\";\r\nimport Tesseract from \"../node_modules/tesseract.js\";\r\n\r\nlet g_zumen_clicked = false;\r\nlet sat: sat_modules.Sat;\r\n/*\r\n * ====================== ページ読み込み完了時の動作関連 ======================\r\n */\r\n\r\nwindow.addEventListener(\"load\", async () => {\r\n  const tool_type = document.getElementById(\"tool_type\")!\r\n    .innerText as sat_modules.toolType;\r\n\r\n  // content_root, content_window設定\r\n  let content_root, content_window;\r\n  if (tool_type === \"pdf\") {\r\n    // @ts-ignore\r\n    window.decoratePage = decoratePage;\r\n\r\n    await new Promise((resolve, reject) => {\r\n      const timer1 = setInterval(() => {\r\n        if (\r\n          document.querySelector(\"iframe\")!.contentWindow!.document.body &&\r\n          document.querySelector(\"iframe\")!.contentWindow!.document.body\r\n            .innerHTML !== \"\"\r\n        ) {\r\n          clearInterval(timer1);\r\n          resolve(null);\r\n        }\r\n      }, 500);\r\n    }).then(() => {\r\n      content_window = document.querySelector(\"iframe\")!.contentWindow!;\r\n      content_root = content_window.document.getElementById(\"viewer\")!;\r\n    });\r\n  } else {\r\n    content_window = window;\r\n    content_root = document.getElementById(\"content\")!;\r\n  }\r\n\r\n  // スペクトルバー初期化\r\n  const div_style = window.getComputedStyle(\r\n    document.getElementById(\"spectrum\")!\r\n  );\r\n  const cv = document.getElementById(\"spectrum_bar\")! as HTMLCanvasElement;\r\n  cv.width = Number(div_style.width.replace(\"px\", \"\"));\r\n  cv.height = Number(div_style.height.replace(\"px\", \"\"));\r\n\r\n  // オブジェクト、HTMLなど初期化\r\n  const tmp = document.getElementById(\"selected_color\")!.innerHTML;\r\n  const selected_color: { [key: string]: string } = tmp ? JSON.parse(tmp) : {};\r\n  sat = new sat_modules.Sat(\r\n    tool_type,\r\n    content_root as HTMLElement,\r\n    content_window as Window,\r\n    cv,\r\n    selected_color,\r\n    (document.getElementById(\"dark_mode\")! as HTMLInputElement).checked,\r\n    (document.getElementById(\"block_mode\")! as HTMLInputElement).checked\r\n  );\r\n\r\n  initializeHTML();\r\n  setKeyboardPreference();\r\n\r\n  // 初期描画\r\n  sat.word.setOption(getWordOption());\r\n  sat.word.invert(sat.content_root);\r\n  setColoredQuery();\r\n  setTimeout(() => {\r\n    sat.cv.updateData();\r\n    sat.cv.draw();\r\n    sat.comment.sort();\r\n    sat.comment.arrange();\r\n  }, 0);\r\n});\r\n\r\n/**\r\n * キーボード操作の挙動を定義\r\n */\r\nfunction setKeyboardPreference() {\r\n  // ショートカットキーを追加\r\n  // @ts-ignore\r\n  hotkeys.filter = (event: any) => {\r\n    return true; // contenteditableな要素の中でもショートカットを有効にする\r\n  };\r\n\r\n  if (sat.tool_type === \"free_text\" || sat.tool_type === \"tazumen\") {\r\n    hotkeys(\"ctrl+b\", (event: Event, _handler: any) => {\r\n      event.preventDefault();\r\n      decorate(\"bold\");\r\n    });\r\n    hotkeys(\"ctrl+u\", (event: Event, _handler: any) => {\r\n      event.preventDefault();\r\n      decorate(\"underline\");\r\n    });\r\n    hotkeys(\"ctrl+h\", (event: Event, _handler: any) => {\r\n      event.preventDefault();\r\n      highlight();\r\n      sat.content_window.getSelection()?.removeAllRanges();\r\n    });\r\n    hotkeys(\"ctrl+d\", (event: Event, _handler: any) => {\r\n      event.preventDefault();\r\n      dehighlight();\r\n      sat.content_window.getSelection()?.removeAllRanges();\r\n    });\r\n    hotkeys(\"ctrl+1\", (event: Event, _handler: any) => {\r\n      event.preventDefault();\r\n      comment();\r\n    });\r\n    hotkeys(\"ctrl+s\", (event: Event, _handler: any) => {\r\n      event.preventDefault();\r\n      showSpinner(\"ダウンロードファイル生成中...\", 150, downloadHTML);\r\n    });\r\n  }\r\n\r\n  hotkeys(\"ctrl+shift+f\", (event: Event, _handler: any) => {\r\n    event.preventDefault();\r\n    function setCaretToEnd(target: HTMLElement) {\r\n      const range = document.createRange();\r\n      const sel = window.getSelection();\r\n      range.selectNodeContents(target);\r\n      range.collapse(false);\r\n      sel?.removeAllRanges();\r\n      sel?.addRange(range);\r\n      target.focus();\r\n      range.detach();\r\n    }\r\n    const div = document.getElementById(\"word_query\")!;\r\n    div.click();\r\n    setCaretToEnd(div);\r\n  });\r\n\r\n  // backspaceでページが戻ることを防止＆コメント部分の削除処理等を定義\r\n  // 以下のコードを参考に作成\r\n  // https://stackoverflow.com/questions/1495219/how-can-i-prevent-the-backspace-key-from-navigating-back\r\n  document.addEventListener(\"keydown\", (e) => {\r\n    if (!(e instanceof KeyboardEvent)) return;\r\n    if (e.keyCode === 8) {\r\n      let doPrevent = true;\r\n      const d = e.target as HTMLElement;\r\n\r\n      if (d.id === \"word_query\") {\r\n        doPrevent = false;\r\n      } else if (d.isContentEditable) {\r\n        doPrevent = false;\r\n\r\n        const div_element = window\r\n          .getSelection()\r\n          ?.anchorNode?.parentElement?.closest(\"div.comment\") as HTMLElement;\r\n\r\n        // コメントが空のときにBackspaceが押されたら、コメントを削除\r\n        if (\r\n          div_element &&\r\n          (div_element.innerText === \"\\n\" || div_element.innerText === \"\")\r\n        ) {\r\n          doPrevent = true;\r\n          sat.updated = true;\r\n\r\n          sat.comment.remove(div_element.getAttribute(\"comment_id\")!);\r\n          sat.cv.updateData();\r\n          sat.cv.draw();\r\n          sat.comment.sort();\r\n          sat.comment.arrange();\r\n        }\r\n      } else if (d.tagName === \"INPUT\") {\r\n        doPrevent = false;\r\n      } else if (d.tagName === \"TEXTAREA\") {\r\n        doPrevent = false;\r\n      }\r\n\r\n      if (doPrevent) {\r\n        e.preventDefault();\r\n        return;\r\n      }\r\n    } else if (e.keyCode === 112) {\r\n      toggleZumenColumn();\r\n      e.preventDefault();\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * イベントハンドラの設定など\r\n */\r\nasync function initializeHTML() {\r\n  document.addEventListener(\"click\", (e) => {\r\n    if (!(e.target instanceof HTMLElement)) return;\r\n    const color_picker = document.getElementById(\"color_picker\")!;\r\n    if (\r\n      color_picker.style.display !== \"none\" &&\r\n      !color_picker.contains(e.target)\r\n    ) {\r\n      color_picker.style.display = \"none\";\r\n    }\r\n    const color_picker_comment = document.getElementById(\r\n      \"color_picker_comment\"\r\n    )!;\r\n    if (\r\n      color_picker_comment.style.display !== \"none\" &&\r\n      !color_picker_comment.contains(e.target)\r\n    ) {\r\n      color_picker_comment.style.display = \"none\";\r\n      color_picker.setAttribute(\"comment_id\", \"\");\r\n    }\r\n    const help_box = document.getElementById(\"help\")!;\r\n    if (help_box.style.display !== \"none\" && !help_box.contains(e.target)) {\r\n      help_box.style.display = \"none\";\r\n    }\r\n  });\r\n\r\n  // イベントハンドラ追加（コメント側）\r\n  Array.from(document.querySelectorAll(\"div.comment\")).forEach(\r\n    (div_element) => {\r\n      div_element.addEventListener(\"mouseover\", (e) => {\r\n        sat.comment.onMouseOver(div_element.getAttribute(\"comment_id\")!);\r\n      });\r\n\r\n      div_element.addEventListener(\"mouseout\", (e) => {\r\n        // 子要素への移動であれば無視\r\n        if (\r\n          e instanceof MouseEvent &&\r\n          e.relatedTarget instanceof HTMLElement &&\r\n          e.relatedTarget.parentElement !== null &&\r\n          e.relatedTarget.parentElement.closest(\r\n            `div.comment[comment_id=\"${div_element.getAttribute(\r\n              \"comment_id\"\r\n            )}\"]`\r\n          ) !== null\r\n        ) {\r\n          return;\r\n        }\r\n        sat.comment.onMouseOut(div_element.getAttribute(\"comment_id\")!);\r\n      });\r\n    }\r\n  );\r\n  Array.from(\r\n    document.getElementById(\"comment_svg\")!.querySelectorAll(\"polygon\")\r\n  ).forEach((polygon_element) => {\r\n    polygon_element.addEventListener(\"click\", (e) => {\r\n      if (e.target instanceof SVGPolygonElement) {\r\n        sat.comment.onPolygonClick(e.target.getAttribute(\"comment_id\")!);\r\n      }\r\n    });\r\n  });\r\n\r\n  // イベントハンドラ追加（被コメント側）\r\n  Array.from(sat.content_root.querySelectorAll(\"span.commented\")).forEach(\r\n    (span_element) => {\r\n      span_element.addEventListener(\"mouseover\", (e) => {\r\n        sat.comment.onMouseOver(span_element.getAttribute(\"comment_id\")!);\r\n      });\r\n\r\n      span_element.addEventListener(\"mouseout\", (e) => {\r\n        // 子要素への移動であれば無視\r\n        if (\r\n          e instanceof MouseEvent &&\r\n          e.relatedTarget instanceof HTMLElement &&\r\n          e.relatedTarget.parentElement !== null &&\r\n          e.relatedTarget.parentElement.closest(\r\n            `span.commented[comment_id=\"${span_element.getAttribute(\r\n              \"comment_id\"\r\n            )}\"]`\r\n          ) !== null\r\n        ) {\r\n          return;\r\n        }\r\n        sat.comment.onMouseOut(span_element.getAttribute(\"comment_id\")!);\r\n      });\r\n    }\r\n  );\r\n\r\n  // スペクトルバー関連\r\n  if (sat.tool_type === \"pdf\") {\r\n    sat.content_root.parentElement!.addEventListener(\"scroll\", (e: any) => {\r\n      sat.cv.draw();\r\n      const comment_container = document.getElementById(\"comment_container\")!;\r\n      comment_container.scrollTo(\r\n        0,\r\n        e.target.scrollTop *\r\n          (comment_container.scrollHeight / e.target.scrollHeight)\r\n      );\r\n    });\r\n  } else {\r\n    document.getElementById(\"main\")!.addEventListener(\"scroll\", (e) => {\r\n      sat.cv.draw();\r\n    });\r\n  }\r\n\r\n  window.addEventListener(\"resize\", (_e) => {\r\n    setTimeout(() => {\r\n      const div_style = window.getComputedStyle(\r\n        document.getElementById(\"spectrum\")!\r\n      );\r\n      const cv = document.getElementById(\"spectrum_bar\")! as HTMLCanvasElement;\r\n      cv.width = Number(div_style.width.replace(\"px\", \"\"));\r\n      cv.height = Number(div_style.height.replace(\"px\", \"\"));\r\n\r\n      // 何故か、sat.cv.updateData();を先にしないとsat.comment.sort()とarrange()が機能しない。。。\r\n      sat.cv.updateData();\r\n      sat.cv.draw();\r\n      sat.comment.sort();\r\n      sat.comment.arrange();\r\n    }, 0);\r\n  });\r\n\r\n  sat.cv.element.onclick = (e: any) => {\r\n    if (sat.tool_type === \"pdf\") {\r\n      sat.content_root.parentElement!.scrollTo(\r\n        0,\r\n        e.layerY *\r\n          (sat.content_root.parentElement!.scrollHeight /\r\n            sat.cv.element.height) -\r\n          sat.cv.element.height / 2\r\n      );\r\n    } else {\r\n      document\r\n        .getElementById(\"main\")!\r\n        .scrollTo(\r\n          0,\r\n          e.layerY *\r\n            (document.getElementById(\"main\")!.scrollHeight /\r\n              sat.cv.element.height) -\r\n            sat.cv.element.height / 2\r\n        );\r\n    }\r\n  };\r\n  sat.cv.element.onmousedown = (e) => {\r\n    sat.cv.element.onmousemove = (e: any) => {\r\n      if (sat.tool_type === \"pdf\") {\r\n        sat.content_root.parentElement!.scrollTo(\r\n          0,\r\n          e.layerY *\r\n            (sat.content_root.parentElement!.scrollHeight /\r\n              sat.cv.element.height) -\r\n            sat.cv.element.height / 2\r\n        );\r\n        document\r\n          .getElementById(\"comment_container\")!\r\n          .scrollTo(\r\n            0,\r\n            e.layerY *\r\n              (document.getElementById(\"comment_container\")!.scrollHeight /\r\n                sat.cv.element.height) -\r\n              sat.cv.element.height / 2\r\n          );\r\n      } else {\r\n        document\r\n          .getElementById(\"main\")!\r\n          .scrollTo(\r\n            0,\r\n            e.layerY *\r\n              (document.getElementById(\"main\")!.scrollHeight /\r\n                sat.cv.element.height) -\r\n              sat.cv.element.height / 2\r\n          );\r\n      }\r\n    };\r\n    sat.cv.element.onmouseup = () => {\r\n      sat.cv.element.onmousemove = null;\r\n      sat.cv.element.onmouseup = null;\r\n    };\r\n  };\r\n  sat.cv.element.onmouseover = () => {\r\n    sat.cv.element.onmousemove = null;\r\n  };\r\n\r\n  // ページ移動時のアラート\r\n  window.addEventListener(\"beforeunload\", (e) => {\r\n    if (sat.updated) {\r\n      e.returnValue =\r\n        \"編集内容が保存されていませんが、ページを離れてもよろしいですか？\";\r\n    }\r\n  });\r\n\r\n  // 上のメニューのイベントハンドラ\r\n  document.getElementById(\"doc_title\")!.addEventListener(\"input\", (e) => {\r\n    if (!(e.target instanceof HTMLInputElement)) return;\r\n    if (e.target.value !== \"\") {\r\n      document.title = e.target.value;\r\n    } else {\r\n      if (sat.tool_type === \"free_text\") {\r\n        document.title = \"SAT（フリーテキスト版）\";\r\n      } else if (sat.tool_type === \"pdf\") {\r\n        document.title = \"SAT（PDF版）\";\r\n      } else {\r\n        document.title = \"SAT (Spectrum Annotation Tool)\";\r\n      }\r\n    }\r\n  });\r\n  document.getElementById(\"block_mode\")!.addEventListener(\"change\", (e) => {\r\n    // @ts-ignore\r\n    localStorage.setItem(\"SAT_block_mode\", e.target.checked.toString());\r\n\r\n    showSpinner(\"ワード反転中...\", 10, () => {\r\n      if (e.target instanceof HTMLInputElement && e.target.checked) {\r\n        sat.word.block_mode = true;\r\n        sat.word.invert(sat.content_root);\r\n        sat.cv.updateData();\r\n        sat.cv.draw();\r\n      } else {\r\n        sat.word.block_mode = false;\r\n        sat.word.invert(sat.content_root);\r\n        sat.cv.updateData();\r\n        sat.cv.draw();\r\n      }\r\n    });\r\n  });\r\n  document.getElementById(\"btn_bold\")!.addEventListener(\"click\", () => {\r\n    decorate(\"bold\");\r\n  });\r\n  document.getElementById(\"btn_underline\")!.addEventListener(\"click\", () => {\r\n    decorate(\"underline\");\r\n  });\r\n  document.getElementById(\"btn_highlight\")!.addEventListener(\"click\", () => {\r\n    highlight();\r\n    sat.content_window.getSelection()?.removeAllRanges();\r\n  });\r\n  document\r\n    .getElementById(\"btn_select_highlight_color\")!\r\n    .addEventListener(\"click\", (e) => {\r\n      if (!(e.target instanceof HTMLElement)) return;\r\n      const color_picker = document.getElementById(\"color_picker\")!;\r\n      color_picker.setAttribute(\"mode\", \"highlight\");\r\n      color_picker.style.display = \"block\";\r\n      color_picker.style.left = `${\r\n        sat.getOffset(e.target, document.body).offset_left +\r\n        e.target.offsetWidth / 2 -\r\n        document.getElementById(\"color_picker\")!.offsetWidth / 2\r\n      }px`;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    });\r\n  document\r\n    .getElementById(\"btn_select_comment_color\")!\r\n    .addEventListener(\"click\", (e) => {\r\n      if (!(e.target instanceof HTMLElement)) return;\r\n      const color_picker = document.getElementById(\"color_picker\")!;\r\n      color_picker.setAttribute(\"mode\", \"comment\");\r\n      color_picker.style.display = \"block\";\r\n      color_picker.style.left = `${\r\n        sat.getOffset(e.target, document.body).offset_left +\r\n        e.target.offsetWidth / 2 -\r\n        document.getElementById(\"color_picker\")!.offsetWidth / 2\r\n      }px`;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    });\r\n  document.getElementById(\"btn_erase\")!.addEventListener(\"click\", (e) => {\r\n    dehighlight();\r\n    sat.content_window.getSelection()?.removeAllRanges();\r\n  });\r\n  document.getElementById(\"btn_comment\")!.addEventListener(\"click\", () => {\r\n    comment();\r\n  });\r\n  document.getElementById(\"btn_download\")!.addEventListener(\"click\", () => {\r\n    showSpinner(\"ダウンロードファイル生成中...\", 150, downloadHTML);\r\n  });\r\n  document.getElementById(\"btn_figureOn\")!.addEventListener(\"click\", () => {\r\n    toggleZumenColumn();\r\n    document.getElementById(\"li_figureOn\")!.classList.add(\"hidden\");\r\n    document.getElementById(\"li_figureOff\")!.classList.remove(\"hidden\");\r\n  });\r\n  document.getElementById(\"btn_figureOff\")!.addEventListener(\"click\", () => {\r\n    toggleZumenColumn();\r\n    document.getElementById(\"li_figureOff\")!.classList.add(\"hidden\");\r\n    document.getElementById(\"li_figureOn\")!.classList.remove(\"hidden\");\r\n  });\r\n  document.getElementById(\"btn_editUnlock\")!.addEventListener(\"click\", () => {\r\n    document.getElementById(\"content\")!.contentEditable = \"true\";\r\n    document.getElementById(\"li_editUnlock\")!.classList.add(\"hidden\");\r\n    document.getElementById(\"li_editLock\")!.classList.remove(\"hidden\");\r\n  });\r\n  document.getElementById(\"btn_editLock\")!.addEventListener(\"click\", () => {\r\n    document.getElementById(\"content\")!.contentEditable = \"false\";\r\n    document.getElementById(\"li_editLock\")!.classList.add(\"hidden\");\r\n    document.getElementById(\"li_editUnlock\")!.classList.remove(\"hidden\");\r\n  });\r\n  document.getElementById(\"word_query\")!.addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      showSpinner(\"ワード反転中...\", 0, () => {\r\n        sat.word.setOption(getWordOption());\r\n        sat.word.invert(sat.content_root);\r\n        setColoredQuery();\r\n        sat.cv.updateData();\r\n        sat.cv.draw();\r\n\r\n        document.getElementById(\"word_query\")!.blur();\r\n\r\n        sat.updated = true;\r\n      });\r\n    }\r\n  });\r\n  document\r\n    .getElementById(\"btn_word_inversion_help\")!\r\n    .addEventListener(\"click\", (e) => {\r\n      if (!(e.target instanceof HTMLElement)) return;\r\n      const help_box = document.getElementById(\"help\")!;\r\n      if (help_box.style.display === \"block\") {\r\n        help_box.style.display = \"none\";\r\n      } else {\r\n        help_box.style.display = \"block\";\r\n        help_box.innerHTML = `\r\n            <h3>ワード反転方法</h3>\r\n            <p> （入力例）<img src=\"./img/word_inversion_example.png\" style=\"vertical-align: middle\";/></p>\r\n            <ul>\r\n              <li>\r\n                反転したいワードを、スペースで区切って入力した後、Enterキーを押してください。\r\n              </li>\r\n              <li>＋で繋いだワードは同じ色に反転されます。</li>\r\n              <li>\r\n                _（アンダーバー）は、色反転時に半角スペースとして変換されます。英語の複数語をまとめて色反転したい場合にご使用ください。<br />\r\n              </li>\r\n              <li>\r\n                /でワードを囲むと、正規表現として認識されます。（例：/請求項[0-9０-９]+/）<br />\r\n                末尾のオプションは省略可能です。（自動でgオプションがつきます）\r\n              </li>\r\n  \r\n              <li>\r\n                ワード反転後、ボックス中のワードをクリックすると、反転色を変更できます。\r\n              </li>\r\n              <li>\r\n                ブロック反転にチェックを入れると、漢字・カタカナ・英数字を含めたブロック単位で反転を行います。\r\n              </li>\r\n            </ul>`;\r\n        help_box.style.left = `${\r\n          sat.getOffset(e.target, document.body).offset_left +\r\n          e.target.offsetWidth / 2 -\r\n          document.getElementById(\"help\")!.offsetWidth / 2\r\n        }px`;\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n    });\r\n  document.getElementById(\"btn_marker_help\")!.addEventListener(\"click\", (e) => {\r\n    if (!(e.target instanceof HTMLElement)) return;\r\n    const help_box = document.getElementById(\"help\")!;\r\n    if (help_box.style.display === \"block\") {\r\n      help_box.style.display = \"none\";\r\n    } else {\r\n      help_box.style.display = \"block\";\r\n      help_box.innerHTML = `\r\n          <h3>本文の装飾方法</h3>\r\n          <p> マーカーなどの装飾を行いたい箇所をドラッグして選択した後に、ボタンを押してください。</p>\r\n          <p> コメントボタンで挿入したコメントを削除したい場合は、右側のコメントボックス内の文字を全て削除して空にした状態で、さらにBackspaceキーを押してください。</p>\r\n          <p> 挿入したコメントの吹き出しの三角形をクリックすると、コメントの色を変えることができます。</p>\r\n          <p> マーカーを削除したい場合は、<b>同じ色で</b>削除したい部分をマークするか、ハイライト削除ボタンを使用してください。</p>`;\r\n      help_box.style.left = `${\r\n        sat.getOffset(e.target, document.body).offset_left +\r\n        e.target.offsetWidth / 2 -\r\n        document.getElementById(\"help\")!.offsetWidth / 2\r\n      }px`;\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n  });\r\n\r\n  document.getElementById(\"dark_mode\")!.addEventListener(\"change\", (e) => {\r\n    if (!(e.target instanceof HTMLInputElement)) return;\r\n\r\n    localStorage.setItem(\"SAT_dark_mode\", e.target.checked.toString());\r\n    if (e.target.checked) {\r\n      document.body.classList.add(\"dark\");\r\n      sat.dark_mode = true;\r\n    } else {\r\n      document.body.classList.remove(\"dark\");\r\n      sat.dark_mode = false;\r\n    }\r\n\r\n    if (sat.tool_type === \"pdf\") {\r\n      if (e.target.checked) {\r\n        sat.content_window.document.body.classList.add(\"dark\");\r\n      } else {\r\n        sat.content_window.document.body.classList.remove(\"dark\");\r\n      }\r\n    }\r\n\r\n    sat.cv.updateData();\r\n    sat.cv.draw();\r\n  });\r\n\r\n  // カラーピッカー関連\r\n  document.getElementById(\"colormap\")!.addEventListener(\"mouseout\", (e) => {\r\n    colorPickerMouseOut();\r\n  });\r\n  Array.from(\r\n    document.getElementById(\"colormap\")!.querySelectorAll(\"area\")\r\n  ).forEach((area) => {\r\n    area.addEventListener(\"mouseover\", (e) => {\r\n      colorPickerMouseOver(area.alt);\r\n    });\r\n    area.addEventListener(\"click\", (e) => {\r\n      colorPickerClick(area.alt);\r\n    });\r\n  });\r\n\r\n  // オブザーバ関係（サイズ変更の監視）\r\n  const comment_removal_observer = new MutationObserver((mutations) => {\r\n    mutations.forEach((mutation) => {\r\n      mutation.removedNodes.forEach((node) => {\r\n        if (node instanceof HTMLSpanElement) {\r\n          if (node.classList.contains(\"commented\")) {\r\n            const comment_id = node.getAttribute(\"comment_id\")!;\r\n            const span_with_same_comment_id = document\r\n              .getElementById(\"content\")!\r\n              .querySelector(`span.commented[comment_id=\"${comment_id}\"]`);\r\n            if (!span_with_same_comment_id) {\r\n              sat.comment.remove(comment_id);\r\n            }\r\n            sat.cv.updateData();\r\n            sat.cv.draw();\r\n            sat.comment.sort();\r\n            sat.comment.arrange();\r\n          }\r\n        }\r\n      });\r\n    });\r\n  });\r\n  comment_removal_observer.observe(document.getElementById(\"content\")!, {\r\n    childList: true,\r\n    subtree: true,\r\n  });\r\n\r\n  const comment_resize_observer = new MutationObserver((mutations) => {\r\n    sat.comment.arrange();\r\n  });\r\n  comment_resize_observer.observe(document.getElementById(\"comment_div\")!, {\r\n    attributes: true,\r\n    childList: true,\r\n    subtree: true,\r\n    characterData: true,\r\n    attributeFilter: [\"offsetHeight\", \"clientHeight\", \"scrollHeight\", \"height\"],\r\n  });\r\n\r\n  const body_resize_observer = new MutationObserver((mutations) => {\r\n    sat.cv.updateData();\r\n    sat.cv.draw();\r\n    sat.comment.sort();\r\n    sat.comment.arrange();\r\n  });\r\n  body_resize_observer.observe(document.body, {\r\n    attributes: true,\r\n    attributeFilter: [\r\n      \"offsetHeight\",\r\n      \"clientHeight\",\r\n      \"scrollHeight\",\r\n      \"height\",\r\n      \"offsetWidth\",\r\n      \"clientWidth\",\r\n      \"scrollWidth\",\r\n      \"width\",\r\n    ],\r\n  });\r\n\r\n  const cv_resize_observer = new MutationObserver((mutations) => {\r\n    sat.cv.updateData();\r\n    sat.cv.draw();\r\n    sat.comment.sort();\r\n    sat.comment.arrange();\r\n  });\r\n  cv_resize_observer.observe(document.getElementById(\"spectrum\")!, {\r\n    attributes: true,\r\n    attributeFilter: [\r\n      \"offsetHeight\",\r\n      \"clientHeight\",\r\n      \"scrollHeight\",\r\n      \"height\",\r\n      \"offsetWidth\",\r\n      \"clientWidth\",\r\n      \"scrollWidth\",\r\n      \"width\",\r\n    ],\r\n  });\r\n\r\n  // 本文部分のイベントハンドラ登録\r\n  document.getElementById(\"content\")!.addEventListener(\"input\", (e) => {\r\n    sat.updated = true;\r\n    sat.comment.arrange();\r\n  });\r\n\r\n  // 簡易ワード反転のクリックイベント（color_pickerのクリックイベント時にこのイベントの実行を中止させたいので、focusでなくclickイベントを選択）\r\n  document.getElementById(\"word_query\")!.addEventListener(\"click\", (e) => {\r\n    if (!(e.target instanceof HTMLElement)) return;\r\n    e.target.querySelectorAll(\"span\").forEach((span) => {\r\n      span.className = \"\";\r\n      span.onclick = null;\r\n    });\r\n  });\r\n\r\n  // ワード設定ボックスへの貼り付け時に書式を消す\r\n  document.getElementById(\"word_query\")!.addEventListener(\"paste\", (e: any) => {\r\n    e.preventDefault();\r\n    const text = e.clipboardData.getData(\"text/plain\");\r\n    document.execCommand(\"insertHTML\", false, text);\r\n  });\r\n\r\n  // split.js設定\r\n  if (sat.tool_type !== \"pdf\") {\r\n    // flexboxをresizableに\r\n    Split([\"#content\", \"#comment_container\"], {\r\n      sizes: [70, 30],\r\n      minSize: [50, 50],\r\n      elementStyle: (\r\n        _dimension: any,\r\n        size: number,\r\n        _gutterSize: any,\r\n        _index: any\r\n      ) => {\r\n        return {\r\n          width: `${size}%`,\r\n        };\r\n      },\r\n      onDragEnd: (_sizes: any) => {\r\n        // setTimeoutしないと、コメント位置が正しく設定されない（何故？）\r\n        setTimeout(() => {\r\n          sat.comment.arrange();\r\n          sat.cv.updateData();\r\n          sat.cv.draw();\r\n        }, 0);\r\n        sat.comment.arrange();\r\n        sat.cv.updateData();\r\n        sat.cv.draw();\r\n      },\r\n      gutterSize: 5,\r\n    });\r\n  }\r\n\r\n  // マーカー色設定などのロード\r\n  if (\r\n    (\r\n      document.getElementById(\"dark_mode\")! as HTMLInputElement\r\n    ).checked.toString() !== localStorage.getItem(\"SAT_dark_mode\")\r\n  ) {\r\n    document.getElementById(\"dark_mode\")!.click();\r\n  }\r\n  if (\r\n    (\r\n      document.getElementById(\"block_mode\")! as HTMLInputElement\r\n    ).checked.toString() !== localStorage.getItem(\"SAT_block_mode\")\r\n  ) {\r\n    document.getElementById(\"block_mode\")!.click();\r\n  }\r\n  let highlight_color: string | null, comment_color: string | null;\r\n  if ((highlight_color = localStorage.getItem(\"SAT_highlight_color\"))) {\r\n    const btn_highlight = document.getElementById(\"btn_highlight\")!;\r\n    btn_highlight.setAttribute(\"highlightColor\", highlight_color);\r\n    btn_highlight.style.backgroundColor = highlight_color;\r\n  }\r\n  if ((comment_color = localStorage.getItem(\"SAT_comment_color\"))) {\r\n    const btn_comment = document.getElementById(\"btn_comment\")!;\r\n    btn_comment.setAttribute(\"commentColor\", comment_color);\r\n    btn_comment.style.backgroundColor = comment_color;\r\n  }\r\n\r\n  if (sat.tool_type === \"tazumen\") {\r\n    // flexboxをresizableに\r\n    Split([\"div#zumen\", \"div#text\"], {\r\n      sizes: [30, 70],\r\n      elementStyle: (\r\n        _dimension: any,\r\n        size: number,\r\n        gutterSize: number,\r\n        _index: any\r\n      ) => {\r\n        return {\r\n          width: `calc(${size}% - ${gutterSize + 20}px)`,\r\n        };\r\n      },\r\n      onDragEnd: (_sizes: any) => {\r\n        // setTimeoutしないと、コメント位置が正しく設定されない（何故？）\r\n        setTimeout(() => {\r\n          sat.comment.arrange();\r\n          sat.cv.updateData();\r\n          sat.cv.draw();\r\n        }, 0);\r\n        sat.comment.arrange();\r\n        sat.cv.updateData();\r\n        sat.cv.draw();\r\n      },\r\n      gutterSize: 4,\r\n    });\r\n\r\n    addZumenEventHandler();\r\n  }\r\n\r\n  //\r\n  if (\r\n    sat.tool_type === \"tazumen\" &&\r\n    document.getElementById(\"content\")!.innerHTML === \"tazumen_gyomu\"\r\n  ) {\r\n    const modal = document.getElementById(\"paste_modal_window\")!;\r\n    modal.style.display = \"block\";\r\n\r\n    const input = document.getElementById(\"paste_modal_input\")!;\r\n    input.focus();\r\n    input.addEventListener(\"paste\", (e) => {\r\n      // @ts-ignore\r\n      const paste_data = (e.clipboardData || window.clipboardData).getData(\r\n        \"text\"\r\n      );\r\n      console.log(paste_data);\r\n      modal.style.display = \"none\";\r\n      e.preventDefault();\r\n      setDataFromTazumenBrowser(JSON.parse(paste_data));\r\n    });\r\n  }\r\n\r\n  // 多図面ブラウザ等からのデータの受信に関する処理\r\n  window.addEventListener(\"message\", (e) => {\r\n    console.log(e);\r\n    switch (e.data.message_type) {\r\n      case \"tazumen\":\r\n        if (e.origin === \"http://npsx8.jpo.go.jp\") {\r\n          setDataFromTazumenBrowser(e.data);\r\n          sat.updated = true;\r\n        }\r\n        break;\r\n\r\n      case \"free_text\":\r\n        sat.content_root.innerText = e.data.innerText;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n  });\r\n}\r\n\r\n/*\r\n * ====================== ダウンロード、ロード関連 ======================\r\n */\r\n\r\n/**\r\n * HTMLファイルの保存（参考：https://blog.mudatobunka.org/entry/2015/12/23/211425）\r\n */\r\nasync function downloadHTML() {\r\n  // テキストノードを整理\r\n  sat.content_root.normalize();\r\n\r\n  // 画像をbase64形式に変更\r\n  Array.from(document.querySelectorAll(\"img\")).forEach((img) => {\r\n    if (img.src.substr(0, 11) !== \"data:image/\") {\r\n      img.src = getDataUrl(img);\r\n    }\r\n  });\r\n\r\n  // <html> を cloneし、色々と処理\r\n  const html = document.querySelector(\"html\")!.cloneNode(true) as HTMLElement;\r\n  Array.from(html.querySelectorAll(\".gutter\")).forEach((gutter) => {\r\n    gutter.remove();\r\n  });\r\n  html.querySelector(\"#spinner\")!.classList.remove(\"visible\");\r\n  Array.from(html.querySelectorAll(\"script\")).forEach((script) => {\r\n    if (/log[^/]*\\.js/.test(script.src)) {\r\n      script.remove();\r\n    }\r\n  });\r\n  html\r\n    .querySelector(\"#doc_title\")!\r\n    .setAttribute(\r\n      \"value\",\r\n      (html.querySelector(\"#doc_title\")! as HTMLInputElement).value\r\n    );\r\n  // if ((html.querySelector(\"#dark_mode\")! as HTMLInputElement).checked) {\r\n  //   html.querySelector(\"#dark_mode\")!.setAttribute(\"checked\", \"\");\r\n  // }\r\n  if ((html.querySelector(\"#block_mode\")! as HTMLInputElement).checked) {\r\n    html.querySelector(\"#block_mode\")!.setAttribute(\"checked\", \"\");\r\n  }\r\n  html.querySelector(\"#word_query\")!.innerHTML =\r\n    html.querySelector(\"#word_query\")!.innerHTML;\r\n  html.querySelector(\"#selected_color\")!.innerHTML = JSON.stringify(\r\n    sat.word.selected_color\r\n  );\r\n\r\n  // 外部CSS, JSファイルをダウンロードしてHTMLに埋め込む\r\n  let promiseFactories = Array.from(html.querySelectorAll(\"link\"))\r\n    .filter((link) => {\r\n      return link.rel === \"stylesheet\";\r\n    })\r\n    .map((link) => {\r\n      return () =>\r\n        new Promise((resolve, reject) => {\r\n          fetch(link.href)\r\n            .then((res) => {\r\n              return res.text();\r\n            })\r\n            .then((text) => {\r\n              link.remove();\r\n              const style = document.createElement(\"style\");\r\n              style.innerHTML = text;\r\n              html.querySelector(\"head\")!.appendChild(style);\r\n              resolve(null);\r\n            });\r\n        });\r\n    });\r\n  await executeSequentially(promiseFactories);\r\n\r\n  promiseFactories = Array.from(html.querySelectorAll(\"script\"))\r\n    .filter((script) => {\r\n      return script.src !== undefined && script.src !== \"\";\r\n    })\r\n    .map((script) => {\r\n      return () =>\r\n        new Promise((resolve, reject) => {\r\n          if (script.src.indexOf(\"js-tazumen\") === -1) {\r\n            fetch(script.src)\r\n              .then((res) => {\r\n                return res.text();\r\n              })\r\n              .then((text) => {\r\n                script.removeAttribute(\"src\");\r\n                script.innerHTML = text;\r\n                resolve(null);\r\n              });\r\n          } else {\r\n            resolve(null);\r\n          }\r\n        });\r\n    });\r\n  await executeSequentially(promiseFactories);\r\n\r\n  const src = html.innerHTML;\r\n\r\n  // 上記の src には DOCTYPE が含まれていないので別途用意\r\n  const name = document.doctype!.name;\r\n  const publicId = document.doctype!.publicId;\r\n  const systemID = document.doctype!.systemId;\r\n  const doctype =\r\n    \"<!DOCTYPE \" +\r\n    name +\r\n    (publicId ? ' PUBLIC \"' + publicId + '\"' : \"\") +\r\n    (systemID ? ' \"' + systemID + '\"' : \"\") +\r\n    \">\";\r\n\r\n  // <html> タグを再構成\r\n  let htmlTag = \"<html\";\r\n  const attrs = html.attributes;\r\n  for (let i = 0, n = attrs.length; i < n; i++) {\r\n    const attr = attrs[i];\r\n    htmlTag +=\r\n      \" \" +\r\n      attr!.nodeName +\r\n      (attr!.nodeValue ? '=\"' + attr!.nodeValue + '\"' : \"\");\r\n  }\r\n  htmlTag += \">\";\r\n\r\n  // ソースコードを Blob オブジェクトに変換してURLを取得\r\n  const blob = new Blob([doctype, \"\\n\", htmlTag, \"\\n\", src, \"\\n</html>\"]);\r\n  const url = window.URL || window.webkitURL;\r\n  const blobURL = url.createObjectURL(blob);\r\n\r\n  // <a> を新たに作成し、ダウンロード用の設定をいろいろ\r\n  const a = document.createElement(\"a\");\r\n  a.download = `${document.title}.html`;\r\n  a.href = blobURL;\r\n\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  sat.updated = false;\r\n}\r\n\r\nfunction executeSequentially(promiseFactories: any) {\r\n  let result = Promise.resolve();\r\n  promiseFactories.forEach((promiseFactory: any) => {\r\n    result = result.then(promiseFactory);\r\n  });\r\n  return result;\r\n}\r\n\r\n/**\r\n * 画像のbase64形式での表現を取得\r\n * @param {object} img imgエレメントのオブジェクト\r\n */\r\nfunction getDataUrl(img: HTMLImageElement) {\r\n  const canvas = document.createElement(\"canvas\");\r\n  const ctx = canvas.getContext(\"2d\")!;\r\n  canvas.width = img.naturalWidth;\r\n  canvas.height = img.naturalHeight;\r\n  ctx.drawImage(img, 0, 0);\r\n  return canvas.toDataURL(\"image/png\");\r\n}\r\n\r\n/*\r\n * ====================== decoration, comment関連 ======================\r\n */\r\n\r\n/**\r\n * 選択された領域の修飾\r\n * @param {string} class_name 修飾に対応するclassの名前\r\n */\r\nfunction decorate(class_name: string) {\r\n  const selection = sat.content_window.getSelection();\r\n  if (!selection) return;\r\n  // 選択範囲がsat.content_rootに含まれていなければ終了\r\n  if (\r\n    !sat.content_root.contains(selection.anchorNode) ||\r\n    !sat.content_root.contains(selection.focusNode)\r\n  ) {\r\n    return;\r\n  }\r\n  sat.decoration.add(class_name);\r\n  sat.updated = true;\r\n}\r\n\r\n/**\r\n * 選択された領域のハイライト\r\n */\r\nfunction highlight() {\r\n  const color_code = document\r\n    .getElementById(\"btn_highlight\")!\r\n    .getAttribute(\"highlightColor\")!;\r\n\r\n  const selection = sat.content_window.getSelection();\r\n  if (!selection) return;\r\n\r\n  // 選択範囲がsat.content_rootに含まれていなければ終了\r\n  if (\r\n    !sat.content_root.contains(selection.anchorNode) ||\r\n    !sat.content_root.contains(selection.focusNode)\r\n  ) {\r\n    return;\r\n  }\r\n  sat.decoration.highlight(color_code);\r\n  sat.updated = true;\r\n}\r\n\r\n/**\r\n * 選択された領域のハイライト削除\r\n */\r\nfunction dehighlight() {\r\n  sat.decoration.dehighlight();\r\n}\r\n\r\n/**\r\n * 選択された領域へのコメントを追加\r\n */\r\nfunction comment() {\r\n  const color_code = document\r\n    .getElementById(\"btn_comment\")!\r\n    .getAttribute(\"commentColor\")!;\r\n\r\n  const selection = sat.content_window.getSelection();\r\n  if (!selection) return;\r\n\r\n  // 選択範囲がsat.content_rootに含まれていなければ終了\r\n  if (\r\n    !sat.content_root.contains(selection.anchorNode) ||\r\n    !sat.content_root.contains(selection.focusNode)\r\n  ) {\r\n    return;\r\n  }\r\n\r\n  // Selectionにコメントが含まれている場合、コメントを追加しない\r\n  const sel = getSelection(sat.content_window);\r\n  if (sel.rangeCount) {\r\n    if (\r\n      sel.getRangeAt(0).getNodes([], (node: Node) => {\r\n        return node instanceof Element && node.classList.contains(\"commented\");\r\n      }).length > 0\r\n    ) {\r\n      alert(\"同じ領域に複数のコメントをつけることはできません。\");\r\n      return;\r\n    }\r\n    if (\r\n      sel\r\n        .getRangeAt(0)\r\n        .commonAncestorContainer.parentElement.closest(\"span.commented\") !==\r\n      null\r\n    ) {\r\n      alert(\"同じ領域に複数のコメントをつけることはできません。\");\r\n      return;\r\n    }\r\n  }\r\n\r\n  sat.comment.addComment(color_code);\r\n\r\n  sat.updated = true;\r\n}\r\n\r\n/*\r\n * ====================== ワード反転関連 ======================\r\n */\r\n\r\n/**\r\n * #word_query内に入力されたクエリからワード反転のオプションを生成\r\n * @return {object} satオブジェクトに渡すワード反転のオプション\r\n */\r\nfunction getWordOption() {\r\n  const query = document\r\n    .getElementById(\"word_query\")!\r\n    .innerText.trim()\r\n    .replace(/[\\r\\n]+/g, \" \");\r\n  if (query === \"\" || /^\\s+$/.test(query)) {\r\n    return {};\r\n  }\r\n\r\n  const word_arr: string[][] = query.split(/\\s+/).map((word) => {\r\n    const slash_match = word.match(/(^\\/|[^\\\\]\\/|\\/$)/g);\r\n    if (slash_match && slash_match.length > 0 && slash_match.length % 2 === 0) {\r\n      // クエリの最小単位を求める再帰関数（先頭から順に最小単位を切り取っていく）\r\n\r\n      return getQueryUnitArr(word, []);\r\n    } else {\r\n      return word.split(/[+＋]/g);\r\n    }\r\n  });\r\n\r\n  // 反転ワード情報を更新\r\n  const colors = sat.word.getWordColors(word_arr.length);\r\n\r\n  const word_option: { [color_id: string]: sat_modules.WordOption } = {};\r\n  word_arr.forEach((words: string[], i: number) => {\r\n    words.forEach((word: string) => {\r\n      if (!word_option[i]) {\r\n        word_option[i] = { words: [], color: \"\" };\r\n      }\r\n      if (word.substr(0, 1) !== \"/\") {\r\n        word_option[i]!.words.push(word.replace(/_/g, \" \"));\r\n      } else {\r\n        word_option[i]!.words.push(word);\r\n      }\r\n\r\n      word_option[i]!.color = colors[i]!;\r\n    });\r\n  });\r\n\r\n  return word_option;\r\n}\r\n\r\nfunction getQueryUnitArr(word: string, acc: string[]): string[] {\r\n  if (word.substr(0, 1) !== \"/\") {\r\n    // 先頭は正規表現でない -> 最先の+を見つけてそこで区切る\r\n    const pos_plus = word.indexOf(\"+\");\r\n    if (pos_plus === -1) {\r\n      acc.push(word);\r\n      return acc;\r\n    } else {\r\n      acc.push(word.substring(0, pos_plus));\r\n      return getQueryUnitArr(word.substring(pos_plus + 1), acc);\r\n    }\r\n  } else {\r\n    // 先頭は正規表現 -> 最先の/（ただし\\/は除外）を見つけてそこで区切る\r\n    const mt = word.match(/[^\\\\]\\/[dgimsuy]*/)!;\r\n    if (!mt) return acc; // 何かがおかしい\r\n    acc.push(word.substring(0, mt.index! + mt[0]!.length));\r\n\r\n    if (word.length === mt.index! + mt[0]!.length) {\r\n      return acc;\r\n    } else {\r\n      return getQueryUnitArr(\r\n        word.substring(mt.index! + mt[0]!.length + 1),\r\n        acc\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * #word_query内に、キーワードを各反転色で反転させたHTMLをセット\r\n */\r\nfunction setColoredQuery() {\r\n  const query_div = document.getElementById(\"word_query\")!;\r\n  query_div.innerHTML = \"\";\r\n\r\n  Object.keys(sat.word.option).forEach((color_id) => {\r\n    sat.word.option[color_id]!.words.forEach((word, j) => {\r\n      const span = document.createElement(\"span\");\r\n      span.innerText = word.replace(/ /g, \"_\");\r\n      span.setAttribute(\"mode\", \"word_inversion\");\r\n      span.setAttribute(\"color_id\", color_id);\r\n      span.classList.add(\"query_unit\");\r\n      span.classList.add(`word_inversion_class${color_id}`);\r\n      span.onclick = (e) => {\r\n        if (!(e.target instanceof HTMLElement)) return;\r\n        const color_picker = document.getElementById(\"color_picker\")!;\r\n        color_picker.setAttribute(\r\n          \"color_id\",\r\n          e.target.getAttribute(\"color_id\")!\r\n        );\r\n        color_picker.style.display = \"block\";\r\n        color_picker.style.left = `${\r\n          sat.getOffset(e.target, document.body).offset_left +\r\n          e.target.offsetWidth / 2 -\r\n          document.getElementById(\"color_picker\")!.offsetWidth / 2\r\n        }px`;\r\n        color_picker.setAttribute(\"mode\", \"word_inversion\");\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      };\r\n      query_div.appendChild(span);\r\n      if (j !== sat.word.option[color_id]!.words.length - 1) {\r\n        query_div.appendChild(document.createTextNode(\"+\"));\r\n      }\r\n    });\r\n    query_div.appendChild(document.createTextNode(\" \"));\r\n  });\r\n}\r\n\r\n/**\r\n * color pickerのマウスオーバーイベント\r\n * @param {string} color_code マウスオーバーされたカラーコード\r\n */\r\n// @ts-ignore\r\nfunction colorPickerMouseOver(color_code: string) {\r\n  const mode = document.getElementById(\"color_picker\")!.getAttribute(\"mode\");\r\n  if (mode === \"highlight\") {\r\n    return;\r\n  } else if (mode === \"comment\") {\r\n    const comment_id = document\r\n      .getElementById(\"color_picker\")!\r\n      .getAttribute(\"comment_id\");\r\n\r\n    if (comment_id) {\r\n      const comment_div = document\r\n        .getElementById(\"comment_div\")!\r\n        .querySelector<HTMLDivElement>(\r\n          `div.comment[comment_id=\"${comment_id}\"]`\r\n        )!;\r\n\r\n      const polygon_element = document\r\n        .getElementById(\"comment_svg\")!\r\n        .querySelector<SVGPolygonElement>(\r\n          `polygon[comment_id=\"${comment_id}\"]`\r\n        )!;\r\n\r\n      const commented_span_arr = document.querySelectorAll<HTMLSpanElement>(\r\n        `span.commented[comment_id=\"${comment_id}\"]`\r\n      );\r\n\r\n      comment_div.style.backgroundColor = color_code;\r\n      comment_div.style.borderColor = color_code;\r\n      polygon_element.style.fill = color_code;\r\n      polygon_element.style.stroke = color_code;\r\n      commented_span_arr.forEach((span) => {\r\n        span.style.backgroundColor = color_code;\r\n        span.style.borderColor = color_code;\r\n      });\r\n    }\r\n  } else {\r\n    const color_id = document\r\n      .getElementById(\"color_picker\")!\r\n      .getAttribute(\"color_id\");\r\n    Array.from(document.getElementById(\"word_query\")!.querySelectorAll(\"span\"))\r\n      .filter((span) => {\r\n        return span.getAttribute(\"color_id\") === color_id;\r\n      })\r\n      .forEach((span) => {\r\n        console.log(color_code);\r\n        span.style.setProperty(\"background-color\", color_code, \"important\");\r\n        span.style.color = sat.word.calcWordColor(color_code);\r\n      });\r\n  }\r\n}\r\n\r\n/**\r\n * color pickerのマウスアウトイベント\r\n */\r\n// @ts-ignore\r\nfunction colorPickerMouseOut() {\r\n  const mode = document.getElementById(\"color_picker\")!.getAttribute(\"mode\");\r\n  if (mode === \"highlight\") {\r\n    return;\r\n  } else if (mode === \"comment\") {\r\n    const comment_id = document\r\n      .getElementById(\"color_picker\")!\r\n      .getAttribute(\"comment_id\");\r\n\r\n    if (comment_id) {\r\n      const comment_div = document\r\n        .getElementById(\"comment_div\")!\r\n        .querySelector<HTMLDivElement>(\r\n          `div.comment[comment_id=\"${comment_id}\"]`\r\n        )!;\r\n      const polygon_element = document\r\n        .getElementById(\"comment_svg\")!\r\n        .querySelector<SVGPolygonElement>(\r\n          `polygon[comment_id=\"${comment_id}\"]`\r\n        )!;\r\n      const commented_span_arr = document.querySelectorAll<HTMLSpanElement>(\r\n        `span.commented[comment_id=\"${comment_id}\"]`\r\n      );\r\n      let color_code = document\r\n        .getElementById(\"color_picker\")!\r\n        .getAttribute(\"comment_color\")!;\r\n      comment_div.style.backgroundColor = color_code;\r\n      comment_div.style.borderColor = color_code;\r\n      polygon_element.style.fill = color_code;\r\n      polygon_element.style.stroke = color_code;\r\n      commented_span_arr.forEach((span) => {\r\n        span.style.backgroundColor = color_code;\r\n        span.style.borderColor = color_code;\r\n      });\r\n    }\r\n  } else {\r\n    const color_id = document\r\n      .getElementById(\"color_picker\")!\r\n      .getAttribute(\"color_id\");\r\n    Array.from(document.getElementById(\"word_query\")!.querySelectorAll(\"span\"))\r\n      .filter((span) => {\r\n        return span.getAttribute(\"color_id\") === color_id;\r\n      })\r\n      .forEach((span) => {\r\n        span.removeAttribute(\"style\");\r\n      });\r\n  }\r\n}\r\n\r\n/**\r\n * color pickerがクリックされた時に実行。色を変更して反転処理を行う。\r\n * @param {string} color_code クリックされたカラーコード\r\n */\r\n// @ts-ignore\r\nfunction colorPickerClick(color_code: string) {\r\n  color_code = color_code.toLowerCase();\r\n\r\n  const mode = document.getElementById(\"color_picker\")!.getAttribute(\"mode\");\r\n  if (mode === \"highlight\") {\r\n    localStorage.setItem(\"SAT_highlight_color\", color_code);\r\n    const btn_highlight = document.getElementById(\"btn_highlight\")!;\r\n    btn_highlight.setAttribute(\"highlightColor\", color_code);\r\n    btn_highlight.style.backgroundColor = color_code;\r\n  } else if (mode === \"comment\") {\r\n    localStorage.setItem(\"SAT_comment_color\", color_code);\r\n    document.getElementById(\"btn_comment\")!.style.backgroundColor = color_code;\r\n    document\r\n      .getElementById(\"btn_comment\")!\r\n      .setAttribute(\"commentColor\", color_code);\r\n    document.getElementById(\"color_picker\")!.setAttribute(\"comment_id\", \"\");\r\n    sat.cv.updateData();\r\n    sat.cv.draw();\r\n  } else {\r\n    const color_id = document\r\n      .getElementById(\"color_picker\")!\r\n      .getAttribute(\"color_id\")!;\r\n\r\n    showSpinner(\"ワード反転中...\", 0, () => {\r\n      sat.word.setColor(Number(color_id), color_code);\r\n      sat.word.invert(sat.content_root);\r\n      setColoredQuery();\r\n      sat.cv.updateData();\r\n      sat.cv.draw();\r\n    });\r\n  }\r\n  document.getElementById(\"color_picker\")!.style.display = \"none\";\r\n}\r\n\r\n/*\r\n * ====================== 多図面関連 ======================\r\n */\r\n\r\n/**\r\n * 図面等のデータをセット\r\n * @param {object} data 図面等のデータ\r\n */\r\n// @ts-ignore\r\nfunction setDataFromTazumenBrowser(data: any) {\r\n  (document.getElementById(\"doc_title\")! as HTMLInputElement).value =\r\n    data.page_title;\r\n  document.title = data.page_title;\r\n  document.getElementById(\"content\")!.innerHTML = data.text_content;\r\n\r\n  const zumen_container = document.getElementById(\"zumen\")!;\r\n  const caption_dic: { [zumen_num: string]: string } = {};\r\n  const zumen_tags = document\r\n    .getElementById(\"content\")!\r\n    .innerText.match(/【図[^】]+】[^【]+/g);\r\n  if (zumen_tags) {\r\n    zumen_tags.forEach((caption) => {\r\n      const arr = caption.match(/【(図[^】]+)】([^【]+)/);\r\n      if (arr?.length === 3) {\r\n        caption_dic[zenkaku2Hankaku(arr[1]!)] = arr[2]!;\r\n      }\r\n    });\r\n  }\r\n\r\n  data.zumen_arr.forEach((zumen: any) => {\r\n    const container = document.createElement(\"div\");\r\n\r\n    const title = document.createElement(\"h3\");\r\n    title.innerHTML = zumen.title;\r\n    container.appendChild(title);\r\n\r\n    if (caption_dic[zumen.title]) {\r\n      const caption = document.createElement(\"div\");\r\n      caption.innerText = caption_dic[zumen.title]!;\r\n      caption.classList.add(\"cap\");\r\n      container.appendChild(caption);\r\n    }\r\n\r\n    const img = document.createElement(\"img\");\r\n    img.src = zumen.data_url;\r\n    // if ((document.getElementById(\"dark_mode\")! as HTMLInputElement).checked) {\r\n    //   img.classList.add(\"dark\");\r\n    // }\r\n    container.appendChild(img);\r\n\r\n    const memo = document.createElement(\"div\");\r\n    memo.setAttribute(\"contenteditable\", \"true\");\r\n    memo.setAttribute(\"placeholder\", \"メモを入力...\");\r\n    memo.classList.add(\"memo\");\r\n    container.appendChild(memo);\r\n\r\n    const hr = document.createElement(\"hr\");\r\n    container.appendChild(hr);\r\n    zumen_container.appendChild(container);\r\n  });\r\n\r\n  addZumenEventHandler();\r\n\r\n  // ワード反転\r\n  document.getElementById(\"word_query\")!.innerText = data.word_arr\r\n    .map((words: string[]) => {\r\n      return words.join(\"+\");\r\n    })\r\n    .join(\" \");\r\n  sat.word.setOption(getWordOption());\r\n  sat.word.invert(sat.content_root);\r\n  setColoredQuery();\r\n\r\n  sat.cv.updateData();\r\n  sat.cv.draw();\r\n  document.getElementById(\"spinner\")!.classList.remove(\"visible\");\r\n  sat.updated = false;\r\n}\r\n\r\n/**\r\n * 図面のクリックイベントを設定\r\n */\r\nfunction addZumenEventHandler() {\r\n  // 図面の回転\r\n  Array.from(document.getElementById(\"zumen\")!.querySelectorAll(\"img\")).forEach(\r\n    (img) => {\r\n      img.addEventListener(\"click\", (e) => {\r\n        if (!(e.target instanceof HTMLElement)) return;\r\n        if (g_zumen_clicked) {\r\n          // ダブルクリック判定（画像の別ウィンドウ起動）\r\n          const zumen_subwin = window.open(\r\n            \"\",\r\n            \"\",\r\n            `width=500,height=500,scrollbars=yes,resizable=yes,status=yes`\r\n          )!;\r\n\r\n          // タイトル設定\r\n          let title = document.title;\r\n          if (e.target.parentElement!.querySelector(\"h3\")) {\r\n            title = `図${e.target\r\n              .parentElement!.querySelector(\"h3\")!\r\n              .innerText.substr(1)} - ${title}`;\r\n          }\r\n          zumen_subwin.document.title = title;\r\n          const h3 = document.createElement(\"h3\");\r\n          h3.innerText = title;\r\n          h3.style.textAlign = \"center\";\r\n          h3.style.height = \"20px\";\r\n          zumen_subwin.document.body.append(h3);\r\n\r\n          // 画像設定\r\n          const img_div = document.createElement(\"div\");\r\n          img_div.style.width = \"90%\";\r\n          img_div.style.height = \"90%\";\r\n          img_div.style.textAlign = \"center\";\r\n          const img_clone = e.target.cloneNode() as HTMLImageElement;\r\n          img_clone.style.objectFit = \"contain\";\r\n          img_clone.style.width = \"90%\";\r\n          img_clone.style.height = \"90%\";\r\n          if (document.body.classList.contains(\"dark\")) {\r\n            zumen_subwin.document.body.style.color = \"#ddd\";\r\n            zumen_subwin.document.body.style.backgroundColor = \"#333\";\r\n            img_clone.style.filter = \"invert(100%)\";\r\n          }\r\n          img_div.appendChild(img_clone);\r\n          zumen_subwin.document.body.append(img_div);\r\n\r\n          // 説明文設定\r\n          if (e.target.parentElement!.querySelector(\"div.cap\")) {\r\n            const caption = document.createElement(\"div\");\r\n            caption.innerText = (\r\n              e.target.parentElement!.querySelector(\"div.cap\")! as HTMLElement\r\n            ).innerText;\r\n            caption.style.textAlign = \"center\";\r\n            zumen_subwin.document.body.append(caption);\r\n          }\r\n\r\n          g_zumen_clicked = false;\r\n          return;\r\n        }\r\n\r\n        g_zumen_clicked = true;\r\n\r\n        setTimeout(() => {\r\n          return ((e) => {\r\n            if (g_zumen_clicked && e.target instanceof HTMLImageElement) {\r\n              // シングルクリック判定（画像の回転）\r\n              e.target.src = rotateBase64Image90deg(e.target.src);\r\n            }\r\n\r\n            g_zumen_clicked = false;\r\n          })(e);\r\n        }, 300);\r\n      });\r\n    }\r\n  );\r\n\r\n  // 本文中の図面へのリンク\r\n  Array.from(document.getElementById(\"content\")!.querySelectorAll(\"a\")).forEach(\r\n    (a) => {\r\n      a.addEventListener(\"click\", (e) => {\r\n        if (!(e.target instanceof HTMLElement)) return;\r\n        const fig_num = zenkaku2Hankaku(e.target.innerText);\r\n        Array.from(\r\n          document.getElementById(\"zumen\")!.querySelectorAll(\"h3\")\r\n        ).some((h3) => {\r\n          if (h3.innerText === fig_num) {\r\n            h3.scrollIntoView();\r\n            return true;\r\n          }\r\n          return false;\r\n        });\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * 図面の表示切り替え\r\n */\r\nfunction toggleZumenColumn() {\r\n  const zumen = document.getElementById(\"zumen\")!;\r\n  if (zumen === null) return;\r\n\r\n  if (window.getComputedStyle(zumen).display === \"none\") {\r\n    zumen.style.display = \"inline\";\r\n  } else {\r\n    zumen.style.display = \"none\";\r\n  }\r\n  sat.cv.updateData();\r\n  sat.cv.draw();\r\n  sat.comment.sort();\r\n  sat.comment.arrange();\r\n}\r\n\r\n// https://stackoverflow.com/questions/17040360/javascript-function-to-rotate-a-base-64-image-by-x-degrees-and-return-new-base64\r\nfunction rotateBase64Image90deg(base64Image: any) {\r\n  // create an off-screen canvas\r\n  const offScreenCanvas = document.createElement(\"canvas\");\r\n  const offScreenCanvasCtx = offScreenCanvas.getContext(\"2d\")!;\r\n\r\n  // cteate Image\r\n  const img = new Image();\r\n  img.src = base64Image;\r\n\r\n  // set its dimension to rotated size\r\n  offScreenCanvas.height = img.width;\r\n  offScreenCanvas.width = img.height;\r\n\r\n  // rotate and draw source image into the off-screen canvas:\r\n  offScreenCanvasCtx.rotate((90 * Math.PI) / 180);\r\n  offScreenCanvasCtx.translate(0, -offScreenCanvas.width);\r\n\r\n  offScreenCanvasCtx.drawImage(img, 0, 0);\r\n\r\n  // encode image to data-uri with base64\r\n  return offScreenCanvas.toDataURL(\"image/jpeg\", 100);\r\n}\r\n// // @ts-ignore\r\n// function invertImage() {\r\n//   Array.from(document.getElementById(\"zumen\")!.querySelectorAll(\"img\")).forEach(\r\n//     (img) => {\r\n//       if (img.classList.contains(\"dark\")) {\r\n//         img.classList.remove(\"dark\");\r\n//       } else {\r\n//         img.classList.add(\"dark\");\r\n//       }\r\n//     }\r\n//   );\r\n// }\r\n\r\nasync function analyseFugo() {\r\n  let li = document.getElementById(\"zumen_analysis\")!;\r\n  sat.tazumen.extractFugo_ja(document.getElementById(\"content\")!.innerText);\r\n\r\n  console.log(\"--- テキストからの符号データ抽出結果 ---\");\r\n  console.log(sat.tazumen.fugo_dic);\r\n  console.log(\"--- 画像からの符号データ抽出結果 ---\");\r\n  let zumen_divs = Array.from(document.querySelectorAll(\"#zumen > div\"));\r\n  let finished_cnt = 0;\r\n\r\n  li.innerText = `図面解析中...(${finished_cnt}/${zumen_divs.length})`;\r\n  zumen_divs.forEach(async (div, i) => {\r\n    const worker = Tesseract.createWorker();\r\n    await worker.load();\r\n    await worker.loadLanguage(\"eng\");\r\n    await worker.initialize(\"eng\");\r\n    await worker.setParameters({\r\n      tessedit_char_whitelist: \"0123456789\",\r\n    });\r\n    const {\r\n      data: { text },\r\n    } = await worker.recognize(div.querySelector(\"img\"));\r\n\r\n    console.log(i, text.match(/[0-9]+[a-zA-Z]{0,3}/g));\r\n    let fugo_text = text\r\n      .match(/[0-9]+[a-zA-Z]{0,3}/g)\r\n      .filter((num) => {\r\n        return sat.tazumen.fugo_dic[num];\r\n      })\r\n      .sort((a, b) => {\r\n        (a = String(a)), (b = String(b));\r\n        if (a < b) {\r\n          return -1;\r\n        }\r\n        if (a > b) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      })\r\n      .map((num) => {\r\n        return `${num} ${sat.tazumen.fugo_dic[num]}`;\r\n      })\r\n      .join(\",\");\r\n\r\n    let p = document.createElement(\"p\");\r\n    p.style.display = \"none\";\r\n    p.classList.add(\"fugo\");\r\n    p.innerText = fugo_text;\r\n    div.appendChild(p);\r\n\r\n    finished_cnt++;\r\n    if (finished_cnt === zumen_divs.length) {\r\n      li.innerText = \"\";\r\n    } else {\r\n      li.innerText = `図面解析中...(${finished_cnt}/${zumen_divs.length})`;\r\n    }\r\n  });\r\n}\r\n\r\n/*\r\n * ====================== PDF版関連 ======================\r\n */\r\n\r\n// @ts-ignore\r\nfunction decoratePage(page_number: number) {\r\n  // sat.pdf.restore(page_number);\r\n  const mark_content_root = sat.content_window.document\r\n    .getElementById(\"viewer\")!\r\n    .querySelector<HTMLDivElement>(\r\n      `div.page[data-page-number=\"${page_number}\"]`\r\n    )!;\r\n  sat.word.invert(mark_content_root);\r\n  sat.cv.updateData();\r\n  sat.cv.draw();\r\n}\r\n\r\n/*\r\n * ====================== その他 ======================\r\n */\r\n\r\n/**\r\n * スピナー画面を表示して実行\r\n */\r\nfunction showSpinner(message: string, msec: number, exec_func: any) {\r\n  document.getElementById(\"loading_message\")!.innerHTML = message;\r\n  const spinner = document.getElementById(\"spinner\")!;\r\n  spinner.classList.add(\"visible\");\r\n  new Promise((resolve, reject) => {\r\n    setTimeout(() => {\r\n      exec_func();\r\n      resolve(null);\r\n    }, msec);\r\n  }).then(() => {\r\n    spinner.classList.remove(\"visible\");\r\n  });\r\n}\r\n\r\n/**\r\n * 英数字を半角にする\r\n * https://www.yoheim.net/blog.php?q=20191101\r\n * @param {string} str 英数字を半角にしたい文字列\r\n * @return {string} 英数字を半角にした文字列\r\n */\r\nfunction zenkaku2Hankaku(str: string): string {\r\n  return str.replace(/[Ａ-Ｚａ-ｚ０-９]/g, (s) => {\r\n    return String.fromCharCode(s.charCodeAt(0) - 0xfee0);\r\n  });\r\n}\r\n"],"names":["entryUnbind","module","exports","path","Object","assign","parent","it","TypeError","String","wellKnownSymbol","create","definePropertyModule","UNSCOPABLES","ArrayPrototype","Array","prototype","undefined","f","configurable","value","key","isObject","toIndexedObject","toLength","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","O","length","index","includes","indexOf","toString","call","slice","has","ownKeys","getOwnPropertyDescriptorModule","target","source","keys","defineProperty","getOwnPropertyDescriptor","i","DESCRIPTORS","createPropertyDescriptor","object","bitmap","enumerable","writable","fails","get","global","document","EXISTS","createElement","getBuiltIn","match","version","userAgent","process","Deno","versions","v8","split","bind","Function","CONSTRUCTOR","METHOD","createNonEnumerableProperty","redefine","setGlobal","copyConstructorProperties","isForced","options","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","sham","exec","error","aFunction","fn","that","a","b","c","apply","arguments","variable","namespace","method","check","Math","globalThis","window","self","g","this","toObject","hasOwnProperty","hasOwn","classof","propertyIsEnumerable","store","functionToString","inspectSource","set","NATIVE_WEAK_MAP","objectHas","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","WeakMap","state","wmget","wmhas","wmset","metadata","facade","STATE","enforce","getterFor","TYPE","type","replacement","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","USE_SYMBOL_AS_UID","$Symbol","V8_VERSION","getOwnPropertySymbols","symbol","Symbol","test","objectKeys","getOwnPropertySymbolsModule","propertyIsEnumerableModule","IndexedObject","$assign","A","B","alphabet","forEach","chr","join","T","argumentsLength","S","concat","j","activeXDocument","anObject","defineProperties","enumBugKeys","html","documentCreateElement","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObject","ActiveXObject","iframeDocument","iframe","domain","style","display","appendChild","src","contentWindow","open","F","Properties","result","IE8_DOM_DEFINE","toPropertyKey","$defineProperty","P","Attributes","$getOwnPropertyDescriptor","internalObjectKeys","getOwnPropertyNames","names","push","$propertyIsEnumerable","NASHORN_BUG","V","input","pref","val","valueOf","getOwnPropertyNamesModule","InternalStateModule","getInternalState","enforceInternalState","TEMPLATE","unsafe","simple","uid","SHARED","IS_PURE","mode","copyright","toInteger","max","min","integer","requireObjectCoercible","ceil","floor","argument","isNaN","isSymbol","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","id","postfix","random","NATIVE_SYMBOL","iterator","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","name","$","$includes","addToUnscopables","proto","isff","navigator","addEvent","event","addEventListener","attachEvent","getMods","modifier","mods","getKeys","lastIndexOf","splice","compareArray","a1","a2","arr1","arr2","isIndex","_keyMap","backspace","tab","clear","enter","return","esc","escape","space","left","up","right","down","del","delete","ins","insert","home","end","pageup","pagedown","capslock","num_0","num_1","num_2","num_3","num_4","num_5","num_6","num_7","num_8","num_9","num_multiply","num_add","num_enter","num_subtract","num_decimal","num_divide","_modifier","shift","alt","option","ctrl","control","cmd","command","modifierMap","shiftKey","ctrlKey","altKey","metaKey","_mods","_handlers","k","_downKeys","_scope","elementHasBindEvent","code","x","toUpperCase","charCodeAt","setScope","scope","getScope","getPressedKeyCodes","filter","srcElement","tagName","flag","isContentEditable","readOnly","isPressed","keyCode","deleteScope","newScope","handlers","clearModifier","which","charCode","hotkeys","unbind","keysInfo","isArray","info","eachUnbind","_len","args","_key","splitKey","_ref","_ref$splitKey","originKey","unbindKeys","len","lastKey","map","record","eventHandler","handler","modifiersMatch","y","shortcut","preventDefault","returnValue","stopPropagation","cancelBubble","dispatch","asterisk","keyName","keyNum","e","getModifierState","keydown","keyup","_i","keyShortcut","_downKeysCurrent","sort","isElementBind","element","_api","_hotkeys","noConflict","deep","factory","electron","_typeof","obj","constructor","classCallCheck","instance","Constructor","createClass","props","protoProps","staticProps","_extends","DOMIterator","ctx","iframes","exclude","iframesTimeout","filteredCtx","NodeList","isPrototypeOf","querySelectorAll","isDescendant","contexts","contains","ifr","successFn","errorFn","doc","ifrWin","Error","bl","getAttribute","trim","location","href","_this","called","tout","listener","clearTimeout","isIframeBlank","removeEventListener","getIframeContents","setTimeout","readyState","observeIframeLoad","done","_this2","eachCalled","forEachIframe","waitForIframes","querySelector","handled","each","_this3","checkEnd","matches","onIframeReady","con","whatToShow","createNodeIterator","contents","node","prevNode","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","DOCUMENT_POSITION_FOLLOWING","itr","previousNode","nextNode","currIfr","ifrDict","compareNodeIframe","eCb","fCb","_this4","createInstanceOnIframe","forEachNode","eachCb","filterCb","doneCb","_this5","createIterator","elements","retrieveNodes","_getIteratorNode","getIteratorNode","checkIframeFilter","ifrNode","handleOpenIframes","_this6","getContexts","ready","iterateThroughNodes","selector","selectors","matchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector","webkitMatchesSelector","every","sel","Mark$1","Mark","ie","ua","msg","level","log","opt","debug","str","wildcards","setupWildcardsRegExp","escapeStr","synonyms","createSynonymsRegExp","ignoreJoiners","ignorePunctuation","setupIgnoreJoinersRegExp","diacritics","createDiacriticsRegExp","createMergedBlanksRegExp","createJoinersRegExp","createWildcardsRegExp","createAccuracyRegExp","syn","sens","caseSensitive","joinerPlaceholder","k1","k2","RegExp","processSynomyms","charAt","spaces","indx","original","nextChar","joiner","dct","ch","chars","acc","accuracy","ls","limiters","lsJoin","limiter","sv","stack","kw","separateWordSearch","kwSplitted","Number","parseFloat","array","noMatch","last","start","item","_callNoMatchOnInvalid","callNoMatchOnInvalidRanges","valid","range","parseInt","isNumeric","JSON","stringify","originalLength","offset","substring","cb","nodes","NodeFilter","SHOW_TEXT","textContent","matchesExclude","parentNode","FILTER_REJECT","FILTER_ACCEPT","hEl","startNode","splitText","ret","repl","setAttribute","className","replaceChild","dict","n","sibl","s","startStr","substr","endStr","wrapRangeInTextNode","previousSibling","regex","ignoreGroups","endCb","matchIdx","getTextNodes","pos","lastIndex","_this7","wrapRangeInMappedTextNode","ranges","_this8","counter","_checkWhitespaceRange","checkWhitespaceRanges","docFrag","createDocumentFragment","firstChild","removeChild","normalizeTextNode","nodeType","nextSibling","nodeValue","regexp","_this9","totalMatches","acrossElements","_this10","_getSeparatedKeywords","getSeparatedKeywords","kwArr","keywords","kwArrLen","createRegExp","term","rawRanges","_this11","checkRanges","wrapRangeFromIndex","_this12","SHOW_ELEMENT","unwrapMatches","matchesSel","_opt","console","mark","markRegExp","markRanges","unmark","api","DomPosition","dom","isHostMethod","util","Module","defaultTagName","createElementNSSupported","func","classNameContainsClass","fullClassName","hasClass","classList","addClass","add","classNameSupported","elClass","removeClass","replacer","matched","whiteSpaceBefore","whiteSpaceAfter","remove","getClass","sortClassName","getSortedClassName","haveSameClasses","el1","el2","hasAllClasses","classes","canTextBeStyled","textNode","nodeName","movePosition","position","oldParent","oldIndex","newParent","newIndex","posNode","posOffset","newNode","newOffset","movePositionWhenRemovingNode","movePreservingPositions","positionsToPreserve","childNodes","getNodeIndex","insertBefore","removePreservingPositions","removeNode","moveChildrenPreservingPositions","child","children","replaceWithOwnChildrenPreservingPositions","rangeSelectsAnyText","textNodeRange","cloneRange","selectNodeContents","intersectionRange","intersection","getEffectiveTextNodes","getNodes","elementsHaveSameNonClassAttributes","attributes","attr1","attr2","getNamedItem","specified","elementHasNonClassAttributes","exceptions","attrName","getComputedStyleProperty","isEditableElement","contentEditable","isEditingHost","designMode","isEditable","inlineDisplayRegex","isNonInlineElement","htmlNonWhiteSpaceRegex","isUnrenderedWhiteSpaceNode","getRangeBoundaries","positions","startContainer","startOffset","endContainer","endOffset","updateRangesFromBoundaries","setStartAndEnd","isSplitPoint","isCharacterDataNode","splitNodeAt","descendantNode","descendantOffset","splitAtStart","isAncestorOf","descendantIndex","createError","cloneNode","removeAttribute","newChildIndex","newNodeIndex","areElementsMergeable","namespaceURI","createAdjacentMergeableTextNodeGetter","forward","siblingPropName","checkParentElement","adjacentNode","adjacentNodeChild","getPreviousMergeableTextNode","getNextMergeableTextNode","Merge","firstNode","isElementMerge","textNodes","firstTextNode","lastChild","doMerge","firstTextNodeIndex","textParts","combinedTextLength","len_1","hasChildNodes","getLength","optionProperties","attrNamesForProperties","hasSameClasses","replaceWithOwnChildren","ClassApplier","tagNames","elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","propName","applier","cssClass","elementPropertiesFromOptions","elementAttributes","elementProperties","attrExceptions","copyPropertiesToElement","attrValue","elementSortedClassName","applyToAnyTagName","createCopy","elStyle","elPropsStyle","propValue","elPropValue","elProps","p","copyAttributesToElement","attrs","appliesToElement","getEmptyElements","getSelfOrAncestorWithClass","isModifiable","isIgnorableWhiteSpaceNode","postApply","isUndo","currentMerge","precedingTextNode","lastNode","merges","rangeStartNode","rangeEndNode","rangeStartOffset","rangeEndOffset","nextTextNode","createContainer","getDocument","isHtmlNamespace","createElementNS","onElementCreate","elementHasProperties","elementHasAttributes","applyToTextNode","textNodeParent","isRemovable","isEmptyContainer","childNodeCount","removeEmptyContainers","nodesToRemove","rangesToPreserve","undoToTextNode","ancestorWithClass","containsNode","ancestorRange","selectNode","isPointInRange","setEndAfter","splitAncestorWithClass","container","undoToAncestor","applyToRange","splitBoundariesPreservingPositions","lastTextNode","applyToRanges","applyToSelection","win","getSelection","setRanges","getAllRanges","undoToRange","undoToRanges","undoToSelection","isAppliedToRange","collapsed","commonAncestorContainer","isAppliedToRanges","isAppliedToSelection","toggleRange","toggleSelection","getElementsWithClassIntersectingRange","detach","createClassApplier","CssClassApplier","classofRaw","indexedObject","min$1","arrayIncludes","descriptors","nativePropertyIsEnumerable","nativeGetOwnPropertyDescriptor","objectPropertyIsEnumerable","document$1","exist","ie8DomDefine","nativeGetOwnPropertyDescriptor$1","objectGetOwnPropertyDescriptor","nativeDefineProperty","objectDefineProperty","hide","createCommonjsModule","has$1","nativeWeakMap","shared$1","WeakMap$1","internalState","arrayIndexOf","objectKeysInternal","hiddenKeys$1","objectGetOwnPropertyNames","objectGetOwnPropertySymbols","Reflect","isForced_1","_export","nativeSymbol","store$1","Symbol$1","objectDefineProperties","document$2","documentElement","PROTOTYPE","Empty","createDict","lt","script","gt","js","objectCreate","internalIncludes","bindContext","nativeAssign","objectAssign","UNDEF","isBrowser","features","implementsDomRange","implementsTextRange","htmlParsingConforms","crashyTextNodes","implementsWinGetSelection","implementsDocSelection","selectionSupportsMultipleRanges","implementsControlRange","config","preferTextRange","checkSelectionRanges","onDocReady","onLoaded_1","o","t","isHostObject","isHostProperty","createMultiplePropertyTest","testFunc","areHostMethods","areHostObjects","areHostProperties","getBody","body","getElementsByTagName","freeze","dependencies","fail","reason","warn","DOMException","codeName","message","INDEX_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","INVALID_NODE_TYPE_ERR","_getComputedStyleProperty","UNDEF$1","ns","parentElement","getNodeLength","getCommonAncestor","node1","node2","ancestors","ancestor","descendant","selfIsAncestor","isOrIsAncestorOf","getClosestAncestorIn","isTextOrCommentNode","insertAfter","precedingNode","splitDataNode","deleteData","ownerDocument","getWindow","defaultView","getIframeDocument","iframeEl","contentDocument","getIframeWindow","isWindow","isIframe","getContentDocument","methodName","getRootContainer","comparePoints","nodeA","offsetA","nodeB","offsetB","nodeC","root","childA","childB","inspectNode","idAttr","innerHTML","fragmentFromNodeChildren","fragment","getComputedStyle","currentStyle","createTestElement","bodyFirstChild","NodeIterator","_next","hasNext","next","_current","equals","inspect","extendStatics","d","setPrototypeOf","__proto__","__extends","__","isNonTextPartiallySelected","beforeAfterNodeTypes","rootContainerNodeTypes","readonlyNodeTypes","insertableNodeTypes","surroundNodeTypes","createAncestorFinder","nodeTypes","getDocumentOrFragmentContainer","getReadonlyAncestor","getDocTypeNotationEntityAncestor","getElementAncestor","assertNoDocTypeNotationEntityAncestor","allowSelf","assertValidNodeType","invalidTypes","assertValidOffset","assertSameDocumentOrFragment","assertNodeNotReadOnly","assertNode","isValidOffset","isRangeValid","assertRangeValid","getRangeDocument","updateCollapsedAndCommonAncestor","updateBoundaries","rangeProperties","RangeBase","DomRangeBase","_super","RangeIterator","clonePartiallySelectedTextNodes","_first","_last","isSingleCharacterDataNode","sc","so","ec","eo","reset","current","isPartiallySelectedSubtree","getSubtreeIterator","subRange","collapse","DomRange","cloneSubtree","partiallySelected","subIterator","frag","iterateSubtree","iteratorState","stop","deleteSubtree","extractSubtree","getRangeRoot","insertNodeAtPosition","firstNodeInserted","rangesIntersect","rangeA","rangeB","touchingIsIntersecting","startComparison","endComparison","getNodesInRange","filterNodeTypes","filterExists","rangeInspect","getName","rangeToHtml","cloneContents","s2s","s2e","e2s","n_b","n_a","n_b_a","n_i","comparisonConstants","START_TO_START","START_TO_END","END_TO_END","END_TO_START","NODE_BEFORE","NODE_AFTER","NODE_BEFORE_AND_AFTER","NODE_INSIDE","copyComparisonConstants","C","createDomRangeP1","Base","class_1","compareBoundaryPoints","how","prefixA","prefixB","insertNode","setStartBefore","clone","canSurroundContents","boundariesInvalid","surroundContents","extractContents","rangeProperties_1","prop","compareNode","nodeIndex","comparePoint","createContextualFragment","toHtml","intersectsNode","intersectsRange","intersectsOrTouchesRange","setStart","setEnd","union","unionRange","allowPartial","containsNodeContents","containsRange","containsNodeText","nodeRange","pop","collapseBefore","setEndBefore","collapseAfter","setStartAfter","getBookmark","containerNode","preSelectionRange","createRange","moveToBookmark","bookmark","charIndex","nextCharIndex","nodeStack","foundStart","rangesEqual","isValid","select","direction","setSingleRange","r1","r2","module$1","getBoundaryBeforeNode","getBoundaryAfterNode","splitRangeBoundaries","startEndSame","createRangeContentRemover","remover","boundaryUpdater","boundary","createDomRangeP2","createBeforeAfterNodeSetter","isBefore","isStart","setRangeStart","setRangeEnd","deleteContents","setBoundary","toStart","splitBoundaries","normalizeBoundaries","sibling","mergeForward","appendData","mergeBackward","nodeLength","insertData","normalizeStart","endNode","collapseToPoint","createPrototypeRange","R1","R12","createRangyRange","module$2","updateRangeProperties","nativeRange","updateNativeRange","startMoved","endMoved","nativeRangeDifferent","WrappedRange","refresh","sourceRange","docReadyHandler","testTextNode","createTextNode","rangeProto","fragmentStr","createNativeRange","shimCreateRange","module$3","BOOLEAN","NUMBER","isDirectionBackward","dir","getWindow$1","WrappedSelection","getNativeSelection","winParam","winSelectionIsBackward","backward","anchorNode","anchorOffset","focusNode","focusOffset","selectionIsBackward","isSelectionValid","testSelection","getSelectionRangeAt","testRange","selectionHasAnchorAndFocus","selectionHasExtend","selectionHasRangeCount","rangeCount","addRangeBackwardToNative","nativeSelection","endRange","addRange","getNativeRange","extend","selectionIsCollapsed","getRangeAt","updateAnchorAndFocusFromRange","anchorPrefix","focusPrefix","updateAnchorAndFocusFromNativeSelection","nativeSel","updateEmptySelection","isCollapsed","_ranges","Range","deleteProperties","detached","ex","refreshSelection","cachedRangySelections","actOnCachedSelection","action","cached","selection","WrappedSelBase","createWrappedSelection","_a","addRangeBackward","previousRangeCount","removeAllRanges","clonedNativeRange","removeRangeManually","assertNodeInSameDocument","createStartOrEndSetter","isBackward","isBackwards","checkForChanges","oldRanges","oldAnchorNode","oldAnchorOffset","removeRange","rangeTexts","collapseToStart","collapseToEnd","selectAllChildren","deleteFromDocument","eachRange","callMethodOnEachRange","params","results","changeEachRange","rangeBookmarks","rangeBookmark","selRanges","saveRanges","restoreRanges","rangeHtmls","rangeInspects","anchor","focus","detachAll","Selection","shimGetSelection","shim","MixinBase","runtime","Op","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","err","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","GenStateSuspendedStart","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","displayName","isGeneratorFunction","genFun","ctor","awrap","async","Promise","iter","reverse","skipTempReset","prev","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","resolveUrl","numUrls","base","head","resolved","ssr","getBoundingClientRect","gutterStartDragging","aGutterSize","bGutterSize","HORIZONTAL","NOOP","calc","prefix","cssText","isString","v","elementOrSelector","ele","getOption","def","getGutterSize","gutterSize","isFirst","isLast","gutterAlign","defaultGutterFn","gutterDirection","gut","defaultElementStyleFn","dim","size","gutSize","defaultGutterStyleFn","idsOption","dimension","clientAxis","positionEnd","clientSize","ids","from","parentStyle","parentFlexDirection","flexDirection","sizes","minSize","minSizes","maxSize","Infinity","maxSizes","expandToMin","snapOffset","dragInterval","cursor","gutter","elementStyle","gutterStyle","setElementSize","setGutterSize","gutterElement","getSizes","getMousePosition","touches","adjust","percentage","drag","dragging","dragOffset","round","calculateSizes","aBounds","bBounds","innerSize","computedStyle","paddingLeft","paddingRight","paddingTop","paddingBottom","trimToMin","sizesToTrim","parentSize","reduce","excessPixels","toSpare","pixelSizes","pixelSize","elementGutterSize","elementMinSize","newPixelSize","takenPixels","stopDragging","move","userSelect","webkitUserSelect","MozUserSelect","pointerEvents","startDragging","button","pairs","adjustToMin","pair","setSizes","newSizes","trimmed","newSize","destroy","preserveStyles","preserveGutter","computedSize","createWorker","recognize","image","langs","worker","load","loadLanguage","initialize","finally","terminate","detect","TESSERACT_ONLY","LSTM_ONLY","TESSERACT_LSTM_COMBINED","DEFAULT","OSD_ONLY","AUTO_OSD","AUTO_ONLY","AUTO","SINGLE_COLUMN","SINGLE_BLOCK_VERT_TEXT","SINGLE_BLOCK","SINGLE_LINE","SINGLE_WORD","CIRCLE_WORD","SINGLE_CHAR","SPARSE_TEXT","SPARSE_TEXT_OSD","OEM","defaultOEM","langPath","workerBlobURL","logger","getId","jobCounter","_id","payload","createJob","schedulerCounter","workers","runningWorkers","jobQueue","getNumWorkers","dequeue","wIds","queue","job","w","addWorker","addJob","wid","getQueueLen","resolvePaths","circularize","defaultOptions","spawnWorker","terminateWorker","onMessage","loadImage","send","workerCounter","_options","errorHandler","resolves","rejects","setResolve","res","setReject","rej","startJob","jobId","workerId","status","writeText","text","readText","encoding","removeFile","FS","oem","setParameters","opts","getPDF","title","textonly","createScheduler","Tesseract","PSM","setLogging","page","blocks","paragraphs","lines","words","symbols","block","paragraph","line","word","sym","isElectron","env","importScripts","cnt","logging","_logging","resolveURL","workerPath","TESS_ENV","corePath","WebAssembly","readFromBlobOrFile","blob","fileReader","FileReader","onload","onerror","readAsArrayBuffer","atob","resp","fetch","arrayBuffer","HTMLElement","poster","toBlob","File","Blob","Uint8Array","onmessage","packet","postMessage","URL","Worker","createObjectURL","Sat","tool_type","content_root","content_window","cv","selected_color","dark_mode","block_mode","updated","removeSpan","span","class_name_arr","attribute_name_arr","class_name","attribute_name","replaceWith","getOffset","offset_top","offsetTop","offset_left","offsetLeft","offset_parent","offsetParent","borderWidth","rgbTo16","col","hslToRgb","_h","l","h","abs","m","r","getSelectorFromElement","unshift","getSiblingElementsIndex","sib","previousElementSibling","SatWord","SatCanvas","comment","SatComment","decoration","SatDecoration","tazumen","SatTazumen","sat","setOption","color_id","color","setColor","preexisting_style","getWordColors","colors","step","calcWordColor","bg_color","invert","mark_instance","mark_options","elem","colorStyle","colorStyle_pdf_parent","prepend","color_code","sheet","insertRule","reg_ex","re_option","word_rect","comment_circle","highlight_rect","updateData","color_dic","Set","color_num","span_parent_height","scrollHeight","fill_color","backgroundColor","left_offset","rect_x","width","rect_y","height","rect_height","offsetHeight","span_element_dic","draw","getContext","scroll_div","clearRect","fillStyle","fillRect","innerHeight","rect_arr","beginPath","arc","PI","fill","strokeStyle","lineWidth","scrollingElement","getElementById","scrollTop","top_height","strokeRect","highlight","HTMLSpanElement","borderBottomColor","parent_highlighted_span","closest","dehighlight","parent_element","comment_index","span_info","box_info","box_sorted_info","addComment","comment_id","addSpan","addBox","arrange","polygon","comment_id_arr","added_span_elements","borderColor","onMouseOver","relatedTarget","onMouseOut","p_element","innerText","page_number","comment_div_element","stroke","onInput","onPolygonClick","comment_div","color_picker","color_picker_comment","offsets","top","zumen_div","offsetWidth","span_element_arr","div_elements","polygon_elements","first_span","div","start_comment_id","pos_prev","fugo_dic","extractFugo_ja","mt","result_sort","removeRep","CompareForSort","anti_result","anti_sort_result","diffArray","num","zen2Han","ary","newArr","first","second","strVal","tmpStr","fromCharCode","__assign","__rest","__decorate","decorators","desc","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","__awaiter","thisArg","_arguments","fulfilled","rejected","__generator","_","label","trys","ops","verb","op","__createBinding","__exportStar","__values","__read","ar","__spread","__spreadArrays","il","jl","__asyncGenerator","q","resume","fulfill","settle","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","__classPrivateFieldSet","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","g_zumen_clicked","downloadHTML","img","canvas","naturalWidth","naturalHeight","drawImage","toDataURL","getDataUrl","checked","promiseFactories","link","rel","executeSequentially","doctype","publicId","systemID","systemId","htmlTag","attr","blobURL","webkitURL","download","click","promiseFactory","Element","alert","getWordOption","query","word_arr","slash_match","getQueryUnitArr","word_option","pos_plus","setColoredQuery","query_div","onclick","setDataFromTazumenBrowser","page_title","text_content","zumen_container","caption_dic","zumen_tags","caption","arr","zenkaku2Hankaku","zumen_arr","zumen","data_url","memo","hr","addZumenEventHandler","zumen_subwin","h3","textAlign","append","img_div","img_clone","objectFit","HTMLImageElement","base64Image","offScreenCanvas","offScreenCanvasCtx","Image","rotate","translate","rotateBase64Image90deg","fig_num","some","scrollIntoView","toggleZumenColumn","decoratePage","mark_content_root","showSpinner","msec","exec_func","spinner","timer1","setInterval","clearInterval","div_style","tmp","parse","help_box","div_element","MouseEvent","polygon_element","SVGPolygonElement","span_element","comment_container","scrollTo","_e","layerY","onmousedown","onmousemove","onmouseup","onmouseover","HTMLInputElement","localStorage","setItem","blur","commented_span_arr","colorPickerMouseOut","area","setProperty","colorPickerMouseOver","btn_highlight","colorPickerClick","MutationObserver","mutations","mutation","removedNodes","observe","childList","subtree","characterData","attributeFilter","highlight_color","comment_color","clipboardData","getData","execCommand","_dimension","_gutterSize","_index","onDragEnd","_sizes","getItem","btn_comment","modal","paste_data","message_type","origin","initializeHTML","_handler","setCaretToEnd","KeyboardEvent","doPrevent","setKeyboardPreference"],"sourceRoot":""}